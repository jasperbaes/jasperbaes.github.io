/*! For license information please see main.5711488c.js.LICENSE.txt */
(()=>{var e={351:(e,t,n)=>{var r=n(4403);function o(e,t){var n,o=null;if(!e||"string"!==typeof e)return o;for(var i,a,s=r(e),u="function"===typeof t,l=0,c=s.length;l<c;l++)i=(n=s[l]).property,a=n.value,u?t(i,a,n):a&&(o||(o={}),o[i]=a);return o}e.exports=o,e.exports.default=o},579:(e,t,n)=>{"use strict";e.exports=n(1153)},1153:(e,t,n)=>{"use strict";var r=n(5043),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,i={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!u.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:l,ref:c,props:i,_owner:s.current}}t.Fragment=i,t.jsx=l,t.jsxs=l},1497:(e,t,n)=>{"use strict";var r=n(3218);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},2330:(e,t,n)=>{"use strict";var r=n(5043);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=r.useState,a=r.useEffect,s=r.useLayoutEffect,u=r.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(r){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),o=r[0].inst,c=r[1];return s((function(){o.value=n,o.getSnapshot=t,l(o)&&c({inst:o})}),[e,n,t]),a((function(){return l(o)&&c({inst:o}),e((function(){l(o)&&c({inst:o})}))}),[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},2730:(e,t,n)=>{"use strict";var r=n(5043),o=n(8853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var o=m.hasOwnProperty(t)?m[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var D=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=Symbol.for("react.element"),w=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),A=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var B,O=Object.assign;function z(e){if(void 0===B)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var L=!1;function j(e,t){if(!e||L)return"";L=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var o=l.stack.split("\n"),i=r.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do{if(a--,0>--s||o[a]!==i[s]){var u="\n"+o[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=a&&0<=s);break}}}finally{L=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function H(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case w:return"Portal";case F:return"Profiler";case k:return"StrictMode";case _:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case x:return(e._context.displayName||"Context")+".Provider";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=V(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ie(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var De=null;function Ce(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ee=null,ke=null;function Fe(e){if(e=Do(e)){if("function"!==typeof we)throw Error(i(280));var t=e.stateNode;t&&(t=wo(t),we(e.stateNode,e.type,t))}}function xe(e){Ee?ke?ke.push(e):ke=[e]:Ee=e}function Ae(){if(Ee){var e=Ee,t=ke;if(ke=Ee=null,Fe(e),t)for(e=0;e<t.length;e++)Fe(t[e])}}function Se(e,t){return e(t)}function _e(){}var Ie=!1;function Pe(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Se(e,t,n)}finally{Ie=!1,(null!==Ee||null!==ke)&&(_e(),Ae())}}function Te(e,t){var n=e.stateNode;if(null===n)return null;var r=wo(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Ne=!1;if(c)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ce){Ne=!1}function Me(e,t,n,r,o,i,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Be=!1,Oe=null,ze=!1,Le=null,je={onError:function(e){Be=!0,Oe=e}};function He(e,t,n,r,o,i,a,s,u){Be=!1,Oe=null,Me.apply(je,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ue(e)!==e)throw Error(i(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return We(o),e;if(a===r)return We(o),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=a;else{for(var s=!1,u=o.child;u;){if(u===n){s=!0,n=o,r=a;break}if(u===r){s=!0,r=o,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=o;break}if(u===r){s=!0,r=a,n=o;break}u=u.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=o.unstable_scheduleCallback,Ye=o.unstable_cancelCallback,Ze=o.unstable_shouldYield,Qe=o.unstable_requestPaint,Xe=o.unstable_now,$e=o.unstable_getCurrentPriorityLevel,Je=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~o;0!==s?r=dt(s):0!==(i&=a)&&(r=dt(i))}else 0!==(a=n&~o)?r=dt(a):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-at(t)),r|=e[n],t&=~o;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var bt=0;function Dt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Ct,wt,Et,kt,Ft,xt=!1,At=[],St=null,_t=null,It=null,Pt=new Map,Tt=new Map,Nt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":St=null;break;case"dragenter":case"dragleave":_t=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function Bt(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=Do(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Ot(e){var t=bo(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Ft(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Do(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);De=r,n.target.dispatchEvent(r),De=null,t.shift()}return!0}function Lt(e,t,n){zt(e)&&n.delete(t)}function jt(){xt=!1,null!==St&&zt(St)&&(St=null),null!==_t&&zt(_t)&&(_t=null),null!==It&&zt(It)&&(It=null),Pt.forEach(Lt),Tt.forEach(Lt)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,xt||(xt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,jt)))}function Ut(e){function t(t){return Ht(t,e)}if(0<At.length){Ht(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==St&&Ht(St,e),null!==_t&&Ht(_t,e),null!==It&&Ht(It,e),Pt.forEach(t),Tt.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Ot(n),null===n.blockedOn&&Nt.shift()}var qt=D.ReactCurrentBatchConfig,Wt=!0;function Vt(e,t,n,r){var o=bt,i=qt.transition;qt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=o,qt.transition=i}}function Kt(e,t,n,r){var o=bt,i=qt.transition;qt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=o,qt.transition=i}}function Gt(e,t,n,r){if(Wt){var o=Zt(e,t,n,r);if(null===o)Wr(e,t,r,Yt,n),Mt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return St=Bt(St,e,t,n,r,o),!0;case"dragenter":return _t=Bt(_t,e,t,n,r,o),!0;case"mouseover":return It=Bt(It,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Pt.set(i,Bt(Pt.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Tt.set(i,Bt(Tt.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==o;){var i=Do(o);if(null!==i&&Ct(i),null===(i=Zt(e,t,n,r))&&Wr(e,t,r,Yt,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Yt=null;function Zt(e,t,n,r){if(Yt=null,null!==(e=bo(e=Ce(r))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,$t=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=$t,r=n.length,o="value"in Xt?Xt.value:Xt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return Jt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(ln),dn=O({},ln,{view:0,detail:0}),hn=on(dn),fn=O({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(an=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=an=0,un=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(fn),gn=on(O({},fn,{dataTransfer:0})),mn=on(O({},dn,{relatedTarget:0})),vn=on(O({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=O({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),Dn=on(O({},ln,{data:0})),Cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Fn(){return kn}var xn=O({},dn,{key:function(e){if(e.key){var t=Cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=on(xn),Sn=on(O({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_n=on(O({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fn})),In=on(O({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=O({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tn=on(Pn),Nn=[9,13,27,32],Rn=c&&"CompositionEvent"in window,Mn=null;c&&"documentMode"in document&&(Mn=document.documentMode);var Bn=c&&"TextEvent"in window&&!Mn,On=c&&(!Rn||Mn&&8<Mn&&11>=Mn),zn=String.fromCharCode(32),Ln=!1;function jn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Vn(e,t,n,r){xe(r),0<(t=Kr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Yn(e){zr(e,0)}function Zn(e){if(G(Co(e)))return e}function Qn(e,t){if("change"===e)return t}var Xn=!1;if(c){var $n;if(c){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}$n=Jn}else $n=!1;Xn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Zn(Gn)){var t=[];Vn(t,Gn,e,Ce(e)),Pe(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zn(Gn)}function ir(e,t){if("click"===e)return Zn(t)}function ar(e,t){if("input"===e||"change"===e)return Zn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!d.call(t,o)||!sr(e[o],t[o]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=cr(n,i);var a=cr(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,yr=null,br=!1;function Dr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Y(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function Cr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:Cr("Animation","AnimationEnd"),animationiteration:Cr("Animation","AnimationIteration"),animationstart:Cr("Animation","AnimationStart"),transitionend:Cr("Transition","TransitionEnd")},Er={},kr={};function Fr(e){if(Er[e])return Er[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Er[e]=n[t];return e}c&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var xr=Fr("animationend"),Ar=Fr("animationiteration"),Sr=Fr("animationstart"),_r=Fr("transitionend"),Ir=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(e,t){Ir.set(e,t),u(t,[e])}for(var Nr=0;Nr<Pr.length;Nr++){var Rr=Pr[Nr];Tr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Tr(xr,"onAnimationEnd"),Tr(Ar,"onAnimationIteration"),Tr(Sr,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(_r,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Br=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Or(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,a,s,u,l){if(He.apply(this,arguments),Be){if(!Be)throw Error(i(198));var c=Oe;Be=!1,Oe=null,ze||(ze=!0,Le=c)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==i&&o.isPropagationStopped())break e;Or(o,s,l),i=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,l=s.currentTarget,s=s.listener,u!==i&&o.isPropagationStopped())break e;Or(o,s,l),i=u}}}if(ze)throw e=Le,ze=!1,Le=null,e}function Lr(e,t){var n=t[mo];void 0===n&&(n=t[mo]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Hr="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[Hr]){e[Hr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Br.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hr]||(t[Hr]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Qt(t)){case 1:var o=Vt;break;case 4:o=Kt;break;default:o=Gt}n=o.bind(null,t,n,e),o=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===o||8===u.nodeType&&u.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=bo(s)))return;if(5===(u=a.tag)||6===u){r=i=a;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=i,o=Ce(n),a=[];e:{var s=Ir.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=An;break;case"focusin":l="focus",u=mn;break;case"focusout":l="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=_n;break;case xr:case Ar:case Sr:u=vn;break;case _r:u=In;break;case"scroll":u=hn;break;case"wheel":u=Tn;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Sn}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=Te(p,h))&&c.push(Vr(p,g,f)))),d)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,o),a.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===De||!(l=n.relatedTarget||n.fromElement)||!bo(l)&&!l[go])&&(u||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?bo(l):null)&&(l!==(d=Ue(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Sn,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==u?s:Co(u),f=null==l?s:Co(l),(s=new c(g,p+"leave",u,n,o)).target=d,s.relatedTarget=f,g=null,bo(o)===r&&((c=new c(h,p+"enter",l,n,o)).target=f,c.relatedTarget=d,g=c),d=g,u&&l)e:{for(h=l,p=0,f=c=u;f;f=Gr(f))p++;for(f=0,g=h;g;g=Gr(g))f++;for(;0<p-f;)c=Gr(c),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Gr(c),h=Gr(h)}c=null}else c=null;null!==u&&Yr(a,s,u,c,!1),null!==l&&null!==d&&Yr(a,d,l,c,!0)}if("select"===(u=(s=r?Co(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Qn;else if(Wn(s))if(Xn)m=ar;else{m=or;var v=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ir);switch(m&&(m=m(e,r))?Vn(a,m,n,o):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?Co(r):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,yr=null);break;case"focusout":yr=vr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,Dr(a,n,o);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":Dr(a,n,o)}var y;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Un?jn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(On&&"ko"!==n.locale&&(Un||"onCompositionStart"!==b?"onCompositionEnd"===b&&Un&&(y=en()):($t="value"in(Xt=o)?Xt.value:Xt.textContent,Un=!0)),0<(v=Kr(r,b)).length&&(b=new Dn(b,e,null,n,o),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=Hn(n))&&(b.data=y))),(y=Bn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(Ln=!0,zn);case"textInput":return(e=t.data)===zn&&Ln?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Rn&&jn(e,t)?(e=en(),Jt=$t=Xt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(o=new Dn("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:r}),o.data=y))}zr(a,t)}))}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Te(e,n))&&r.unshift(Vr(e,i,o)),null!=(i=Te(e,t))&&r.push(Vr(e,i,o))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,o?null!=(u=Te(n,i))&&a.unshift(Vr(n,u,s)):o||null!=(u=Te(n,i))&&a.push(Vr(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Zr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Zr,"\n").replace(Qr,"")}function $r(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(i(425))}function Jr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,io="function"===typeof Promise?Promise:void 0,ao="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof io?function(e){return io.resolve(null).then(e).catch(so)}:ro;function so(e){setTimeout((function(){throw e}))}function uo(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void Ut(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);Ut(t)}function lo(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function co(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ho=Math.random().toString(36).slice(2),fo="__reactFiber$"+ho,po="__reactProps$"+ho,go="__reactContainer$"+ho,mo="__reactEvents$"+ho,vo="__reactListeners$"+ho,yo="__reactHandles$"+ho;function bo(e){var t=e[fo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[go]||n[fo]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=co(e);null!==e;){if(n=e[fo])return n;e=co(e)}return t}n=(e=n).parentNode}return null}function Do(e){return!(e=e[fo]||e[go])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Co(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function wo(e){return e[po]||null}var Eo=[],ko=-1;function Fo(e){return{current:e}}function xo(e){0>ko||(e.current=Eo[ko],Eo[ko]=null,ko--)}function Ao(e,t){ko++,Eo[ko]=e.current,e.current=t}var So={},_o=Fo(So),Io=Fo(!1),Po=So;function To(e,t){var n=e.type.contextTypes;if(!n)return So;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function No(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ro(){xo(Io),xo(_o)}function Mo(e,t,n){if(_o.current!==So)throw Error(i(168));Ao(_o,t),Ao(Io,n)}function Bo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(i(108,q(e)||"Unknown",o));return O({},n,r)}function Oo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||So,Po=_o.current,Ao(_o,e),Ao(Io,Io.current),!0}function zo(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Bo(e,t,Po),r.__reactInternalMemoizedMergedChildContext=e,xo(Io),xo(_o),Ao(_o,e)):xo(Io),Ao(Io,n)}var Lo=null,jo=!1,Ho=!1;function Uo(e){null===Lo?Lo=[e]:Lo.push(e)}function qo(){if(!Ho&&null!==Lo){Ho=!0;var e=0,t=bt;try{var n=Lo;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Lo=null,jo=!1}catch(o){throw null!==Lo&&(Lo=Lo.slice(e+1)),Ge(Je,qo),o}finally{bt=t,Ho=!1}}return null}var Wo=[],Vo=0,Ko=null,Go=0,Yo=[],Zo=0,Qo=null,Xo=1,$o="";function Jo(e,t){Wo[Vo++]=Go,Wo[Vo++]=Ko,Ko=e,Go=t}function ei(e,t,n){Yo[Zo++]=Xo,Yo[Zo++]=$o,Yo[Zo++]=Qo,Qo=e;var r=Xo;e=$o;var o=32-at(r)-1;r&=~(1<<o),n+=1;var i=32-at(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Xo=1<<32-at(t)+o|n<<o|r,$o=i+e}else Xo=1<<i|n<<o|r,$o=e}function ti(e){null!==e.return&&(Jo(e,1),ei(e,1,0))}function ni(e){for(;e===Ko;)Ko=Wo[--Vo],Wo[Vo]=null,Go=Wo[--Vo],Wo[Vo]=null;for(;e===Qo;)Qo=Yo[--Zo],Yo[Zo]=null,$o=Yo[--Zo],Yo[Zo]=null,Xo=Yo[--Zo],Yo[Zo]=null}var ri=null,oi=null,ii=!1,ai=null;function si(e,t){var n=Pl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ui(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ri=e,oi=lo(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ri=e,oi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qo?{id:Xo,overflow:$o}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ri=e,oi=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(ii){var t=oi;if(t){var n=t;if(!ui(e,t)){if(li(e))throw Error(i(418));t=lo(n.nextSibling);var r=ri;t&&ui(e,t)?si(r,n):(e.flags=-4097&e.flags|2,ii=!1,ri=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,ri=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ri=e}function hi(e){if(e!==ri)return!1;if(!ii)return di(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oi)){if(li(e))throw fi(),Error(i(418));for(;t;)si(e,t),t=lo(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oi=lo(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oi=null}}else oi=ri?lo(e.stateNode.nextSibling):null;return!0}function fi(){for(var e=oi;e;)e=lo(e.nextSibling)}function pi(){oi=ri=null,ii=!1}function gi(e){null===ai?ai=[e]:ai.push(e)}var mi=D.ReactCurrentBatchConfig;function vi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var o=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=o.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bi(e){return(0,e._init)(e._payload)}function Di(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Nl(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ol(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function l(e,t,n,r){var i=n.type;return i===E?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===T&&bi(i)===t.type)?((r=o(t,n.props)).ref=vi(e,t,n),r.return=e,r):((r=Rl(n.type,n.key,n.props,null,e.mode,r)).ref=vi(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zl(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Ml(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ol(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case C:return(n=Rl(t.type,t.key,t.props,null,e.mode,n)).ref=vi(e,null,t),n.return=e,n;case w:return(t=zl(t,e.mode,n)).return=e,t;case T:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Ml(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function f(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case C:return n.key===o?l(e,t,n,r):null;case w:return n.key===o?c(e,t,n,r):null;case T:return f(e,t,(o=n._init)(n._payload),r)}if(te(n)||M(n))return null!==o?null:d(e,t,n,r,null);yi(e,n)}return null}function p(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case C:return l(t,e=e.get(null===r.key?n:r.key)||null,r,o);case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case T:return p(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||M(r))return d(t,e=e.get(n)||null,r,o,null);yi(t,r)}return null}function g(o,i,s,u){for(var l=null,c=null,d=i,g=i=0,m=null;null!==d&&g<s.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var v=f(o,d,s[g],u);if(null===v){null===d&&(d=m);break}e&&d&&null===v.alternate&&t(o,d),i=a(v,i,g),null===c?l=v:c.sibling=v,c=v,d=m}if(g===s.length)return n(o,d),ii&&Jo(o,g),l;if(null===d){for(;g<s.length;g++)null!==(d=h(o,s[g],u))&&(i=a(d,i,g),null===c?l=d:c.sibling=d,c=d);return ii&&Jo(o,g),l}for(d=r(o,d);g<s.length;g++)null!==(m=p(d,o,g,s[g],u))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),i=a(m,i,g),null===c?l=m:c.sibling=m,c=m);return e&&d.forEach((function(e){return t(o,e)})),ii&&Jo(o,g),l}function m(o,s,u,l){var c=M(u);if("function"!==typeof c)throw Error(i(150));if(null==(u=c.call(u)))throw Error(i(151));for(var d=c=null,g=s,m=s=0,v=null,y=u.next();null!==g&&!y.done;m++,y=u.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=f(o,g,y.value,l);if(null===b){null===g&&(g=v);break}e&&g&&null===b.alternate&&t(o,g),s=a(b,s,m),null===d?c=b:d.sibling=b,d=b,g=v}if(y.done)return n(o,g),ii&&Jo(o,m),c;if(null===g){for(;!y.done;m++,y=u.next())null!==(y=h(o,y.value,l))&&(s=a(y,s,m),null===d?c=y:d.sibling=y,d=y);return ii&&Jo(o,m),c}for(g=r(o,g);!y.done;m++,y=u.next())null!==(y=p(g,o,m,y.value,l))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),s=a(y,s,m),null===d?c=y:d.sibling=y,d=y);return e&&g.forEach((function(e){return t(o,e)})),ii&&Jo(o,m),c}return function e(r,i,a,u){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case C:e:{for(var l=a.key,c=i;null!==c;){if(c.key===l){if((l=a.type)===E){if(7===c.tag){n(r,c.sibling),(i=o(c,a.props.children)).return=r,r=i;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===T&&bi(l)===c.type){n(r,c.sibling),(i=o(c,a.props)).ref=vi(r,c,a),i.return=r,r=i;break e}n(r,c);break}t(r,c),c=c.sibling}a.type===E?((i=Ml(a.props.children,r.mode,u,a.key)).return=r,r=i):((u=Rl(a.type,a.key,a.props,null,r.mode,u)).ref=vi(r,i,a),u.return=r,r=u)}return s(r);case w:e:{for(c=a.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=o(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=zl(a,r.mode,u)).return=r,r=i}return s(r);case T:return e(r,i,(c=a._init)(a._payload),u)}if(te(a))return g(r,i,a,u);if(M(a))return m(r,i,a,u);yi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=o(i,a)).return=r,r=i):(n(r,i),(i=Ol(a,r.mode,u)).return=r,r=i),s(r)):n(r,i)}}var Ci=Di(!0),wi=Di(!1),Ei=Fo(null),ki=null,Fi=null,xi=null;function Ai(){xi=Fi=ki=null}function Si(e){var t=Ei.current;xo(Ei),e._currentValue=t}function _i(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ii(e,t){ki=e,xi=Fi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Pi(e){var t=e._currentValue;if(xi!==e)if(e={context:e,memoizedValue:t,next:null},null===Fi){if(null===ki)throw Error(i(308));Fi=e,ki.dependencies={lanes:0,firstContext:e}}else Fi=Fi.next=e;return t}var Ti=null;function Ni(e){null===Ti?Ti=[e]:Ti.push(e)}function Ri(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Ni(t)):(n.next=o.next,o.next=n),t.interleaved=n,Mi(e,r)}function Mi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Bi=!1;function Oi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Li(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ji(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Su)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Mi(e,n)}return null===(o=r.interleaved)?(t.next=t,Ni(r)):(t.next=o.next,o.next=t),r.interleaved=t,Mi(e,n)}function Hi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ui(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qi(e,t,n,r){var o=e.updateQueue;Bi=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var u=s,l=u.next;u.next=null,null===a?i=l:a.next=l,a=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==i){var d=o.baseState;for(a=0,c=l=u=null,s=i;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,g=s;switch(h=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,d,h):p)||void 0===h)break e;d=O({},d,h);break e;case 2:Bi=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=f,u=d):c=c.next=f,a|=h;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(h=s).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===c&&(u=d),o.baseState=u,o.firstBaseUpdate=l,o.lastBaseUpdate=c,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);Bu|=a,e.lanes=a,e.memoizedState=d}}function Wi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(i(191,o));o.call(r)}}}var Vi={},Ki=Fo(Vi),Gi=Fo(Vi),Yi=Fo(Vi);function Zi(e){if(e===Vi)throw Error(i(174));return e}function Qi(e,t){switch(Ao(Yi,t),Ao(Gi,e),Ao(Ki,Vi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xo(Ki),Ao(Ki,t)}function Xi(){xo(Ki),xo(Gi),xo(Yi)}function $i(e){Zi(Yi.current);var t=Zi(Ki.current),n=ue(t,e.type);t!==n&&(Ao(Gi,e),Ao(Ki,n))}function Ji(e){Gi.current===e&&(xo(Ki),xo(Gi))}var ea=Fo(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var oa=D.ReactCurrentDispatcher,ia=D.ReactCurrentBatchConfig,aa=0,sa=null,ua=null,la=null,ca=!1,da=!1,ha=0,fa=0;function pa(){throw Error(i(321))}function ga(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,o,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oa.current=null===e||null===e.memoizedState?Ja:es,e=n(r,o),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(i(301));a+=1,la=ua=null,t.updateQueue=null,oa.current=ts,e=n(r,o)}while(da)}if(oa.current=$a,t=null!==ua&&null!==ua.next,aa=0,la=ua=sa=null,ca=!1,t)throw Error(i(300));return e}function va(){var e=0!==ha;return ha=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?sa.memoizedState=la=e:la=la.next=e,la}function ba(){if(null===ua){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=ua.next;var t=null===la?sa.memoizedState:la.next;if(null!==t)la=t,ua=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ua=e).memoizedState,baseState:ua.baseState,baseQueue:ua.baseQueue,queue:ua.queue,next:null},null===la?sa.memoizedState=la=e:la=la.next=e}return la}function Da(e,t){return"function"===typeof t?t(e):t}function Ca(e){var t=ba(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ua,o=r.baseQueue,a=n.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}r.baseQueue=o=a,n.pending=null}if(null!==o){a=o.next,r=r.baseState;var u=s=null,l=null,c=a;do{var d=c.lane;if((aa&d)===d)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=h,s=r):l=l.next=h,sa.lanes|=d,Bu|=d}c=c.next}while(null!==c&&c!==a);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{a=o.lane,sa.lanes|=a,Bu|=a,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=ba(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);sr(a,t.memoizedState)||(bs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ea(){}function ka(e,t){var n=sa,r=ba(),o=t(),a=!sr(r.memoizedState,o);if(a&&(r.memoizedState=o,bs=!0),r=r.queue,Ba(Aa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Pa(9,xa.bind(null,n,r,o,t),void 0,null),null===_u)throw Error(i(349));0!==(30&aa)||Fa(n,t,o)}return o}function Fa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function xa(e,t,n,r){t.value=n,t.getSnapshot=r,Sa(t)&&_a(e)}function Aa(e,t,n){return n((function(){Sa(t)&&_a(e)}))}function Sa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function _a(e){var t=Mi(e,1);null!==t&&nl(t,e,1,-1)}function Ia(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:e},t.queue=e,e=e.dispatch=Ya.bind(null,sa,e),[t.memoizedState,e]}function Pa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ta(){return ba().memoizedState}function Na(e,t,n,r){var o=ya();sa.flags|=e,o.memoizedState=Pa(1|t,n,void 0,void 0===r?null:r)}function Ra(e,t,n,r){var o=ba();r=void 0===r?null:r;var i=void 0;if(null!==ua){var a=ua.memoizedState;if(i=a.destroy,null!==r&&ga(r,a.deps))return void(o.memoizedState=Pa(t,n,i,r))}sa.flags|=e,o.memoizedState=Pa(1|t,n,i,r)}function Ma(e,t){return Na(8390656,8,e,t)}function Ba(e,t){return Ra(2048,8,e,t)}function Oa(e,t){return Ra(4,2,e,t)}function za(e,t){return Ra(4,4,e,t)}function La(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ja(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4,4,La.bind(null,t,e),n)}function Ha(){}function Ua(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qa(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wa(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=gt(),sa.lanes|=n,Bu|=n,e.baseState=!0),t)}function Va(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{bt=n,ia.transition=r}}function Ka(){return ba().memoizedState}function Ga(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Za(e))Qa(t,n);else if(null!==(n=Ri(e,t,n,r))){nl(n,e,r,el()),Xa(n,t,r)}}function Ya(e,t,n){var r=tl(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Za(e))Qa(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,sr(s,a)){var u=t.interleaved;return null===u?(o.next=o,Ni(t)):(o.next=u.next,u.next=o),void(t.interleaved=o)}}catch(l){}null!==(n=Ri(e,t,o,r))&&(nl(n,e,r,o=el()),Xa(n,t,r))}}function Za(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Qa(e,t){da=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var $a={readContext:Pi,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Ja={readContext:Pi,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:Pi,useEffect:Ma,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Na(4194308,4,La.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Na(4194308,4,e,t)},useInsertionEffect:function(e,t){return Na(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ga.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Ia,useDebugValue:Ha,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Ia(!1),t=e[0];return e=Va.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,o=ya();if(ii){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===_u)throw Error(i(349));0!==(30&aa)||Fa(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,Ma(Aa.bind(null,r,a,e),[e]),r.flags|=2048,Pa(9,xa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=_u.identifierPrefix;if(ii){var n=$o;t=":"+t+"R"+(n=(Xo&~(1<<32-at(Xo)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Pi,useCallback:Ua,useContext:Pi,useEffect:Ba,useImperativeHandle:ja,useInsertionEffect:Oa,useLayoutEffect:za,useMemo:qa,useReducer:Ca,useRef:Ta,useState:function(){return Ca(Da)},useDebugValue:Ha,useDeferredValue:function(e){return Wa(ba(),ua.memoizedState,e)},useTransition:function(){return[Ca(Da)[0],ba().memoizedState]},useMutableSource:Ea,useSyncExternalStore:ka,useId:Ka,unstable_isNewReconciler:!1},ts={readContext:Pi,useCallback:Ua,useContext:Pi,useEffect:Ba,useImperativeHandle:ja,useInsertionEffect:Oa,useLayoutEffect:za,useMemo:qa,useReducer:wa,useRef:Ta,useState:function(){return wa(Da)},useDebugValue:Ha,useDeferredValue:function(e){var t=ba();return null===ua?t.memoizedState=e:Wa(t,ua.memoizedState,e)},useTransition:function(){return[wa(Da)[0],ba().memoizedState]},useMutableSource:Ea,useSyncExternalStore:ka,useId:Ka,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:O({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var os={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),o=tl(e),i=Li(r,o);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ji(e,i,o))&&(nl(t,e,o,r),Hi(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),o=tl(e),i=Li(r,o);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ji(e,i,o))&&(nl(t,e,o,r),Hi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),o=Li(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=ji(e,o,r))&&(nl(t,e,r,n),Hi(t,e,r))}};function is(e,t,n,r,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(o,i))}function as(e,t,n){var r=!1,o=So,i=t.contextType;return"object"===typeof i&&null!==i?i=Pi(i):(o=No(t)?Po:_o.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?To(e,o):So),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=os,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&os.enqueueReplaceState(t,t.state,null)}function us(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Oi(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=Pi(i):(i=No(t)?Po:_o.current,o.context=To(e,i)),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(rs(e,t,i,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&os.enqueueReplaceState(o,o.state,null),qi(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function ls(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var o=n}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o,digest:null}}function cs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var hs="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=Li(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wu||(Wu=!0,Vu=r),ds(0,t)},n}function ps(e,t,n){(n=Li(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ds(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===Ku?Ku=new Set([this]):Ku.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Fl.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Li(-1,1)).tag=2,ji(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var ys=D.ReactCurrentOwner,bs=!1;function Ds(e,t,n,r){t.child=null===e?wi(t,null,n,r):Ci(t,e.child,n,r)}function Cs(e,t,n,r,o){n=n.render;var i=t.ref;return Ii(t,o),r=ma(e,t,n,r,i,o),n=va(),null===e||bs?(ii&&n&&ti(t),t.flags|=1,Ds(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ws(e,t,o))}function ws(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||Tl(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rl(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Es(e,t,i,r,o))}if(i=e.child,0===(e.lanes&o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(a,r)&&e.ref===t.ref)return Ws(e,t,o)}return t.flags|=1,(e=Nl(i,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(ur(i,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=i,0===(e.lanes&o))return t.lanes=e.lanes,Ws(e,t,o);0!==(131072&e.flags)&&(bs=!0)}}return xs(e,t,n,r,o)}function ks(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ao(Nu,Tu),Tu|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ao(Nu,Tu),Tu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ao(Nu,Tu),Tu|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ao(Nu,Tu),Tu|=r;return Ds(e,t,o,n),t.child}function Fs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xs(e,t,n,r,o){var i=No(n)?Po:_o.current;return i=To(t,i),Ii(t,o),n=ma(e,t,n,r,i,o),r=va(),null===e||bs?(ii&&r&&ti(t),t.flags|=1,Ds(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ws(e,t,o))}function As(e,t,n,r,o){if(No(n)){var i=!0;Oo(t)}else i=!1;if(Ii(t,o),null===t.stateNode)qs(e,t),as(t,n,r),us(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=Pi(l):l=To(t,l=No(n)?Po:_o.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==l)&&ss(t,a,r,l),Bi=!1;var h=t.memoizedState;a.state=h,qi(t,r,a,o),u=t.memoizedState,s!==r||h!==u||Io.current||Bi?("function"===typeof c&&(rs(t,n,c,r),u=t.memoizedState),(s=Bi||is(t,n,s,r,h,u,l))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,zi(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:ns(t.type,s),a.props=l,d=t.pendingProps,h=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=Pi(u):u=To(t,u=No(n)?Po:_o.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==u)&&ss(t,a,r,u),Bi=!1,h=t.memoizedState,a.state=h,qi(t,r,a,o);var p=t.memoizedState;s!==d||h!==p||Io.current||Bi?("function"===typeof f&&(rs(t,n,f,r),p=t.memoizedState),(l=Bi||is(t,n,l,r,h,p,u)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ss(e,t,n,r,i,o)}function Ss(e,t,n,r,o,i){Fs(e,t);var a=0!==(128&t.flags);if(!r&&!a)return o&&zo(t,n,!1),Ws(e,t,i);r=t.stateNode,ys.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ci(t,e.child,null,i),t.child=Ci(t,null,s,i)):Ds(e,t,s,i),t.memoizedState=r.state,o&&zo(t,n,!0),t.child}function _s(e){var t=e.stateNode;t.pendingContext?Mo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mo(0,t.context,!1),Qi(e,t.containerInfo)}function Is(e,t,n,r,o){return pi(),gi(o),t.flags|=256,Ds(e,t,n,r),t.child}var Ps,Ts,Ns,Rs,Ms={dehydrated:null,treeContext:null,retryLane:0};function Bs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Os(e,t,n){var r,o=t.pendingProps,a=ea.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ao(ea,1&a),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=o.children,e=o.fallback,s?(o=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&o)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Bl(u,o,0,null),e=Ml(e,o,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Bs(n),t.memoizedState=Ms,e):zs(t,u));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,o,a,s){if(n)return 256&t.flags?(t.flags&=-257,Ls(e,t,s,r=cs(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=Bl({mode:"visible",children:r.children},o,0,null),(a=Ml(a,o,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Ci(t,e.child,null,s),t.child.memoizedState=Bs(s),t.memoizedState=Ms,a);if(0===(1&t.mode))return Ls(e,t,s,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var u=r.dgst;return r=u,Ls(e,t,s,r=cs(a=Error(i(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=_u)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|s))?0:o)&&o!==a.retryLane&&(a.retryLane=o,Mi(e,o),nl(r,e,o,-1))}return gl(),Ls(e,t,s,r=cs(Error(i(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Al.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,oi=lo(o.nextSibling),ri=t,ii=!0,ai=null,null!==e&&(Yo[Zo++]=Xo,Yo[Zo++]=$o,Yo[Zo++]=Qo,Xo=e.id,$o=e.overflow,Qo=t),t=zs(t,r.children),t.flags|=4096,t)}(e,t,u,o,r,a,n);if(s){s=o.fallback,u=t.mode,r=(a=e.child).sibling;var l={mode:"hidden",children:o.children};return 0===(1&u)&&t.child!==a?((o=t.child).childLanes=0,o.pendingProps=l,t.deletions=null):(o=Nl(a,l)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Nl(r,s):(s=Ml(s,u,n,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,u=null===(u=e.child.memoizedState)?Bs(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ms,o}return e=(s=e.child).sibling,o=Nl(s,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function zs(e,t){return(t=Bl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ls(e,t,n,r){return null!==r&&gi(r),Ci(t,e.child,null,n),(e=zs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function js(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_i(e.return,t,n)}function Hs(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Us(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(Ds(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&js(e,n,t);else if(19===e.tag)js(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ao(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Hs(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ta(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Hs(t,!0,n,null,i);break;case"together":Hs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Nl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vs(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gs(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return No(t.type)&&Ro(),Ks(t),null;case 3:return r=t.stateNode,Xi(),xo(Io),xo(_o),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ai&&(al(ai),ai=null))),Ts(e,t),Ks(t),null;case 5:Ji(t);var o=Zi(Yi.current);if(n=t.type,null!==e&&null!=t.stateNode)Ns(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Ks(t),null}if(e=Zi(Ki.current),hi(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[fo]=t,r[po]=a,e=0!==(1&t.mode),n){case"dialog":Lr("cancel",r),Lr("close",r);break;case"iframe":case"object":case"embed":Lr("load",r);break;case"video":case"audio":for(o=0;o<Mr.length;o++)Lr(Mr[o],r);break;case"source":Lr("error",r);break;case"img":case"image":case"link":Lr("error",r),Lr("load",r);break;case"details":Lr("toggle",r);break;case"input":Q(r,a),Lr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Lr("invalid",r);break;case"textarea":oe(r,a),Lr("invalid",r)}for(var u in ye(n,a),o=null,a)if(a.hasOwnProperty(u)){var l=a[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,l,e),o=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,l,e),o=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&Lr("scroll",r)}switch(n){case"input":K(r),J(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Jr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fo]=t,e[po]=r,Ps(e,t,!1,!1),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":Lr("cancel",e),Lr("close",e),o=r;break;case"iframe":case"object":case"embed":Lr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Mr.length;o++)Lr(Mr[o],e);o=r;break;case"source":Lr("error",e),o=r;break;case"img":case"image":case"link":Lr("error",e),Lr("load",e),o=r;break;case"details":Lr("toggle",e),o=r;break;case"input":Q(e,r),o=Z(e,r),Lr("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=O({},r,{value:void 0}),Lr("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Lr("invalid",e)}for(a in ye(n,o),l=o)if(l.hasOwnProperty(a)){var c=l[a];"style"===a?me(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Lr("scroll",e):null!=c&&b(e,a,c,u))}switch(n){case"input":K(e),J(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Rs(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Zi(Yi.current),Zi(Ki.current),hi(t)){if(r=t.stateNode,n=t.memoizedProps,r[fo]=t,(a=r.nodeValue!==n)&&null!==(e=ri))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fo]=t,t.stateNode=r}return Ks(t),null;case 13:if(xo(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==oi&&0!==(1&t.mode)&&0===(128&t.flags))fi(),pi(),t.flags|=98560,a=!1;else if(a=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[fo]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),a=!1}else null!==ai&&(al(ai),ai=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Ru&&(Ru=3):gl())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return Xi(),Ts(e,t),null===e&&Ur(t.stateNode.containerInfo),Ks(t),null;case 10:return Si(t.type._context),Ks(t),null;case 19:if(xo(ea),null===(a=t.memoizedState))return Ks(t),null;if(r=0!==(128&t.flags),null===(u=a.rendering))if(r)Vs(a,!1);else{if(0!==Ru||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=ta(e))){for(t.flags|=128,Vs(a,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(u=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ao(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>Uu&&(t.flags|=128,r=!0,Vs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!u.alternate&&!ii)return Ks(t),null}else 2*Xe()-a.renderingStartTime>Uu&&1073741824!==n&&(t.flags|=128,r=!0,Vs(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=a.last)?n.sibling=u:t.child=u,a.last=u)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=ea.current,Ao(ea,r?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return dl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Tu)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ys(e,t){switch(ni(t),t.tag){case 1:return No(t.type)&&Ro(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xi(),xo(Io),xo(_o),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ji(t),null;case 13:if(xo(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xo(ea),null;case 4:return Xi(),null;case 10:return Si(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}Ps=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ts=function(){},Ns=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Zi(Ki.current);var i,a=null;switch(n){case"input":o=Z(e,o),r=Z(e,r),a=[];break;case"select":o=O({},o,{value:void 0}),r=O({},r,{value:void 0}),a=[];break;case"textarea":o=re(e,o),r=re(e,r),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(c in ye(n,r),n=null,o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&null!=o[c])if("style"===c){var u=o[c];for(i in u)u.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=o?o[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(i in u)!u.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&u[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(a||(a=[]),a.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(a=a||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(a=a||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Lr("scroll",e),a||u===l||(a=[])):(a=a||[]).push(c,l))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Rs=function(e,t,n,r){n!==r&&(t.flags|=4)};var Zs=!1,Qs=!1,Xs="function"===typeof WeakSet?WeakSet:Set,$s=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kl(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){kl(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&eu(t,n,i)}o=o.next}while(o!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ou(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function iu(e){var t=e.alternate;null!==t&&(e.alternate=null,iu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fo],delete t[po],delete t[mo],delete t[vo],delete t[yo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function au(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||au(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var cu=null,du=!1;function hu(e,t,n){for(n=n.child;null!==n;)fu(e,t,n),n=n.sibling}function fu(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,n)}catch(s){}switch(n.tag){case 5:Qs||Js(n,t);case 6:var r=cu,o=du;cu=null,hu(e,t,n),du=o,null!==(cu=r)&&(du?(e=cu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cu.removeChild(n.stateNode));break;case 18:null!==cu&&(du?(e=cu,n=n.stateNode,8===e.nodeType?uo(e.parentNode,n):1===e.nodeType&&uo(e,n),Ut(e)):uo(cu,n.stateNode));break;case 4:r=cu,o=du,cu=n.stateNode.containerInfo,du=!0,hu(e,t,n),cu=r,du=o;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&eu(n,t,a),o=o.next}while(o!==r)}hu(e,t,n);break;case 1:if(!Qs&&(Js(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){kl(n,t,s)}hu(e,t,n);break;case 21:hu(e,t,n);break;case 22:1&n.mode?(Qs=(r=Qs)||null!==n.memoizedState,hu(e,t,n),Qs=r):hu(e,t,n);break;default:hu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach((function(t){var r=Sl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:cu=u.stateNode,du=!1;break e;case 3:case 4:cu=u.stateNode.containerInfo,du=!0;break e}u=u.return}if(null===cu)throw Error(i(160));fu(a,s,o),cu=null,du=!1;var l=o.alternate;null!==l&&(l.return=null),o.return=null}catch(c){kl(o,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gu(t,e),vu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(m){kl(e,e.return,m)}try{nu(5,e,e.return)}catch(m){kl(e,e.return,m)}}break;case 1:gu(t,e),vu(e),512&r&&null!==n&&Js(n,n.return);break;case 5:if(gu(t,e),vu(e),512&r&&null!==n&&Js(n,n.return),32&e.flags){var o=e.stateNode;try{he(o,"")}catch(m){kl(e,e.return,m)}}if(4&r&&null!=(o=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===a.type&&null!=a.name&&X(o,a),be(u,s);var c=be(u,a);for(s=0;s<l.length;s+=2){var d=l[s],h=l[s+1];"style"===d?me(o,h):"dangerouslySetInnerHTML"===d?de(o,h):"children"===d?he(o,h):b(o,d,h,c)}switch(u){case"input":$(o,a);break;case"textarea":ie(o,a);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(o,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(o,!!a.multiple,a.defaultValue,!0):ne(o,!!a.multiple,a.multiple?[]:"",!1))}o[po]=a}catch(m){kl(e,e.return,m)}}break;case 6:if(gu(t,e),vu(e),4&r){if(null===e.stateNode)throw Error(i(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(m){kl(e,e.return,m)}}break;case 3:if(gu(t,e),vu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(m){kl(e,e.return,m)}break;case 4:default:gu(t,e),vu(e);break;case 13:gu(t,e),vu(e),8192&(o=e.child).flags&&(a=null!==o.memoizedState,o.stateNode.isHidden=a,!a||null!==o.alternate&&null!==o.alternate.memoizedState||(Hu=Xe())),4&r&&pu(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qs=(c=Qs)||d,gu(t,e),Qs=c):gu(t,e),vu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for($s=e,d=e.child;null!==d;){for(h=$s=d;null!==$s;){switch(p=(f=$s).child,f.tag){case 0:case 11:case 14:case 15:nu(4,f,f.return);break;case 1:Js(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){kl(r,n,m)}}break;case 5:Js(f,f.return);break;case 22:if(null!==f.memoizedState){Cu(h);continue}}null!==p?(p.return=f,$s=p):Cu(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{o=h.stateNode,c?"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none":(u=h.stateNode,s=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=ge("display",s))}catch(m){kl(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(m){kl(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gu(t,e),vu(e),4&r&&pu(e);case 21:}}function vu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(au(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(he(o,""),r.flags&=-33),lu(e,su(e),o);break;case 3:case 4:var a=r.stateNode.containerInfo;uu(e,su(e),a);break;default:throw Error(i(161))}}catch(s){kl(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yu(e,t,n){$s=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==$s;){var o=$s,i=o.child;if(22===o.tag&&r){var a=null!==o.memoizedState||Zs;if(!a){var s=o.alternate,u=null!==s&&null!==s.memoizedState||Qs;s=Zs;var l=Qs;if(Zs=a,(Qs=u)&&!l)for($s=o;null!==$s;)u=(a=$s).child,22===a.tag&&null!==a.memoizedState?wu(o):null!==u?(u.return=a,$s=u):wu(o);for(;null!==i;)$s=i,bu(i,t,n),i=i.sibling;$s=o,Zs=s,Qs=l}Du(e)}else 0!==(8772&o.subtreeFlags)&&null!==i?(i.return=o,$s=i):Du(e)}}function Du(e){for(;null!==$s;){var t=$s;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qs||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qs)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Wi(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wi(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Ut(h)}}}break;default:throw Error(i(163))}Qs||512&t.flags&&ou(t)}catch(f){kl(t,t.return,f)}}if(t===e){$s=null;break}if(null!==(n=t.sibling)){n.return=t.return,$s=n;break}$s=t.return}}function Cu(e){for(;null!==$s;){var t=$s;if(t===e){$s=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$s=n;break}$s=t.return}}function wu(e){for(;null!==$s;){var t=$s;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){kl(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(u){kl(t,o,u)}}var i=t.return;try{ou(t)}catch(u){kl(t,i,u)}break;case 5:var a=t.return;try{ou(t)}catch(u){kl(t,a,u)}}}catch(u){kl(t,t.return,u)}if(t===e){$s=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$s=s;break}$s=t.return}}var Eu,ku=Math.ceil,Fu=D.ReactCurrentDispatcher,xu=D.ReactCurrentOwner,Au=D.ReactCurrentBatchConfig,Su=0,_u=null,Iu=null,Pu=0,Tu=0,Nu=Fo(0),Ru=0,Mu=null,Bu=0,Ou=0,zu=0,Lu=null,ju=null,Hu=0,Uu=1/0,qu=null,Wu=!1,Vu=null,Ku=null,Gu=!1,Yu=null,Zu=0,Qu=0,Xu=null,$u=-1,Ju=0;function el(){return 0!==(6&Su)?Xe():-1!==$u?$u:$u=Xe()}function tl(e){return 0===(1&e.mode)?1:0!==(2&Su)&&0!==Pu?Pu&-Pu:null!==mi.transition?(0===Ju&&(Ju=gt()),Ju):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nl(e,t,n,r){if(50<Qu)throw Qu=0,Xu=null,Error(i(185));vt(e,n,r),0!==(2&Su)&&e===_u||(e===_u&&(0===(2&Su)&&(Ou|=n),4===Ru&&sl(e,Pu)),rl(e,r),1===n&&0===Su&&0===(1&t.mode)&&(Uu=Xe()+500,jo&&qo()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),s=1<<a,u=o[a];-1===u?0!==(s&n)&&0===(s&r)||(o[a]=ft(s,t)):u<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=ht(e,e===_u?Pu:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){jo=!0,Uo(e)}(ul.bind(null,e)):Uo(ul.bind(null,e)),ao((function(){0===(6&Su)&&qo()})),n=null;else{switch(Dt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=_l(n,ol.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ol(e,t){if($u=-1,Ju=0,0!==(6&Su))throw Error(i(327));var n=e.callbackNode;if(wl()&&e.callbackNode!==n)return null;var r=ht(e,e===_u?Pu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ml(e,r);else{t=r;var o=Su;Su|=2;var a=pl();for(_u===e&&Pu===t||(qu=null,Uu=Xe()+500,hl(e,t));;)try{yl();break}catch(u){fl(e,u)}Ai(),Fu.current=a,Su=o,null!==Iu?t=0:(_u=null,Pu=0,t=Ru)}if(0!==t){if(2===t&&(0!==(o=pt(e))&&(r=o,t=il(e,o))),1===t)throw n=Mu,hl(e,0),sl(e,r),rl(e,Xe()),n;if(6===t)sl(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!sr(i(),o))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=ml(e,r))&&(0!==(a=pt(e))&&(r=a,t=il(e,a))),1===t))throw n=Mu,hl(e,0),sl(e,r),rl(e,Xe()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:Cl(e,ju,qu);break;case 3:if(sl(e,r),(130023424&r)===r&&10<(t=Hu+500-Xe())){if(0!==ht(e,0))break;if(((o=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(Cl.bind(null,e,ju,qu),t);break}Cl(e,ju,qu);break;case 4:if(sl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>o&&(o=s),r&=~a}if(r=o,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ku(r/1960))-r)){e.timeoutHandle=ro(Cl.bind(null,e,ju,qu),r);break}Cl(e,ju,qu);break;default:throw Error(i(329))}}}return rl(e,Xe()),e.callbackNode===n?ol.bind(null,e):null}function il(e,t){var n=Lu;return e.current.memoizedState.isDehydrated&&(hl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=ju,ju=n,null!==t&&al(t)),e}function al(e){null===ju?ju=e:ju.push.apply(ju,e)}function sl(e,t){for(t&=~zu,t&=~Ou,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function ul(e){if(0!==(6&Su))throw Error(i(327));wl();var t=ht(e,0);if(0===(1&t))return rl(e,Xe()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=il(e,r))}if(1===n)throw n=Mu,hl(e,0),sl(e,t),rl(e,Xe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cl(e,ju,qu),rl(e,Xe()),null}function ll(e,t){var n=Su;Su|=1;try{return e(t)}finally{0===(Su=n)&&(Uu=Xe()+500,jo&&qo())}}function cl(e){null!==Yu&&0===Yu.tag&&0===(6&Su)&&wl();var t=Su;Su|=1;var n=Au.transition,r=bt;try{if(Au.transition=null,bt=1,e)return e()}finally{bt=r,Au.transition=n,0===(6&(Su=t))&&qo()}}function dl(){Tu=Nu.current,xo(Nu)}function hl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Iu)for(n=Iu.return;null!==n;){var r=n;switch(ni(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ro();break;case 3:Xi(),xo(Io),xo(_o),ra();break;case 5:Ji(r);break;case 4:Xi();break;case 13:case 19:xo(ea);break;case 10:Si(r.type._context);break;case 22:case 23:dl()}n=n.return}if(_u=e,Iu=e=Nl(e.current,null),Pu=Tu=t,Ru=0,Mu=null,zu=Ou=Bu=0,ju=Lu=null,null!==Ti){for(t=0;t<Ti.length;t++)if(null!==(r=(n=Ti[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=o,r.next=a}n.pending=r}Ti=null}return e}function fl(e,t){for(;;){var n=Iu;try{if(Ai(),oa.current=$a,ca){for(var r=sa.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ca=!1}if(aa=0,la=ua=sa=null,da=!1,ha=0,xu.current=null,null===n||null===n.return){Ru=1,Mu=t,Iu=null;break}e:{var a=e,s=n.return,u=n,l=t;if(t=Pu,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,d=u,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,vs(p,s,u,0,t),1&p.mode&&gs(a,c,t),l=c;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(l),t.updateQueue=m}else g.add(l);break e}if(0===(1&t)){gs(a,c,t),gl();break e}l=Error(i(426))}else if(ii&&1&u.mode){var v=ms(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,u,0,t),gi(ls(l,u));break e}}a=l=ls(l,u),4!==Ru&&(Ru=2),null===Lu?Lu=[a]:Lu.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Ui(a,fs(0,l,t));break e;case 1:u=l;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ku||!Ku.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Ui(a,ps(a,u,t));break e}}a=a.return}while(null!==a)}Dl(n)}catch(D){t=D,Iu===n&&null!==n&&(Iu=n=n.return);continue}break}}function pl(){var e=Fu.current;return Fu.current=$a,null===e?$a:e}function gl(){0!==Ru&&3!==Ru&&2!==Ru||(Ru=4),null===_u||0===(268435455&Bu)&&0===(268435455&Ou)||sl(_u,Pu)}function ml(e,t){var n=Su;Su|=2;var r=pl();for(_u===e&&Pu===t||(qu=null,hl(e,t));;)try{vl();break}catch(o){fl(e,o)}if(Ai(),Su=n,Fu.current=r,null!==Iu)throw Error(i(261));return _u=null,Pu=0,Ru}function vl(){for(;null!==Iu;)bl(Iu)}function yl(){for(;null!==Iu&&!Ze();)bl(Iu)}function bl(e){var t=Eu(e.alternate,e,Tu);e.memoizedProps=e.pendingProps,null===t?Dl(e):Iu=t,xu.current=null}function Dl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gs(n,t,Tu)))return void(Iu=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Iu=n);if(null===e)return Ru=6,void(Iu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Iu=t);Iu=t=e}while(null!==t);0===Ru&&(Ru=5)}function Cl(e,t,n){var r=bt,o=Au.transition;try{Au.transition=null,bt=1,function(e,t,n,r){do{wl()}while(null!==Yu);if(0!==(6&Su))throw Error(i(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-at(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,a),e===_u&&(Iu=_u=null,Pu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gu||(Gu=!0,_l(tt,(function(){return wl(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Au.transition,Au.transition=null;var s=bt;bt=1;var u=Su;Su|=4,xu.current=null,function(e,t){if(eo=Wt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(C){n=null;break e}var s=0,u=-1,l=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==o&&3!==h.nodeType||(u=s+o),h!==a||0!==r&&3!==h.nodeType||(l=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++c===o&&(u=s),f===a&&++d===r&&(l=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Wt=!1,$s=t;null!==$s;)if(e=(t=$s).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$s=e;else for(;null!==$s;){t=$s;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ns(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var D=t.stateNode.containerInfo;1===D.nodeType?D.textContent="":9===D.nodeType&&D.documentElement&&D.removeChild(D.documentElement);break;default:throw Error(i(163))}}catch(C){kl(t,t.return,C)}if(null!==(e=t.sibling)){e.return=t.return,$s=e;break}$s=t.return}g=tu,tu=!1}(e,n),mu(n,e),pr(to),Wt=!!eo,to=eo=null,e.current=n,yu(n,e,o),Qe(),Su=u,bt=s,Au.transition=a}else e.current=n;if(Gu&&(Gu=!1,Yu=e,Zu=o),a=e.pendingLanes,0===a&&(Ku=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Wu)throw Wu=!1,e=Vu,Vu=null,e;0!==(1&Zu)&&0!==e.tag&&wl(),a=e.pendingLanes,0!==(1&a)?e===Xu?Qu++:(Qu=0,Xu=e):Qu=0,qo()}(e,t,n,r)}finally{Au.transition=o,bt=r}return null}function wl(){if(null!==Yu){var e=Dt(Zu),t=Au.transition,n=bt;try{if(Au.transition=null,bt=16>e?16:e,null===Yu)var r=!1;else{if(e=Yu,Yu=null,Zu=0,0!==(6&Su))throw Error(i(331));var o=Su;for(Su|=4,$s=e.current;null!==$s;){var a=$s,s=a.child;if(0!==(16&$s.flags)){var u=a.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for($s=c;null!==$s;){var d=$s;switch(d.tag){case 0:case 11:case 15:nu(8,d,a)}var h=d.child;if(null!==h)h.return=d,$s=h;else for(;null!==$s;){var f=(d=$s).sibling,p=d.return;if(iu(d),d===c){$s=null;break}if(null!==f){f.return=p,$s=f;break}$s=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}$s=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,$s=s;else e:for(;null!==$s;){if(0!==(2048&(a=$s).flags))switch(a.tag){case 0:case 11:case 15:nu(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,$s=y;break e}$s=a.return}}var b=e.current;for($s=b;null!==$s;){var D=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==D)D.return=s,$s=D;else e:for(s=b;null!==$s;){if(0!==(2048&(u=$s).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(w){kl(u,u.return,w)}if(u===s){$s=null;break e}var C=u.sibling;if(null!==C){C.return=u.return,$s=C;break e}$s=u.return}}if(Su=o,qo(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(w){}r=!0}return r}finally{bt=n,Au.transition=t}}return!1}function El(e,t,n){e=ji(e,t=fs(0,t=ls(n,t),1),1),t=el(),null!==e&&(vt(e,1,t),rl(e,t))}function kl(e,t,n){if(3===e.tag)El(e,e,n);else for(;null!==t;){if(3===t.tag){El(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ku||!Ku.has(r))){t=ji(t,e=ps(t,e=ls(n,e),1),1),e=el(),null!==t&&(vt(t,1,e),rl(t,e));break}}t=t.return}}function Fl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,_u===e&&(Pu&n)===n&&(4===Ru||3===Ru&&(130023424&Pu)===Pu&&500>Xe()-Hu?hl(e,0):zu|=n),rl(e,t)}function xl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=el();null!==(e=Mi(e,t))&&(vt(e,t,n),rl(e,n))}function Al(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),xl(e,n)}function Sl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),xl(e,n)}function _l(e,t){return Ge(e,t)}function Il(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pl(e,t,n,r){return new Il(e,t,n,r)}function Tl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nl(e,t){var n=e.alternate;return null===n?((n=Pl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rl(e,t,n,r,o,a){var s=2;if(r=e,"function"===typeof e)Tl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Ml(n.children,o,a,t);case k:s=8,o|=8;break;case F:return(e=Pl(12,n,t,2|o)).elementType=F,e.lanes=a,e;case _:return(e=Pl(13,n,t,o)).elementType=_,e.lanes=a,e;case I:return(e=Pl(19,n,t,o)).elementType=I,e.lanes=a,e;case N:return Bl(n,o,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:s=10;break e;case A:s=9;break e;case S:s=11;break e;case P:s=14;break e;case T:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Pl(s,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Ml(e,t,n,r){return(e=Pl(7,e,r,t)).lanes=n,e}function Bl(e,t,n,r){return(e=Pl(22,e,r,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Ol(e,t,n){return(e=Pl(6,e,null,t)).lanes=n,e}function zl(e,t,n){return(t=Pl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ll(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function jl(e,t,n,r,o,i,a,s,u){return e=new Ll(e,t,n,s,u),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Pl(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oi(i),e}function Hl(e){if(!e)return So;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(No(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(No(n))return Bo(e,n,t)}return t}function Ul(e,t,n,r,o,i,a,s,u){return(e=jl(n,r,!0,e,0,i,0,s,u)).context=Hl(null),n=e.current,(i=Li(r=el(),o=tl(n))).callback=void 0!==t&&null!==t?t:null,ji(n,i,o),e.current.lanes=o,vt(e,o,r),rl(e,r),e}function ql(e,t,n,r){var o=t.current,i=el(),a=tl(o);return n=Hl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Li(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=ji(o,t,a))&&(nl(e,o,a,i),Hi(e,o,a)),a}function Wl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kl(e,t){Vl(e,t),(e=e.alternate)&&Vl(e,t)}Eu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Io.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:_s(t),pi();break;case 5:$i(t);break;case 1:No(t.type)&&Oo(t);break;case 4:Qi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Ao(Ei,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ao(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Os(e,t,n):(Ao(ea,1&ea.current),null!==(e=Ws(e,t,n))?e.sibling:null);Ao(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Us(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ao(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,ks(e,t,n)}return Ws(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ii&&0!==(1048576&t.flags)&&ei(t,Go,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qs(e,t),e=t.pendingProps;var o=To(t,_o.current);Ii(t,n),o=ma(null,t,r,e,o,n);var a=va();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,No(r)?(a=!0,Oo(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Oi(t),o.updater=os,t.stateNode=o,o._reactInternals=t,us(t,r,e,n),t=Ss(null,t,r,!0,a,n)):(t.tag=0,ii&&a&&ti(t),Ds(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qs(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Tl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===S)return 11;if(e===P)return 14}return 2}(r),e=ns(r,e),o){case 0:t=xs(null,t,r,e,n);break e;case 1:t=As(null,t,r,e,n);break e;case 11:t=Cs(null,t,r,e,n);break e;case 14:t=ws(null,t,r,ns(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,xs(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 1:return r=t.type,o=t.pendingProps,As(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 3:e:{if(_s(t),null===e)throw Error(i(387));r=t.pendingProps,o=(a=t.memoizedState).element,zi(e,t),qi(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Is(e,t,r,n,o=ls(Error(i(423)),t));break e}if(r!==o){t=Is(e,t,r,n,o=ls(Error(i(424)),t));break e}for(oi=lo(t.stateNode.containerInfo.firstChild),ri=t,ii=!0,ai=null,n=wi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===o){t=Ws(e,t,n);break e}Ds(e,t,r,n)}t=t.child}return t;case 5:return $i(t),null===e&&ci(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,no(r,o)?s=null:null!==a&&no(r,a)&&(t.flags|=32),Fs(e,t),Ds(e,t,s,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Os(e,t,n);case 4:return Qi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ci(t,null,r,n):Ds(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,Cs(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 7:return Ds(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ds(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,s=o.value,Ao(Ei,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===o.children&&!Io.current){t=Ws(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var u=a.dependencies;if(null!==u){s=a.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===a.tag){(l=Li(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),_i(a.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(i(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),_i(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}Ds(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ii(t,n),r=r(o=Pi(o)),t.flags|=1,Ds(e,t,r,n),t.child;case 14:return o=ns(r=t.type,t.pendingProps),ws(e,t,r,o=ns(r.type,o),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ns(r,o),qs(e,t),t.tag=1,No(r)?(e=!0,Oo(t)):e=!1,Ii(t,n),as(t,r,o),us(t,r,o,n),Ss(null,t,r,!0,e,n);case 19:return Us(e,t,n);case 22:return ks(e,t,n)}throw Error(i(156,t.tag))};var Gl="function"===typeof reportError?reportError:function(e){console.error(e)};function Yl(e){this._internalRoot=e}function Zl(e){this._internalRoot=e}function Ql(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $l(){}function Jl(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof o){var s=o;o=function(){var e=Wl(a);s.call(e)}}ql(t,a,e,o)}else a=function(e,t,n,r,o){if(o){if("function"===typeof r){var i=r;r=function(){var e=Wl(a);i.call(e)}}var a=Ul(t,r,e,0,null,!1,0,"",$l);return e._reactRootContainer=a,e[go]=a.current,Ur(8===e.nodeType?e.parentNode:e),cl(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var s=r;r=function(){var e=Wl(u);s.call(e)}}var u=jl(e,0,!1,null,0,!1,0,"",$l);return e._reactRootContainer=u,e[go]=u.current,Ur(8===e.nodeType?e.parentNode:e),cl((function(){ql(t,u,n,r)})),u}(n,t,e,o,r);return Wl(a)}Zl.prototype.render=Yl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));ql(e,t,null,null)},Zl.prototype.unmount=Yl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cl((function(){ql(null,e,null,null)})),t[go]=null}},Zl.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Ot(e)}},Ct=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rl(t,Xe()),0===(6&Su)&&(Uu=Xe()+500,qo()))}break;case 13:cl((function(){var t=Mi(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Kl(e,1)}},wt=function(e){if(13===e.tag){var t=Mi(e,134217728);if(null!==t)nl(t,e,134217728,el());Kl(e,134217728)}},Et=function(e){if(13===e.tag){var t=tl(e),n=Mi(e,t);if(null!==n)nl(n,e,t,el());Kl(e,t)}},kt=function(){return bt},Ft=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},we=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=wo(r);if(!o)throw Error(i(90));G(r),$(r,o)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Se=ll,_e=cl;var ec={usingClientEntryPoint:!1,Events:[Do,Co,wo,xe,Ae,ll]},tc={findFiberByHostInstance:bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{ot=rc.inject(nc),it=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ql(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Ql(e))throw Error(i(299));var n=!1,r="",o=Gl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=jl(e,1,!1,null,0,n,0,r,o),e[go]=t.current,Ur(8===e.nodeType?e.parentNode:e),new Yl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return cl(e)},t.hydrate=function(e,t,n){if(!Xl(t))throw Error(i(200));return Jl(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ql(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,o=!1,a="",s=Gl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Ul(t,null,e,1,null!=n?n:null,o,0,a,s),e[go]=t.current,Ur(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Zl(t)},t.render=function(e,t,n){if(!Xl(t))throw Error(i(200));return Jl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xl(e))throw Error(i(40));return!!e._reactRootContainer&&(cl((function(){Jl(null,null,e,!1,(function(){e._reactRootContainer=null,e[go]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xl(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Jl(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3240:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},a=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var r,o=t.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!o&&!i)return!1;for(r in e);return"undefined"===typeof r||t.call(e,r)},s=function(e,t){r&&"__proto__"===t.name?r(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},u=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(o)return o(e,n).value}return e[n]};e.exports=function e(){var t,n,r,o,l,c,d=arguments[0],h=1,f=arguments.length,p=!1;for("boolean"===typeof d&&(p=d,d=arguments[1]||{},h=2),(null==d||"object"!==typeof d&&"function"!==typeof d)&&(d={});h<f;++h)if(null!=(t=arguments[h]))for(n in t)r=u(d,n),d!==(o=u(t,n))&&(p&&o&&(a(o)||(l=i(o)))?(l?(l=!1,c=r&&i(r)?r:[]):c=r&&a(r)?r:{},s(d,{name:n,newValue:e(p,c,o)})):"undefined"!==typeof o&&s(d,{name:n,newValue:o}));return d}},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var D=b.prototype=new y;D.constructor=b,g(D,v.prototype),D.isPureReactComponent=!0;var C=Array.isArray,w=Object.prototype.hasOwnProperty,E={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function F(e,t,r){var o,i={},a=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,o)&&!k.hasOwnProperty(o)&&(i[o]=t[o]);var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(o in u=e.defaultProps)void 0===i[o]&&(i[o]=u[o]);return{$$typeof:n,type:e,key:a,ref:s,props:i,_owner:E.current}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function _(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return a=a(u=e),e=""===i?"."+S(u,0):i,C(a)?(o="",null!=e&&(o=e.replace(A,"$&/")+"/"),_(a,t,o,"",(function(e){return e}))):null!=a&&(x(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+e)),t.push(a)),1;if(u=0,i=""===i?".":i+":",C(e))for(var l=0;l<e.length;l++){var c=i+S(s=e[l],l);u+=_(s,t,o,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=_(s=s.value,t,o,c=i+S(s,l++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function I(e,t,n){if(null==e)return e;var r=[],o=0;return _(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T={current:null},N={transition:null},R={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:N,ReactCurrentOwner:E};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=o,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=g({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=E.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)w.call(t,l)&&!k.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}return{$$typeof:n,type:e.type,key:i,ref:a,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=F,t.createFactory=function(e){var t=F.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return T.current.useCallback(e,t)},t.useContext=function(e){return T.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return T.current.useDeferredValue(e)},t.useEffect=function(e,t){return T.current.useEffect(e,t)},t.useId=function(){return T.current.useId()},t.useImperativeHandle=function(e,t,n){return T.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return T.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.current.useMemo(e,t)},t.useReducer=function(e,t,n){return T.current.useReducer(e,t,n)},t.useRef=function(e){return T.current.useRef(e)},t.useState=function(e){return T.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return T.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return T.current.useTransition()},t.version="18.3.1"},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4403:e=>{var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,r=/^\s*/,o=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,u=/^\s+|\s+$/g,l="";function c(e){return e?e.replace(u,l):l}e.exports=function(e,u){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];u=u||{};var d=1,h=1;function f(e){var t=e.match(n);t&&(d+=t.length);var r=e.lastIndexOf("\n");h=~r?e.length-r:h+e.length}function p(){var e={line:d,column:h};return function(t){return t.position=new g(e),b(),t}}function g(e){this.start=e,this.end={line:d,column:h},this.source=u.source}g.prototype.content=e;var m=[];function v(t){var n=new Error(u.source+":"+d+":"+h+": "+t);if(n.reason=t,n.filename=u.source,n.line=d,n.column=h,n.source=e,!u.silent)throw n;m.push(n)}function y(t){var n=t.exec(e);if(n){var r=n[0];return f(r),e=e.slice(r.length),n}}function b(){y(r)}function D(e){var t;for(e=e||[];t=C();)!1!==t&&e.push(t);return e}function C(){var t=p();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;l!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,l===e.charAt(n-1))return v("End of comment missing");var r=e.slice(2,n-2);return h+=2,f(r),e=e.slice(n),h+=2,t({type:"comment",comment:r})}}function w(){var e=p(),n=y(o);if(n){if(C(),!y(i))return v("property missing ':'");var r=y(a),u=e({type:"declaration",property:c(n[0].replace(t,l)),value:r?c(r[0].replace(t,l)):l});return y(s),u}}return b(),function(){var e,t=[];for(D(t);e=w();)!1!==e&&(t.push(e),D(t));return t}()}},4589:(e,t,n)=>{"use strict";e.exports=n(6929)},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5173:(e,t,n)=>{e.exports=n(1497)()},5837:e=>{e.exports=function(e){return null!=e&&null!=e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},6159:(e,t,n)=>{e.exports=function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,(function(e){return o(t[a][1][e]||e)}),l,l.exports,e,t,n,r)}return n[a].exports}for(var i=void 0,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";var r=e("./utils"),o=e("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,o,a,s,u,l,c=[],d=0,h=e.length,f=h,p="string"!==r.getTypeOf(e);d<e.length;)f=h-d,o=p?(t=e[d++],n=d<h?e[d++]:0,d<h?e[d++]:0):(t=e.charCodeAt(d++),n=d<h?e.charCodeAt(d++):0,d<h?e.charCodeAt(d++):0),a=t>>2,s=(3&t)<<4|n>>4,u=1<f?(15&n)<<2|o>>6:64,l=2<f?63&o:64,c.push(i.charAt(a)+i.charAt(s)+i.charAt(u)+i.charAt(l));return c.join("")},n.decode=function(e){var t,n,r,a,s,u,l=0,c=0,d="data:";if(e.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var h,f=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===i.charAt(64)&&f--,e.charAt(e.length-2)===i.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=o.uint8array?new Uint8Array(0|f):new Array(0|f);l<e.length;)t=i.indexOf(e.charAt(l++))<<2|(a=i.indexOf(e.charAt(l++)))>>4,n=(15&a)<<4|(s=i.indexOf(e.charAt(l++)))>>2,r=(3&s)<<6|(u=i.indexOf(e.charAt(l++))),h[c++]=t,64!==s&&(h[c++]=n),64!==u&&(h[c++]=r);return h}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var r=e("./external"),o=e("./stream/DataWorker"),i=e("./stream/Crc32Probe"),a=e("./stream/DataLengthProbe");function s(e,t,n,r,o){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=o}s.prototype={getContentWorker:function(){var e=new o(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new o(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,n){return e.pipe(new i).pipe(new a("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},t.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var r=e("./utils"),o=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var i=o,a=r+n;e^=-1;for(var s=r;s<a;s++)e=e>>>8^i[255&(e^t[s])];return-1^e}(0|t,e,e.length,0):function(e,t,n,r){var i=o,a=r+n;e^=-1;for(var s=r;s<a;s++)e=e>>>8^i[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var r=null;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,o=e("pako"),i=e("./utils"),a=e("./stream/GenericWorker"),s=r?"uint8array":"array";function u(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",i.inherits(u,a),u.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(i.transformTo(s,e.data),!1)},u.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new u("Deflate",e)},n.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function o(e,t,n,o,a,c){var d,h,f=e.file,p=e.compression,g=c!==s.utf8encode,m=i.transformTo("string",c(f.name)),v=i.transformTo("string",s.utf8encode(f.name)),y=f.comment,b=i.transformTo("string",c(y)),D=i.transformTo("string",s.utf8encode(y)),C=v.length!==f.name.length,w=D.length!==y.length,E="",k="",F="",x=f.dir,A=f.date,S={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(S.crc32=e.crc32,S.compressedSize=e.compressedSize,S.uncompressedSize=e.uncompressedSize);var _=0;t&&(_|=8),g||!C&&!w||(_|=2048);var I=0,P=0;x&&(I|=16),"UNIX"===a?(P=798,I|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(f.unixPermissions,x)):(P=20,I|=function(e){return 63&(e||0)}(f.dosPermissions)),d=A.getUTCHours(),d<<=6,d|=A.getUTCMinutes(),d<<=5,d|=A.getUTCSeconds()/2,h=A.getUTCFullYear()-1980,h<<=4,h|=A.getUTCMonth()+1,h<<=5,h|=A.getUTCDate(),C&&(k=r(1,1)+r(u(m),4)+v,E+="up"+r(k.length,2)+k),w&&(F=r(1,1)+r(u(b),4)+D,E+="uc"+r(F.length,2)+F);var T="";return T+="\n\0",T+=r(_,2),T+=p.magic,T+=r(d,2),T+=r(h,2),T+=r(S.crc32,4),T+=r(S.compressedSize,4),T+=r(S.uncompressedSize,4),T+=r(m.length,2),T+=r(E.length,2),{fileRecord:l.LOCAL_FILE_HEADER+T+m+E,dirRecord:l.CENTRAL_FILE_HEADER+r(P,2)+T+r(b.length,2)+"\0\0\0\0"+r(I,4)+r(o,4)+m+E+b}}var i=e("../utils"),a=e("../stream/GenericWorker"),s=e("../utf8"),u=e("../crc32"),l=e("../signature");function c(e,t,n,r){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(c,a),c.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,a.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},c.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=o(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=o(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return l.DATA_DESCRIPTOR+r(e.crc32,4)+r(e.compressedSize,4)+r(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,o=function(e,t,n,o,a){var s=i.transformTo("string",a(o));return l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(e,2)+r(e,2)+r(t,4)+r(n,4)+r(s.length,2)+s}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:o,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},c.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(e){var t=this._sources;if(!a.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},c.prototype.lock=function(){a.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=c},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var r=e("../compressions"),o=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var i=new o(t.streamFiles,n,t.platform,t.encodeFileName),a=0;try{e.forEach((function(e,n){a++;var o=function(e,t){var n=e||t,o=r[n];if(!o)throw new Error(n+" is not a valid compression method !");return o}(n.options.compression,t.compression),s=n.options.compressionOptions||t.compressionOptions||{},u=n.dir,l=n.date;n._compressWorker(o,s).withStreamInfo("file",{name:e,dir:u,date:l,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(i)})),i.entriesCount=a}catch(e){i.error(e)}return i}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var r=e("./utils"),o=e("./external"),i=e("./utf8"),a=e("./zipEntries"),s=e("./stream/Crc32Probe"),u=e("./nodejsUtils");function l(e){return new o.Promise((function(t,n){var r=e.decompressed.getContentWorker().pipe(new s);r.on("error",(function(e){n(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),u.isNode&&u.isStream(e)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new a(t);return n.load(e),n})).then((function(e){var n=[o.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var i=0;i<r.length;i++)n.push(l(r[i]));return o.Promise.all(n)})).then((function(e){for(var o=e.shift(),i=o.files,a=0;a<i.length;a++){var s=i[a],u=s.fileNameStr,l=r.resolve(s.fileNameStr);n.file(l,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders}),s.dir||(n.file(l).unsafeOriginalName=u)}return o.zipComment.length&&(n.comment=o.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var r=e("../utils"),o=e("../stream/GenericWorker");function i(e,t){o.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(i,o),i.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},i.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var r=e("readable-stream").Readable;function o(e,t,n){r.call(this,t),this._helper=e;var o=this;e.on("data",(function(e,t){o.push(e)||o._helper.pause(),n&&n(t)})).on("error",(function(e){o.emit("error",e)})).on("end",(function(){o.push(null)}))}e("../utils").inherits(o,r),o.prototype._read=function(){this._helper.resume()},t.exports=o},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){"use strict";function r(e,t,n){var r,o=i.getTypeOf(t),s=i.extend(n||{},u);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=g(e)),s.createFolders&&(r=p(e))&&m.call(this,r,!0);var d="string"===o&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!d),(t instanceof l&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",o="string");var v=null;v=t instanceof l||t instanceof a?t:h.isNode&&h.isStream(t)?new f(e,t):i.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var y=new c(e,v,s);this.files[e]=y}var o=e("./utf8"),i=e("./utils"),a=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),u=e("./defaults"),l=e("./compressedObject"),c=e("./zipObject"),d=e("./generate"),h=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),p=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},g=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},m=function(e,t){return t=void 0!==t?t:u.createFolders,e=g(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function v(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r)},filter:function(e){var t=[];return this.forEach((function(n,r){e(n,r)&&t.push(r)})),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,r.call(this,e,t,n),this;if(v(e)){var o=e;return this.filter((function(e,t){return!t.dir&&o.test(e)}))}var i=this.files[this.root+e];return i&&!i.dir?i:null},folder:function(e){if(!e)return this;if(v(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=m.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=i.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");i.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=d.generateWorker(this,n,r)}catch(e){(t=new a("error")).error(e)}return new s(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var r=e("./DataReader");function o(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(o,r),o.prototype.byteAt=function(e){return this.data[this.zero+e]},o.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),o=e.charCodeAt(3),i=this.length-4;0<=i;--i)if(this.data[i]===t&&this.data[i+1]===n&&this.data[i+2]===r&&this.data[i+3]===o)return i-this.zero;return-1},o.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),o=e.charCodeAt(3),i=this.readData(4);return t===i[0]&&n===i[1]&&r===i[2]&&o===i[3]},o.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=o},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var r=e("../utils");function o(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=o},{"../utils":32}],19:[function(e,t,n){"use strict";var r=e("./Uint8ArrayReader");function o(e){r.call(this,e)}e("../utils").inherits(o,r),o.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var r=e("./DataReader");function o(e){r.call(this,e)}e("../utils").inherits(o,r),o.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},o.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},o.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},o.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=o},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var r=e("./ArrayReader");function o(e){r.call(this,e)}e("../utils").inherits(o,r),o.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var r=e("../utils"),o=e("../support"),i=e("./ArrayReader"),a=e("./StringReader"),s=e("./NodeBufferReader"),u=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||o.uint8array?"nodebuffer"===t?new s(e):o.uint8array?new u(r.transformTo("uint8array",e)):new i(r.transformTo("array",e)):new a(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK\x03\x04",n.CENTRAL_FILE_HEADER="PK\x01\x02",n.CENTRAL_DIRECTORY_END="PK\x05\x06",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,t,n){"use strict";var r=e("./GenericWorker"),o=e("../utils");function i(e){r.call(this,"ConvertWorker to "+e),this.destType=e}o.inherits(i,r),i.prototype.processChunk=function(e){this.push({data:o.transformTo(this.destType,e.data),meta:e.meta})},t.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var r=e("./GenericWorker"),o=e("../crc32");function i(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(i,r),i.prototype.processChunk=function(e){this.streamInfo.crc32=o(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var r=e("../utils"),o=e("./GenericWorker");function i(e){o.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(i,o),i.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}o.prototype.processChunk.call(this,e)},t.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var r=e("../utils"),o=e("./GenericWorker");function i(e){o.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}r.inherits(i,o),i.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,t,n){"use strict";var r=e("../utils"),o=e("./ConvertWorker"),i=e("./GenericWorker"),a=e("../base64"),s=e("../support"),u=e("../external"),l=null;if(s.nodestream)try{l=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function c(e,t){return new u.Promise((function(n,o){var i=[],s=e._internalType,u=e._outputType,l=e._mimeType;e.on("data",(function(e,n){i.push(e),t&&t(n)})).on("error",(function(e){i=[],o(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",t),n);case"base64":return a.encode(t);default:return r.transformTo(e,t)}}(u,function(e,t){var n,r=0,o=null,i=0;for(n=0;n<t.length;n++)i+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(o=new Uint8Array(i),n=0;n<t.length;n++)o.set(t[n],r),r+=t[n].length;return o;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(s,i),l);n(e)}catch(e){o(e)}i=[]})).resume()}))}function d(e,t,n){var a=t;switch(t){case"blob":case"arraybuffer":a="uint8array";break;case"base64":a="string"}try{this._internalType=a,this._outputType=t,this._mimeType=n,r.checkSupport(a),this._worker=e.pipe(new o(a)),e.lock()}catch(e){this._worker=new i("error"),this._worker.error(e)}}d.prototype={accumulate:function(e){return c(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){r.delay(t,arguments,n)})),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(r),n.blob=0===o.getBlob("application/zip").size}catch(e){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(e){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var r=e("./utils"),o=e("./support"),i=e("./nodejsUtils"),a=e("./stream/GenericWorker"),s=new Array(256),u=0;u<256;u++)s[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function l(){a.call(this,"utf-8 decode"),this.leftOver=null}function c(){a.call(this,"utf-8 encode")}s[254]=s[254]=1,n.utf8encode=function(e){return o.nodebuffer?i.newBufferFrom(e,"utf-8"):function(e){var t,n,r,i,a,s=e.length,u=0;for(i=0;i<s;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=o.uint8array?new Uint8Array(u):new Array(u),i=a=0;a<u;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t}(e)},n.utf8decode=function(e){return o.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,o,i,a=e.length,u=new Array(2*a);for(t=n=0;t<a;)if((o=e[t++])<128)u[n++]=o;else if(4<(i=s[o]))u[n++]=65533,t+=i-1;else{for(o&=2===i?31:3===i?15:7;1<i&&t<a;)o=o<<6|63&e[t++],i--;1<i?u[n++]=65533:o<65536?u[n++]=o:(o-=65536,u[n++]=55296|o>>10&1023,u[n++]=56320|1023&o)}return u.length!==n&&(u.subarray?u=u.subarray(0,n):u.length=n),r.applyFromCharCode(u)}(e=r.transformTo(o.uint8array?"uint8array":"array",e))},r.inherits(l,a),l.prototype.processChunk=function(e){var t=r.transformTo(o.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var i=t;(t=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),t.set(i,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var a=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}(t),u=t;a!==t.length&&(o.uint8array?(u=t.subarray(0,a),this.leftOver=t.subarray(a,t.length)):(u=t.slice(0,a),this.leftOver=t.slice(a,t.length))),this.push({data:n.utf8decode(u),meta:e.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=l,r.inherits(c,a),c.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var r=e("./support"),o=e("./base64"),i=e("./nodejsUtils"),a=e("./external");function s(e){return e}function u(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),n.newBlob=function(t,r){n.checkSupport("blob");try{return new Blob([t],{type:r})}catch(e){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return o.append(t),o.getBlob(r)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var l={stringifyByChunk:function(e,t,n){var r=[],o=0,i=e.length;if(i<=n)return String.fromCharCode.apply(null,e);for(;o<i;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(o,Math.min(o+n,i)))):r.push(String.fromCharCode.apply(null,e.subarray(o,Math.min(o+n,i)))),o+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,i.allocBuffer(1)).length}catch(e){return!1}}()}};function c(e){var t=65536,r=n.getTypeOf(e),o=!0;if("uint8array"===r?o=l.applyCanBeUsed.uint8array:"nodebuffer"===r&&(o=l.applyCanBeUsed.nodebuffer),o)for(;1<t;)try{return l.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return l.stringifyByChar(e)}function d(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=c;var h={};h.string={string:s,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return h.string.uint8array(e).buffer},uint8array:function(e){return u(e,new Uint8Array(e.length))},nodebuffer:function(e){return u(e,i.allocBuffer(e.length))}},h.array={string:c,array:s,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.newBufferFrom(e)}},h.arraybuffer={string:function(e){return c(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:s,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.newBufferFrom(new Uint8Array(e))}},h.uint8array={string:c,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:s,nodebuffer:function(e){return i.newBufferFrom(e)}},h.nodebuffer={string:c,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return h.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:s},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return h[r][e](t)},n.resolve=function(e){for(var t=e.split("/"),n=[],r=0;r<t.length;r++){var o=t[r];"."===o||""===o&&0!==r&&r!==t.length-1||(".."===o?n.pop():n.push(o))}return n.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&i.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){setImmediate((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,i,s,l){return a.Promise.resolve(t).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new a.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(t){var c=n.getTypeOf(t);return c?("arraybuffer"===c?t=n.transformTo("uint8array",t):"string"===c&&(l?t=o.decode(t):i&&!0!==s&&(t=function(e){return u(e,r.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):a.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),o=e("./utils"),i=e("./signature"),a=e("./zipEntry"),s=e("./support");function u(e){this.files=[],this.loadOptions=e}u.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(t)+", expected "+o.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",n=o.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,i.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),o=e("./utils"),i=e("./compressedObject"),a=e("./crc32"),s=e("./utf8"),u=e("./compressions"),l=e("./support");function c(e,t){this.options=e,this.loadOptions=t}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in u)if(Object.prototype.hasOwnProperty.call(u,t)&&u[t].magic===e)return u[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,n,r,o=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<o;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(o)},handleUTF8:function(){var e=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=o.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var i=o.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},t.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var o=e("./stream/StreamHelper"),i=e("./stream/DataWorker"),a=e("./utf8"),s=e("./compressedObject"),u=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var i=!this._dataBinary;i&&!r&&(t=t.pipe(new a.Utf8EncodeWorker)),!i&&r&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new u("error")).error(e)}return new o(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new a.Utf8EncodeWorker)),s.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof u?this._data:new i(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<l.length;d++)r.prototype[l[d]]=c;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){"use strict";var n,r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,a=new o(c),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};else{var u=new e.MessageChannel;u.port1.onmessage=c,n=function(){u.port2.postMessage(0)}}var l=[];function c(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}t.exports=function(e){1!==l.push(e)||r||n()}}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){"use strict";var r=e("immediate");function o(){}var i={},a=["REJECTED"],s=["FULFILLED"],u=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==o&&f(this,e)}function c(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(r){return i.reject(e,r)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function o(t){n||(n=!0,i.resolve(e,t))}var a=p((function(){t(o,r)}));"error"===a.status&&r(a.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=l).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(o);return this.state!==u?d(n,this.state===s?e:t,this.outcome):this.queue.push(new c(n,e,t)),n},c.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){i.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=p(h,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)f(e,r);else{e.state=s,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},l.resolve=function(e){return e instanceof this?e:i.resolve(new this(o),e)},l.reject=function(e){var t=new this(o);return i.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,u=-1,l=new this(o);++u<n;)c(e[u],u);return l;function c(e,o){t.resolve(e).then((function(e){a[o]=e,++s!==n||r||(r=!0,i.resolve(l,a))}),(function(e){r||(r=!0,i.reject(l,e))}))}},l.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a,s=-1,u=new this(o);++s<n;)a=e[s],t.resolve(a).then((function(e){r||(r=!0,i.resolve(u,e))}),(function(e){r||(r=!0,i.reject(u,e))}));return u}},{immediate:36}],38:[function(e,t,n){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var r=e("./zlib/deflate"),o=e("./utils/common"),i=e("./utils/strings"),a=e("./zlib/messages"),s=e("./zlib/zstream"),u=Object.prototype.toString,l=0,c=-1,d=0,h=8;function f(e){if(!(this instanceof f))return new f(e);this.options=o.assign({level:c,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==l)throw new Error(a[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var p;if(p="string"==typeof t.dictionary?i.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=r.deflateSetDictionary(this.strm,p))!==l)throw new Error(a[n]);this._dict_set=!0}}function p(e,t){var n=new f(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}f.prototype.push=function(e,t){var n,a,s=this.strm,c=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=i.string2buf(e):"[object ArrayBuffer]"===u.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new o.Buf8(c),s.next_out=0,s.avail_out=c),1!==(n=r.deflate(s,a))&&n!==l)return this.onEnd(n),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(i.buf2binstring(o.shrinkBuf(s.output,s.next_out))):this.onData(o.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===l):2!==a||(this.onEnd(l),!(s.avail_out=0))},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===l&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=f,n.deflate=p,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,p(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var r=e("./zlib/inflate"),o=e("./utils/common"),i=e("./utils/strings"),a=e("./zlib/constants"),s=e("./zlib/messages"),u=e("./zlib/zstream"),l=e("./zlib/gzheader"),c=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);this.header=new l,r.inflateGetHeader(this.strm,this.header)}function h(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}d.prototype.push=function(e,t){var n,s,u,l,d,h,f=this.strm,p=this.options.chunkSize,g=this.options.dictionary,m=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?f.input=i.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new o.Buf8(p),f.next_out=0,f.avail_out=p),(n=r.inflate(f,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&g&&(h="string"==typeof g?i.string2buf(g):"[object ArrayBuffer]"===c.call(g)?new Uint8Array(g):g,n=r.inflateSetDictionary(this.strm,h)),n===a.Z_BUF_ERROR&&!0===m&&(n=a.Z_OK,m=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),!(this.ended=!0);f.next_out&&(0!==f.avail_out&&n!==a.Z_STREAM_END&&(0!==f.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(u=i.utf8border(f.output,f.next_out),l=f.next_out-u,d=i.buf2string(f.output,u),f.next_out=l,f.avail_out=p-l,l&&o.arraySet(f.output,f.output,u,l,0),this.onData(d)):this.onData(o.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(m=!0)}while((0<f.avail_in||0===f.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(f.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=d,n.inflate=h,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},n.ungzip=h},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,r,o){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),o);else for(var i=0;i<r;i++)e[o+i]=t[n+i]},flattenChunks:function(e){var t,n,r,o,i,a;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),t=o=0,n=e.length;t<n;t++)i=e[t],a.set(i,o),o+=i.length;return a}},i={arraySet:function(e,t,n,r,o){for(var i=0;i<r;i++)e[o+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,i))},n.setTyped(r)},{}],42:[function(e,t,n){"use strict";var r=e("./common"),o=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(e){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){i=!1}for(var a=new r.Buf8(256),s=0;s<256;s++)a[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function u(e,t){if(t<65537&&(e.subarray&&i||!e.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}a[254]=a[254]=1,n.string2buf=function(e){var t,n,o,i,a,s=e.length,u=0;for(i=0;i<s;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(o=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(o-56320),i++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(u),i=a=0;a<u;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(o=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(o-56320),i++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t},n.buf2binstring=function(e){return u(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,o=t.length;n<o;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,o,i,s=t||e.length,l=new Array(2*s);for(n=r=0;n<s;)if((o=e[n++])<128)l[r++]=o;else if(4<(i=a[o]))l[r++]=65533,n+=i-1;else{for(o&=2===i?31:3===i?15:7;1<i&&n<s;)o=o<<6|63&e[n++],i--;1<i?l[r++]=65533:o<65536?l[r++]=o:(o-=65536,l[r++]=55296|o>>10&1023,l[r++]=56320|1023&o)}return u(l,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){for(var o=65535&e,i=e>>>16&65535,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;i=i+(o=o+t[r++]|0)|0,--a;);o%=65521,i%=65521}return o|i<<16}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,o){var i=r,a=o+n;e^=-1;for(var s=o;s<a;s++)e=e>>>8^i[255&(e^t[s])];return-1^e}},{}],46:[function(e,t,n){"use strict";var r,o=e("../utils/common"),i=e("./trees"),a=e("./adler32"),s=e("./crc32"),u=e("./messages"),l=0,c=4,d=0,h=-2,f=-1,p=4,g=2,m=8,v=9,y=286,b=30,D=19,C=2*y+1,w=15,E=3,k=258,F=k+E+1,x=42,A=113,S=1,_=2,I=3,P=4;function T(e,t){return e.msg=u[t],t}function N(e){return(e<<1)-(4<e?9:0)}function R(e){for(var t=e.length;0<=--t;)e[t]=0}function M(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(o.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function B(e,t){i._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,M(e.strm)}function O(e,t){e.pending_buf[e.pending++]=t}function z(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function L(e,t){var n,r,o=e.max_chain_length,i=e.strstart,a=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-F?e.strstart-(e.w_size-F):0,l=e.window,c=e.w_mask,d=e.prev,h=e.strstart+k,f=l[i+a-1],p=l[i+a];e.prev_length>=e.good_match&&(o>>=2),s>e.lookahead&&(s=e.lookahead);do{if(l[(n=t)+a]===p&&l[n+a-1]===f&&l[n]===l[i]&&l[++n]===l[i+1]){i+=2,n++;do{}while(l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&i<h);if(r=k-(h-i),i=h-k,a<r){if(e.match_start=t,s<=(a=r))break;f=l[i+a-1],p=l[i+a]}}}while((t=d[t&c])>u&&0!=--o);return a<=e.lookahead?a:e.lookahead}function j(e){var t,n,r,i,u,l,c,d,h,f,p=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=p+(p-F)){for(o.arraySet(e.window,e.window,p,p,0),e.match_start-=p,e.strstart-=p,e.block_start-=p,t=n=e.hash_size;r=e.head[--t],e.head[t]=p<=r?r-p:0,--n;);for(t=n=p;r=e.prev[--t],e.prev[t]=p<=r?r-p:0,--n;);i+=p}if(0===e.strm.avail_in)break;if(l=e.strm,c=e.window,d=e.strstart+e.lookahead,f=void 0,(h=i)<(f=l.avail_in)&&(f=h),n=0===f?0:(l.avail_in-=f,o.arraySet(c,l.input,l.next_in,f,d),1===l.state.wrap?l.adler=a(l.adler,c,f,d):2===l.state.wrap&&(l.adler=s(l.adler,c,f,d)),l.next_in+=f,l.total_in+=f,f),e.lookahead+=n,e.lookahead+e.insert>=E)for(u=e.strstart-e.insert,e.ins_h=e.window[u],e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+E-1])&e.hash_mask,e.prev[u&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=u,u++,e.insert--,!(e.lookahead+e.insert<E)););}while(e.lookahead<F&&0!==e.strm.avail_in)}function H(e,t){for(var n,r;;){if(e.lookahead<F){if(j(e),e.lookahead<F&&t===l)return S;if(0===e.lookahead)break}if(n=0,e.lookahead>=E&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+E-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-F&&(e.match_length=L(e,n)),e.match_length>=E)if(r=i._tr_tally(e,e.strstart-e.match_start,e.match_length-E),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=E){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+E-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(B(e,!1),0===e.strm.avail_out))return S}return e.insert=e.strstart<E-1?e.strstart:E-1,t===c?(B(e,!0),0===e.strm.avail_out?I:P):e.last_lit&&(B(e,!1),0===e.strm.avail_out)?S:_}function U(e,t){for(var n,r,o;;){if(e.lookahead<F){if(j(e),e.lookahead<F&&t===l)return S;if(0===e.lookahead)break}if(n=0,e.lookahead>=E&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+E-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=E-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-F&&(e.match_length=L(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===E&&4096<e.strstart-e.match_start)&&(e.match_length=E-1)),e.prev_length>=E&&e.match_length<=e.prev_length){for(o=e.strstart+e.lookahead-E,r=i._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-E),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+E-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=E-1,e.strstart++,r&&(B(e,!1),0===e.strm.avail_out))return S}else if(e.match_available){if((r=i._tr_tally(e,0,e.window[e.strstart-1]))&&B(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return S}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=i._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<E-1?e.strstart:E-1,t===c?(B(e,!0),0===e.strm.avail_out?I:P):e.last_lit&&(B(e,!1),0===e.strm.avail_out)?S:_}function q(e,t,n,r,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=o}function W(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*C),this.dyn_dtree=new o.Buf16(2*(2*b+1)),this.bl_tree=new o.Buf16(2*(2*D+1)),R(this.dyn_ltree),R(this.dyn_dtree),R(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(w+1),this.heap=new o.Buf16(2*y+1),R(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*y+1),R(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function V(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=g,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?x:A,e.adler=2===t.wrap?0:1,t.last_flush=l,i._tr_init(t),d):T(e,h)}function K(e){var t=V(e);return t===d&&function(e){e.window_size=2*e.w_size,R(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=E-1,e.match_available=0,e.ins_h=0}(e.state),t}function G(e,t,n,r,i,a){if(!e)return h;var s=1;if(t===f&&(t=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),i<1||v<i||n!==m||r<8||15<r||t<0||9<t||a<0||p<a)return T(e,h);8===r&&(r=9);var u=new W;return(e.state=u).strm=e,u.wrap=s,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=i+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+E-1)/E),u.window=new o.Buf8(2*u.w_size),u.head=new o.Buf16(u.hash_size),u.prev=new o.Buf16(u.w_size),u.lit_bufsize=1<<i+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new o.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=a,u.method=n,K(e)}r=[new q(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(j(e),0===e.lookahead&&t===l)return S;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,B(e,!1),0===e.strm.avail_out))return S;if(e.strstart-e.block_start>=e.w_size-F&&(B(e,!1),0===e.strm.avail_out))return S}return e.insert=0,t===c?(B(e,!0),0===e.strm.avail_out?I:P):(e.strstart>e.block_start&&(B(e,!1),e.strm.avail_out),S)})),new q(4,4,8,4,H),new q(4,5,16,8,H),new q(4,6,32,32,H),new q(4,4,16,16,U),new q(8,16,32,32,U),new q(8,16,128,128,U),new q(8,32,128,256,U),new q(32,128,258,1024,U),new q(32,258,258,4096,U)],n.deflateInit=function(e,t){return G(e,t,m,15,8,0)},n.deflateInit2=G,n.deflateReset=K,n.deflateResetKeep=V,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?h:(e.state.gzhead=t,d):h},n.deflate=function(e,t){var n,o,a,u;if(!e||!e.state||5<t||t<0)return e?T(e,h):h;if(o=e.state,!e.output||!e.input&&0!==e.avail_in||666===o.status&&t!==c)return T(e,0===e.avail_out?-5:h);if(o.strm=e,n=o.last_flush,o.last_flush=t,o.status===x)if(2===o.wrap)e.adler=0,O(o,31),O(o,139),O(o,8),o.gzhead?(O(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),O(o,255&o.gzhead.time),O(o,o.gzhead.time>>8&255),O(o,o.gzhead.time>>16&255),O(o,o.gzhead.time>>24&255),O(o,9===o.level?2:2<=o.strategy||o.level<2?4:0),O(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(O(o,255&o.gzhead.extra.length),O(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(e.adler=s(e.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(O(o,0),O(o,0),O(o,0),O(o,0),O(o,0),O(o,9===o.level?2:2<=o.strategy||o.level<2?4:0),O(o,3),o.status=A);else{var f=m+(o.w_bits-8<<4)<<8;f|=(2<=o.strategy||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(f|=32),f+=31-f%31,o.status=A,z(o,f),0!==o.strstart&&(z(o,e.adler>>>16),z(o,65535&e.adler)),e.adler=1}if(69===o.status)if(o.gzhead.extra){for(a=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),M(e),a=o.pending,o.pending!==o.pending_buf_size));)O(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(73===o.status)if(o.gzhead.name){a=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),M(e),a=o.pending,o.pending===o.pending_buf_size)){u=1;break}u=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,O(o,u)}while(0!==u);o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),0===u&&(o.gzindex=0,o.status=91)}else o.status=91;if(91===o.status)if(o.gzhead.comment){a=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),M(e),a=o.pending,o.pending===o.pending_buf_size)){u=1;break}u=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,O(o,u)}while(0!==u);o.gzhead.hcrc&&o.pending>a&&(e.adler=s(e.adler,o.pending_buf,o.pending-a,a)),0===u&&(o.status=103)}else o.status=103;if(103===o.status&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&M(e),o.pending+2<=o.pending_buf_size&&(O(o,255&e.adler),O(o,e.adler>>8&255),e.adler=0,o.status=A)):o.status=A),0!==o.pending){if(M(e),0===e.avail_out)return o.last_flush=-1,d}else if(0===e.avail_in&&N(t)<=N(n)&&t!==c)return T(e,-5);if(666===o.status&&0!==e.avail_in)return T(e,-5);if(0!==e.avail_in||0!==o.lookahead||t!==l&&666!==o.status){var p=2===o.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(j(e),0===e.lookahead)){if(t===l)return S;break}if(e.match_length=0,n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(B(e,!1),0===e.strm.avail_out))return S}return e.insert=0,t===c?(B(e,!0),0===e.strm.avail_out?I:P):e.last_lit&&(B(e,!1),0===e.strm.avail_out)?S:_}(o,t):3===o.strategy?function(e,t){for(var n,r,o,a,s=e.window;;){if(e.lookahead<=k){if(j(e),e.lookahead<=k&&t===l)return S;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=E&&0<e.strstart&&(r=s[o=e.strstart-1])===s[++o]&&r===s[++o]&&r===s[++o]){a=e.strstart+k;do{}while(r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&o<a);e.match_length=k-(a-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=E?(n=i._tr_tally(e,1,e.match_length-E),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(B(e,!1),0===e.strm.avail_out))return S}return e.insert=0,t===c?(B(e,!0),0===e.strm.avail_out?I:P):e.last_lit&&(B(e,!1),0===e.strm.avail_out)?S:_}(o,t):r[o.level].func(o,t);if(p!==I&&p!==P||(o.status=666),p===S||p===I)return 0===e.avail_out&&(o.last_flush=-1),d;if(p===_&&(1===t?i._tr_align(o):5!==t&&(i._tr_stored_block(o,0,0,!1),3===t&&(R(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),M(e),0===e.avail_out))return o.last_flush=-1,d}return t!==c?d:o.wrap<=0?1:(2===o.wrap?(O(o,255&e.adler),O(o,e.adler>>8&255),O(o,e.adler>>16&255),O(o,e.adler>>24&255),O(o,255&e.total_in),O(o,e.total_in>>8&255),O(o,e.total_in>>16&255),O(o,e.total_in>>24&255)):(z(o,e.adler>>>16),z(o,65535&e.adler)),M(e),0<o.wrap&&(o.wrap=-o.wrap),0!==o.pending?d:1)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==x&&69!==t&&73!==t&&91!==t&&103!==t&&t!==A&&666!==t?T(e,h):(e.state=null,t===A?T(e,-3):d):h},n.deflateSetDictionary=function(e,t){var n,r,i,s,u,l,c,f,p=t.length;if(!e||!e.state)return h;if(2===(s=(n=e.state).wrap)||1===s&&n.status!==x||n.lookahead)return h;for(1===s&&(e.adler=a(e.adler,t,p,0)),n.wrap=0,p>=n.w_size&&(0===s&&(R(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new o.Buf8(n.w_size),o.arraySet(f,t,p-n.w_size,n.w_size,0),t=f,p=n.w_size),u=e.avail_in,l=e.next_in,c=e.input,e.avail_in=p,e.next_in=0,e.input=t,j(n);n.lookahead>=E;){for(r=n.strstart,i=n.lookahead-(E-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+E-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--i;);n.strstart=r,n.lookahead=E-1,j(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=E-1,n.match_available=0,e.next_in=l,e.input=c,e.avail_in=u,n.wrap=s,d},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,o,i,a,s,u,l,c,d,h,f,p,g,m,v,y,b,D,C,w,E,k,F,x;n=e.state,r=e.next_in,F=e.input,o=r+(e.avail_in-5),i=e.next_out,x=e.output,a=i-(t-e.avail_out),s=i+(e.avail_out-257),u=n.dmax,l=n.wsize,c=n.whave,d=n.wnext,h=n.window,f=n.hold,p=n.bits,g=n.lencode,m=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{p<15&&(f+=F[r++]<<p,p+=8,f+=F[r++]<<p,p+=8),b=g[f&v];t:for(;;){if(f>>>=D=b>>>24,p-=D,0===(D=b>>>16&255))x[i++]=65535&b;else{if(!(16&D)){if(0==(64&D)){b=g[(65535&b)+(f&(1<<D)-1)];continue t}if(32&D){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}C=65535&b,(D&=15)&&(p<D&&(f+=F[r++]<<p,p+=8),C+=f&(1<<D)-1,f>>>=D,p-=D),p<15&&(f+=F[r++]<<p,p+=8,f+=F[r++]<<p,p+=8),b=m[f&y];n:for(;;){if(f>>>=D=b>>>24,p-=D,!(16&(D=b>>>16&255))){if(0==(64&D)){b=m[(65535&b)+(f&(1<<D)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(w=65535&b,p<(D&=15)&&(f+=F[r++]<<p,(p+=8)<D&&(f+=F[r++]<<p,p+=8)),u<(w+=f&(1<<D)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=D,p-=D,(D=i-a)<w){if(c<(D=w-D)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(k=h,(E=0)===d){if(E+=l-D,D<C){for(C-=D;x[i++]=h[E++],--D;);E=i-w,k=x}}else if(d<D){if(E+=l+d-D,(D-=d)<C){for(C-=D;x[i++]=h[E++],--D;);if(E=0,d<C){for(C-=D=d;x[i++]=h[E++],--D;);E=i-w,k=x}}}else if(E+=d-D,D<C){for(C-=D;x[i++]=h[E++],--D;);E=i-w,k=x}for(;2<C;)x[i++]=k[E++],x[i++]=k[E++],x[i++]=k[E++],C-=3;C&&(x[i++]=k[E++],1<C&&(x[i++]=k[E++]))}else{for(E=i-w;x[i++]=x[E++],x[i++]=x[E++],x[i++]=x[E++],2<(C-=3););C&&(x[i++]=x[E++],1<C&&(x[i++]=x[E++]))}break}}break}}while(r<o&&i<s);r-=C=p>>3,f&=(1<<(p-=C<<3))-1,e.next_in=r,e.next_out=i,e.avail_in=r<o?o-r+5:5-(r-o),e.avail_out=i<s?s-i+257:257-(i-s),n.hold=f,n.bits=p}},{}],49:[function(e,t,n){"use strict";var r=e("../utils/common"),o=e("./adler32"),i=e("./crc32"),a=e("./inffast"),s=e("./inftrees"),u=1,l=2,c=0,d=-2,h=1,f=852,p=592;function g(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=h,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(f),t.distcode=t.distdyn=new r.Buf32(p),t.sane=1,t.back=-1,c):d}function y(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,v(e)):d}function b(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?d:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,y(e))):d}function D(e,t){var n,r;return e?(r=new m,(e.state=r).window=null,(n=b(e,t))!==c&&(e.state=null),n):d}var C,w,E=!0;function k(e){if(E){var t;for(C=new r.Buf32(512),w=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(u,e.lens,0,288,C,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(l,e.lens,0,32,w,0,e.work,{bits:5}),E=!1}e.lencode=C,e.lenbits=9,e.distcode=w,e.distbits=5}function F(e,t,n,o){var i,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),o>=a.wsize?(r.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(o<(i=a.wsize-a.wnext)&&(i=o),r.arraySet(a.window,t,n-o,i,a.wnext),(o-=i)?(r.arraySet(a.window,t,n-o,o,0),a.wnext=o,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}n.inflateReset=y,n.inflateReset2=b,n.inflateResetKeep=v,n.inflateInit=function(e){return D(e,15)},n.inflateInit2=D,n.inflate=function(e,t){var n,f,p,m,v,y,b,D,C,w,E,x,A,S,_,I,P,T,N,R,M,B,O,z,L=0,j=new r.Buf8(4),H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return d;12===(n=e.state).mode&&(n.mode=13),v=e.next_out,p=e.output,b=e.avail_out,m=e.next_in,f=e.input,y=e.avail_in,D=n.hold,C=n.bits,w=y,E=b,B=c;e:for(;;)switch(n.mode){case h:if(0===n.wrap){n.mode=13;break}for(;C<16;){if(0===y)break e;y--,D+=f[m++]<<C,C+=8}if(2&n.wrap&&35615===D){j[n.check=0]=255&D,j[1]=D>>>8&255,n.check=i(n.check,j,2,0),C=D=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&D)<<8)+(D>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&D)){e.msg="unknown compression method",n.mode=30;break}if(C-=4,M=8+(15&(D>>>=4)),0===n.wbits)n.wbits=M;else if(M>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<M,e.adler=n.check=1,n.mode=512&D?10:12,C=D=0;break;case 2:for(;C<16;){if(0===y)break e;y--,D+=f[m++]<<C,C+=8}if(n.flags=D,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=D>>8&1),512&n.flags&&(j[0]=255&D,j[1]=D>>>8&255,n.check=i(n.check,j,2,0)),C=D=0,n.mode=3;case 3:for(;C<32;){if(0===y)break e;y--,D+=f[m++]<<C,C+=8}n.head&&(n.head.time=D),512&n.flags&&(j[0]=255&D,j[1]=D>>>8&255,j[2]=D>>>16&255,j[3]=D>>>24&255,n.check=i(n.check,j,4,0)),C=D=0,n.mode=4;case 4:for(;C<16;){if(0===y)break e;y--,D+=f[m++]<<C,C+=8}n.head&&(n.head.xflags=255&D,n.head.os=D>>8),512&n.flags&&(j[0]=255&D,j[1]=D>>>8&255,n.check=i(n.check,j,2,0)),C=D=0,n.mode=5;case 5:if(1024&n.flags){for(;C<16;){if(0===y)break e;y--,D+=f[m++]<<C,C+=8}n.length=D,n.head&&(n.head.extra_len=D),512&n.flags&&(j[0]=255&D,j[1]=D>>>8&255,n.check=i(n.check,j,2,0)),C=D=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(y<(x=n.length)&&(x=y),x&&(n.head&&(M=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,f,m,x,M)),512&n.flags&&(n.check=i(n.check,f,x,m)),y-=x,m+=x,n.length-=x),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===y)break e;for(x=0;M=f[m+x++],n.head&&M&&n.length<65536&&(n.head.name+=String.fromCharCode(M)),M&&x<y;);if(512&n.flags&&(n.check=i(n.check,f,x,m)),y-=x,m+=x,M)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===y)break e;for(x=0;M=f[m+x++],n.head&&M&&n.length<65536&&(n.head.comment+=String.fromCharCode(M)),M&&x<y;);if(512&n.flags&&(n.check=i(n.check,f,x,m)),y-=x,m+=x,M)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;C<16;){if(0===y)break e;y--,D+=f[m++]<<C,C+=8}if(D!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}C=D=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;C<32;){if(0===y)break e;y--,D+=f[m++]<<C,C+=8}e.adler=n.check=g(D),C=D=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=v,e.avail_out=b,e.next_in=m,e.avail_in=y,n.hold=D,n.bits=C,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){D>>>=7&C,C-=7&C,n.mode=27;break}for(;C<3;){if(0===y)break e;y--,D+=f[m++]<<C,C+=8}switch(n.last=1&D,C-=1,3&(D>>>=1)){case 0:n.mode=14;break;case 1:if(k(n),n.mode=20,6!==t)break;D>>>=2,C-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}D>>>=2,C-=2;break;case 14:for(D>>>=7&C,C-=7&C;C<32;){if(0===y)break e;y--,D+=f[m++]<<C,C+=8}if((65535&D)!=(D>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&D,C=D=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(x=n.length){if(y<x&&(x=y),b<x&&(x=b),0===x)break e;r.arraySet(p,f,m,x,v),y-=x,m+=x,b-=x,v+=x,n.length-=x;break}n.mode=12;break;case 17:for(;C<14;){if(0===y)break e;y--,D+=f[m++]<<C,C+=8}if(n.nlen=257+(31&D),D>>>=5,C-=5,n.ndist=1+(31&D),D>>>=5,C-=5,n.ncode=4+(15&D),D>>>=4,C-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;C<3;){if(0===y)break e;y--,D+=f[m++]<<C,C+=8}n.lens[H[n.have++]]=7&D,D>>>=3,C-=3}for(;n.have<19;)n.lens[H[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,O={bits:n.lenbits},B=s(0,n.lens,0,19,n.lencode,0,n.work,O),n.lenbits=O.bits,B){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;I=(L=n.lencode[D&(1<<n.lenbits)-1])>>>16&255,P=65535&L,!((_=L>>>24)<=C);){if(0===y)break e;y--,D+=f[m++]<<C,C+=8}if(P<16)D>>>=_,C-=_,n.lens[n.have++]=P;else{if(16===P){for(z=_+2;C<z;){if(0===y)break e;y--,D+=f[m++]<<C,C+=8}if(D>>>=_,C-=_,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}M=n.lens[n.have-1],x=3+(3&D),D>>>=2,C-=2}else if(17===P){for(z=_+3;C<z;){if(0===y)break e;y--,D+=f[m++]<<C,C+=8}C-=_,M=0,x=3+(7&(D>>>=_)),D>>>=3,C-=3}else{for(z=_+7;C<z;){if(0===y)break e;y--,D+=f[m++]<<C,C+=8}C-=_,M=0,x=11+(127&(D>>>=_)),D>>>=7,C-=7}if(n.have+x>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;x--;)n.lens[n.have++]=M}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,O={bits:n.lenbits},B=s(u,n.lens,0,n.nlen,n.lencode,0,n.work,O),n.lenbits=O.bits,B){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,O={bits:n.distbits},B=s(l,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,O),n.distbits=O.bits,B){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=y&&258<=b){e.next_out=v,e.avail_out=b,e.next_in=m,e.avail_in=y,n.hold=D,n.bits=C,a(e,E),v=e.next_out,p=e.output,b=e.avail_out,m=e.next_in,f=e.input,y=e.avail_in,D=n.hold,C=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;I=(L=n.lencode[D&(1<<n.lenbits)-1])>>>16&255,P=65535&L,!((_=L>>>24)<=C);){if(0===y)break e;y--,D+=f[m++]<<C,C+=8}if(I&&0==(240&I)){for(T=_,N=I,R=P;I=(L=n.lencode[R+((D&(1<<T+N)-1)>>T)])>>>16&255,P=65535&L,!(T+(_=L>>>24)<=C);){if(0===y)break e;y--,D+=f[m++]<<C,C+=8}D>>>=T,C-=T,n.back+=T}if(D>>>=_,C-=_,n.back+=_,n.length=P,0===I){n.mode=26;break}if(32&I){n.back=-1,n.mode=12;break}if(64&I){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&I,n.mode=22;case 22:if(n.extra){for(z=n.extra;C<z;){if(0===y)break e;y--,D+=f[m++]<<C,C+=8}n.length+=D&(1<<n.extra)-1,D>>>=n.extra,C-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;I=(L=n.distcode[D&(1<<n.distbits)-1])>>>16&255,P=65535&L,!((_=L>>>24)<=C);){if(0===y)break e;y--,D+=f[m++]<<C,C+=8}if(0==(240&I)){for(T=_,N=I,R=P;I=(L=n.distcode[R+((D&(1<<T+N)-1)>>T)])>>>16&255,P=65535&L,!(T+(_=L>>>24)<=C);){if(0===y)break e;y--,D+=f[m++]<<C,C+=8}D>>>=T,C-=T,n.back+=T}if(D>>>=_,C-=_,n.back+=_,64&I){e.msg="invalid distance code",n.mode=30;break}n.offset=P,n.extra=15&I,n.mode=24;case 24:if(n.extra){for(z=n.extra;C<z;){if(0===y)break e;y--,D+=f[m++]<<C,C+=8}n.offset+=D&(1<<n.extra)-1,D>>>=n.extra,C-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===b)break e;if(x=E-b,n.offset>x){if((x=n.offset-x)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}A=x>n.wnext?(x-=n.wnext,n.wsize-x):n.wnext-x,x>n.length&&(x=n.length),S=n.window}else S=p,A=v-n.offset,x=n.length;for(b<x&&(x=b),b-=x,n.length-=x;p[v++]=S[A++],--x;);0===n.length&&(n.mode=21);break;case 26:if(0===b)break e;p[v++]=n.length,b--,n.mode=21;break;case 27:if(n.wrap){for(;C<32;){if(0===y)break e;y--,D|=f[m++]<<C,C+=8}if(E-=b,e.total_out+=E,n.total+=E,E&&(e.adler=n.check=n.flags?i(n.check,p,E,v-E):o(n.check,p,E,v-E)),E=b,(n.flags?D:g(D))!==n.check){e.msg="incorrect data check",n.mode=30;break}C=D=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;C<32;){if(0===y)break e;y--,D+=f[m++]<<C,C+=8}if(D!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}C=D=0}n.mode=29;case 29:B=1;break e;case 30:B=-3;break e;case 31:return-4;default:return d}return e.next_out=v,e.avail_out=b,e.next_in=m,e.avail_in=y,n.hold=D,n.bits=C,(n.wsize||E!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&F(e,e.output,e.next_out,E-e.avail_out)?(n.mode=31,-4):(w-=e.avail_in,E-=e.avail_out,e.total_in+=w,e.total_out+=E,n.total+=E,n.wrap&&E&&(e.adler=n.check=n.flags?i(n.check,p,E,e.next_out-E):o(n.check,p,E,e.next_out-E)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==w&&0===E||4===t)&&B===c&&(B=-5),B)},n.inflateEnd=function(e){if(!e||!e.state)return d;var t=e.state;return t.window&&(t.window=null),e.state=null,c},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?d:((n.head=t).done=!1,c):d},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?d:11===n.mode&&o(1,t,r,0)!==n.check?-3:F(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,c):d},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var r=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,u,l,c,d,h){var f,p,g,m,v,y,b,D,C,w=h.bits,E=0,k=0,F=0,x=0,A=0,S=0,_=0,I=0,P=0,T=0,N=null,R=0,M=new r.Buf16(16),B=new r.Buf16(16),O=null,z=0;for(E=0;E<=15;E++)M[E]=0;for(k=0;k<u;k++)M[t[n+k]]++;for(A=w,x=15;1<=x&&0===M[x];x--);if(x<A&&(A=x),0===x)return l[c++]=20971520,l[c++]=20971520,h.bits=1,0;for(F=1;F<x&&0===M[F];F++);for(A<F&&(A=F),E=I=1;E<=15;E++)if(I<<=1,(I-=M[E])<0)return-1;if(0<I&&(0===e||1!==x))return-1;for(B[1]=0,E=1;E<15;E++)B[E+1]=B[E]+M[E];for(k=0;k<u;k++)0!==t[n+k]&&(d[B[t[n+k]]++]=k);if(y=0===e?(N=O=d,19):1===e?(N=o,R-=257,O=i,z-=257,256):(N=a,O=s,-1),E=F,v=c,_=k=T=0,g=-1,m=(P=1<<(S=A))-1,1===e&&852<P||2===e&&592<P)return 1;for(;;){for(b=E-_,C=d[k]<y?(D=0,d[k]):d[k]>y?(D=O[z+d[k]],N[R+d[k]]):(D=96,0),f=1<<E-_,F=p=1<<S;l[v+(T>>_)+(p-=f)]=b<<24|D<<16|C,0!==p;);for(f=1<<E-1;T&f;)f>>=1;if(0!==f?(T&=f-1,T+=f):T=0,k++,0==--M[E]){if(E===x)break;E=t[n+d[k]]}if(A<E&&(T&m)!==g){for(0===_&&(_=A),v+=F,I=1<<(S=E-_);S+_<x&&!((I-=M[S+_])<=0);)S++,I<<=1;if(P+=1<<S,1===e&&852<P||2===e&&592<P)return 1;l[g=T&m]=A<<24|S<<16|v-c}}return 0!==T&&(l[v+T]=E-_<<24|64<<16),h.bits=A,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var r=e("../utils/common"),o=0,i=1;function a(e){for(var t=e.length;0<=--t;)e[t]=0}var s=0,u=29,l=256,c=l+1+u,d=30,h=19,f=2*c+1,p=15,g=16,m=7,v=256,y=16,b=17,D=18,C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],w=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(c+2));a(F);var x=new Array(2*d);a(x);var A=new Array(512);a(A);var S=new Array(256);a(S);var _=new Array(u);a(_);var I,P,T,N=new Array(d);function R(e,t,n,r,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=e&&e.length}function M(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function B(e){return e<256?A[e]:A[256+(e>>>7)]}function O(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function z(e,t,n){e.bi_valid>g-n?(e.bi_buf|=t<<e.bi_valid&65535,O(e,e.bi_buf),e.bi_buf=t>>g-e.bi_valid,e.bi_valid+=n-g):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function L(e,t,n){z(e,n[2*t],n[2*t+1])}function j(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function H(e,t,n){var r,o,i=new Array(p+1),a=0;for(r=1;r<=p;r++)i[r]=a=a+n[r-1]<<1;for(o=0;o<=t;o++){var s=e[2*o+1];0!==s&&(e[2*o]=j(i[s]++,s))}}function U(e){var t;for(t=0;t<c;t++)e.dyn_ltree[2*t]=0;for(t=0;t<d;t++)e.dyn_dtree[2*t]=0;for(t=0;t<h;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*v]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function q(e){8<e.bi_valid?O(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function W(e,t,n,r){var o=2*t,i=2*n;return e[o]<e[i]||e[o]===e[i]&&r[t]<=r[n]}function V(e,t,n){for(var r=e.heap[n],o=n<<1;o<=e.heap_len&&(o<e.heap_len&&W(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!W(t,r,e.heap[o],e.depth));)e.heap[n]=e.heap[o],n=o,o<<=1;e.heap[n]=r}function K(e,t,n){var r,o,i,a,s=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],o=e.pending_buf[e.l_buf+s],s++,0===r?L(e,o,t):(L(e,(i=S[o])+l+1,t),0!==(a=C[i])&&z(e,o-=_[i],a),L(e,i=B(--r),n),0!==(a=w[i])&&z(e,r-=N[i],a)),s<e.last_lit;);L(e,v,t)}function G(e,t){var n,r,o,i=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=f,n=0;n<u;n++)0!==i[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(o=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[o]=0,e.opt_len--,s&&(e.static_len-=a[2*o+1]);for(t.max_code=l,n=e.heap_len>>1;1<=n;n--)V(e,i,n);for(o=u;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],V(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,i[2*o]=i[2*n]+i[2*r],e.depth[o]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,i[2*n+1]=i[2*r+1]=o,e.heap[1]=o++,V(e,i,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,o,i,a,s,u=t.dyn_tree,l=t.max_code,c=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,g=t.stat_desc.extra_base,m=t.stat_desc.max_length,v=0;for(i=0;i<=p;i++)e.bl_count[i]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<f;n++)m<(i=u[2*u[2*(r=e.heap[n])+1]+1]+1)&&(i=m,v++),u[2*r+1]=i,l<r||(e.bl_count[i]++,a=0,g<=r&&(a=h[r-g]),s=u[2*r],e.opt_len+=s*(i+a),d&&(e.static_len+=s*(c[2*r+1]+a)));if(0!==v){do{for(i=m-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[m]--,v-=2}while(0<v);for(i=m;0!==i;i--)for(r=e.bl_count[i];0!==r;)l<(o=e.heap[--n])||(u[2*o+1]!==i&&(e.opt_len+=(i-u[2*o+1])*u[2*o],u[2*o+1]=i),r--)}}(e,t),H(i,l,e.bl_count)}function Y(e,t,n){var r,o,i=-1,a=t[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)o=a,a=t[2*(r+1)+1],++s<u&&o===a||(s<l?e.bl_tree[2*o]+=s:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[2*y]++):s<=10?e.bl_tree[2*b]++:e.bl_tree[2*D]++,i=o,l=(s=0)===a?(u=138,3):o===a?(u=6,3):(u=7,4))}function Z(e,t,n){var r,o,i=-1,a=t[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),r=0;r<=n;r++)if(o=a,a=t[2*(r+1)+1],!(++s<u&&o===a)){if(s<l)for(;L(e,o,e.bl_tree),0!=--s;);else 0!==o?(o!==i&&(L(e,o,e.bl_tree),s--),L(e,y,e.bl_tree),z(e,s-3,2)):s<=10?(L(e,b,e.bl_tree),z(e,s-3,3)):(L(e,D,e.bl_tree),z(e,s-11,7));i=o,l=(s=0)===a?(u=138,3):o===a?(u=6,3):(u=7,4)}}a(N);var Q=!1;function X(e,t,n,o){z(e,(s<<1)+(o?1:0),3),function(e,t,n,o){q(e),o&&(O(e,n),O(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}n._tr_init=function(e){Q||(function(){var e,t,n,r,o,i=new Array(p+1);for(r=n=0;r<u-1;r++)for(_[r]=n,e=0;e<1<<C[r];e++)S[n++]=r;for(S[n-1]=r,r=o=0;r<16;r++)for(N[r]=o,e=0;e<1<<w[r];e++)A[o++]=r;for(o>>=7;r<d;r++)for(N[r]=o<<7,e=0;e<1<<w[r]-7;e++)A[256+o++]=r;for(t=0;t<=p;t++)i[t]=0;for(e=0;e<=143;)F[2*e+1]=8,e++,i[8]++;for(;e<=255;)F[2*e+1]=9,e++,i[9]++;for(;e<=279;)F[2*e+1]=7,e++,i[7]++;for(;e<=287;)F[2*e+1]=8,e++,i[8]++;for(H(F,c+1,i),e=0;e<d;e++)x[2*e+1]=5,x[2*e]=j(e,5);I=new R(F,C,l+1,c,p),P=new R(x,w,0,d,p),T=new R(new Array(0),E,0,h,m)}(),Q=!0),e.l_desc=new M(e.dyn_ltree,I),e.d_desc=new M(e.dyn_dtree,P),e.bl_desc=new M(e.bl_tree,T),e.bi_buf=0,e.bi_valid=0,U(e)},n._tr_stored_block=X,n._tr_flush_block=function(e,t,n,r){var a,s,u=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return o;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return i;for(t=32;t<l;t++)if(0!==e.dyn_ltree[2*t])return i;return o}(e)),G(e,e.l_desc),G(e,e.d_desc),u=function(e){var t;for(Y(e,e.dyn_ltree,e.l_desc.max_code),Y(e,e.dyn_dtree,e.d_desc.max_code),G(e,e.bl_desc),t=h-1;3<=t&&0===e.bl_tree[2*k[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=a&&(a=s)):a=s=n+5,n+4<=a&&-1!==t?X(e,t,n,r):4===e.strategy||s===a?(z(e,2+(r?1:0),3),K(e,F,x)):(z(e,4+(r?1:0),3),function(e,t,n,r){var o;for(z(e,t-257,5),z(e,n-1,5),z(e,r-4,4),o=0;o<r;o++)z(e,e.bl_tree[2*k[o]+1],3);Z(e,e.dyn_ltree,t-1),Z(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,u+1),K(e,e.dyn_ltree,e.dyn_dtree)),U(e),r&&q(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(S[n]+l+1)]++,e.dyn_dtree[2*B(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){z(e,2,3),L(e,v,F),function(e){16===e.bi_valid?(O(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(e,t){"use strict";if(!e.setImmediate){var n,r,o,i,a=1,s={},u=!1,l=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,n="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick((function(){h(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(i="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",f,!1):e.attachEvent("onmessage",f),function(t){e.postMessage(i+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){h(e.data)},function(e){o.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(r=l.documentElement,function(e){var t=l.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(h,0,e)},c.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var o={callback:e,args:t};return s[a]=o,n(a),a++},c.clearImmediate=d}function d(e){delete s[e]}function h(e){if(u)setTimeout(h,0,e);else{var n=s[e];if(n){u=!0;try{!function(e){var n=e.callback,r=e.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(t,r)}}(n)}finally{d(e),u=!1}}}}function f(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&h(+t.data.slice(i.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},6283:(e,t,n)=>{var r={"./appAdmin.md":[781,781],"./authAdmin.md":[4938,4938],"./azureDevOpsAdmin.md":[2434,2434],"./cloudAppAdmin.md":[1584,1584],"./compromisedSP.md":[1858,1858],"./conditionalAccessAdmin.md":[7742,7742],"./devOpsPipeline.md":[5720,5720],"./directGlobalAdminTakeover.md":[615,615],"./directoryWriters.md":[2490,2490],"./disableDefenderEDR.md":[3271,3271],"./domainNameAdmin.md":[3193,3193],"./exchangeAdmin.md":[2323,2323],"./externalIdpAdmin.md":[6598,6598],"./federatedDomainInjection.md":[5722,5722],"./globalAdmin.md":[4265,4265],"./graphAADGroup.md":[2970,2970],"./graphAuthMethod.md":[6568,6568],"./graphCAP.md":[4803,4803],"./graphDeleteUser.md":[995,995],"./graphDisableAccount.md":[4940,4940],"./graphOther.md":[9741,9741],"./graphPrivAADGroup.md":[7011,7011],"./graphRoleAssignment.md":[506,506],"./graphRoleManagement.md":[1752,1752],"./groupGraph.md":[3122,3122],"./groupsAdmin.md":[5224,5224],"./hasGraphPermission.md":[2404,2404],"./helpdeskAdmin.md":[2394,2394],"./hybridIdAdmin1.md":[8074,8074],"./hybridIdAdmin2.md":[9139,9139],"./identityGovernanceAdmin.md":[2350,2350],"./intuneAdmin.md":[3843,3843],"./knowledgeAdmin.md":[7348,7348],"./knowledgeManager.md":[4652,4652],"./lifecycleWorkflowsAdmin.md":[2414,2414],"./managedIdentity.md":[1672,1672],"./partnerTier1Support.md":[7199,7199],"./partnerTier1Support2.md":[1521,1521],"./partnerTier2Support.md":[8132,8132],"./passwordAdmin.md":[543,543],"./passwordResetSPOwner.md":[4129,4129],"./privilegedAuthAdmin.md":[9225,9225],"./privilegedAzureAccess.md":[1937,1937],"./privilegedRoleAdmin.md":[6887,6887],"./securityAdmin.md":[6126,6126],"./sharePointAdmin.md":[8417,8417],"./teamsAdmin.md":[7954,7954],"./tenantHijack.md":[5163,5163],"./tenantLockoutCAP.md":[3156,3156],"./tokenTheft.md":[1933,1933],"./user.md":[8940,8940],"./userAdmin1.md":[9522,9522],"./userAdmin2.md":[5131,5131],"./win365Admin.md":[1710,1710],"./yammerAdmin.md":[8325,8325]};function o(e){if(!n.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return n.e(t[1]).then((()=>n.t(o,17)))}o.keys=()=>Object.keys(r),o.id=6283,e.exports=o},6929:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),o=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function v(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case i:case s:case a:case h:case f:return e;default:switch(e=e&&e.$$typeof){case c:case l:case d:case g:case p:case u:return e;default:return t}}case o:return t}}}n=Symbol.for("react.module.reference"),t.ContextConsumer=l,t.ContextProvider=u,t.Element=r,t.ForwardRef=d,t.Fragment=i,t.Lazy=g,t.Memo=p,t.Portal=o,t.Profiler=s,t.StrictMode=a,t.Suspense=h,t.SuspenseList=f,t.isAsyncMode=function(){return!1},t.isConcurrentMode=function(){return!1},t.isContextConsumer=function(e){return v(e)===l},t.isContextProvider=function(e){return v(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return v(e)===d},t.isFragment=function(e){return v(e)===i},t.isLazy=function(e){return v(e)===g},t.isMemo=function(e){return v(e)===p},t.isPortal=function(e){return v(e)===o},t.isProfiler=function(e){return v(e)===s},t.isStrictMode=function(e){return v(e)===a},t.isSuspense=function(e){return v(e)===h},t.isSuspenseList=function(e){return v(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===s||e===a||e===h||e===f||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===p||e.$$typeof===u||e.$$typeof===l||e.$$typeof===d||e.$$typeof===n||void 0!==e.getModuleId)},t.typeOf=v},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>i(u,n))l<o&&0>i(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<o&&0>i(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function D(e){for(var t=r(c);null!==t;){if(null===t.callback)o(c);else{if(!(t.startTime<=e))break;o(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function C(e){if(m=!1,D(e),!g)if(null!==r(l))g=!0,N(w);else{var t=r(c);null!==t&&R(C,t.startTime-e)}}function w(e,n){g=!1,m&&(m=!1,y(x),x=-1),p=!0;var i=f;try{for(D(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!_());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(l)&&o(l),D(n)}else o(l);h=r(l)}if(null!==h)var u=!0;else{var d=r(c);null!==d&&R(C,d.startTime-n),u=!1}return u}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,k=!1,F=null,x=-1,A=5,S=-1;function _(){return!(t.unstable_now()-S<A)}function I(){if(null!==F){var e=t.unstable_now();S=e;var n=!0;try{n=F(!0,e)}finally{n?E():(k=!1,F=null)}}else k=!1}if("function"===typeof b)E=function(){b(I)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,T=P.port2;P.port1.onmessage=I,E=function(){T.postMessage(null)}}else E=function(){v(I,0)};function N(e){F=e,k||(k=!0,E())}function R(e,n){x=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,N(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,n(c,e),null===r(l)&&e===r(c)&&(m?(y(x),x=-1):m=!0,R(C,i-a))):(e.sortIndex=s,n(l,e),g||p||(g=!0,N(w))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8443:(e,t,n)=>{"use strict";e.exports=n(9717)},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},9461:(e,t,n)=>{"use strict";e.exports=n(2330)},9717:(e,t,n)=>{"use strict";var r=n(5043),o=n(9461);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=o.useSyncExternalStore,s=r.useRef,u=r.useEffect,l=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var d=s(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=l((function(){function e(e){if(!u){if(u=!0,a=e,e=r(e),void 0!==o&&h.hasValue){var t=h.value;if(o(t,e))return s=t}return s=e}if(t=s,i(a,e))return t;var n=r(e);return void 0!==o&&o(t,n)?(a=e,t):(a=e,s=n)}var a,s,u=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,o]);var f=a(e,d[0],d[1]);return u((function(){h.hasValue=!0,h.value=f}),[f]),c(f),f}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{506:"04c00a3e",543:"712579f7",615:"7061ce74",781:"a20e8286",995:"5c5f6169",1521:"0fa87d75",1584:"4d2e6564",1672:"207171c4",1710:"7d5b1319",1752:"035533e0",1858:"3c960290",1933:"7ee3bccf",1937:"f6c4a1d3",2323:"ecbdf481",2350:"b741135c",2394:"c3aa78bb",2404:"5cb6edf0",2414:"21c4e794",2434:"8da0b0d8",2490:"32b35ad8",2970:"9ac4b12e",3122:"f1fd8058",3156:"95a0b996",3193:"2064027b",3271:"4cede943",3843:"c8a9d07b",4129:"ebf3db2d",4265:"be16960f",4652:"4193b4ce",4803:"6f7cb9e9",4938:"a1262530",4940:"f3f4d8df",5131:"b8695b22",5163:"163708ff",5224:"7e84c23b",5720:"a8b5e4cb",5722:"fc60e5fc",6126:"f2770b45",6453:"0aee604b",6568:"4940f003",6598:"f7000b2d",6887:"1d272979",7011:"3fd8101f",7199:"6886ffb2",7348:"b0160fe7",7742:"1671284a",7954:"b202fdf0",8074:"ce300a96",8132:"62608460",8325:"676d6932",8417:"7be7ca30",8940:"51231f02",9139:"d0cab6d9",9225:"ec92c880",9522:"beb460c6",9741:"bd6f8de3"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="entra-privileged-roles:";n.l=(r,o,i,a)=>{if(e[r])e[r].push(o);else{var s,u;if(void 0!==i)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[o];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(f);var o=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),u&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/attack-paths/",(()=>{var e={8792:0};n.f.j=(t,r)=>{var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var i=new Promise(((n,r)=>o=e[t]=[n,r]));r.push(o[2]=i);var a=n.p+n.u(t),s=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,o[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var o,i,a=r[0],s=r[1],u=r[2],l=0;if(a.some((t=>0!==e[t]))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(u)u(n)}for(t&&t(r);l<a.length;l++)i=a[l],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkentra_privileged_roles=self.webpackChunkentra_privileged_roles||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{attentionMarkers:()=>Rc,contentInitial:()=>Sc,disable:()=>Mc,document:()=>Ac,flow:()=>Ic,flowInitial:()=>_c,insideSpan:()=>Nc,string:()=>Pc,text:()=>Tc});var t={};n.r(t),n.d(t,{boolean:()=>_d,booleanish:()=>Id,commaOrSpaceSeparated:()=>Md,commaSeparated:()=>Rd,number:()=>Td,overloadedBoolean:()=>Pd,spaceSeparated:()=>Nd});var r=n(5043),o=n(4391);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function s(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var d=n(579);function h(e){if("string"===typeof e||"number"===typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,r=0;r<e.length;r++)""!==(n=h(e[r]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var f={value:()=>{}};function p(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new g(r)}function g(e){this._=e}function m(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function v(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=f,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}g.prototype=p.prototype={constructor:g,on:function(e,t){var n,r,o=this._,i=(r=o,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),a=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=i[a]).type)o[n]=v(o[n],e.name,t);else if(null==t)for(n in o)o[n]=v(o[n],e.name,null);return this}for(;++a<s;)if((n=(e=i[a]).type)&&(n=m(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new g(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};const y=p;function b(){}function D(e){return null==e?b:function(){return this.querySelector(e)}}function C(){return[]}function w(e){return null==e?C:function(){return this.querySelectorAll(e)}}function E(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function k(e){return function(){return this.matches(e)}}function F(e){return function(t){return t.matches(e)}}var x=Array.prototype.find;function A(){return this.firstElementChild}var S=Array.prototype.filter;function _(){return Array.from(this.children)}function I(e){return new Array(e.length)}function P(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function T(e,t,n,r,o,i){for(var a,s=0,u=t.length,l=i.length;s<l;++s)(a=t[s])?(a.__data__=i[s],r[s]=a):n[s]=new P(e,i[s]);for(;s<u;++s)(a=t[s])&&(o[s]=a)}function N(e,t,n,r,o,i,a){var s,u,l,c=new Map,d=t.length,h=i.length,f=new Array(d);for(s=0;s<d;++s)(u=t[s])&&(f[s]=l=a.call(u,u.__data__,s,t)+"",c.has(l)?o[s]=u:c.set(l,u));for(s=0;s<h;++s)l=a.call(e,i[s],s,i)+"",(u=c.get(l))?(r[s]=u,u.__data__=i[s],c.delete(l)):n[s]=new P(e,i[s]);for(s=0;s<d;++s)(u=t[s])&&c.get(f[s])===u&&(o[s]=u)}function R(e){return e.__data__}function M(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function B(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}P.prototype={constructor:P,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var O="http://www.w3.org/1999/xhtml";const z={svg:"http://www.w3.org/2000/svg",xhtml:O,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function L(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),z.hasOwnProperty(t)?{space:z[t],local:e}:e}function j(e){return function(){this.removeAttribute(e)}}function H(e){return function(){this.removeAttributeNS(e.space,e.local)}}function U(e,t){return function(){this.setAttribute(e,t)}}function q(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function W(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function V(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function K(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function G(e){return function(){this.style.removeProperty(e)}}function Y(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Z(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Q(e,t){return e.style.getPropertyValue(t)||K(e).getComputedStyle(e,null).getPropertyValue(t)}function X(e){return function(){delete this[e]}}function $(e,t){return function(){this[e]=t}}function J(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function ee(e){return e.trim().split(/^|\s+/)}function te(e){return e.classList||new ne(e)}function ne(e){this._node=e,this._names=ee(e.getAttribute("class")||"")}function re(e,t){for(var n=te(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function oe(e,t){for(var n=te(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function ie(e){return function(){re(this,e)}}function ae(e){return function(){oe(this,e)}}function se(e,t){return function(){(t.apply(this,arguments)?re:oe)(this,e)}}function ue(){this.textContent=""}function le(e){return function(){this.textContent=e}}function ce(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function de(){this.innerHTML=""}function he(e){return function(){this.innerHTML=e}}function fe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function pe(){this.nextSibling&&this.parentNode.appendChild(this)}function ge(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function me(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===O&&t.documentElement.namespaceURI===O?t.createElement(e):t.createElementNS(n,e)}}function ve(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ye(e){var t=L(e);return(t.local?ve:me)(t)}function be(){return null}function De(){var e=this.parentNode;e&&e.removeChild(this)}function Ce(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function we(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ee(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function ke(e,t,n){return function(){var r,o=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(o)for(var a=0,s=o.length;a<s;++a)if((r=o[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),void(r.value=t);this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function Fe(e,t,n){var r=K(e),o=r.CustomEvent;"function"===typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function xe(e,t){return function(){return Fe(this,e,t)}}function Ae(e,t){return function(){return Fe(this,e,t.apply(this,arguments))}}ne.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Se=[null];function _e(e,t){this._groups=e,this._parents=t}function Ie(){return new _e([[document.documentElement]],Se)}_e.prototype=Ie.prototype={constructor:_e,select:function(e){"function"!==typeof e&&(e=D(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a,s=t[o],u=s.length,l=r[o]=new Array(u),c=0;c<u;++c)(i=s[c])&&(a=e.call(i,i.__data__,c,s))&&("__data__"in i&&(a.__data__=i.__data__),l[c]=a);return new _e(r,this._parents)},selectAll:function(e){e="function"===typeof e?E(e):w(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var a,s=t[i],u=s.length,l=0;l<u;++l)(a=s[l])&&(r.push(e.call(a,a.__data__,l,s)),o.push(a));return new _e(r,o)},selectChild:function(e){return this.select(null==e?A:function(e){return function(){return x.call(this.children,e)}}("function"===typeof e?e:F(e)))},selectChildren:function(e){return this.selectAll(null==e?_:function(e){return function(){return S.call(this.children,e)}}("function"===typeof e?e:F(e)))},filter:function(e){"function"!==typeof e&&(e=k(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a=t[o],s=a.length,u=r[o]=[],l=0;l<s;++l)(i=a[l])&&e.call(i,i.__data__,l,a)&&u.push(i);return new _e(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,R);var n,r=t?N:T,o=this._parents,i=this._groups;"function"!==typeof e&&(n=e,e=function(){return n});for(var a=i.length,s=new Array(a),u=new Array(a),l=new Array(a),c=0;c<a;++c){var d=o[c],h=i[c],f=h.length,p=M(e.call(d,d&&d.__data__,c,o)),g=p.length,m=u[c]=new Array(g),v=s[c]=new Array(g);r(d,h,m,v,l[c]=new Array(f),p,t);for(var y,b,D=0,C=0;D<g;++D)if(y=m[D]){for(D>=C&&(C=D+1);!(b=v[C])&&++C<g;);y._next=b||null}}return(s=new _e(s,o))._enter=u,s._exit=l,s},enter:function(){return new _e(this._enter||this._groups.map(I),this._parents)},exit:function(){return new _e(this._exit||this._groups.map(I),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,i=this.exit();return"function"===typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,a=Math.min(o,i),s=new Array(o),u=0;u<a;++u)for(var l,c=n[u],d=r[u],h=c.length,f=s[u]=new Array(h),p=0;p<h;++p)(l=c[p]||d[p])&&(f[p]=l);for(;u<o;++u)s[u]=n[u];return new _e(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],i=o.length-1,a=o[i];--i>=0;)(r=o[i])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=B);for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a,s=n[i],u=s.length,l=o[i]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(t)}return new _e(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,i=t[n],a=0,s=i.length;a<s;++a)(o=i[a])&&e.call(o,o.__data__,a,i);return this},attr:function(e,t){var n=L(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?H:j:"function"===typeof t?n.local?V:W:n.local?q:U)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?G:"function"===typeof t?Z:Y)(e,t,null==n?"":n)):Q(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?X:"function"===typeof t?J:$)(e,t)):this.node()[e]},classed:function(e,t){var n=ee(e+"");if(arguments.length<2){for(var r=te(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"===typeof t?se:t?ie:ae)(n,t))},text:function(e){return arguments.length?this.each(null==e?ue:("function"===typeof e?ce:le)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?de:("function"===typeof e?fe:he)(e)):this.node().innerHTML},raise:function(){return this.each(pe)},lower:function(){return this.each(ge)},append:function(e){var t="function"===typeof e?e:ye(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:ye(e),r=null==t?be:"function"===typeof t?t:D(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(De)},clone:function(e){return this.select(e?we:Ce)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,i=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=i.length;if(!(arguments.length<2)){for(s=t?ke:Ee,r=0;r<a;++r)this.each(s(i[r],t,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<a;++r)if((o=i[r]).type===u.type&&o.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"===typeof t?Ae:xe)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],i=0,a=o.length;i<a;++i)(r=o[i])&&(yield r)}};const Pe=Ie;function Te(e){return"string"===typeof e?new _e([[document.querySelector(e)]],[document.documentElement]):new _e([[e]],Se)}function Ne(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const Re={passive:!1},Me={capture:!0,passive:!1};function Be(e){e.stopImmediatePropagation()}function Oe(e){e.preventDefault(),e.stopImmediatePropagation()}function ze(e){var t=e.document.documentElement,n=Te(e).on("dragstart.drag",Oe,Me);"onselectstart"in t?n.on("selectstart.drag",Oe,Me):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Le(e,t){var n=e.document.documentElement,r=Te(e).on("dragstart.drag",null);t&&(r.on("click.drag",Oe,Me),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const je=e=>()=>e;function He(e,t){let{sourceEvent:n,subject:r,target:o,identifier:i,active:a,x:s,y:u,dx:l,dy:c,dispatch:d}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}function Ue(e){return!e.ctrlKey&&!e.button}function qe(){return this.parentNode}function We(e,t){return null==t?{x:e.x,y:e.y}:t}function Ve(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ke(){var e,t,n,r,o=Ue,i=qe,a=We,s=Ve,u={},l=y("start","drag","end"),c=0,d=0;function h(e){e.on("mousedown.drag",f).filter(s).on("touchstart.drag",m).on("touchmove.drag",v,Re).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(a,s){if(!r&&o.call(this,a,s)){var u=D(this,i.call(this,a,s),a,s,"mouse");u&&(Te(a.view).on("mousemove.drag",p,Me).on("mouseup.drag",g,Me),ze(a.view),Be(a),n=!1,e=a.clientX,t=a.clientY,u("start",a))}}function p(r){if(Oe(r),!n){var o=r.clientX-e,i=r.clientY-t;n=o*o+i*i>d}u.mouse("drag",r)}function g(e){Te(e.view).on("mousemove.drag mouseup.drag",null),Le(e.view,n),Oe(e),u.mouse("end",e)}function m(e,t){if(o.call(this,e,t)){var n,r,a=e.changedTouches,s=i.call(this,e,t),u=a.length;for(n=0;n<u;++n)(r=D(this,s,e,t,a[n].identifier,a[n]))&&(Be(e),r("start",e,a[n]))}}function v(e){var t,n,r=e.changedTouches,o=r.length;for(t=0;t<o;++t)(n=u[r[t].identifier])&&(Oe(e),n("drag",e,r[t]))}function b(e){var t,n,o=e.changedTouches,i=o.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<i;++t)(n=u[o[t].identifier])&&(Be(e),n("end",e,o[t]))}function D(e,t,n,r,o,i){var s,d,f,p=l.copy(),g=Ne(i||n,t);if(null!=(f=a.call(e,new He("beforestart",{sourceEvent:n,target:h,identifier:o,active:c,x:g[0],y:g[1],dx:0,dy:0,dispatch:p}),r)))return s=f.x-g[0]||0,d=f.y-g[1]||0,function n(i,a,l){var m,v=g;switch(i){case"start":u[o]=n,m=c++;break;case"end":delete u[o],--c;case"drag":g=Ne(l||a,t),m=c}p.call(i,e,new He(i,{sourceEvent:a,subject:f,target:h,identifier:o,active:m,x:g[0]+s,y:g[1]+d,dx:g[0]-v[0],dy:g[1]-v[1],dispatch:p}),r)}}return h.filter=function(e){return arguments.length?(o="function"===typeof e?e:je(!!e),h):o},h.container=function(e){return arguments.length?(i="function"===typeof e?e:je(e),h):i},h.subject=function(e){return arguments.length?(a="function"===typeof e?e:je(e),h):a},h.touchable=function(e){return arguments.length?(s="function"===typeof e?e:je(!!e),h):s},h.on=function(){var e=l.on.apply(l,arguments);return e===l?h:e},h.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,h):Math.sqrt(d)},h}He.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ge(e){return((e=Math.exp(e))+1/e)/2}const Ye=function e(t,n,r){function o(e,o){var i,a,s=e[0],u=e[1],l=e[2],c=o[0],d=o[1],h=o[2],f=c-s,p=d-u,g=f*f+p*p;if(g<1e-12)a=Math.log(h/l)/t,i=function(e){return[s+e*f,u+e*p,l*Math.exp(t*e*a)]};else{var m=Math.sqrt(g),v=(h*h-l*l+r*g)/(2*l*n*m),y=(h*h-l*l-r*g)/(2*h*n*m),b=Math.log(Math.sqrt(v*v+1)-v),D=Math.log(Math.sqrt(y*y+1)-y);a=(D-b)/t,i=function(e){var r,o=e*a,i=Ge(b),c=l/(n*m)*(i*(r=t*o+b,((r=Math.exp(2*r))-1)/(r+1))-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[s+c*f,u+c*p,l*i/Ge(t*o+b)]}}return i.duration=1e3*a*t/Math.SQRT2,i}return o.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},o}(Math.SQRT2,2,4);var Ze,Qe,Xe=0,$e=0,Je=0,et=0,tt=0,nt=0,rt="object"===typeof performance&&performance.now?performance:Date,ot="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function it(){return tt||(ot(at),tt=rt.now()+nt)}function at(){tt=0}function st(){this._call=this._time=this._next=null}function ut(e,t,n){var r=new st;return r.restart(e,t,n),r}function lt(){tt=(et=rt.now())+nt,Xe=$e=0;try{!function(){it(),++Xe;for(var e,t=Ze;t;)(e=tt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Xe}()}finally{Xe=0,function(){var e,t,n=Ze,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Ze=t);Qe=e,dt(r)}(),tt=0}}function ct(){var e=rt.now(),t=e-et;t>1e3&&(nt-=t,et=e)}function dt(e){Xe||($e&&($e=clearTimeout($e)),e-tt>24?(e<1/0&&($e=setTimeout(lt,e-rt.now()-nt)),Je&&(Je=clearInterval(Je))):(Je||(et=rt.now(),Je=setInterval(ct,1e3)),Xe=1,ot(lt)))}function ht(e,t,n){var r=new st;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}st.prototype=ut.prototype={constructor:st,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?it():+n)+(null==t?0:+t),this._next||Qe===this||(Qe?Qe._next=this:Ze=this,Qe=this),this._call=e,this._time=n,dt()},stop:function(){this._call&&(this._call=null,this._time=1/0,dt())}};var ft=y("start","end","cancel","interrupt"),pt=[];function gt(e,t,n,r,o,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function i(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(i){var l,c,d,h;if(1!==n.state)return u();for(l in o)if((h=o[l]).name===n.name){if(3===h.state)return ht(a);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[l]):+l<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[l])}if(ht((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(i))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),l=0,c=-1;l<d;++l)(h=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=h);r.length=c+1}}function s(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=5,1),i=-1,a=r.length;++i<a;)r[i].call(e,o);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var r in n.state=6,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=ut(i,0,n.time)}(e,n,{name:t,index:r,group:o,on:ft,tween:pt,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})}function mt(e,t){var n=yt(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function vt(e,t){var n=yt(e,t);if(n.state>3)throw new Error("too late; already running");return n}function yt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function bt(e,t){var n,r,o,i=e.__transition,a=!0;if(i){for(o in t=null==t?null:t+"",i)(n=i[o]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[o]):a=!1;a&&delete e.__transition}}function Dt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ct,wt=180/Math.PI,Et={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function kt(e,t,n,r,o,i){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*wt,skewX:Math.atan(u)*wt,scaleX:a,scaleY:s}}function Ft(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(i,a){var s=[],u=[];return i=e(i),a=e(a),function(e,r,o,i,a,s){if(e!==o||r!==i){var u=a.push("translate(",null,t,null,n);s.push({i:u-4,x:Dt(e,o)},{i:u-2,x:Dt(r,i)})}else(o||i)&&a.push("translate("+o+t+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,s,u),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(o(n)+"rotate(",null,r)-2,x:Dt(e,t)})):t&&n.push(o(n)+"rotate("+t+r)}(i.rotate,a.rotate,s,u),function(e,t,n,i){e!==t?i.push({i:n.push(o(n)+"skewX(",null,r)-2,x:Dt(e,t)}):t&&n.push(o(n)+"skewX("+t+r)}(i.skewX,a.skewX,s,u),function(e,t,n,r,i,a){if(e!==n||t!==r){var s=i.push(o(i)+"scale(",null,",",null,")");a.push({i:s-4,x:Dt(e,n)},{i:s-2,x:Dt(t,r)})}else 1===n&&1===r||i.push(o(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,s,u),i=a=null,function(e){for(var t,n=-1,r=u.length;++n<r;)s[(t=u[n]).i]=t.x(e);return s.join("")}}}var xt=Ft((function(e){const t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Et:kt(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),At=Ft((function(e){return null==e?Et:(Ct||(Ct=document.createElementNS("http://www.w3.org/2000/svg","g")),Ct.setAttribute("transform",e),(e=Ct.transform.baseVal.consolidate())?kt((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Et)}),", ",")",")");function St(e,t){var n,r;return function(){var o=vt(this,e),i=o.tween;if(i!==n)for(var a=0,s=(r=n=i).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}o.tween=r}}function _t(e,t,n){var r,o;if("function"!==typeof n)throw new Error;return function(){var i=vt(this,e),a=i.tween;if(a!==r){o=(r=a).slice();for(var s={name:t,value:n},u=0,l=o.length;u<l;++u)if(o[u].name===t){o[u]=s;break}u===l&&o.push(s)}i.tween=o}}function It(e,t,n){var r=e._id;return e.each((function(){var e=vt(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return yt(e,r).value[t]}}function Pt(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Tt(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Nt(){}var Rt=.7,Mt=1/Rt,Bt="\\s*([+-]?\\d+)\\s*",Ot="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Lt=/^#([0-9a-f]{3,8})$/,jt=new RegExp("^rgb\\(".concat(Bt,",").concat(Bt,",").concat(Bt,"\\)$")),Ht=new RegExp("^rgb\\(".concat(zt,",").concat(zt,",").concat(zt,"\\)$")),Ut=new RegExp("^rgba\\(".concat(Bt,",").concat(Bt,",").concat(Bt,",").concat(Ot,"\\)$")),qt=new RegExp("^rgba\\(".concat(zt,",").concat(zt,",").concat(zt,",").concat(Ot,"\\)$")),Wt=new RegExp("^hsl\\(".concat(Ot,",").concat(zt,",").concat(zt,"\\)$")),Vt=new RegExp("^hsla\\(".concat(Ot,",").concat(zt,",").concat(zt,",").concat(Ot,"\\)$")),Kt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Gt(){return this.rgb().formatHex()}function Yt(){return this.rgb().formatRgb()}function Zt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Lt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Qt(t):3===n?new Jt(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Xt(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Xt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=jt.exec(e))?new Jt(t[1],t[2],t[3],1):(t=Ht.exec(e))?new Jt(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Ut.exec(e))?Xt(t[1],t[2],t[3],t[4]):(t=qt.exec(e))?Xt(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Wt.exec(e))?an(t[1],t[2]/100,t[3]/100,1):(t=Vt.exec(e))?an(t[1],t[2]/100,t[3]/100,t[4]):Kt.hasOwnProperty(e)?Qt(Kt[e]):"transparent"===e?new Jt(NaN,NaN,NaN,0):null}function Qt(e){return new Jt(e>>16&255,e>>8&255,255&e,1)}function Xt(e,t,n,r){return r<=0&&(e=t=n=NaN),new Jt(e,t,n,r)}function $t(e,t,n,r){return 1===arguments.length?((o=e)instanceof Nt||(o=Zt(o)),o?new Jt((o=o.rgb()).r,o.g,o.b,o.opacity):new Jt):new Jt(e,t,n,null==r?1:r);var o}function Jt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function en(){return"#".concat(on(this.r)).concat(on(this.g)).concat(on(this.b))}function tn(){const e=nn(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(rn(this.r),", ").concat(rn(this.g),", ").concat(rn(this.b)).concat(1===e?")":", ".concat(e,")"))}function nn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function rn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function on(e){return((e=rn(e))<16?"0":"")+e.toString(16)}function an(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new un(e,t,n,r)}function sn(e){if(e instanceof un)return new un(e.h,e.s,e.l,e.opacity);if(e instanceof Nt||(e=Zt(e)),!e)return new un;if(e instanceof un)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),a=NaN,s=i-o,u=(i+o)/2;return s?(a=t===i?(n-r)/s+6*(n<r):n===i?(r-t)/s+2:(t-n)/s+4,s/=u<.5?i+o:2-i-o,a*=60):s=u>0&&u<1?0:a,new un(a,s,u,e.opacity)}function un(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function ln(e){return(e=(e||0)%360)<0?e+360:e}function cn(e){return Math.max(0,Math.min(1,e||0))}function dn(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function hn(e,t,n,r,o){var i=e*e,a=i*e;return((1-3*e+3*i-a)*t+(4-6*i+3*a)*n+(1+3*e+3*i-3*a)*r+a*o)/6}Pt(Nt,Zt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Gt,formatHex:Gt,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return sn(this).formatHsl()},formatRgb:Yt,toString:Yt}),Pt(Jt,$t,Tt(Nt,{brighter(e){return e=null==e?Mt:Math.pow(Mt,e),new Jt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Rt:Math.pow(Rt,e),new Jt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Jt(rn(this.r),rn(this.g),rn(this.b),nn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:en,formatHex:en,formatHex8:function(){return"#".concat(on(this.r)).concat(on(this.g)).concat(on(this.b)).concat(on(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:tn,toString:tn})),Pt(un,(function(e,t,n,r){return 1===arguments.length?sn(e):new un(e,t,n,null==r?1:r)}),Tt(Nt,{brighter(e){return e=null==e?Mt:Math.pow(Mt,e),new un(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Rt:Math.pow(Rt,e),new un(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Jt(dn(e>=240?e-240:e+120,o,r),dn(e,o,r),dn(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new un(ln(this.h),cn(this.s),cn(this.l),nn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=nn(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(ln(this.h),", ").concat(100*cn(this.s),"%, ").concat(100*cn(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const fn=e=>()=>e;function pn(e,t){return function(n){return e+n*t}}function gn(e){return 1===(e=+e)?mn:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):fn(isNaN(t)?n:t)}}function mn(e,t){var n=t-e;return n?pn(e,n):fn(isNaN(e)?t:e)}const vn=function e(t){var n=gn(t);function r(e,t){var r=n((e=$t(e)).r,(t=$t(t)).r),o=n(e.g,t.g),i=n(e.b,t.b),a=mn(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=i(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function yn(e){return function(t){var n,r,o=t.length,i=new Array(o),a=new Array(o),s=new Array(o);for(n=0;n<o;++n)r=$t(t[n]),i[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return i=e(i),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=i(e),r.g=a(e),r.b=s(e),r+""}}}yn((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),o=e[r],i=e[r+1],a=r>0?e[r-1]:2*o-i,s=r<t-1?e[r+2]:2*i-o;return hn((n-r/t)*t,a,o,i,s)}})),yn((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),o=e[(r+t-1)%t],i=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return hn((n-r/t)*t,o,i,a,s)}}));var bn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Dn=new RegExp(bn.source,"g");function Cn(e,t){var n,r,o,i=bn.lastIndex=Dn.lastIndex=0,a=-1,s=[],u=[];for(e+="",t+="";(n=bn.exec(e))&&(r=Dn.exec(t));)(o=r.index)>i&&(o=t.slice(i,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:Dt(n,r)})),i=Dn.lastIndex;return i<t.length&&(o=t.slice(i),s[a]?s[a]+=o:s[++a]=o),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}function wn(e,t){var n;return("number"===typeof t?Dt:t instanceof Zt?vn:(n=Zt(t))?(t=n,vn):Cn)(e,t)}function En(e){return function(){this.removeAttribute(e)}}function kn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Fn(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function xn(e,t,n){var r,o,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function An(e,t,n){var r,o,i;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(e))===(s=u+"")?null:a===r&&s===o?i:(o=s,i=t(r=a,u));this.removeAttribute(e)}}function Sn(e,t,n){var r,o,i;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(e.space,e.local))===(s=u+"")?null:a===r&&s===o?i:(o=s,i=t(r=a,u));this.removeAttributeNS(e.space,e.local)}}function _n(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,o)),n}return o._value=t,o}function In(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,o)),n}return o._value=t,o}function Pn(e,t){return function(){mt(this,e).delay=+t.apply(this,arguments)}}function Tn(e,t){return t=+t,function(){mt(this,e).delay=t}}function Nn(e,t){return function(){vt(this,e).duration=+t.apply(this,arguments)}}function Rn(e,t){return t=+t,function(){vt(this,e).duration=t}}var Mn=Pe.prototype.constructor;function Bn(e){return function(){this.style.removeProperty(e)}}var On=0;function zn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Ln(){return++On}var jn=Pe.prototype;zn.prototype=function(e){return Pe().transition(e)}.prototype={constructor:zn,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=D(e));for(var r=this._groups,o=r.length,i=new Array(o),a=0;a<o;++a)for(var s,u,l=r[a],c=l.length,d=i[a]=new Array(c),h=0;h<c;++h)(s=l[h])&&(u=e.call(s,s.__data__,h,l))&&("__data__"in s&&(u.__data__=s.__data__),d[h]=u,gt(d[h],t,n,h,d,yt(s,n)));return new zn(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=w(e));for(var r=this._groups,o=r.length,i=[],a=[],s=0;s<o;++s)for(var u,l=r[s],c=l.length,d=0;d<c;++d)if(u=l[d]){for(var h,f=e.call(u,u.__data__,d,l),p=yt(u,n),g=0,m=f.length;g<m;++g)(h=f[g])&&gt(h,t,n,g,f,p);i.push(f),a.push(u)}return new zn(i,a,t,n)},selectChild:jn.selectChild,selectChildren:jn.selectChildren,filter:function(e){"function"!==typeof e&&(e=k(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,a=t[o],s=a.length,u=r[o]=[],l=0;l<s;++l)(i=a[l])&&e.call(i,i.__data__,l,a)&&u.push(i);return new zn(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var u,l=t[s],c=n[s],d=l.length,h=a[s]=new Array(d),f=0;f<d;++f)(u=l[f]||c[f])&&(h[f]=u);for(;s<r;++s)a[s]=t[s];return new zn(a,this._parents,this._name,this._id)},selection:function(){return new Mn(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Ln(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],u=s.length,l=0;l<u;++l)if(a=s[l]){var c=yt(a,t);gt(a,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new zn(r,this._parents,e,n)},call:jn.call,nodes:jn.nodes,node:jn.node,size:jn.size,empty:jn.empty,each:jn.each,on:function(e,t){var n=this._id;return arguments.length<2?yt(this.node(),n).on.on(e):this.each(function(e,t,n){var r,o,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?mt:vt;return function(){var a=i(this,e),s=a.on;s!==r&&(o=(r=s).copy()).on(t,n),a.on=o}}(n,e,t))},attr:function(e,t){var n=L(e),r="transform"===n?At:wn;return this.attrTween(e,"function"===typeof t?(n.local?Sn:An)(n,r,It(this,"attr."+e,t)):null==t?(n.local?kn:En)(n):(n.local?xn:Fn)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=L(e);return this.tween(n,(r.local?_n:In)(r,t))},style:function(e,t,n){var r="transform"===(e+="")?xt:wn;return null==t?this.styleTween(e,function(e,t){var n,r,o;return function(){var i=Q(this,e),a=(this.style.removeProperty(e),Q(this,e));return i===a?null:i===n&&a===r?o:o=t(n=i,r=a)}}(e,r)).on("end.style."+e,Bn(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var r,o,i;return function(){var a=Q(this,e),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(e),u=s=Q(this,e)),a===u?null:a===r&&u===o?i:(o=u,i=t(r=a,s))}}(e,r,It(this,"style."+e,t))).each(function(e,t){var n,r,o,i,a="style."+t,s="end."+a;return function(){var u=vt(this,e),l=u.on,c=null==u.value[a]?i||(i=Bn(t)):void 0;l===n&&o===c||(r=(n=l).copy()).on(s,o=c),u.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,o,i=n+"";return function(){var a=Q(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,o;function i(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,i,n)),r}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(It(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=yt(this.node(),n).tween,i=0,a=o.length;i<a;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((null==t?St:_t)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Pn:Tn)(t,e)):yt(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Nn:Rn)(t,e)):yt(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!==typeof t)throw new Error;return function(){vt(this,e).ease=t}}(t,e)):yt(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;vt(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise((function(i,a){var s={value:a},u={value:function(){0===--o&&i()}};n.each((function(){var n=vt(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),n.on=t})),0===o&&i()}))},[Symbol.iterator]:jn[Symbol.iterator]};var Hn={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Un(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}Pe.prototype.interrupt=function(e){return this.each((function(){bt(this,e)}))},Pe.prototype.transition=function(e){var t,n;e instanceof zn?(t=e._id,e=e._name):(t=Ln(),(n=Hn).time=it(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a,s=r[i],u=s.length,l=0;l<u;++l)(a=s[l])&&gt(a,e,t,l,s,n||Un(a,t));return new zn(r,this._parents,e,t)};const qn=e=>()=>e;function Wn(e,t){let{sourceEvent:n,target:r,transform:o,dispatch:i}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function Vn(e,t,n){this.k=e,this.x=t,this.y=n}Vn.prototype={constructor:Vn,scale:function(e){return 1===e?this:new Vn(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Vn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Kn=new Vn(1,0,0);function Gn(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Kn;return e.__zoom}function Yn(e){e.stopImmediatePropagation()}function Zn(e){e.preventDefault(),e.stopImmediatePropagation()}function Qn(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function Xn(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function $n(){return this.__zoom||Kn}function Jn(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function er(){return navigator.maxTouchPoints||"ontouchstart"in this}function tr(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function nr(){var e,t,n,r=Qn,o=Xn,i=tr,a=Jn,s=er,u=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,d=Ye,h=y("start","zoom","end"),f=0,p=10;function g(e){e.property("__zoom",$n).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",F).filter(s).on("touchstart.zoom",x).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",S).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(e,t){return(t=Math.max(u[0],Math.min(u[1],t)))===e.k?e:new Vn(t,e.x,e.y)}function v(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new Vn(e.k,r,o)}function b(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function D(e,t,n,r){e.on("start.zoom",(function(){C(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){C(this,arguments).event(r).end()})).tween("zoom",(function(){var e=this,i=arguments,a=C(e,i).event(r),s=o.apply(e,i),u=null==n?b(s):"function"===typeof n?n.apply(e,i):n,l=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),c=e.__zoom,h="function"===typeof t?t.apply(e,i):t,f=d(c.invert(u).concat(l/c.k),h.invert(u).concat(l/h.k));return function(e){if(1===e)e=h;else{var t=f(e),n=l/t[2];e=new Vn(n,u[0]-t[0]*n,u[1]-t[1]*n)}a.zoom(null,e)}}))}function C(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function E(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(r.apply(this,arguments)){var s=C(this,n).event(e),c=this.__zoom,d=Math.max(u[0],Math.min(u[1],c.k*Math.pow(2,a.apply(this,arguments)))),h=Ne(e);if(s.wheel)s.mouse[0][0]===h[0]&&s.mouse[0][1]===h[1]||(s.mouse[1]=c.invert(s.mouse[0]=h)),clearTimeout(s.wheel);else{if(c.k===d)return;s.mouse=[h,c.invert(h)],bt(this),s.start()}Zn(e),s.wheel=setTimeout((function(){s.wheel=null,s.end()}),150),s.zoom("mouse",i(v(m(c,d),s.mouse[0],s.mouse[1]),s.extent,l))}}function k(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];if(!n&&r.apply(this,arguments)){var s=e.currentTarget,u=C(this,o,!0).event(e),c=Te(e.view).on("mousemove.zoom",(function(e){if(Zn(e),!u.moved){var t=e.clientX-h,n=e.clientY-p;u.moved=t*t+n*n>f}u.event(e).zoom("mouse",i(v(u.that.__zoom,u.mouse[0]=Ne(e,s),u.mouse[1]),u.extent,l))}),!0).on("mouseup.zoom",(function(e){c.on("mousemove.zoom mouseup.zoom",null),Le(e.view,u.moved),Zn(e),u.event(e).end()}),!0),d=Ne(e,s),h=e.clientX,p=e.clientY;ze(e.view),Yn(e),u.mouse=[d,this.__zoom.invert(d)],bt(this),u.start()}}function F(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(r.apply(this,arguments)){var s=this.__zoom,u=Ne(e.changedTouches?e.changedTouches[0]:e,this),d=s.invert(u),h=s.k*(e.shiftKey?.5:2),f=i(v(m(s,h),u,d),o.apply(this,n),l);Zn(e),c>0?Te(this).transition().duration(c).call(D,f,u,e):Te(this).call(g.transform,f,u,e)}}function x(n){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];if(r.apply(this,arguments)){var s,u,l,c,d=n.touches,h=d.length,f=C(this,i,n.changedTouches.length===h).event(n);for(Yn(n),u=0;u<h;++u)c=[c=Ne(l=d[u],this),this.__zoom.invert(c),l.identifier],f.touch0?f.touch1||f.touch0[2]===c[2]||(f.touch1=c,f.taps=0):(f.touch0=c,s=!0,f.taps=1+!!e);e&&(e=clearTimeout(e)),s&&(f.taps<2&&(t=c[0],e=setTimeout((function(){e=null}),500)),bt(this),f.start())}}function A(e){if(this.__zooming){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o,a,s,u,c=C(this,n).event(e),d=e.changedTouches,h=d.length;for(Zn(e),o=0;o<h;++o)s=Ne(a=d[o],this),c.touch0&&c.touch0[2]===a.identifier?c.touch0[0]=s:c.touch1&&c.touch1[2]===a.identifier&&(c.touch1[0]=s);if(a=c.that.__zoom,c.touch1){var f=c.touch0[0],p=c.touch0[1],g=c.touch1[0],y=c.touch1[1],b=(b=g[0]-f[0])*b+(b=g[1]-f[1])*b,D=(D=y[0]-p[0])*D+(D=y[1]-p[1])*D;a=m(a,Math.sqrt(b/D)),s=[(f[0]+g[0])/2,(f[1]+g[1])/2],u=[(p[0]+y[0])/2,(p[1]+y[1])/2]}else{if(!c.touch0)return;s=c.touch0[0],u=c.touch0[1]}c.zoom("touch",i(v(a,s,u),c.extent,l))}}function S(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];if(this.__zooming){var a,s,u=C(this,o).event(e),l=e.changedTouches,c=l.length;for(Yn(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),a=0;a<c;++a)s=l[a],u.touch0&&u.touch0[2]===s.identifier?delete u.touch0:u.touch1&&u.touch1[2]===s.identifier&&delete u.touch1;if(u.touch1&&!u.touch0&&(u.touch0=u.touch1,delete u.touch1),u.touch0)u.touch0[1]=this.__zoom.invert(u.touch0[0]);else if(u.end(),2===u.taps&&(s=Ne(s,this),Math.hypot(t[0]-s[0],t[1]-s[1])<p)){var d=Te(this).on("dblclick.zoom");d&&d.apply(this,arguments)}}}return g.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",$n),e!==o?D(e,t,n,r):o.interrupt().each((function(){C(this,arguments).event(r).start().zoom(null,"function"===typeof t?t.apply(this,arguments):t).end()}))},g.scaleBy=function(e,t,n,r){g.scaleTo(e,(function(){return this.__zoom.k*("function"===typeof t?t.apply(this,arguments):t)}),n,r)},g.scaleTo=function(e,t,n,r){g.transform(e,(function(){var e=o.apply(this,arguments),r=this.__zoom,a=null==n?b(e):"function"===typeof n?n.apply(this,arguments):n,s=r.invert(a),u="function"===typeof t?t.apply(this,arguments):t;return i(v(m(r,u),a,s),e,l)}),n,r)},g.translateBy=function(e,t,n,r){g.transform(e,(function(){return i(this.__zoom.translate("function"===typeof t?t.apply(this,arguments):t,"function"===typeof n?n.apply(this,arguments):n),o.apply(this,arguments),l)}),null,r)},g.translateTo=function(e,t,n,r,a){g.transform(e,(function(){var e=o.apply(this,arguments),a=this.__zoom,s=null==r?b(e):"function"===typeof r?r.apply(this,arguments):r;return i(Kn.translate(s[0],s[1]).scale(a.k).translate("function"===typeof t?-t.apply(this,arguments):-t,"function"===typeof n?-n.apply(this,arguments):-n),e,l)}),r,a)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Te(this.that).datum();h.call(e,this.that,new Wn(e,{sourceEvent:this.sourceEvent,target:g,type:e,transform:this.that.__zoom,dispatch:h}),t)}},g.wheelDelta=function(e){return arguments.length?(a="function"===typeof e?e:qn(+e),g):a},g.filter=function(e){return arguments.length?(r="function"===typeof e?e:qn(!!e),g):r},g.touchable=function(e){return arguments.length?(s="function"===typeof e?e:qn(!!e),g):s},g.extent=function(e){return arguments.length?(o="function"===typeof e?e:qn([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),g):o},g.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],g):[u[0],u[1]]},g.translateExtent=function(e){return arguments.length?(l[0][0]=+e[0][0],l[1][0]=+e[1][0],l[0][1]=+e[0][1],l[1][1]=+e[1][1],g):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},g.constrain=function(e){return arguments.length?(i=e,g):i},g.duration=function(e){return arguments.length?(c=+e,g):c},g.interpolate=function(e){return arguments.length?(d=e,g):d},g.on=function(){var e=h.on.apply(h,arguments);return e===h?g:e},g.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,g):Math.sqrt(f)},g.tapDistance=function(e){return arguments.length?(p=+e,g):p},g}Gn.prototype=Vn.prototype;const rr=["inProgress"],or=()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",ir=e=>'Node type "'.concat(e,'" not found. Using fallback type "default".'),ar=()=>"The React Flow parent container needs a width and a height to render the graph.",sr=()=>"Only child nodes can use a parent extent.",ur=()=>"Can't create edge. An edge needs a source and a target.",lr=e=>'Marker type "'.concat(e,"\" doesn't exist."),cr=(e,t)=>{let{id:n,sourceHandle:r,targetHandle:o}=t;return"Couldn't create edge for ".concat(e,' handle id: "').concat("source"===e?r:o,'", edge id: ').concat(n,".")},dr=()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",hr=e=>'Edge type "'.concat(e,'" not found. Using fallback type "default".'),fr=e=>'Node with id "'.concat(e,'" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.'),pr=()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",gr=()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs.",mr=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],vr=["Enter"," ","Escape"];var yr,br,Dr;!function(e){e.Strict="strict",e.Loose="loose"}(yr||(yr={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(br||(br={})),function(e){e.Partial="partial",e.Full="full"}(Dr||(Dr={}));const Cr={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var wr,Er,kr;!function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(wr||(wr={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(Er||(Er={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(kr||(kr={}));const Fr={[kr.Left]:kr.Right,[kr.Right]:kr.Left,[kr.Top]:kr.Bottom,[kr.Bottom]:kr.Top};function xr(e){return null===e?null:e?"valid":"invalid"}const Ar=e=>"id"in e&&"source"in e&&"target"in e,Sr=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),_r=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];const{width:r,height:o}=ro(e),i=null!==(t=e.origin)&&void 0!==t?t:n,a=r*i[0],s=o*i[1];return{x:e.position.x-a,y:e.position.y-s}},Ir=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===e.size)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach((e=>{if(void 0===t.filter||t.filter(e)){const t=Wr(e);n=jr(n,t)}})),Ur(n)},Pr=function(e,t){let[n,r,o]=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=l(l({},Xr(t,[n,r,o])),{},{width:t.width/o,height:t.height/o}),u=[];for(const l of e.values()){var c,d,h,f,p,g;const{measured:e,selectable:t=!0,hidden:n=!1}=l;if(a&&!t||n)continue;const r=null!==(c=null!==(d=null!==(h=e.width)&&void 0!==h?h:l.width)&&void 0!==d?d:l.initialWidth)&&void 0!==c?c:null,o=null!==(f=null!==(p=null!==(g=e.height)&&void 0!==g?g:l.height)&&void 0!==p?p:l.initialHeight)&&void 0!==f?f:null,m=Kr(s,qr(l)),v=(null!==r&&void 0!==r?r:0)*(null!==o&&void 0!==o?o:0),y=i&&m>0;(!l.internals.handleBounds||y||m>=v||l.dragging)&&u.push(l)}return u};async function Tr(e,t){var n,r,o;let{nodes:i,width:a,height:s,panZoom:u,minZoom:l,maxZoom:c}=e;if(0===i.size)return Promise.resolve(!0);const d=function(e,t){const n=new Map,r=null!==t&&void 0!==t&&t.nodes?new Set(t.nodes.map((e=>e.id))):null;return e.forEach((e=>{!e.measured.width||!e.measured.height||!(null===t||void 0===t?void 0:t.includeHiddenNodes)&&e.hidden||r&&!r.has(e.id)||n.set(e.id,e)})),n}(i,t),h=Ir(d),f=eo(h,a,s,null!==(n=null===t||void 0===t?void 0:t.minZoom)&&void 0!==n?n:l,null!==(r=null===t||void 0===t?void 0:t.maxZoom)&&void 0!==r?r:c,null!==(o=null===t||void 0===t?void 0:t.padding)&&void 0!==o?o:.1);return await u.setViewport(f,{duration:null===t||void 0===t?void 0:t.duration}),Promise.resolve(!0)}function Nr(e){var t,n,r;let{nodeId:o,nextPosition:i,nodeLookup:a,nodeOrigin:s=[0,0],nodeExtent:u,onError:l}=e;const c=a.get(o),d=c.parentId?a.get(c.parentId):void 0,{x:h,y:f}=d?d.internals.positionAbsolute:{x:0,y:0},p=null!==(t=c.origin)&&void 0!==t?t:s;let g=u;if("parent"!==c.extent||c.expandParent)d&&no(c.extent)&&(g=[[c.extent[0][0]+h,c.extent[0][1]+f],[c.extent[1][0]+h,c.extent[1][1]+f]]);else if(d){const e=d.measured.width,t=d.measured.height;e&&t&&(g=[[h,f],[h+e,f+t]])}else null===l||void 0===l||l("005",sr());const m=no(g)?Br(i,g,c.measured):i;return void 0!==c.measured.width&&void 0!==c.measured.height||null===l||void 0===l||l("015",gr()),{position:{x:m.x-h+(null!==(n=c.measured.width)&&void 0!==n?n:0)*p[0],y:m.y-f+(null!==(r=c.measured.height)&&void 0!==r?r:0)*p[1]},positionAbsolute:m}}async function Rr(e){let{nodesToRemove:t=[],edgesToRemove:n=[],nodes:r,edges:o,onBeforeDelete:i}=e;const a=new Set(t.map((e=>e.id))),s=[];for(const f of r){if(!1===f.deletable)continue;const e=a.has(f.id),t=!e&&f.parentId&&s.find((e=>e.id===f.parentId));(e||t)&&s.push(f)}const u=new Set(n.map((e=>e.id))),l=o.filter((e=>!1!==e.deletable)),c=((e,t)=>{const n=new Set;return e.forEach((e=>{n.add(e.id)})),t.filter((e=>n.has(e.source)||n.has(e.target)))})(s,l),d=c;for(const f of l){u.has(f.id)&&!d.find((e=>e.id===f.id))&&d.push(f)}if(!i)return{edges:d,nodes:s};const h=await i({nodes:s,edges:d});return"boolean"===typeof h?h?{edges:d,nodes:s}:{edges:[],nodes:[]}:h}const Mr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)},Br=function(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},r=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return{x:Mr(n.x,r[0][0],r[1][0]-(null!==(e=null===o||void 0===o?void 0:o.width)&&void 0!==e?e:0)),y:Mr(n.y,r[0][1],r[1][1]-(null!==(t=null===o||void 0===o?void 0:o.height)&&void 0!==t?t:0))}};function Or(e,t,n){const{width:r,height:o}=ro(n),{x:i,y:a}=n.internals.positionAbsolute;return Br(e,[[i,a],[i+r,a+o]],t)}const zr=(e,t,n)=>e<t?Mr(Math.abs(e-t),1,t)/t:e>n?-Mr(Math.abs(e-n),1,t)/t:0,Lr=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40;return[zr(e.x,r,t.width-r)*n,zr(e.y,r,t.height-r)*n]},jr=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Hr=e=>{let{x:t,y:n,width:r,height:o}=e;return{x:t,y:n,x2:t+r,y2:n+o}},Ur=e=>{let{x:t,y:n,x2:r,y2:o}=e;return{x:t,y:n,width:r-t,height:o-n}},qr=function(e){var t,n,r,o,i,a,s,u;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];const{x:c,y:d}=Sr(e)?e.internals.positionAbsolute:_r(e,l);return{x:c,y:d,width:null!==(t=null!==(n=null!==(r=null===(o=e.measured)||void 0===o?void 0:o.width)&&void 0!==r?r:e.width)&&void 0!==n?n:e.initialWidth)&&void 0!==t?t:0,height:null!==(i=null!==(a=null!==(s=null===(u=e.measured)||void 0===u?void 0:u.height)&&void 0!==s?s:e.height)&&void 0!==a?a:e.initialHeight)&&void 0!==i?i:0}},Wr=function(e){var t,n,r,o,i,a,s,u;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];const{x:c,y:d}=Sr(e)?e.internals.positionAbsolute:_r(e,l);return{x:c,y:d,x2:c+(null!==(t=null!==(n=null!==(r=null===(o=e.measured)||void 0===o?void 0:o.width)&&void 0!==r?r:e.width)&&void 0!==n?n:e.initialWidth)&&void 0!==t?t:0),y2:d+(null!==(i=null!==(a=null!==(s=null===(u=e.measured)||void 0===u?void 0:u.height)&&void 0!==s?s:e.height)&&void 0!==a?a:e.initialHeight)&&void 0!==i?i:0)}},Vr=(e,t)=>Ur(jr(Hr(e),Hr(t))),Kr=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Gr=e=>Yr(e.width)&&Yr(e.height)&&Yr(e.x)&&Yr(e.y),Yr=e=>!isNaN(e)&&isFinite(e),Zr=(e,t)=>{0},Qr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1];return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}},Xr=function(e,t){let{x:n,y:r}=e,[o,i,a]=t;const s={x:(n-o)/a,y:(r-i)/a};return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?Qr(s,arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1]):s},$r=(e,t)=>{let{x:n,y:r}=e,[o,i,a]=t;return{x:n*a+o,y:r*a+i}};function Jr(e,t){if("number"===typeof e)return Math.floor(.5*(t-t/(1+e)));if("string"===typeof e&&e.endsWith("px")){const t=parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"===typeof e&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error('[React Flow] The padding value "'.concat(e,'" is invalid. Please provide a number or a string with a valid unit (px or %).')),0}const eo=(e,t,n,r,o,i)=>{const a=function(e,t,n){if("string"===typeof e||"number"===typeof e){const r=Jr(e,n),o=Jr(e,t);return{top:r,right:o,bottom:r,left:o,x:2*o,y:2*r}}if("object"===typeof e){var r,o,i,a,s,u,l,c;const d=Jr(null!==(r=null!==(o=e.top)&&void 0!==o?o:e.y)&&void 0!==r?r:0,n),h=Jr(null!==(i=null!==(a=e.bottom)&&void 0!==a?a:e.y)&&void 0!==i?i:0,n),f=Jr(null!==(s=null!==(u=e.left)&&void 0!==u?u:e.x)&&void 0!==s?s:0,t),p=Jr(null!==(l=null!==(c=e.right)&&void 0!==c?c:e.x)&&void 0!==l?l:0,t);return{top:d,right:p,bottom:h,left:f,x:f+p,y:d+h}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(i,t,n),s=(t-a.x)/e.width,u=(n-a.y)/e.height,l=Math.min(s,u),c=Mr(l,r,o),d=t/2-(e.x+e.width/2)*c,h=n/2-(e.y+e.height/2)*c,f=function(e,t,n,r,o,i){const{x:a,y:s}=$r(e,[t,n,r]),{x:u,y:l}=$r({x:e.x+e.width,y:e.y+e.height},[t,n,r]),c=o-u,d=i-l;return{left:Math.floor(a),top:Math.floor(s),right:Math.floor(c),bottom:Math.floor(d)}}(e,d,h,c,t,n),p=Math.min(f.left-a.left,0),g=Math.min(f.top-a.top,0);return{x:d-p+Math.min(f.right-a.right,0),y:h-g+Math.min(f.bottom-a.bottom,0),zoom:c}},to=()=>{var e;return"undefined"!==typeof navigator&&(null===(e=navigator)||void 0===e||null===(e=e.userAgent)||void 0===e?void 0:e.indexOf("Mac"))>=0};function no(e){return void 0!==e&&"parent"!==e}function ro(e){var t,n,r,o,i,a,s,u;return{width:null!==(t=null!==(n=null!==(r=null===(o=e.measured)||void 0===o?void 0:o.width)&&void 0!==r?r:e.width)&&void 0!==n?n:e.initialWidth)&&void 0!==t?t:0,height:null!==(i=null!==(a=null!==(s=null===(u=e.measured)||void 0===u?void 0:u.height)&&void 0!==s?s:e.height)&&void 0!==a?a:e.initialHeight)&&void 0!==i?i:0}}function oo(e){var t,n,r,o,i,a;return void 0!==(null!==(t=null!==(n=null===(r=e.measured)||void 0===r?void 0:r.width)&&void 0!==n?n:e.width)&&void 0!==t?t:e.initialWidth)&&void 0!==(null!==(o=null!==(i=null===(a=e.measured)||void 0===a?void 0:a.height)&&void 0!==i?i:e.height)&&void 0!==o?o:e.initialHeight)}function io(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:0,height:0},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;const i=l({},e),a=r.get(n);if(a){var s,u;const e=a.origin||o;i.x+=a.internals.positionAbsolute.x-(null!==(s=t.width)&&void 0!==s?s:0)*e[0],i.y+=a.internals.positionAbsolute.y-(null!==(u=t.height)&&void 0!==u?u:0)*e[1]}return i}function ao(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function so(e,t){var n,r;let{snapGrid:o=[0,0],snapToGrid:i=!1,transform:a,containerBounds:s}=t;const{x:u,y:c}=po(e),d=Xr({x:u-(null!==(n=null===s||void 0===s?void 0:s.left)&&void 0!==n?n:0),y:c-(null!==(r=null===s||void 0===s?void 0:s.top)&&void 0!==r?r:0)},a),{x:h,y:f}=i?Qr(d,o):d;return l({xSnapped:h,ySnapped:f},d)}const uo=e=>({width:e.offsetWidth,height:e.offsetHeight}),lo=e=>{var t,n;return(null===e||void 0===e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e))||(null===(n=window)||void 0===n?void 0:n.document)},co=["INPUT","SELECT","TEXTAREA"];function ho(e){var t;const n=(null===(t=e.composedPath)||void 0===t||null===(t=t.call(e))||void 0===t?void 0:t[0])||e.target;if(1!==(null===n||void 0===n?void 0:n.nodeType))return!1;return co.includes(n.nodeName)||n.hasAttribute("contenteditable")||!!n.closest(".nokey")}const fo=e=>"clientX"in e,po=(e,t)=>{var n,r,o,i;const a=fo(e),s=a?e.clientX:null===(n=e.touches)||void 0===n?void 0:n[0].clientX,u=a?e.clientY:null===(r=e.touches)||void 0===r?void 0:r[0].clientY;return{x:s-(null!==(o=null===t||void 0===t?void 0:t.left)&&void 0!==o?o:0),y:u-(null!==(i=null===t||void 0===t?void 0:t.top)&&void 0!==i?i:0)}},go=(e,t,n,r,o)=>{const i=t.querySelectorAll(".".concat(e));return i&&i.length?Array.from(i).map((t=>{const i=t.getBoundingClientRect();return l({id:t.getAttribute("data-handleid"),type:e,nodeId:o,position:t.getAttribute("data-handlepos"),x:(i.left-n.left)/r,y:(i.top-n.top)/r},uo(t))})):null};function mo(e){let{sourceX:t,sourceY:n,targetX:r,targetY:o,sourceControlX:i,sourceControlY:a,targetControlX:s,targetControlY:u}=e;const l=.125*t+.375*i+.375*s+.125*r,c=.125*n+.375*a+.375*u+.125*o;return[l,c,Math.abs(l-t),Math.abs(c-n)]}function vo(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function yo(e){let{pos:t,x1:n,y1:r,x2:o,y2:i,c:a}=e;switch(t){case kr.Left:return[n-vo(n-o,a),r];case kr.Right:return[n+vo(o-n,a),r];case kr.Top:return[n,r-vo(r-i,a)];case kr.Bottom:return[n,r+vo(i-r,a)]}}function bo(e){let{sourceX:t,sourceY:n,sourcePosition:r=kr.Bottom,targetX:o,targetY:i,targetPosition:a=kr.Top,curvature:s=.25}=e;const[u,l]=yo({pos:r,x1:t,y1:n,x2:o,y2:i,c:s}),[c,d]=yo({pos:a,x1:o,y1:i,x2:t,y2:n,c:s}),[h,f,p,g]=mo({sourceX:t,sourceY:n,targetX:o,targetY:i,sourceControlX:u,sourceControlY:l,targetControlX:c,targetControlY:d});return["M".concat(t,",").concat(n," C").concat(u,",").concat(l," ").concat(c,",").concat(d," ").concat(o,",").concat(i),h,f,p,g]}function Do(e){let{sourceX:t,sourceY:n,targetX:r,targetY:o}=e;const i=Math.abs(r-t)/2,a=r<t?r+i:r-i,s=Math.abs(o-n)/2;return[a,o<n?o+s:o-s,i,s]}function Co(e){let{sourceNode:t,targetNode:n,width:r,height:o,transform:i}=e;const a=jr(Wr(t),Wr(n));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:r/i[2],height:o/i[2]};return Kr(s,Ur(a))>0}const wo=e=>{let{source:t,sourceHandle:n,target:r,targetHandle:o}=e;return"xy-edge__".concat(t).concat(n||"","-").concat(r).concat(o||"")};function Eo(e){let{sourceX:t,sourceY:n,targetX:r,targetY:o}=e;const[i,a,s,u]=Do({sourceX:t,sourceY:n,targetX:r,targetY:o});return["M ".concat(t,",").concat(n,"L ").concat(r,",").concat(o),i,a,s,u]}const ko={[kr.Left]:{x:-1,y:0},[kr.Right]:{x:1,y:0},[kr.Top]:{x:0,y:-1},[kr.Bottom]:{x:0,y:1}},Fo=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function xo(e){let{source:t,sourcePosition:n=kr.Bottom,target:r,targetPosition:o=kr.Top,center:i,offset:a}=e;const s=ko[n],u=ko[o],l={x:t.x+s.x*a,y:t.y+s.y*a},c={x:r.x+u.x*a,y:r.y+u.y*a},d=(e=>{let{source:t,sourcePosition:n=kr.Bottom,target:r}=e;return n===kr.Left||n===kr.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1}})({source:l,sourcePosition:n,target:c}),h=0!==d.x?"x":"y",f=d[h];let p,g,m=[];const v={x:0,y:0},y={x:0,y:0},[b,D,C,w]=Do({sourceX:t.x,sourceY:t.y,targetX:r.x,targetY:r.y});if(s[h]*u[h]===-1){var E,k;p=null!==(E=i.x)&&void 0!==E?E:b,g=null!==(k=i.y)&&void 0!==k?k:D;const e=[{x:p,y:l.y},{x:p,y:c.y}],t=[{x:l.x,y:g},{x:c.x,y:g}];m=s[h]===f?"x"===h?e:t:"x"===h?t:e}else{const e=[{x:l.x,y:c.y}],i=[{x:c.x,y:l.y}];if(m="x"===h?s.x===f?i:e:s.y===f?e:i,n===o){const e=Math.abs(t[h]-r[h]);if(e<=a){const n=Math.min(a-1,a-e);s[h]===f?v[h]=(l[h]>t[h]?-1:1)*n:y[h]=(c[h]>r[h]?-1:1)*n}}if(n!==o){const t="x"===h?"y":"x",n=s[h]===u[t],r=l[t]>c[t],o=l[t]<c[t];(1===s[h]&&(!n&&r||n&&o)||1!==s[h]&&(!n&&o||n&&r))&&(m="x"===h?e:i)}const d={x:l.x+v.x,y:l.y+v.y},b={x:c.x+y.x,y:c.y+y.y};Math.max(Math.abs(d.x-m[0].x),Math.abs(b.x-m[0].x))>=Math.max(Math.abs(d.y-m[0].y),Math.abs(b.y-m[0].y))?(p=(d.x+b.x)/2,g=m[0].y):(p=m[0].x,g=(d.y+b.y)/2)}return[[t,{x:l.x+v.x,y:l.y+v.y},...m,{x:c.x+y.x,y:c.y+y.y},r],p,g,C,w]}function Ao(e){let{sourceX:t,sourceY:n,sourcePosition:r=kr.Bottom,targetX:o,targetY:i,targetPosition:a=kr.Top,borderRadius:s=5,centerX:u,centerY:l,offset:c=20}=e;const[d,h,f,p,g]=xo({source:{x:t,y:n},sourcePosition:r,target:{x:o,y:i},targetPosition:a,center:{x:u,y:l},offset:c}),m=d.reduce(((e,t,n)=>{let r="";return r=n>0&&n<d.length-1?function(e,t,n,r){const o=Math.min(Fo(e,t)/2,Fo(t,n)/2,r),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return"L".concat(i," ").concat(a);if(e.y===a){const t=e.x<n.x?-1:1,r=e.y<n.y?1:-1;return"L ".concat(i+o*t,",").concat(a,"Q ").concat(i,",").concat(a," ").concat(i,",").concat(a+o*r)}const s=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return"L ".concat(i,",").concat(a+o*u,"Q ").concat(i,",").concat(a," ").concat(i+o*s,",").concat(a)}(d[n-1],t,d[n+1],s):"".concat(0===n?"M":"L").concat(t.x," ").concat(t.y),e+=r}),"");return[m,h,f,p,g]}function So(e){var t;return e&&!!(e.internals.handleBounds||null!==(t=e.handles)&&void 0!==t&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function _o(e){if(!e)return null;const t=[],n=[];for(const i of e){var r,o;i.width=null!==(r=i.width)&&void 0!==r?r:1,i.height=null!==(o=i.height)&&void 0!==o?o:1,"source"===i.type?t.push(i):"target"===i.type&&n.push(i)}return{source:t,target:n}}function Io(e,t){var n,r,o;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:kr.Left,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=(null!==(n=null===t||void 0===t?void 0:t.x)&&void 0!==n?n:0)+e.internals.positionAbsolute.x,u=(null!==(r=null===t||void 0===t?void 0:t.y)&&void 0!==r?r:0)+e.internals.positionAbsolute.y,{width:l,height:c}=null!==t&&void 0!==t?t:ro(e);if(a)return{x:s+l/2,y:u+c/2};switch(null!==(o=null===t||void 0===t?void 0:t.position)&&void 0!==o?o:i){case kr.Top:return{x:s+l/2,y:u};case kr.Right:return{x:s+l,y:u+c/2};case kr.Bottom:return{x:s+l/2,y:u+c};case kr.Left:return{x:s,y:u+c/2}}}function Po(e,t){return e&&(t?e.find((e=>e.id===t)):e[0])||null}function To(e,t){if(!e)return"";if("string"===typeof e)return e;const n=t?"".concat(t,"__"):"";return"".concat(n).concat(Object.keys(e).sort().map((t=>"".concat(t,"=").concat(e[t]))).join("&"))}const No={nodeOrigin:[0,0],nodeExtent:mr,elevateNodesOnSelect:!0,defaults:{}},Ro=l(l({},No),{},{checkEquality:!0});function Mo(e,t){const n=l({},e);for(const r in t)void 0!==t[r]&&(n[r]=t[r]);return n}function Bo(e,t,n,r){const o=Mo(Ro,r);let i=e.length>0;const a=new Map(t),s=null!==o&&void 0!==o&&o.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const f of e){var u;let e=a.get(f.id);if(o.checkEquality&&f===(null===(u=e)||void 0===u?void 0:u.internals.userNode))t.set(f.id,e);else{var c,d,h;const n=_r(f,o.nodeOrigin),r=no(f.extent)?f.extent:o.nodeExtent,i=Br(n,r,ro(f));e=l(l(l({},o.defaults),f),{},{measured:{width:null===(c=f.measured)||void 0===c?void 0:c.width,height:null===(d=f.measured)||void 0===d?void 0:d.height},internals:{positionAbsolute:i,handleBounds:f.measured?null===(h=e)||void 0===h?void 0:h.internals.handleBounds:void 0,z:zo(f,s),userNode:f}}),t.set(f.id,e)}void 0!==e.measured&&void 0!==e.measured.width&&void 0!==e.measured.height||e.hidden||(i=!1),f.parentId&&Oo(e,t,n,r)}return i}function Oo(e,t,n,r){const{elevateNodesOnSelect:o,nodeOrigin:i,nodeExtent:a}=Mo(No,r),s=e.parentId,u=t.get(s);if(!u)return void console.warn("Parent node ".concat(s," not found. Please make sure that parent nodes are in front of their child nodes in the nodes array."));!function(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n);const c=o?1e3:0,{x:d,y:h,z:f}=function(e,t,n,r,o){var i;const{x:a,y:s}=t.internals.positionAbsolute,u=ro(e),l=_r(e,n),c=no(e.extent)?Br(l,e.extent,u):l;let d=Br({x:a+c.x,y:s+c.y},r,u);"parent"===e.extent&&(d=Or(d,u,t));const h=zo(e,o),f=null!==(i=t.internals.z)&&void 0!==i?i:0;return{x:d.x,y:d.y,z:f>h?f:h}}(e,u,i,a,c),{positionAbsolute:p}=e.internals,g=d!==p.x||h!==p.y;(g||f!==e.internals.z)&&t.set(e.id,l(l({},e),{},{internals:l(l({},e.internals),{},{positionAbsolute:g?{x:d,y:h}:p,z:f})}))}function zo(e,t){return(Yr(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Lo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0];const o=[],i=new Map;for(const u of e){var a,s;const e=t.get(u.parentId);if(!e)continue;const n=null!==(a=null===(s=i.get(u.parentId))||void 0===s?void 0:s.expandedRect)&&void 0!==a?a:qr(e),r=Vr(n,u.rect);i.set(u.parentId,{expandedRect:r,parent:e})}return i.size>0&&i.forEach(((t,i)=>{var a;let{expandedRect:s,parent:u}=t;const l=u.internals.positionAbsolute,c=ro(u),d=null!==(a=u.origin)&&void 0!==a?a:r,h=s.x<l.x?Math.round(Math.abs(l.x-s.x)):0,f=s.y<l.y?Math.round(Math.abs(l.y-s.y)):0,p=Math.max(c.width,Math.round(s.width)),g=Math.max(c.height,Math.round(s.height)),m=(p-c.width)*d[0],v=(g-c.height)*d[1];var y;(h>0||f>0||m||v)&&(o.push({id:i,type:"position",position:{x:u.position.x-h+m,y:u.position.y-f+v}}),null===(y=n.get(i))||void 0===y||y.forEach((t=>{e.some((e=>e.id===t.id))||o.push({id:t.id,type:"position",position:{x:t.position.x+h,y:t.position.y+f}})})));(c.width<s.width||c.height<s.height||h||f)&&o.push({id:i,type:"dimensions",setAttributes:!0,dimensions:{width:p+(h?d[0]*h-m:0),height:g+(f?d[1]*f-v:0)}})})),o}function jo(e,t,n,r,o,i){let a=o;const s=r.get(a)||new Map;r.set(a,s.set(n,t)),a="".concat(o,"-").concat(e);const u=r.get(a)||new Map;if(r.set(a,u.set(n,t)),i){a="".concat(o,"-").concat(e,"-").concat(i);const s=r.get(a)||new Map;r.set(a,s.set(n,t))}}function Ho(e,t,n){e.clear(),t.clear();for(const r of n){const{source:n,target:o,sourceHandle:i=null,targetHandle:a=null}=r,s={edgeId:r.id,source:n,target:o,sourceHandle:i,targetHandle:a},u="".concat(n,"-").concat(i,"--").concat(o,"-").concat(a);jo("source",s,"".concat(o,"-").concat(a,"--").concat(n,"-").concat(i),e,n,i),jo("target",s,u,e,o,a),t.set(r.id,r)}}function Uo(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return!!n&&(!!n.selected||Uo(n,t))}function qo(e,t,n){let r=e;do{var o,i,a;if(null!==(o=r)&&void 0!==o&&null!==(i=o.matches)&&void 0!==i&&i.call(o,t))return!0;if(r===n)return!1;r=null===(a=r)||void 0===a?void 0:a.parentElement}while(r);return!1}function Wo(e){var t,n;let{nodeId:r,dragItems:o,nodeLookup:i,dragging:a=!0}=e;const s=[];for(const[d,h]of o){var u;const e=null===(u=i.get(d))||void 0===u?void 0:u.internals.userNode;e&&s.push(l(l({},e),{},{position:h.position,dragging:a}))}if(!r)return[s[0],s];const c=null===(t=i.get(r))||void 0===t?void 0:t.internals.userNode;return[c?l(l({},c),{},{position:(null===(n=o.get(r))||void 0===n?void 0:n.position)||c.position,dragging:a}):s[0],s]}function Vo(e){let{onNodeMouseDown:t,getStoreItems:n,onDragStart:r,onDrag:o,onDragStop:i}=e,a={x:null,y:null},s=0,u=new Map,l=!1,c={x:0,y:0},d=null,h=!1,f=null,p=!1;return{update:function(e){let{noDragClassName:g,handleSelector:m,domNode:v,isSelectable:y,nodeId:b,nodeClickDistance:D=0}=e;function C(e,t){let{x:r,y:i}=e;const{nodeLookup:s,nodeExtent:l,snapGrid:c,snapToGrid:d,nodeOrigin:h,onNodeDrag:f,onSelectionDrag:p,onError:g,updateNodePositions:m}=n();a={x:r,y:i};let v=!1,y={x:0,y:0,x2:0,y2:0};if(u.size>1&&l){const e=Ir(u);y=Hr(e)}for(const[n,o]of u){if(!s.has(n))continue;let e={x:r-o.distance.x,y:i-o.distance.y};d&&(e=Qr(e,c));let t=[[l[0][0],l[0][1]],[l[1][0],l[1][1]]];if(u.size>1&&l&&!o.extent){const{positionAbsolute:e}=o.internals,n=e.x-y.x+l[0][0],r=e.x+o.measured.width-y.x2+l[1][0];t=[[n,e.y-y.y+l[0][1]],[r,e.y+o.measured.height-y.y2+l[1][1]]]}const{position:a,positionAbsolute:f}=Nr({nodeId:n,nextPosition:e,nodeLookup:s,nodeExtent:t,nodeOrigin:h,onError:g});v=v||o.position.x!==a.x||o.position.y!==a.y,o.position=a,o.internals.positionAbsolute=f}if(v&&(m(u,!0),t&&(o||f||!b&&p))){const[e,n]=Wo({nodeId:b,dragItems:u,nodeLookup:s});null===o||void 0===o||o(t,u,e,n),null===f||void 0===f||f(t,e,n),b||null===p||void 0===p||p(t,n)}}async function w(){if(!d)return;const{transform:e,panBy:t,autoPanSpeed:r,autoPanOnNodeDrag:o}=n();if(!o)return l=!1,void cancelAnimationFrame(s);const[i,u]=Lr(c,d,r);var h,f;0===i&&0===u||(a.x=(null!==(h=a.x)&&void 0!==h?h:0)-i/e[2],a.y=(null!==(f=a.y)&&void 0!==f?f:0)-u/e[2],await t({x:i,y:u})&&C(a,null));s=requestAnimationFrame(w)}function E(e){const{nodeLookup:o,multiSelectionActive:i,nodesDraggable:s,transform:l,snapGrid:c,snapToGrid:f,selectNodesOnDrag:p,onNodeDragStart:g,onSelectionDragStart:m,unselectNodesAndEdges:v}=n();var D;(h=!0,p&&y||i||!b)||(null!==(D=o.get(b))&&void 0!==D&&D.selected||v());y&&p&&b&&(null===t||void 0===t||t(b));const C=so(e.sourceEvent,{transform:l,snapGrid:c,snapToGrid:f,containerBounds:d});if(a=C,u=function(e,t,n,r){const o=new Map;for(const[s,u]of e)if((u.selected||u.id===r)&&(!u.parentId||!Uo(u,e))&&(u.draggable||t&&"undefined"===typeof u.draggable)){const t=e.get(s);var i,a;t&&o.set(s,{id:s,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:null!==(i=t.measured.width)&&void 0!==i?i:0,height:null!==(a=t.measured.height)&&void 0!==a?a:0}})}return o}(o,s,C,b),u.size>0&&(r||g||!b&&m)){const[t,n]=Wo({nodeId:b,dragItems:u,nodeLookup:o});null===r||void 0===r||r(e.sourceEvent,u,t,n),null===g||void 0===g||g(e.sourceEvent,t,n),b||null===m||void 0===m||m(e.sourceEvent,n)}}f=Te(v);const k=Ke().clickDistance(D).on("start",(e=>{const{domNode:t,nodeDragThreshold:r,transform:o,snapGrid:i,snapToGrid:s}=n();d=(null===t||void 0===t?void 0:t.getBoundingClientRect())||null,p=!1,0===r&&E(e);const u=so(e.sourceEvent,{transform:o,snapGrid:i,snapToGrid:s,containerBounds:d});a=u,c=po(e.sourceEvent,d)})).on("drag",(e=>{const{autoPanOnNodeDrag:t,transform:r,snapGrid:o,snapToGrid:i,nodeDragThreshold:s,nodeLookup:f}=n(),g=so(e.sourceEvent,{transform:r,snapGrid:o,snapToGrid:i,containerBounds:d});if(("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||b&&!f.has(b))&&(p=!0),!p){if(!l&&t&&h&&(l=!0,w()),!h){var m,v;const t=g.xSnapped-(null!==(m=a.x)&&void 0!==m?m:0),n=g.ySnapped-(null!==(v=a.y)&&void 0!==v?v:0);Math.sqrt(t*t+n*n)>s&&E(e)}(a.x!==g.xSnapped||a.y!==g.ySnapped)&&u&&h&&(c=po(e.sourceEvent,d),C(g,e.sourceEvent))}})).on("end",(e=>{if(h&&!p&&(l=!1,h=!1,cancelAnimationFrame(s),u.size>0)){const{nodeLookup:t,updateNodePositions:r,onNodeDragStop:o,onSelectionDragStop:a}=n();if(r(u,!1),i||o||!b&&a){const[n,r]=Wo({nodeId:b,dragItems:u,nodeLookup:t,dragging:!1});null===i||void 0===i||i(e.sourceEvent,u,n,r),null===o||void 0===o||o(e.sourceEvent,n,r),b||null===a||void 0===a||a(e.sourceEvent,r)}}})).filter((e=>{const t=e.target;return!e.button&&(!g||!qo(t,".".concat(g),v))&&(!m||qo(t,m,v))}));f.call(k)},destroy:function(){var e;null===(e=f)||void 0===e||e.on(".drag",null)}}}function Ko(e,t,n,r){let o=[],i=1/0;const a=function(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(const i of t.values())Kr(o,qr(i))>0&&r.push(i);return r}(e,n,t+250);for(const f of a){var s,u,c,d;const n=[...null!==(s=null===(u=f.internals.handleBounds)||void 0===u?void 0:u.source)&&void 0!==s?s:[],...null!==(c=null===(d=f.internals.handleBounds)||void 0===d?void 0:d.target)&&void 0!==c?c:[]];for(const a of n){if(r.nodeId===a.nodeId&&r.type===a.type&&r.id===a.id)continue;const{x:n,y:s}=Io(f,a,a.position,!0),u=Math.sqrt(Math.pow(n-e.x,2)+Math.pow(s-e.y,2));u>t||(u<i?(o=[l(l({},a),{},{x:n,y:s})],i=u):u===i&&o.push(l(l({},a),{},{x:n,y:s})))}}if(!o.length)return null;if(o.length>1){var h;const e="source"===r.type?"target":"source";return null!==(h=o.find((t=>t.type===e)))&&void 0!==h?h:o[0]}return o[0]}function Go(e,t,n,r,o){var i,a,s,u,c,d;let h=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const f=r.get(e);if(!f)return null;const p="strict"===o?null===(i=f.internals.handleBounds)||void 0===i?void 0:i[t]:[...null!==(a=null===(s=f.internals.handleBounds)||void 0===s?void 0:s.source)&&void 0!==a?a:[],...null!==(u=null===(c=f.internals.handleBounds)||void 0===c?void 0:c.target)&&void 0!==u?u:[]],g=null!==(d=n?null===p||void 0===p?void 0:p.find((e=>e.id===n)):null===p||void 0===p?void 0:p[0])&&void 0!==d?d:null;return g&&h?l(l({},g),Io(f,g,g.position,!0)):g}function Yo(e,t){return e||(null!==t&&void 0!==t&&t.classList.contains("target")?"target":null!==t&&void 0!==t&&t.classList.contains("source")?"source":null)}const Zo=()=>!0;function Qo(e,t){let{handle:n,connectionMode:r,fromNodeId:o,fromHandleId:i,fromType:a,doc:s,lib:u,flowId:l,isValidConnection:c=Zo,nodeLookup:d}=t;const h="target"===a,f=n?s.querySelector(".".concat(u,'-flow__handle[data-id="').concat(l,"-").concat(null===n||void 0===n?void 0:n.nodeId,"-").concat(null===n||void 0===n?void 0:n.id,"-").concat(null===n||void 0===n?void 0:n.type,'"]')):null,{x:p,y:g}=po(e),m=s.elementFromPoint(p,g),v=null!==m&&void 0!==m&&m.classList.contains("".concat(u,"-flow__handle"))?m:f,y={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const e=Yo(void 0,v),t=v.getAttribute("data-nodeid"),n=v.getAttribute("data-handleid"),a=v.classList.contains("connectable"),s=v.classList.contains("connectableend");if(!t||!e)return y;const u={source:h?t:o,sourceHandle:h?n:i,target:h?o:t,targetHandle:h?i:n};y.connection=u;const l=a&&s&&(r===yr.Strict?h&&"source"===e||!h&&"target"===e:t!==o||n!==i);y.isValid=l&&c(u),y.toHandle=Go(t,e,n,d,r,!0)}return y}const Xo={onPointerDown:function(e,t){let{connectionMode:n,connectionRadius:r,handleId:o,nodeId:i,edgeUpdaterType:a,isTarget:s,domNode:u,nodeLookup:d,lib:h,autoPanOnConnect:f,flowId:p,panBy:g,cancelConnection:m,onConnectStart:v,onConnect:y,onConnectEnd:b,isValidConnection:D=Zo,onReconnectEnd:C,updateConnection:w,getTransform:E,getFromHandle:k,autoPanSpeed:F}=t;const x=lo(e.target);let A,S=0;const{x:_,y:I}=po(e),P=null===x||void 0===x?void 0:x.elementFromPoint(_,I),T=Yo(a,P),N=null===u||void 0===u?void 0:u.getBoundingClientRect();if(!N||!T)return;const R=Go(i,T,o,d,n);if(!R)return;let M=po(e,N),B=!1,O=null,z=!1,L=null;function j(){if(!f||!N)return;const[e,t]=Lr(M,N,F);g({x:e,y:t}),S=requestAnimationFrame(j)}const H=l(l({},R),{},{nodeId:i,type:T,position:R.position}),U=d.get(i),q={inProgress:!0,isValid:null,from:Io(U,H,kr.Left,!0),fromHandle:H,fromPosition:H.position,fromNode:U,to:M,toHandle:null,toPosition:Fr[H.position],toNode:null};w(q);let W=q;function V(e){if(!k()||!H)return void K(e);const t=E();M=po(e,N),A=Ko(Xr(M,t,!1,[1,1]),r,d,H),B||(j(),B=!0);const a=Qo(e,{handle:A,connectionMode:n,fromNodeId:i,fromHandleId:o,fromType:s?"target":"source",isValidConnection:D,doc:x,lib:h,flowId:p,nodeLookup:d});L=a.handleDomNode,O=a.connection,z=function(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}(!!A,a.isValid);const u=l(l({},W),{},{isValid:z,to:a.toHandle&&z?$r({x:a.toHandle.x,y:a.toHandle.y},t):M,toHandle:a.toHandle,toPosition:z&&a.toHandle?a.toHandle.position:Fr[H.position],toNode:a.toHandle?d.get(a.toHandle.nodeId):null});z&&A&&W.toHandle&&u.toHandle&&W.toHandle.type===u.toHandle.type&&W.toHandle.nodeId===u.toHandle.nodeId&&W.toHandle.id===u.toHandle.id&&W.to.x===u.to.x&&W.to.y===u.to.y||(w(u),W=u)}function K(e){(A||L)&&O&&z&&(null===y||void 0===y||y(O));const{inProgress:t}=W,n=l(l({},c(W,rr)),{},{toPosition:W.toHandle?W.toPosition:null});null===b||void 0===b||b(e,n),a&&(null===C||void 0===C||C(e,n)),m(),cancelAnimationFrame(S),B=!1,z=!1,O=null,L=null,x.removeEventListener("mousemove",V),x.removeEventListener("mouseup",K),x.removeEventListener("touchmove",V),x.removeEventListener("touchend",K)}null===v||void 0===v||v(e,{nodeId:i,handleId:o,handleType:T}),x.addEventListener("mousemove",V),x.addEventListener("mouseup",K),x.addEventListener("touchmove",V),x.addEventListener("touchend",K)},isValid:Qo};const $o=e=>({x:e.x,y:e.y,zoom:e.k}),Jo=e=>{let{x:t,y:n,zoom:r}=e;return Kn.translate(t,n).scale(r)},ei=(e,t)=>e.target.closest(".".concat(t)),ti=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),ni=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const r="number"===typeof t&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},ri=e=>{const t=e.ctrlKey&&to()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function oi(e){let{domNode:t,minZoom:n,maxZoom:r,paneClickDistance:o,translateExtent:i,viewport:a,onPanZoom:s,onPanZoomStart:u,onPanZoomEnd:l,onDraggingChange:c}=e;const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=t.getBoundingClientRect(),f=nr().clickDistance(!Yr(o)||o<0?0:o).scaleExtent([n,r]).translateExtent(i),p=Te(t).call(f);b({x:a.x,y:a.y,zoom:Mr(a.zoom,n,r)},[[0,0],[h.width,h.height]],i);const g=p.on("wheel.zoom"),m=p.on("dblclick.zoom");function v(e,t){return p?new Promise((n=>{null===f||void 0===f||f.transform(ni(p,null===t||void 0===t?void 0:t.duration,(()=>n(!0))),e)})):Promise.resolve(!1)}function y(){f.on("zoom",null)}async function b(e,t,n){const r=Jo(e),o=null===f||void 0===f?void 0:f.constrain()(r,t,n);return o&&await v(o),new Promise((e=>e(o)))}return f.wheelDelta(ri),{update:function(e){let{noWheelClassName:t,noPanClassName:n,onPaneContextMenu:r,userSelectionActive:o,panOnScroll:i,panOnDrag:a,panOnScrollMode:h,panOnScrollSpeed:v,preventScrolling:b,zoomOnPinch:D,zoomOnScroll:C,zoomOnDoubleClick:w,zoomActivationKeyPressed:E,lib:k,onTransformChange:F}=e;o&&!d.isZoomingOrPanning&&y();const x=i&&!E&&!o?function(e){let{zoomPanValues:t,noWheelClassName:n,d3Selection:r,d3Zoom:o,panOnScrollMode:i,panOnScrollSpeed:a,zoomOnPinch:s,onPanZoomStart:u,onPanZoom:l,onPanZoomEnd:c}=e;return e=>{if(ei(e,n))return!1;e.preventDefault(),e.stopImmediatePropagation();const d=r.property("__zoom").k||1;if(e.ctrlKey&&s){const t=Ne(e),n=ri(e),i=d*Math.pow(2,n);return void o.scaleTo(r,i,t,e)}const h=1===e.deltaMode?20:1;let f=i===br.Vertical?0:e.deltaX*h,p=i===br.Horizontal?0:e.deltaY*h;!to()&&e.shiftKey&&i!==br.Vertical&&(f=e.deltaY*h,p=0),o.translateBy(r,-f/d*a,-p/d*a,{internal:!0});const g=$o(r.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,null===u||void 0===u||u(e,g)),t.isPanScrolling&&(null===l||void 0===l||l(e,g),t.panScrollTimeout=setTimeout((()=>{null===c||void 0===c||c(e,g),t.isPanScrolling=!1}),150))}}({zoomPanValues:d,noWheelClassName:t,d3Selection:p,d3Zoom:f,panOnScrollMode:h,panOnScrollSpeed:v,zoomOnPinch:D,onPanZoomStart:u,onPanZoom:s,onPanZoomEnd:l}):function(e){let{noWheelClassName:t,preventScrolling:n,d3ZoomHandler:r}=e;return function(e,o){const i="wheel"===e.type,a=!n&&i&&!e.ctrlKey,s=ei(e,t);if(e.ctrlKey&&i&&s&&e.preventDefault(),a||s)return null;e.preventDefault(),r.call(this,e,o)}}({noWheelClassName:t,preventScrolling:b,d3ZoomHandler:g});if(p.on("wheel.zoom",x,{passive:!1}),!o){const e=function(e){let{zoomPanValues:t,onDraggingChange:n,onPanZoomStart:r}=e;return e=>{var o,i,a;if(null!==(o=e.sourceEvent)&&void 0!==o&&o.internal)return;const s=$o(e.transform);t.mouseButton=(null===(i=e.sourceEvent)||void 0===i?void 0:i.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=s,"mousedown"===(null===(a=e.sourceEvent)||void 0===a?void 0:a.type)&&n(!0),r&&(null===r||void 0===r||r(e.sourceEvent,s))}}({zoomPanValues:d,onDraggingChange:c,onPanZoomStart:u});f.on("start",e);const t=function(e){let{zoomPanValues:t,panOnDrag:n,onPaneContextMenu:r,onTransformChange:o,onPanZoom:i}=e;return e=>{var a,s,u;t.usedRightMouseButton=!(!r||!ti(n,null!==(a=t.mouseButton)&&void 0!==a?a:0)),null!==(s=e.sourceEvent)&&void 0!==s&&s.sync||o([e.transform.x,e.transform.y,e.transform.k]),!i||null!==(u=e.sourceEvent)&&void 0!==u&&u.internal||null===i||void 0===i||i(e.sourceEvent,$o(e.transform))}}({zoomPanValues:d,panOnDrag:a,onPaneContextMenu:!!r,onPanZoom:s,onTransformChange:F});f.on("zoom",t);const n=function(e){let{zoomPanValues:t,panOnDrag:n,panOnScroll:r,onDraggingChange:o,onPanZoomEnd:i,onPaneContextMenu:a}=e;return e=>{var s,u,l,c;if((null===(s=e.sourceEvent)||void 0===s||!s.internal)&&(t.isZoomingOrPanning=!1,a&&ti(n,null!==(u=t.mouseButton)&&void 0!==u?u:0)&&!t.usedRightMouseButton&&e.sourceEvent&&a(e.sourceEvent),t.usedRightMouseButton=!1,o(!1),i&&(l=t.prevViewport,c=e.transform,l.x!==c.x||l.y!==c.y||l.zoom!==c.k))){const n=$o(e.transform);t.prevViewport=n,clearTimeout(t.timerId),t.timerId=setTimeout((()=>{null===i||void 0===i||i(e.sourceEvent,n)}),r?150:0)}}}({zoomPanValues:d,panOnDrag:a,panOnScroll:i,onPaneContextMenu:r,onPanZoomEnd:l,onDraggingChange:c});f.on("end",n)}const A=function(e){let{zoomActivationKeyPressed:t,zoomOnScroll:n,zoomOnPinch:r,panOnDrag:o,panOnScroll:i,zoomOnDoubleClick:a,userSelectionActive:s,noWheelClassName:u,noPanClassName:l,lib:c}=e;return e=>{var d;const h=t||n,f=r&&e.ctrlKey;if(1===e.button&&"mousedown"===e.type&&(ei(e,"".concat(c,"-flow__node"))||ei(e,"".concat(c,"-flow__edge"))))return!0;if(!o&&!h&&!i&&!a&&!r)return!1;if(s)return!1;if(ei(e,u)&&"wheel"===e.type)return!1;if(ei(e,l)&&("wheel"!==e.type||i&&"wheel"===e.type&&!t))return!1;if(!r&&e.ctrlKey&&"wheel"===e.type)return!1;if(!r&&"touchstart"===e.type&&(null===(d=e.touches)||void 0===d?void 0:d.length)>1)return e.preventDefault(),!1;if(!h&&!i&&!f&&"wheel"===e.type)return!1;if(!o&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(Array.isArray(o)&&!o.includes(e.button)&&"mousedown"===e.type)return!1;const p=Array.isArray(o)&&o.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&p}}({zoomActivationKeyPressed:E,panOnDrag:a,zoomOnScroll:C,panOnScroll:i,zoomOnDoubleClick:w,zoomOnPinch:D,userSelectionActive:o,noPanClassName:n,noWheelClassName:t,lib:k});f.filter(A),w?p.on("dblclick.zoom",m):p.on("dblclick.zoom",null)},destroy:y,setViewport:async function(e,t){const n=Jo(e);return await v(n,t),new Promise((e=>e(n)))},setViewportConstrained:b,getViewport:function(){const e=p?Gn(p.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return p?new Promise((n=>{null===f||void 0===f||f.scaleTo(ni(p,null===t||void 0===t?void 0:t.duration,(()=>n(!0))),e)})):Promise.resolve(!1)},scaleBy:function(e,t){return p?new Promise((n=>{null===f||void 0===f||f.scaleBy(ni(p,null===t||void 0===t?void 0:t.duration,(()=>n(!0))),e)})):Promise.resolve(!1)},setScaleExtent:function(e){null===f||void 0===f||f.scaleExtent(e)},setTranslateExtent:function(e){null===f||void 0===f||f.translateExtent(e)},syncViewport:function(e){if(p){const t=Jo(e),n=p.property("__zoom");n.k===e.zoom&&n.x===e.x&&n.y===e.y||null===f||void 0===f||f.transform(p,t,null,{sync:!0})}},setClickDistance:function(e){const t=!Yr(e)||e<0?0:e;null===f||void 0===f||f.clickDistance(t)}}}var ii;!function(e){e.Line="line",e.Handle="handle"}(ii||(ii={}));function ai(e,t){return Math.max(0,t-e)}function si(e,t){return Math.max(0,e-t)}function ui(e,t,n){return Math.max(0,t-e,e-n)}function li(e,t){return e?!t:t}const ci={width:0,height:0,x:0,y:0},di=l(l({},ci),{},{pointerX:0,pointerY:0,aspectRatio:1});function hi(e,t,n){var r,o;const i=t.position.x+e.position.x,a=t.position.y+e.position.y,s=null!==(r=e.measured.width)&&void 0!==r?r:0,u=null!==(o=e.measured.height)&&void 0!==o?o:0,l=n[0]*s,c=n[1]*u;return[[i-l,a-c],[i+s-l,a+u-c]]}function fi(e){let{domNode:t,nodeId:n,getStoreItems:r,onChange:o,onEnd:i}=e;const a=Te(t);return{update:function(e){let{controlPosition:t,boundaries:s,keepAspectRatio:u,resizeDirection:c,onResizeStart:d,onResize:h,onResizeEnd:f,shouldResize:p}=e,g=l({},ci),m=l({},di);const v=function(e){return{isHorizontal:e.includes("right")||e.includes("left"),isVertical:e.includes("bottom")||e.includes("top"),affectsX:e.includes("left"),affectsY:e.includes("top")}}(t);let y,b,D,C,w=null,E=[];const k=Ke().on("start",(e=>{var t,o,i,a,s;const{nodeLookup:u,transform:c,snapGrid:h,snapToGrid:f,nodeOrigin:p,paneDomNode:v}=r();if(y=u.get(n),!y)return;w=null!==(t=null===v||void 0===v?void 0:v.getBoundingClientRect())&&void 0!==t?t:null;const{xSnapped:k,ySnapped:F}=so(e.sourceEvent,{transform:c,snapGrid:h,snapToGrid:f,containerBounds:w});g={width:null!==(o=y.measured.width)&&void 0!==o?o:0,height:null!==(i=y.measured.height)&&void 0!==i?i:0,x:null!==(a=y.position.x)&&void 0!==a?a:0,y:null!==(s=y.position.y)&&void 0!==s?s:0},m=l(l({},g),{},{pointerX:k,pointerY:F,aspectRatio:g.width/g.height}),b=void 0,y.parentId&&("parent"===y.extent||y.expandParent)&&(b=u.get(y.parentId),D=b&&"parent"===y.extent?function(e){return[[0,0],[e.measured.width,e.measured.height]]}(b):void 0),E=[],C=void 0;for(const[r,d]of u)if(d.parentId===n&&(E.push({id:r,position:l({},d.position),extent:d.extent}),"parent"===d.extent||d.expandParent)){var x;const e=hi(d,y,null!==(x=d.origin)&&void 0!==x?x:p);C=C?[[Math.min(e[0][0],C[0][0]),Math.min(e[0][1],C[0][1])],[Math.max(e[1][0],C[1][0]),Math.max(e[1][1],C[1][1])]]:e}null===d||void 0===d||d(e,l({},g))})).on("drag",(e=>{var t;const{transform:n,snapGrid:i,snapToGrid:a,nodeOrigin:d}=r(),f=so(e.sourceEvent,{transform:n,snapGrid:i,snapToGrid:a,containerBounds:w}),k=[];if(!y)return;const{x:F,y:x,width:A,height:S}=g,_={},I=null!==(t=y.origin)&&void 0!==t?t:d,{width:P,height:T,x:N,y:R}=function(e,t,n,r,o,i,a,s){let{affectsX:u,affectsY:l}=t;const{isHorizontal:c,isVertical:d}=t,h=c&&d,{xSnapped:f,ySnapped:p}=n,{minWidth:g,maxWidth:m,minHeight:v,maxHeight:y}=r,{x:b,y:D,width:C,height:w,aspectRatio:E}=e;let k=Math.floor(c?f-e.pointerX:0),F=Math.floor(d?p-e.pointerY:0);const x=C+(u?-k:k),A=w+(l?-F:F),S=-i[0]*C,_=-i[1]*w;let I=ui(x,g,m),P=ui(A,v,y);if(a){let e=0,t=0;u&&k<0?e=ai(b+k+S,a[0][0]):!u&&k>0&&(e=si(b+x+S,a[1][0])),l&&F<0?t=ai(D+F+_,a[0][1]):!l&&F>0&&(t=si(D+A+_,a[1][1])),I=Math.max(I,e),P=Math.max(P,t)}if(s){let e=0,t=0;u&&k>0?e=si(b+k,s[0][0]):!u&&k<0&&(e=ai(b+x,s[1][0])),l&&F>0?t=si(D+F,s[0][1]):!l&&F<0&&(t=ai(D+A,s[1][1])),I=Math.max(I,e),P=Math.max(P,t)}if(o){if(c){const e=ui(x/E,v,y)*E;if(I=Math.max(I,e),a){let e=0;e=!u&&!l||u&&!l&&h?si(D+_+x/E,a[1][1])*E:ai(D+_+(u?k:-k)/E,a[0][1])*E,I=Math.max(I,e)}if(s){let e=0;e=!u&&!l||u&&!l&&h?ai(D+x/E,s[1][1])*E:si(D+(u?k:-k)/E,s[0][1])*E,I=Math.max(I,e)}}if(d){const e=ui(A*E,g,m)/E;if(P=Math.max(P,e),a){let e=0;e=!u&&!l||l&&!u&&h?si(b+A*E+S,a[1][0])/E:ai(b+(l?F:-F)*E+S,a[0][0])/E,P=Math.max(P,e)}if(s){let e=0;e=!u&&!l||l&&!u&&h?ai(b+A*E,s[1][0])/E:si(b+(l?F:-F)*E,s[0][0])/E,P=Math.max(P,e)}}}F+=F<0?P:-P,k+=k<0?I:-I,o&&(h?x>A*E?F=(li(u,l)?-k:k)/E:k=(li(u,l)?-F:F)*E:c?(F=k/E,l=u):(k=F*E,u=l));const T=u?b+k:b,N=l?D+F:D;return{width:C+(u?-k:k),height:w+(l?-F:F),x:i[0]*k*(u?-1:1)+T,y:i[1]*F*(l?-1:1)+N}}(m,v,f,s,u,I,D,C),M=P!==A,B=T!==S,O=N!==F&&M,z=R!==x&&B;if(!O&&!z&&!M&&!B)return;if((O||z||1===I[0]||1===I[1])&&(_.x=O?N:g.x,_.y=z?R:g.y,g.x=_.x,g.y=_.y,E.length>0)){const e=N-F,t=R-x;for(const n of E)n.position={x:n.position.x-e+I[0]*(P-A),y:n.position.y-t+I[1]*(T-S)},k.push(n)}if((M||B)&&(_.width=!M||c&&"horizontal"!==c?g.width:P,_.height=!B||c&&"vertical"!==c?g.height:T,g.width=_.width,g.height=_.height),b&&y.expandParent){var L,j;const e=I[0]*(null!==(L=_.width)&&void 0!==L?L:0);_.x&&_.x<e&&(g.x=e,m.x=m.x-(_.x-e));const t=I[1]*(null!==(j=_.height)&&void 0!==j?j:0);_.y&&_.y<t&&(g.y=t,m.y=m.y-(_.y-t))}const H=function(e){let{width:t,prevWidth:n,height:r,prevHeight:o,affectsX:i,affectsY:a}=e;const s=t-n,u=r-o,l=[s>0?1:s<0?-1:0,u>0?1:u<0?-1:0];return s&&i&&(l[0]=-1*l[0]),u&&a&&(l[1]=-1*l[1]),l}({width:g.width,prevWidth:A,height:g.height,prevHeight:S,affectsX:v.affectsX,affectsY:v.affectsY}),U=l(l({},g),{},{direction:H});!1!==(null===p||void 0===p?void 0:p(e,U))&&(null===h||void 0===h||h(e,U),o(_,k))})).on("end",(e=>{null===f||void 0===f||f(e,l({},g)),null===i||void 0===i||i(l({},g))}));a.call(k)},destroy:function(){a.on(".drag",null)}}}var pi=n(8443);const gi=e=>{let t;const n=new Set,r=(e,r)=>{const o="function"===typeof e?e(t):e;if(!Object.is(o,t)){const e=t;t=(null!=r?r:"object"!==typeof o||null===o)?o:Object.assign({},t,o),n.forEach((n=>n(t,e)))}},o=()=>t,i={setState:r,getState:o,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(r,o,i);return i},mi=e=>e?gi(e):gi;const{useDebugValue:vi}=r,{useSyncExternalStoreWithSelector:yi}=pi,bi=e=>e;function Di(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi,n=arguments.length>2?arguments[2]:void 0;const r=yi(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return vi(r),r}const Ci=(e,t)=>{const n=mi(e),r=function(e){return Di(n,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:t)};return Object.assign(r,n),r};function wi(e,t){if(Object.is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}n(7950);const Ei=["position","children","className","style"],ki=["type","position","isValidConnection","isConnectable","isConnectableStart","isConnectableEnd","id","onConnect","children","className","onMouseDown","onTouchStart"],Fi=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"],xi=["path","labelX","labelY","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","interactionWidth"],Ai=["id"],Si=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","onSelectionStart","onSelectionEnd","onBeforeDelete","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","selectionOnDrag","selectionMode","panActivationKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","nodesFocusable","nodeOrigin","edgesFocusable","edgesReconnectable","elementsSelectable","defaultViewport","minZoom","maxZoom","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneMouseEnter","onPaneMouseMove","onPaneMouseLeave","onPaneScroll","onPaneContextMenu","paneClickDistance","nodeClickDistance","children","onReconnect","onReconnectStart","onReconnectEnd","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","reconnectRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","disableKeyboardA11y","autoPanOnConnect","autoPanOnNodeDrag","autoPanSpeed","connectionRadius","isValidConnection","onError","style","id","nodeDragThreshold","viewport","onViewportChange","width","height","colorMode","debug","onScroll"],_i=["children","className"],Ii=(0,r.createContext)(null),Pi=Ii.Provider,Ti=or();function Ni(e,t){const n=(0,r.useContext)(Ii);if(null===n)throw new Error(Ti);return Di(n,e,t)}function Ri(){const e=(0,r.useContext)(Ii);if(null===e)throw new Error(Ti);return(0,r.useMemo)((()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe})),[e])}const Mi={display:"none"},Bi={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Oi="react-flow__node-desc",zi="react-flow__edge-desc",Li=e=>e.ariaLiveMessage;function ji(e){let{rfId:t}=e;const n=Ni(Li);return(0,d.jsx)("div",{id:"".concat("react-flow__aria-live","-").concat(t),"aria-live":"assertive","aria-atomic":"true",style:Bi,children:n})}function Hi(e){let{rfId:t,disableKeyboardA11y:n}=e;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{id:"".concat(Oi,"-").concat(t),style:Mi,children:["Press enter or space to select a node.",!n&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),(0,d.jsx)("div",{id:"".concat(zi,"-").concat(t),style:Mi,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!n&&(0,d.jsx)(ji,{rfId:t})]})}const Ui=e=>e.userSelectionActive?"none":"all",qi=(0,r.forwardRef)(((e,t)=>{let{position:n="top-left",children:r,className:o,style:i}=e,a=c(e,Ei);const s=Ni(Ui),u="".concat(n).split("-");return(0,d.jsx)("div",l(l({className:h(["react-flow__panel",o,...u]),style:l(l({},i),{},{pointerEvents:s}),ref:t},a),{},{children:r}))}));function Wi(e){let{proOptions:t,position:n="bottom-right"}=e;return null!==t&&void 0!==t&&t.hideAttribution?null:(0,d.jsx)(qi,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,d.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}qi.displayName="Panel";const Vi=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Ki=e=>e.id;function Gi(e,t){return wi(e.selectedNodes.map(Ki),t.selectedNodes.map(Ki))&&wi(e.selectedEdges.map(Ki),t.selectedEdges.map(Ki))}function Yi(e){let{onSelectionChange:t}=e;const n=Ri(),{selectedNodes:o,selectedEdges:i}=Ni(Vi,Gi);return(0,r.useEffect)((()=>{const e={nodes:o,edges:i};null===t||void 0===t||t(e),n.getState().onSelectionChangeHandlers.forEach((t=>t(e)))}),[o,i,t]),null}const Zi=e=>!!e.onSelectionChangeHandlers;function Qi(e){let{onSelectionChange:t}=e;const n=Ni(Zi);return t||n?(0,d.jsx)(Yi,{onSelectionChange:t}):null}const Xi=[0,0],$i={x:0,y:0,zoom:1},Ji=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","rfId"],ea=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),ta={translateExtent:mr,nodeOrigin:Xi,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function na(e){const{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:i,setTranslateExtent:a,setNodeExtent:s,reset:u,setDefaultNodesAndEdges:l,setPaneClickDistance:c}=Ni(ea,wi),d=Ri();(0,r.useEffect)((()=>(l(e.defaultNodes,e.defaultEdges),()=>{h.current=ta,u()})),[]);const h=(0,r.useRef)(ta);return(0,r.useEffect)((()=>{for(const r of Ji){const u=e[r];u!==h.current[r]&&("undefined"!==typeof e[r]&&("nodes"===r?t(u):"edges"===r?n(u):"minZoom"===r?o(u):"maxZoom"===r?i(u):"translateExtent"===r?a(u):"nodeExtent"===r?s(u):"paneClickDistance"===r?c(u):"fitView"===r?d.setState({fitViewQueued:u}):"fitViewOptions"===r?d.setState({fitViewOptions:u}):d.setState({[r]:u})))}h.current=e}),Ji.map((t=>e[t]))),null}function ra(){return"undefined"!==typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}const oa="undefined"!==typeof document?document:null;function ia(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{target:oa,actInsideInputWithModifier:!0};const[n,o]=(0,r.useState)(!1),i=(0,r.useRef)(!1),a=(0,r.useRef)(new Set([])),[s,u]=(0,r.useMemo)((()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter((e=>"string"===typeof e)).map((e=>e.replace("+","\n").replace("\n\n","\n+").split("\n"))),n=t.reduce(((e,t)=>e.concat(...t)),[]);return[t,n]}return[[],[]]}),[e]);return(0,r.useEffect)((()=>{var n,r;const l=null!==(n=null===t||void 0===t?void 0:t.target)&&void 0!==n?n:oa,c=null===(r=null===t||void 0===t?void 0:t.actInsideInputWithModifier)||void 0===r||r;if(null!==e){const e=e=>{i.current=e.ctrlKey||e.metaKey||e.shiftKey||e.altKey;if((!i.current||i.current&&!c)&&ho(e))return!1;const n=sa(e.code,u);if(a.current.add(e[n]),aa(s,a.current,!1)){var r;const n=(null===(r=e.composedPath)||void 0===r||null===(r=r.call(e))||void 0===r?void 0:r[0])||e.target,a="BUTTON"===(null===n||void 0===n?void 0:n.nodeName)||"A"===(null===n||void 0===n?void 0:n.nodeName);!1===t.preventDefault||!i.current&&a||e.preventDefault(),o(!0)}},n=e=>{const t=sa(e.code,u);aa(s,a.current,!0)?(o(!1),a.current.clear()):a.current.delete(e[t]),"Meta"===e.key&&a.current.clear(),i.current=!1},r=()=>{a.current.clear(),o(!1)};return null===l||void 0===l||l.addEventListener("keydown",e),null===l||void 0===l||l.addEventListener("keyup",n),window.addEventListener("blur",r),window.addEventListener("contextmenu",r),()=>{null===l||void 0===l||l.removeEventListener("keydown",e),null===l||void 0===l||l.removeEventListener("keyup",n),window.removeEventListener("blur",r),window.removeEventListener("contextmenu",r)}}}),[e,o]),n}function aa(e,t,n){return e.filter((e=>n||e.length===t.size)).some((e=>e.every((e=>t.has(e)))))}function sa(e,t){return t.includes(e)?"code":"key"}function ua(e,t){const n=[],r=new Map,o=[];for(const i of e)if("add"!==i.type)if("remove"===i.type||"replace"===i.type)r.set(i.id,[i]);else{const e=r.get(i.id);e?e.push(i):r.set(i.id,[i])}else o.push(i);for(const i of t){const e=r.get(i.id);if(!e){n.push(i);continue}if("remove"===e[0].type)continue;if("replace"===e[0].type){n.push(l({},e[0].item));continue}const t=l({},i);for(const n of e)la(n,t);n.push(t)}return o.length&&o.forEach((e=>{void 0!==e.index?n.splice(e.index,0,l({},e.item)):n.push(l({},e.item))})),n}function la(e,t){switch(e.type){case"select":t.selected=e.selected;break;case"position":"undefined"!==typeof e.position&&(t.position=e.position),"undefined"!==typeof e.dragging&&(t.dragging=e.dragging);break;case"dimensions":var n;if("undefined"!==typeof e.dimensions)null!==(n=t.measured)&&void 0!==n||(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(!0!==e.setAttributes&&"width"!==e.setAttributes||(t.width=e.dimensions.width),!0!==e.setAttributes&&"height"!==e.setAttributes||(t.height=e.dimensions.height));"boolean"===typeof e.resizing&&(t.resizing=e.resizing)}}function ca(e,t){return ua(e,t)}function da(e,t){return ua(e,t)}function ha(e,t){return{id:e,type:"select",selected:t}}function fa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=[];for(const[o,i]of e){const e=t.has(o);void 0===i.selected&&!e||i.selected===e||(n&&(i.selected=e),r.push(ha(i.id,e)))}return r}function pa(e){let{items:t=[],lookup:n}=e;const r=[],o=new Map(t.map((e=>[e.id,e])));for(const[s,u]of t.entries()){var i,a;const e=n.get(u.id),t=null!==(i=null===e||void 0===e||null===(a=e.internals)||void 0===a?void 0:a.userNode)&&void 0!==i?i:e;void 0!==t&&t!==u&&r.push({id:u.id,item:u,type:"replace"}),void 0===t&&r.push({item:u,type:"add",index:s})}for(const[s]of n){void 0===o.get(s)&&r.push({id:s,type:"remove"})}return r}function ga(e){return{id:e.id,type:"remove"}}const ma=e=>(e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e))(e);function va(e){return(0,r.forwardRef)(e)}const ya="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;function ba(e){const[t,n]=(0,r.useState)(BigInt(0)),[o]=(0,r.useState)((()=>function(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}((()=>n((e=>e+BigInt(1)))))));return ya((()=>{const t=o.get();t.length&&(e(t),o.reset())}),[t]),o}const Da=(0,r.createContext)(null);function Ca(e){let{children:t}=e;const n=Ri(),o=(0,r.useCallback)((e=>{const{nodes:t=[],setNodes:r,hasDefaultNodes:o,onNodesChange:i,nodeLookup:a,fitViewQueued:s}=n.getState();let u=t;for(const n of e)u="function"===typeof n?n(u):n;const l=pa({items:u,lookup:a});o&&r(u),l.length>0?null===i||void 0===i||i(l):s&&window.requestAnimationFrame((()=>{const{fitViewQueued:e,nodes:t,setNodes:r}=n.getState();e&&r(t)}))}),[]),i=ba(o),a=ba((0,r.useCallback)((e=>{const{edges:t=[],setEdges:r,hasDefaultEdges:o,onEdgesChange:i,edgeLookup:a}=n.getState();let s=t;for(const n of e)s="function"===typeof n?n(s):n;o?r(s):i&&i(pa({items:s,lookup:a}))}),[])),s=(0,r.useMemo)((()=>({nodeQueue:i,edgeQueue:a})),[]);return(0,d.jsx)(Da.Provider,{value:s,children:t})}const wa=e=>!!e.panZoom;function Ea(){const e=(()=>{const e=Ri();return(0,r.useMemo)((()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:null===t||void 0===t?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:null===t||void 0===t?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:null===n||void 0===n?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{var r,o,i;const{transform:[a,s,u],panZoom:l}=e.getState();return l?(await l.setViewport({x:null!==(r=t.x)&&void 0!==r?r:a,y:null!==(o=t.y)&&void 0!==o?o:s,zoom:null!==(i=t.zoom)&&void 0!==i?i:u},{duration:null===n||void 0===n?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>{const{width:o,height:i,maxZoom:a,panZoom:s}=e.getState(),u="undefined"!==typeof(null===r||void 0===r?void 0:r.zoom)?r.zoom:a,l=o/2-t*u,c=i/2-n*u;return s?(await s.setViewport({x:l,y:c,zoom:u},{duration:null===r||void 0===r?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{var r;const{width:o,height:i,minZoom:a,maxZoom:s,panZoom:u}=e.getState(),l=eo(t,o,i,a,s,null!==(r=null===n||void 0===n?void 0:n.padding)&&void 0!==r?r:.1);return u?(await u.setViewport(l,{duration:null===n||void 0===n?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:function(t){var n,r;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:i,snapGrid:a,snapToGrid:s,domNode:u}=e.getState();if(!u)return t;const{x:l,y:c}=u.getBoundingClientRect(),d={x:t.x-l,y:t.y-c},h=null!==(n=o.snapGrid)&&void 0!==n?n:a,f=null!==(r=o.snapToGrid)&&void 0!==r?r:s;return Xr(d,i,f,h)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:i}=r.getBoundingClientRect(),a=$r(t,n);return{x:a.x+o,y:a.y+i}}})),[])})(),t=Ri(),n=function(){const e=(0,r.useContext)(Da);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}(),o=Ni(wa),i=(0,r.useMemo)((()=>{const e=e=>t.getState().nodeLookup.get(e),r=e=>{n.nodeQueue.push(e)},o=e=>{n.edgeQueue.push(e)},i=e=>{var n,r,o,i;const{nodeLookup:a,nodeOrigin:s}=t.getState(),u=ma(e)?e:a.get(e.id),c=u.parentId?io(u.position,u.measured,u.parentId,a,s):u.position,d=l(l({},u),{},{position:c,width:null!==(n=null===(r=u.measured)||void 0===r?void 0:r.width)&&void 0!==n?n:u.width,height:null!==(o=null===(i=u.measured)||void 0===i?void 0:i.height)&&void 0!==o?o:u.height});return qr(d)},a=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};r((r=>r.map((r=>{if(r.id===e){const e="function"===typeof t?t(r):t;return n.replace&&ma(e)?e:l(l({},r),e)}return r}))))},s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};o((r=>r.map((r=>{if(r.id===e){const e="function"===typeof t?t(r):t;return n.replace&&Ar(e)?e:l(l({},r),e)}return r}))))};return{getNodes:()=>t.getState().nodes.map((e=>l({},e))),getNode:t=>{var n;return null===(n=e(t))||void 0===n?void 0:n.internals.userNode},getInternalNode:e,getEdges:()=>{const{edges:e=[]}=t.getState();return e.map((e=>l({},e)))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:r,setEdges:o,addNodes:e=>{const t=Array.isArray(e)?e:[e];n.nodeQueue.push((e=>[...e,...t]))},addEdges:e=>{const t=Array.isArray(e)?e:[e];n.edgeQueue.push((e=>[...e,...t]))},toObject:()=>{const{nodes:e=[],edges:n=[],transform:r}=t.getState(),[o,i,a]=r;return{nodes:e.map((e=>l({},e))),edges:n.map((e=>l({},e))),viewport:{x:o,y:i,zoom:a}}},deleteElements:async e=>{let{nodes:n=[],edges:r=[]}=e;const{nodes:o,edges:i,onNodesDelete:a,onEdgesDelete:s,triggerNodeChanges:u,triggerEdgeChanges:l,onDelete:c,onBeforeDelete:d}=t.getState(),{nodes:h,edges:f}=await Rr({nodesToRemove:n,edgesToRemove:r,nodes:o,edges:i,onBeforeDelete:d}),p=f.length>0,g=h.length>0;if(p){const e=f.map(ga);null===s||void 0===s||s(f),l(e)}if(g){const e=h.map(ga);null===a||void 0===a||a(h),u(e)}return(g||p)&&(null===c||void 0===c||c({nodes:h,edges:f})),{deletedNodes:h,deletedEdges:f}},getIntersectingNodes:function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;const o=Gr(e),a=o?e:i(e),s=void 0!==r;return a?(r||t.getState().nodes).filter((r=>{const i=t.getState().nodeLookup.get(r.id);if(i&&!o&&(r.id===e.id||!i.internals.positionAbsolute))return!1;const u=qr(s?r:i),l=Kr(u,a);return n&&l>0||l>=a.width*a.height})):[]},isNodeIntersecting:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Gr(e)?e:i(e);if(!r)return!1;const o=Kr(r,t);return n&&o>0||o>=r.width*r.height},updateNode:a,updateNodeData:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};a(e,(e=>{const r="function"===typeof t?t(e):t;return n.replace?l(l({},e),{},{data:r}):l(l({},e),{},{data:l(l({},e.data),r)})}),n)},updateEdge:s,updateEdgeData:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};s(e,(e=>{const r="function"===typeof t?t(e):t;return n.replace?l(l({},e),{},{data:r}):l(l({},e),{},{data:l(l({},e.data),r)})}),n)},getNodesBounds:e=>{const{nodeLookup:n,nodeOrigin:r}=t.getState();return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{nodeOrigin:[0,0]};if(0===e.length)return{x:0,y:0,width:0,height:0};const n=e.reduce(((e,n)=>{const r="string"===typeof n;let o=t.nodeLookup||r?void 0:n;t.nodeLookup&&(o=r?t.nodeLookup.get(n):Sr(n)?n:t.nodeLookup.get(n.id));const i=o?Wr(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return jr(e,i)}),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ur(n)}(e,{nodeLookup:n,nodeOrigin:r})},getHandleConnections:e=>{var n,r;let{type:o,id:i,nodeId:a}=e;return Array.from(null!==(n=null===(r=t.getState().connectionLookup.get("".concat(a,"-").concat(o).concat(i?"-".concat(i):"")))||void 0===r?void 0:r.values())&&void 0!==n?n:[])},getNodeConnections:e=>{var n,r;let{type:o,handleId:i,nodeId:a}=e;return Array.from(null!==(n=null===(r=t.getState().connectionLookup.get("".concat(a).concat(o?i?"-".concat(o,"-").concat(i):"-".concat(o):"")))||void 0===r?void 0:r.values())&&void 0!==n?n:[])},fitView:async e=>{var r;const o=null!==(r=t.getState().fitViewResolver)&&void 0!==r?r:function(){let e,t;return{promise:new Promise(((n,r)=>{e=n,t=r})),resolve:e,reject:t}}();return t.setState({fitViewQueued:!0,fitViewOptions:e,fitViewResolver:o}),n.nodeQueue.push((e=>[...e])),o.promise}}}),[]);return(0,r.useMemo)((()=>l(l(l({},i),e),{},{viewportInitialized:o})),[o])}const ka=e=>e.selected,Fa="undefined"!==typeof window?window:void 0;const xa={position:"absolute",width:"100%",height:"100%",top:0,left:0},Aa=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function Sa(e){let{onPaneContextMenu:t,zoomOnScroll:n=!0,zoomOnPinch:o=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:s=br.Free,zoomOnDoubleClick:u=!0,panOnDrag:l=!0,defaultViewport:c,translateExtent:h,minZoom:f,maxZoom:p,zoomActivationKeyCode:g,preventScrolling:m=!0,children:v,noWheelClassName:y,noPanClassName:b,onViewportChange:D,isControlledViewport:C,paneClickDistance:w}=e;const E=Ri(),k=(0,r.useRef)(null),{userSelectionActive:F,lib:x}=Ni(Aa,wi),A=ia(g),S=(0,r.useRef)();!function(e){const t=Ri();(0,r.useEffect)((()=>{const n=()=>{if(!e.current)return!1;const n=uo(e.current);var r,o;0!==n.height&&0!==n.width||null===(r=(o=t.getState()).onError)||void 0===r||r.call(o,"004",ar()),t.setState({width:n.width||500,height:n.height||500})};if(e.current){n(),window.addEventListener("resize",n);const t=new ResizeObserver((()=>n()));return t.observe(e.current),()=>{window.removeEventListener("resize",n),t&&e.current&&t.unobserve(e.current)}}}),[])}(k);const _=(0,r.useCallback)((e=>{null===D||void 0===D||D({x:e[0],y:e[1],zoom:e[2]}),C||E.setState({transform:e})}),[D,C]);return(0,r.useEffect)((()=>{if(k.current){S.current=oi({domNode:k.current,minZoom:f,maxZoom:p,translateExtent:h,viewport:c,paneClickDistance:w,onDraggingChange:e=>E.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{const{onViewportChangeStart:n,onMoveStart:r}=E.getState();null===r||void 0===r||r(e,t),null===n||void 0===n||n(t)},onPanZoom:(e,t)=>{const{onViewportChange:n,onMove:r}=E.getState();null===r||void 0===r||r(e,t),null===n||void 0===n||n(t)},onPanZoomEnd:(e,t)=>{const{onViewportChangeEnd:n,onMoveEnd:r}=E.getState();null===r||void 0===r||r(e,t),null===n||void 0===n||n(t)}});const{x:e,y:t,zoom:n}=S.current.getViewport();return E.setState({panZoom:S.current,transform:[e,t,n],domNode:k.current.closest(".react-flow")}),()=>{var e;null===(e=S.current)||void 0===e||e.destroy()}}}),[]),(0,r.useEffect)((()=>{var e;null===(e=S.current)||void 0===e||e.update({onPaneContextMenu:t,zoomOnScroll:n,zoomOnPinch:o,panOnScroll:i,panOnScrollSpeed:a,panOnScrollMode:s,zoomOnDoubleClick:u,panOnDrag:l,zoomActivationKeyPressed:A,preventScrolling:m,noPanClassName:b,userSelectionActive:F,noWheelClassName:y,lib:x,onTransformChange:_})}),[t,n,o,i,a,s,u,l,A,m,b,F,y,x,_]),(0,d.jsx)("div",{className:"react-flow__renderer",ref:k,style:xa,children:v})}const _a=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Ia(){const{userSelectionActive:e,userSelectionRect:t}=Ni(_a,wi);return e&&t?(0,d.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:"translate(".concat(t.x,"px, ").concat(t.y,"px)")}}):null}const Pa=(e,t)=>n=>{n.target===t.current&&(null===e||void 0===e||e(n))},Ta=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Na(e){let{isSelecting:t,selectionKeyPressed:n,selectionMode:o=Dr.Full,panOnDrag:i,selectionOnDrag:a,onSelectionStart:s,onSelectionEnd:u,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:f,onPaneMouseEnter:p,onPaneMouseMove:g,onPaneMouseLeave:m,children:v}=e;const y=Ri(),{userSelectionActive:b,elementsSelectable:D,dragging:C,connectionInProgress:w}=Ni(Ta,wi),E=D&&(t||b),k=(0,r.useRef)(null),F=(0,r.useRef)(),x=(0,r.useRef)(new Set),A=(0,r.useRef)(new Set),S=(0,r.useRef)(!1),_=(0,r.useRef)(!1),I=e=>{S.current||w?S.current=!1:(null===l||void 0===l||l(e),y.getState().resetSelectedElements(),y.setState({nodesSelectionActive:!1}))},P=f?e=>f(e):void 0,T=!0===i||Array.isArray(i)&&i.includes(0);return(0,d.jsxs)("div",{className:h(["react-flow__pane",{draggable:T,dragging:C,selection:t}]),onClick:E?void 0:Pa(I,k),onContextMenu:Pa((e=>{Array.isArray(i)&&null!==i&&void 0!==i&&i.includes(2)?e.preventDefault():null===c||void 0===c||c(e)}),k),onWheel:Pa(P,k),onPointerEnter:E?void 0:p,onPointerDown:E?e=>{var n,r;const{resetSelectedElements:o,domNode:i}=y.getState();if(F.current=null===i||void 0===i?void 0:i.getBoundingClientRect(),!D||!t||0!==e.button||e.target!==k.current||!F.current)return;null===(n=e.target)||void 0===n||null===(r=n.setPointerCapture)||void 0===r||r.call(n,e.pointerId),_.current=!0,S.current=!1;const{x:a,y:u}=po(e.nativeEvent,F.current);o(),y.setState({userSelectionRect:{width:0,height:0,startX:a,startY:u,x:a,y:u}}),null===s||void 0===s||s(e)}:g,onPointerMove:E?e=>{var t;const{userSelectionRect:n,transform:r,nodeLookup:i,edgeLookup:a,connectionLookup:s,triggerNodeChanges:u,triggerEdgeChanges:l,defaultEdgeOptions:c}=y.getState();if(!F.current||!n)return;S.current=!0;const{x:d,y:h}=po(e.nativeEvent,F.current),{startX:f,startY:p}=n,g={startX:f,startY:p,x:d<f?d:f,y:h<p?h:p,width:Math.abs(d-f),height:Math.abs(h-p)},m=x.current,v=A.current;x.current=new Set(Pr(i,g,r,o===Dr.Partial,!0).map((e=>e.id))),A.current=new Set;const b=null===(t=null===c||void 0===c?void 0:c.selectable)||void 0===t||t;for(const o of x.current){const e=s.get(o);if(e)for(const{edgeId:t}of e.values()){var D;const e=a.get(t);e&&(null!==(D=e.selectable)&&void 0!==D?D:b)&&A.current.add(t)}}if(!ao(m,x.current)){u(fa(i,x.current,!0))}if(!ao(v,A.current)){l(fa(a,A.current))}y.setState({userSelectionRect:g,userSelectionActive:!0,nodesSelectionActive:!1})}:g,onPointerUp:E?e=>{var t,r;if(0!==e.button||!_.current)return;null===(t=e.target)||void 0===t||null===(r=t.releasePointerCapture)||void 0===r||r.call(t,e.pointerId);const{userSelectionRect:o}=y.getState();!b&&o&&e.target===k.current&&(null===I||void 0===I||I(e)),y.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:x.current.size>0}),null===u||void 0===u||u(e),(n||a)&&(S.current=!1),_.current=!1}:void 0,onPointerLeave:m,ref:k,style:xa,children:[v,(0,d.jsx)(Ia,{})]})}function Ra(e){let{id:t,store:n,unselect:r=!1,nodeRef:o}=e;const{addSelectedNodes:i,unselectNodesAndEdges:a,multiSelectionActive:s,nodeLookup:u,onError:l}=n.getState(),c=u.get(t);c?(n.setState({nodesSelectionActive:!1}),c.selected?(r||c.selected&&s)&&(a({nodes:[c],edges:[]}),requestAnimationFrame((()=>{var e;return null===o||void 0===o||null===(e=o.current)||void 0===e?void 0:e.blur()}))):i([t])):null===l||void 0===l||l("012",fr(t))}function Ma(e){let{nodeRef:t,disabled:n=!1,noDragClassName:o,handleSelector:i,nodeId:a,isSelectable:s,nodeClickDistance:u}=e;const l=Ri(),[c,d]=(0,r.useState)(!1),h=(0,r.useRef)();return(0,r.useEffect)((()=>{h.current=Vo({getStoreItems:()=>l.getState(),onNodeMouseDown:e=>{Ra({id:e,store:l,nodeRef:t})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})}),[]),(0,r.useEffect)((()=>{var e;if(n)null===(e=h.current)||void 0===e||e.destroy();else if(t.current){var r;return null===(r=h.current)||void 0===r||r.update({noDragClassName:o,handleSelector:i,domNode:t.current,isSelectable:s,nodeId:a,nodeClickDistance:u}),()=>{var e;null===(e=h.current)||void 0===e||e.destroy()}}}),[o,i,n,s,t,a]),c}function Ba(){const e=Ri(),t=(0,r.useCallback)((t=>{const{nodeExtent:n,snapToGrid:r,snapGrid:o,nodesDraggable:i,onError:a,updateNodePositions:s,nodeLookup:u,nodeOrigin:l}=e.getState(),c=new Map,d=(e=>t=>t.selected&&(t.draggable||e&&"undefined"===typeof t.draggable))(i),h=r?o[0]:5,f=r?o[1]:5,p=t.direction.x*h*t.factor,g=t.direction.y*f*t.factor;for(const[,e]of u){if(!d(e))continue;let t={x:e.internals.positionAbsolute.x+p,y:e.internals.positionAbsolute.y+g};r&&(t=Qr(t,o));const{position:i,positionAbsolute:s}=Nr({nodeId:e.id,nextPosition:t,nodeLookup:u,nodeExtent:n,nodeOrigin:l,onError:a});e.position=i,e.internals.positionAbsolute=s,c.set(e.id,e)}s(c)}),[]);return t}const Oa=(0,r.createContext)(null),za=Oa.Provider;Oa.Consumer;const La=()=>(0,r.useContext)(Oa),ja=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId});const Ha=(0,r.memo)(va((function(e,t){let{type:n="source",position:r=kr.Top,isValidConnection:o,isConnectable:i=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:u,onConnect:f,children:p,className:g,onMouseDown:m,onTouchStart:v}=e,y=c(e,ki);const b=u||null,D="target"===n,C=Ri(),w=La(),{connectOnClick:E,noPanClassName:k,rfId:F}=Ni(ja,wi),{connectingFrom:x,connectingTo:A,clickConnecting:S,isPossibleEndHandle:_,connectionInProcess:I,clickConnectionInProcess:P,valid:T}=Ni(((e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:i,connection:a}=r,{fromHandle:s,toHandle:u,isValid:l}=a,c=(null===u||void 0===u?void 0:u.nodeId)===e&&(null===u||void 0===u?void 0:u.id)===t&&(null===u||void 0===u?void 0:u.type)===n;return{connectingFrom:(null===s||void 0===s?void 0:s.nodeId)===e&&(null===s||void 0===s?void 0:s.id)===t&&(null===s||void 0===s?void 0:s.type)===n,connectingTo:c,clickConnecting:(null===o||void 0===o?void 0:o.nodeId)===e&&(null===o||void 0===o?void 0:o.id)===t&&(null===o||void 0===o?void 0:o.type)===n,isPossibleEndHandle:i===yr.Strict?(null===s||void 0===s?void 0:s.type)!==n:e!==(null===s||void 0===s?void 0:s.nodeId)||t!==(null===s||void 0===s?void 0:s.id),connectionInProcess:!!s,clickConnectionInProcess:!!o,valid:c&&l}})(w,b,n),wi);var N,R;w||null===(N=(R=C.getState()).onError)||void 0===N||N.call(R,"010",dr());const M=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=C.getState(),o=l(l({},t),e);if(r){const{edges:e,setEdges:t}=C.getState();t(((e,t)=>{if(!e.source||!e.target)return Zr(0,ur()),t;let n;return n=Ar(e)?l({},e):l(l({},e),{},{id:wo(e)}),((e,t)=>t.some((t=>t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle))))(n,t)?t:(null===n.sourceHandle&&delete n.sourceHandle,null===n.targetHandle&&delete n.targetHandle,t.concat(n))})(o,e))}null===n||void 0===n||n(o),null===f||void 0===f||f(o)},B=e=>{if(!w)return;const t=fo(e.nativeEvent);if(a&&(t&&0===e.button||!t)){const t=C.getState();Xo.onPointerDown(e.nativeEvent,{autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:D,handleId:b,nodeId:w,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:M,isValidConnection:o||t.isValidConnection,getTransform:()=>C.getState().transform,getFromHandle:()=>C.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed})}t?null===m||void 0===m||m(e):null===v||void 0===v||v(e)};return(0,d.jsx)("div",l(l({"data-handleid":b,"data-nodeid":w,"data-handlepos":r,"data-id":"".concat(F,"-").concat(w,"-").concat(b,"-").concat(n),className:h(["react-flow__handle","react-flow__handle-".concat(r),"nodrag",k,g,{source:!D,target:D,connectable:i,connectablestart:a,connectableend:s,clickconnecting:S,connectingfrom:x,connectingto:A,valid:T,connectionindicator:i&&(!I||_)&&(I||P?s:a)}]),onMouseDown:B,onTouchStart:B,onClick:E?e=>{const{onClickConnectStart:t,onClickConnectEnd:r,connectionClickStartHandle:i,connectionMode:s,isValidConnection:u,lib:l,rfId:c,nodeLookup:d,connection:h}=C.getState();if(!w||!i&&!a)return;if(!i)return null===t||void 0===t||t(e.nativeEvent,{nodeId:w,handleId:b,handleType:n}),void C.setState({connectionClickStartHandle:{nodeId:w,type:n,id:b}});const f=lo(e.target),p=o||u,{connection:g,isValid:m}=Xo.isValid(e.nativeEvent,{handle:{nodeId:w,id:b,type:n},connectionMode:s,fromNodeId:i.nodeId,fromHandleId:i.id||null,fromType:i.type,isValidConnection:p,flowId:c,doc:f,lib:l,nodeLookup:d});m&&g&&M(g);const v=structuredClone(h);delete v.inProgress,v.toPosition=v.toHandle?v.toHandle.position:null,null===r||void 0===r||r(e,v),C.setState({connectionClickStartHandle:null})}:void 0,ref:t},y),{},{children:p}))})));const Ua={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},qa={input:function(e){let{data:t,isConnectable:n,sourcePosition:r=kr.Bottom}=e;return(0,d.jsxs)(d.Fragment,{children:[null===t||void 0===t?void 0:t.label,(0,d.jsx)(Ha,{type:"source",position:r,isConnectable:n})]})},default:function(e){let{data:t,isConnectable:n,targetPosition:r=kr.Top,sourcePosition:o=kr.Bottom}=e;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Ha,{type:"target",position:r,isConnectable:n}),null===t||void 0===t?void 0:t.label,(0,d.jsx)(Ha,{type:"source",position:o,isConnectable:n})]})},output:function(e){let{data:t,isConnectable:n,targetPosition:r=kr.Top}=e;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Ha,{type:"target",position:r,isConnectable:n}),null===t||void 0===t?void 0:t.label]})},group:function(){return null}};const Wa=e=>{const{width:t,height:n,x:r,y:o}=Ir(e.nodeLookup,{filter:e=>!!e.selected});return{width:Yr(t)?t:null,height:Yr(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],") translate(").concat(r,"px,").concat(o,"px)")}};function Va(e){let{onSelectionContextMenu:t,noPanClassName:n,disableKeyboardA11y:o}=e;const i=Ri(),{width:a,height:s,transformString:u,userSelectionActive:l}=Ni(Wa,wi),c=Ba(),f=(0,r.useRef)(null);if((0,r.useEffect)((()=>{var e;o||(null===(e=f.current)||void 0===e||e.focus({preventScroll:!0}))}),[o]),Ma({nodeRef:f}),l||!a||!s)return null;const p=t?e=>{const n=i.getState().nodes.filter((e=>e.selected));t(e,n)}:void 0;return(0,d.jsx)("div",{className:h(["react-flow__nodesselection","react-flow__container",n]),style:{transform:u},children:(0,d.jsx)("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:o?void 0:-1,onKeyDown:o?void 0:e=>{Object.prototype.hasOwnProperty.call(Ua,e.key)&&(e.preventDefault(),c({direction:Ua[e.key],factor:e.shiftKey?4:1}))},style:{width:a,height:s}})})}const Ka="undefined"!==typeof window?window:void 0,Ga=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Ya(e){let{children:t,onPaneClick:n,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:u,paneClickDistance:l,deleteKeyCode:c,selectionKeyCode:h,selectionOnDrag:f,selectionMode:p,onSelectionStart:g,onSelectionEnd:m,multiSelectionKeyCode:v,panActivationKeyCode:y,zoomActivationKeyCode:b,elementsSelectable:D,zoomOnScroll:C,zoomOnPinch:w,panOnScroll:E,panOnScrollSpeed:k,panOnScrollMode:F,zoomOnDoubleClick:x,panOnDrag:A,defaultViewport:S,translateExtent:_,minZoom:I,maxZoom:P,preventScrolling:T,onSelectionContextMenu:N,noWheelClassName:R,noPanClassName:M,disableKeyboardA11y:B,onViewportChange:O,isControlledViewport:z}=e;const{nodesSelectionActive:L,userSelectionActive:j}=Ni(Ga),H=ia(h,{target:Ka}),U=ia(y,{target:Ka}),q=U||A,W=U||E,V=f&&!0!==q,K=H||j||V;return function(e){let{deleteKeyCode:t,multiSelectionKeyCode:n}=e;const o=Ri(),{deleteElements:i}=Ea(),a=ia(t,{actInsideInputWithModifier:!1}),s=ia(n,{target:Fa});(0,r.useEffect)((()=>{if(a){const{edges:e,nodes:t}=o.getState();i({nodes:t.filter(ka),edges:e.filter(ka)}),o.setState({nodesSelectionActive:!1})}}),[a]),(0,r.useEffect)((()=>{o.setState({multiSelectionActive:s})}),[s])}({deleteKeyCode:c,multiSelectionKeyCode:v}),(0,d.jsx)(Sa,{onPaneContextMenu:s,elementsSelectable:D,zoomOnScroll:C,zoomOnPinch:w,panOnScroll:W,panOnScrollSpeed:k,panOnScrollMode:F,zoomOnDoubleClick:x,panOnDrag:!H&&q,defaultViewport:S,translateExtent:_,minZoom:I,maxZoom:P,zoomActivationKeyCode:b,preventScrolling:T,noWheelClassName:R,noPanClassName:M,onViewportChange:O,isControlledViewport:z,paneClickDistance:l,children:(0,d.jsxs)(Na,{onSelectionStart:g,onSelectionEnd:m,onPaneClick:n,onPaneMouseEnter:o,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:u,panOnDrag:q,isSelecting:!!K,selectionMode:p,selectionKeyPressed:H,selectionOnDrag:V,children:[t,L&&(0,d.jsx)(Va,{onSelectionContextMenu:N,noPanClassName:M,disableKeyboardA11y:B})]})})}Ya.displayName="FlowRenderer";const Za=(0,r.memo)(Ya);function Qa(e){const t=Ni((0,r.useCallback)((e=>t=>e?Pr(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map((e=>e.id)):Array.from(t.nodeLookup.keys()))(e),[e]),wi);return t}const Xa=e=>e.updateNodeInternals;function $a(e){var t,n;let{id:o,onClick:i,onMouseEnter:a,onMouseMove:s,onMouseLeave:u,onContextMenu:c,onDoubleClick:f,nodesDraggable:p,elementsSelectable:g,nodesConnectable:m,nodesFocusable:v,resizeObserver:y,noDragClassName:b,noPanClassName:D,disableKeyboardA11y:C,rfId:w,nodeTypes:E,nodeClickDistance:k,onError:F}=e;const{node:x,internals:A,isParent:S}=Ni((e=>{const t=e.nodeLookup.get(o),n=e.parentLookup.has(o);return{node:t,internals:t.internals,isParent:n}}),wi);let _=x.type||"default",I=(null===E||void 0===E?void 0:E[_])||qa[_];void 0===I&&(null===F||void 0===F||F("003",ir(_)),_="default",I=qa.default);const P=!!(x.draggable||p&&"undefined"===typeof x.draggable),T=!!(x.selectable||g&&"undefined"===typeof x.selectable),N=!!(x.connectable||m&&"undefined"===typeof x.connectable),R=!!(x.focusable||v&&"undefined"===typeof x.focusable),M=Ri(),B=oo(x),O=function(e){let{node:t,nodeType:n,hasDimensions:o,resizeObserver:i}=e;const a=Ri(),s=(0,r.useRef)(null),u=(0,r.useRef)(null),l=(0,r.useRef)(t.sourcePosition),c=(0,r.useRef)(t.targetPosition),d=(0,r.useRef)(n),h=o&&!!t.internals.handleBounds;return(0,r.useEffect)((()=>{!s.current||t.hidden||h&&u.current===s.current||(u.current&&(null===i||void 0===i||i.unobserve(u.current)),null===i||void 0===i||i.observe(s.current),u.current=s.current)}),[h,t.hidden]),(0,r.useEffect)((()=>()=>{u.current&&(null===i||void 0===i||i.unobserve(u.current),u.current=null)}),[]),(0,r.useEffect)((()=>{if(s.current){const e=d.current!==n,r=l.current!==t.sourcePosition,o=c.current!==t.targetPosition;(e||r||o)&&(d.current=n,l.current=t.sourcePosition,c.current=t.targetPosition,a.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:s.current,force:!0}]])))}}),[t.id,n,t.sourcePosition,t.targetPosition]),s}({node:x,nodeType:_,hasDimensions:B,resizeObserver:y}),z=Ma({nodeRef:O,disabled:x.hidden||!P,noDragClassName:b,handleSelector:x.dragHandle,nodeId:o,isSelectable:T,nodeClickDistance:k}),L=Ba();if(x.hidden)return null;const j=ro(x),H=function(e){var t,n,r,o,i,a,s,u,l,c;return void 0===e.internals.handleBounds?{width:null!==(i=null!==(a=e.width)&&void 0!==a?a:e.initialWidth)&&void 0!==i?i:null===(s=e.style)||void 0===s?void 0:s.width,height:null!==(u=null!==(l=e.height)&&void 0!==l?l:e.initialHeight)&&void 0!==u?u:null===(c=e.style)||void 0===c?void 0:c.height}:{width:null!==(t=e.width)&&void 0!==t?t:null===(n=e.style)||void 0===n?void 0:n.width,height:null!==(r=e.height)&&void 0!==r?r:null===(o=e.style)||void 0===o?void 0:o.height}}(x),U=T||P||i||a||s||u,q=a?e=>a(e,l({},A.userNode)):void 0,W=s?e=>s(e,l({},A.userNode)):void 0,V=u?e=>u(e,l({},A.userNode)):void 0,K=c?e=>c(e,l({},A.userNode)):void 0,G=f?e=>f(e,l({},A.userNode)):void 0;return(0,d.jsx)("div",{className:h(["react-flow__node","react-flow__node-".concat(_),{[D]:P},x.className,{selected:x.selected,selectable:T,parent:S,draggable:P,dragging:z}]),ref:O,style:l(l({zIndex:A.z,transform:"translate(".concat(A.positionAbsolute.x,"px,").concat(A.positionAbsolute.y,"px)"),pointerEvents:U?"all":"none",visibility:B?"visible":"hidden"},x.style),H),"data-id":o,"data-testid":"rf__node-".concat(o),onMouseEnter:q,onMouseMove:W,onMouseLeave:V,onContextMenu:K,onClick:e=>{const{selectNodesOnDrag:t,nodeDragThreshold:n}=M.getState();T&&(!t||!P||n>0)&&Ra({id:o,store:M,nodeRef:O}),i&&i(e,l({},A.userNode))},onDoubleClick:G,onKeyDown:R?e=>{if(!ho(e.nativeEvent)&&!C)if(vr.includes(e.key)&&T){const t="Escape"===e.key;Ra({id:o,store:M,unselect:t,nodeRef:O})}else P&&x.selected&&Object.prototype.hasOwnProperty.call(Ua,e.key)&&(e.preventDefault(),M.setState({ariaLiveMessage:"Moved selected node ".concat(e.key.replace("Arrow","").toLowerCase(),". New position, x: ").concat(~~A.positionAbsolute.x,", y: ").concat(~~A.positionAbsolute.y)}),L({direction:Ua[e.key],factor:e.shiftKey?4:1}))}:void 0,tabIndex:R?0:void 0,role:R?"button":void 0,"aria-describedby":C?void 0:"".concat(Oi,"-").concat(w),"aria-label":x.ariaLabel,children:(0,d.jsx)(za,{value:o,children:(0,d.jsx)(I,l({id:o,data:x.data,type:_,positionAbsoluteX:A.positionAbsolute.x,positionAbsoluteY:A.positionAbsolute.y,selected:null!==(t=x.selected)&&void 0!==t&&t,selectable:T,draggable:P,deletable:null===(n=x.deletable)||void 0===n||n,isConnectable:N,sourcePosition:x.sourcePosition,targetPosition:x.targetPosition,dragging:z,dragHandle:x.dragHandle,zIndex:A.z,parentId:x.parentId},j))})})}const Ja=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function es(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:i,onError:a}=Ni(Ja,wi),s=Qa(e.onlyRenderVisibleElements),u=function(){const e=Ni(Xa),[t]=(0,r.useState)((()=>"undefined"===typeof ResizeObserver?null:new ResizeObserver((t=>{const n=new Map;t.forEach((e=>{const t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})})),e(n)}))));return(0,r.useEffect)((()=>()=>{null===t||void 0===t||t.disconnect()}),[t]),t}();return(0,d.jsx)("div",{className:"react-flow__nodes",style:xa,children:s.map((r=>(0,d.jsx)($a,{id:r,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:u,nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:a},r)))})}es.displayName="NodeRenderer";const ts=(0,r.memo)(es);const ns={[Er.Arrow]:e=>{let{color:t="none",strokeWidth:n=1}=e;return(0,d.jsx)("polyline",{style:{stroke:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"})},[Er.ArrowClosed]:e=>{let{color:t="none",strokeWidth:n=1}=e;return(0,d.jsx)("polyline",{style:{stroke:t,fill:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}};const rs=e=>{let{id:t,type:n,color:o,width:i=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:u,orient:l="auto-start-reverse"}=e;const c=function(e){const t=Ri();return(0,r.useMemo)((()=>{var n,r;return Object.prototype.hasOwnProperty.call(ns,e)?ns[e]:(null===(n=(r=t.getState()).onError)||void 0===n||n.call(r,"009",lr(e)),null)}),[e])}(n);return c?(0,d.jsx)("marker",{className:"react-flow__arrowhead",id:t,markerWidth:"".concat(i),markerHeight:"".concat(a),viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:(0,d.jsx)(c,{color:o,strokeWidth:u})}):null},os=e=>{let{defaultColor:t,rfId:n}=e;const o=Ni((e=>e.edges)),i=Ni((e=>e.defaultEdgeOptions)),a=(0,r.useMemo)((()=>{const e=function(e,t){let{id:n,defaultColor:r,defaultMarkerStart:o,defaultMarkerEnd:i}=t;const a=new Set;return e.reduce(((e,t)=>([t.markerStart||o,t.markerEnd||i].forEach((t=>{if(t&&"object"===typeof t){const o=To(t,n);a.has(o)||(e.push(l({id:o,color:t.color||r},t)),a.add(o))}})),e)),[]).sort(((e,t)=>e.id.localeCompare(t.id)))}(o,{id:n,defaultColor:t,defaultMarkerStart:null===i||void 0===i?void 0:i.markerStart,defaultMarkerEnd:null===i||void 0===i?void 0:i.markerEnd});return e}),[o,i,n,t]);return a.length?(0,d.jsx)("svg",{className:"react-flow__marker","aria-hidden":"true",children:(0,d.jsx)("defs",{children:a.map((e=>(0,d.jsx)(rs,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id)))})}):null};os.displayName="MarkerDefinitions";var is=(0,r.memo)(os);function as(e){let{x:t,y:n,label:o,labelStyle:i,labelShowBg:a=!0,labelBgStyle:s,labelBgPadding:u=[2,4],labelBgBorderRadius:f=2,children:p,className:g}=e,m=c(e,Fi);const[v,y]=(0,r.useState)({x:1,y:0,width:0,height:0}),b=h(["react-flow__edge-textwrapper",g]),D=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(D.current){const e=D.current.getBBox();y({x:e.x,y:e.y,width:e.width,height:e.height})}}),[o]),o?(0,d.jsxs)("g",l(l({transform:"translate(".concat(t-v.width/2," ").concat(n-v.height/2,")"),className:b,visibility:v.width?"visible":"hidden"},m),{},{children:[a&&(0,d.jsx)("rect",{width:v.width+2*u[0],x:-u[0],y:-u[1],height:v.height+2*u[1],className:"react-flow__edge-textbg",style:s,rx:f,ry:f}),(0,d.jsx)("text",{className:"react-flow__edge-text",y:v.height/2,dy:"0.3em",ref:D,style:i,children:o}),p]})):null}as.displayName="EdgeText";const ss=(0,r.memo)(as);function us(e){let{path:t,labelX:n,labelY:r,label:o,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:f,interactionWidth:p=20}=e,g=c(e,xi);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",l(l({},g),{},{d:t,fill:"none",className:h(["react-flow__edge-path",g.className])})),p&&(0,d.jsx)("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),o&&Yr(n)&&Yr(r)?(0,d.jsx)(ss,{x:n,y:r,label:o,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:f}):null]})}function ls(e){let{pos:t,x1:n,y1:r,x2:o,y2:i}=e;return t===kr.Left||t===kr.Right?[.5*(n+o),r]:[n,.5*(r+i)]}function cs(e){let{sourceX:t,sourceY:n,sourcePosition:r=kr.Bottom,targetX:o,targetY:i,targetPosition:a=kr.Top}=e;const[s,u]=ls({pos:r,x1:t,y1:n,x2:o,y2:i}),[l,c]=ls({pos:a,x1:o,y1:i,x2:t,y2:n}),[d,h,f,p]=mo({sourceX:t,sourceY:n,targetX:o,targetY:i,sourceControlX:s,sourceControlY:u,targetControlX:l,targetControlY:c});return["M".concat(t,",").concat(n," C").concat(s,",").concat(u," ").concat(l,",").concat(c," ").concat(o,",").concat(i),d,h,f,p]}function ds(e){return(0,r.memo)((t=>{let{id:n,sourceX:r,sourceY:o,targetX:i,targetY:a,sourcePosition:s,targetPosition:u,label:l,labelStyle:c,labelShowBg:h,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:v,markerStart:y,interactionWidth:b}=t;const[D,C,w]=cs({sourceX:r,sourceY:o,sourcePosition:s,targetX:i,targetY:a,targetPosition:u}),E=e.isInternal?void 0:n;return(0,d.jsx)(us,{id:E,path:D,labelX:C,labelY:w,label:l,labelStyle:c,labelShowBg:h,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:v,markerStart:y,interactionWidth:b})}))}const hs=ds({isInternal:!1}),fs=ds({isInternal:!0});function ps(e){return(0,r.memo)((t=>{let{id:n,sourceX:r,sourceY:o,targetX:i,targetY:a,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:h,labelBgBorderRadius:f,style:p,sourcePosition:g=kr.Bottom,targetPosition:m=kr.Top,markerEnd:v,markerStart:y,pathOptions:b,interactionWidth:D}=t;const[C,w,E]=Ao({sourceX:r,sourceY:o,sourcePosition:g,targetX:i,targetY:a,targetPosition:m,borderRadius:null===b||void 0===b?void 0:b.borderRadius,offset:null===b||void 0===b?void 0:b.offset}),k=e.isInternal?void 0:n;return(0,d.jsx)(us,{id:k,path:C,labelX:w,labelY:E,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:v,markerStart:y,interactionWidth:D})}))}hs.displayName="SimpleBezierEdge",fs.displayName="SimpleBezierEdgeInternal";const gs=ps({isInternal:!1}),ms=ps({isInternal:!0});function vs(e){return(0,r.memo)((t=>{var n;let{id:o}=t,i=c(t,Ai);const a=e.isInternal?void 0:o;return(0,d.jsx)(gs,l(l({},i),{},{id:a,pathOptions:(0,r.useMemo)((()=>{var e;return{borderRadius:0,offset:null===(e=i.pathOptions)||void 0===e?void 0:e.offset}}),[null===(n=i.pathOptions)||void 0===n?void 0:n.offset])}))}))}gs.displayName="SmoothStepEdge",ms.displayName="SmoothStepEdgeInternal";const ys=vs({isInternal:!1}),bs=vs({isInternal:!0});function Ds(e){return(0,r.memo)((t=>{let{id:n,sourceX:r,sourceY:o,targetX:i,targetY:a,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:m,interactionWidth:v}=t;const[y,b,D]=Eo({sourceX:r,sourceY:o,targetX:i,targetY:a}),C=e.isInternal?void 0:n;return(0,d.jsx)(us,{id:C,path:y,labelX:b,labelY:D,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:m,interactionWidth:v})}))}ys.displayName="StepEdge",bs.displayName="StepEdgeInternal";const Cs=Ds({isInternal:!1}),ws=Ds({isInternal:!0});function Es(e){return(0,r.memo)((t=>{let{id:n,sourceX:r,sourceY:o,targetX:i,targetY:a,sourcePosition:s=kr.Bottom,targetPosition:u=kr.Top,label:l,labelStyle:c,labelShowBg:h,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:v,markerStart:y,pathOptions:b,interactionWidth:D}=t;const[C,w,E]=bo({sourceX:r,sourceY:o,sourcePosition:s,targetX:i,targetY:a,targetPosition:u,curvature:null===b||void 0===b?void 0:b.curvature}),k=e.isInternal?void 0:n;return(0,d.jsx)(us,{id:k,path:C,labelX:w,labelY:E,label:l,labelStyle:c,labelShowBg:h,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:v,markerStart:y,interactionWidth:D})}))}Cs.displayName="StraightEdge",ws.displayName="StraightEdgeInternal";const ks=Es({isInternal:!1}),Fs=Es({isInternal:!0});ks.displayName="BezierEdge",Fs.displayName="BezierEdgeInternal";const xs={default:Fs,straight:ws,step:bs,smoothstep:ms,simplebezier:fs},As={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Ss=(e,t,n)=>n===kr.Left?e-t:n===kr.Right?e+t:e,_s=(e,t,n)=>n===kr.Top?e-t:n===kr.Bottom?e+t:e,Is="react-flow__edgeupdater";function Ps(e){let{position:t,centerX:n,centerY:r,radius:o=10,onMouseDown:i,onMouseEnter:a,onMouseOut:s,type:u}=e;return(0,d.jsx)("circle",{onMouseDown:i,onMouseEnter:a,onMouseOut:s,className:h([Is,"".concat(Is,"-").concat(u)]),cx:Ss(n,o,t),cy:_s(r,o,t),r:o,stroke:"transparent",fill:"transparent"})}function Ts(e){let{isReconnectable:t,reconnectRadius:n,edge:r,sourceX:o,sourceY:i,targetX:a,targetY:s,sourcePosition:u,targetPosition:l,onReconnect:c,onReconnectStart:h,onReconnectEnd:f,setReconnecting:p,setUpdateHover:g}=e;const m=Ri(),v=(e,t)=>{if(0!==e.button)return;const{autoPanOnConnect:n,domNode:o,isValidConnection:i,connectionMode:a,connectionRadius:s,lib:u,onConnectStart:l,onConnectEnd:d,cancelConnection:g,nodeLookup:v,rfId:y,panBy:b,updateConnection:D}=m.getState(),C="target"===t.type;p(!0),null===h||void 0===h||h(e,r,t.type);Xo.onPointerDown(e.nativeEvent,{autoPanOnConnect:n,connectionMode:a,connectionRadius:s,domNode:o,handleId:t.id,nodeId:t.nodeId,nodeLookup:v,isTarget:C,edgeUpdaterType:t.type,lib:u,flowId:y,cancelConnection:g,panBy:b,isValidConnection:i,onConnect:e=>null===c||void 0===c?void 0:c(r,e),onConnectStart:l,onConnectEnd:d,onReconnectEnd:(e,n)=>{p(!1),null===f||void 0===f||f(e,r,t.type,n)},updateConnection:D,getTransform:()=>m.getState().transform,getFromHandle:()=>m.getState().connection.fromHandle})},y=()=>g(!0),b=()=>g(!1);return(0,d.jsxs)(d.Fragment,{children:[(!0===t||"source"===t)&&(0,d.jsx)(Ps,{position:u,centerX:o,centerY:i,radius:n,onMouseDown:e=>{var t;return v(e,{nodeId:r.target,id:null!==(t=r.targetHandle)&&void 0!==t?t:null,type:"target"})},onMouseEnter:y,onMouseOut:b,type:"source"}),(!0===t||"target"===t)&&(0,d.jsx)(Ps,{position:l,centerX:a,centerY:s,radius:n,onMouseDown:e=>{var t;return v(e,{nodeId:r.source,id:null!==(t=r.sourceHandle)&&void 0!==t?t:null,type:"source"})},onMouseEnter:y,onMouseOut:b,type:"target"})]})}function Ns(e){var t;let{id:n,edgesFocusable:o,edgesReconnectable:i,elementsSelectable:a,onClick:s,onDoubleClick:u,onContextMenu:c,onMouseEnter:f,onMouseMove:p,onMouseLeave:g,reconnectRadius:m,onReconnect:v,onReconnectStart:y,onReconnectEnd:b,rfId:D,edgeTypes:C,noPanClassName:w,onError:E,disableKeyboardA11y:k}=e,F=Ni((e=>e.edgeLookup.get(n)));const x=Ni((e=>e.defaultEdgeOptions));F=x?l(l({},x),F):F;let A=F.type||"default",S=(null===C||void 0===C?void 0:C[A])||xs[A];void 0===S&&(null===E||void 0===E||E("011",hr(A)),A="default",S=xs.default);const _=!!(F.focusable||o&&"undefined"===typeof F.focusable),I="undefined"!==typeof v&&(F.reconnectable||i&&"undefined"===typeof F.reconnectable),P=!!(F.selectable||a&&"undefined"===typeof F.selectable),T=(0,r.useRef)(null),[N,R]=(0,r.useState)(!1),[M,B]=(0,r.useState)(!1),O=Ri(),{zIndex:z,sourceX:L,sourceY:j,targetX:H,targetY:U,sourcePosition:q,targetPosition:W}=Ni((0,r.useCallback)((e=>{const t=e.nodeLookup.get(F.source),r=e.nodeLookup.get(F.target);if(!t||!r)return l({zIndex:F.zIndex},As);const o=function(e){var t,n,r,o;const{sourceNode:i,targetNode:a}=e;if(!So(i)||!So(a))return null;const s=i.internals.handleBounds||_o(i.handles),u=a.internals.handleBounds||_o(a.handles),l=Po(null!==(t=null===s||void 0===s?void 0:s.source)&&void 0!==t?t:[],e.sourceHandle),c=Po(e.connectionMode===yr.Strict?null!==(n=null===u||void 0===u?void 0:u.target)&&void 0!==n?n:[]:(null!==(r=null===u||void 0===u?void 0:u.target)&&void 0!==r?r:[]).concat(null!==(o=null===u||void 0===u?void 0:u.source)&&void 0!==o?o:[]),e.targetHandle);var d;if(!l||!c)return null===(d=e.onError)||void 0===d||d.call(e,"008",cr(l?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const h=(null===l||void 0===l?void 0:l.position)||kr.Bottom,f=(null===c||void 0===c?void 0:c.position)||kr.Top,p=Io(i,l,h),g=Io(a,c,f);return{sourceX:p.x,sourceY:p.y,targetX:g.x,targetY:g.y,sourcePosition:h,targetPosition:f}}({id:n,sourceNode:t,targetNode:r,sourceHandle:F.sourceHandle||null,targetHandle:F.targetHandle||null,connectionMode:e.connectionMode,onError:E}),i=function(e){let{sourceNode:t,targetNode:n,selected:r=!1,zIndex:o=0,elevateOnSelect:i=!1}=e;if(!i)return o;const a=r||n.selected||t.selected,s=Math.max(t.internals.z||0,n.internals.z||0,1e3);return o+(a?s:0)}({selected:F.selected,zIndex:F.zIndex,sourceNode:t,targetNode:r,elevateOnSelect:e.elevateEdgesOnSelect});return l({zIndex:i},o||As)}),[F.source,F.target,F.sourceHandle,F.targetHandle,F.selected,F.zIndex]),wi),V=(0,r.useMemo)((()=>F.markerStart?"url('#".concat(To(F.markerStart,D),"')"):void 0),[F.markerStart,D]),K=(0,r.useMemo)((()=>F.markerEnd?"url('#".concat(To(F.markerEnd,D),"')"):void 0),[F.markerEnd,D]);if(F.hidden||null===L||null===j||null===H||null===U)return null;const G=u?e=>{u(e,l({},F))}:void 0,Y=c?e=>{c(e,l({},F))}:void 0,Z=f?e=>{f(e,l({},F))}:void 0,Q=p?e=>{p(e,l({},F))}:void 0,X=g?e=>{g(e,l({},F))}:void 0;return(0,d.jsx)("svg",{style:{zIndex:z},children:(0,d.jsxs)("g",{className:h(["react-flow__edge","react-flow__edge-".concat(A),F.className,w,{selected:F.selected,animated:F.animated,inactive:!P&&!s,updating:N,selectable:P}]),onClick:e=>{const{addSelectedEdges:t,unselectNodesAndEdges:r,multiSelectionActive:o}=O.getState();var i;P&&(O.setState({nodesSelectionActive:!1}),F.selected&&o?(r({nodes:[],edges:[F]}),null===(i=T.current)||void 0===i||i.blur()):t([n]));s&&s(e,F)},onDoubleClick:G,onContextMenu:Y,onMouseEnter:Z,onMouseMove:Q,onMouseLeave:X,onKeyDown:_?e=>{if(!k&&vr.includes(e.key)&&P){const{unselectNodesAndEdges:r,addSelectedEdges:o}=O.getState();var t;if("Escape"===e.key)null===(t=T.current)||void 0===t||t.blur(),r({edges:[F]});else o([n])}}:void 0,tabIndex:_?0:void 0,role:_?"button":"img","data-id":n,"data-testid":"rf__edge-".concat(n),"aria-label":null===F.ariaLabel?void 0:F.ariaLabel||"Edge from ".concat(F.source," to ").concat(F.target),"aria-describedby":_?"".concat(zi,"-").concat(D):void 0,ref:T,children:[!M&&(0,d.jsx)(S,{id:n,source:F.source,target:F.target,type:F.type,selected:F.selected,animated:F.animated,selectable:P,deletable:null===(t=F.deletable)||void 0===t||t,label:F.label,labelStyle:F.labelStyle,labelShowBg:F.labelShowBg,labelBgStyle:F.labelBgStyle,labelBgPadding:F.labelBgPadding,labelBgBorderRadius:F.labelBgBorderRadius,sourceX:L,sourceY:j,targetX:H,targetY:U,sourcePosition:q,targetPosition:W,data:F.data,style:F.style,sourceHandleId:F.sourceHandle,targetHandleId:F.targetHandle,markerStart:V,markerEnd:K,pathOptions:"pathOptions"in F?F.pathOptions:void 0,interactionWidth:F.interactionWidth}),I&&(0,d.jsx)(Ts,{edge:F,isReconnectable:I,reconnectRadius:m,onReconnect:v,onReconnectStart:y,onReconnectEnd:b,sourceX:L,sourceY:j,targetX:H,targetY:U,sourcePosition:q,targetPosition:W,setUpdateHover:R,setReconnecting:B})]})})}const Rs=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Ms(e){let{defaultMarkerColor:t,onlyRenderVisibleElements:n,rfId:o,edgeTypes:i,noPanClassName:a,onReconnect:s,onEdgeContextMenu:u,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:h,onEdgeClick:f,reconnectRadius:p,onEdgeDoubleClick:g,onReconnectStart:m,onReconnectEnd:v,disableKeyboardA11y:y}=e;const{edgesFocusable:b,edgesReconnectable:D,elementsSelectable:C,onError:w}=Ni(Rs,wi),E=(k=n,Ni((0,r.useCallback)((e=>{if(!k)return e.edges.map((e=>e.id));const t=[];if(e.width&&e.height)for(const n of e.edges){const r=e.nodeLookup.get(n.source),o=e.nodeLookup.get(n.target);r&&o&&Co({sourceNode:r,targetNode:o,width:e.width,height:e.height,transform:e.transform})&&t.push(n.id)}return t}),[k]),wi));var k;return(0,d.jsxs)("div",{className:"react-flow__edges",children:[(0,d.jsx)(is,{defaultColor:t,rfId:o}),E.map((e=>(0,d.jsx)(Ns,{id:e,edgesFocusable:b,edgesReconnectable:D,elementsSelectable:C,noPanClassName:a,onReconnect:s,onContextMenu:u,onMouseEnter:l,onMouseMove:c,onMouseLeave:h,onClick:f,reconnectRadius:p,onDoubleClick:g,onReconnectStart:m,onReconnectEnd:v,rfId:o,onError:w,edgeTypes:i,disableKeyboardA11y:y},e)))]})}Ms.displayName="EdgeRenderer";const Bs=(0,r.memo)(Ms),Os=e=>"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")");function zs(e){let{children:t}=e;const n=Ni(Os);return(0,d.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:n},children:t})}const Ls=e=>{var t;return null===(t=e.panZoom)||void 0===t?void 0:t.syncViewport};function js(e){return e.connection.inProgress?l(l({},e.connection),{},{to:Xr(e.connection.to,e.transform)}):l({},e.connection)}function Hs(e){const t=function(e){if(e)return t=>{const n=js(t);return e(n)};return js}(e);return Ni(t,wi)}const Us=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function qs(e){let{containerStyle:t,style:n,type:r,component:o}=e;const{nodesConnectable:i,width:a,height:s,isValid:u,inProgress:l}=Ni(Us,wi);return!!(a&&i&&l)?(0,d.jsx)("svg",{style:t,width:a,height:s,className:"react-flow__connectionline react-flow__container",children:(0,d.jsx)("g",{className:h(["react-flow__connection",xr(u)]),children:(0,d.jsx)(Ws,{style:n,type:r,CustomComponent:o,isValid:u})})}):null}const Ws=e=>{let{style:t,type:n=wr.Bezier,CustomComponent:r,isValid:o}=e;const{inProgress:i,from:a,fromNode:s,fromHandle:u,fromPosition:c,to:h,toNode:f,toHandle:p,toPosition:g}=Hs();if(!i)return;if(r)return(0,d.jsx)(r,{connectionLineType:n,connectionLineStyle:t,fromNode:s,fromHandle:u,fromX:a.x,fromY:a.y,toX:h.x,toY:h.y,fromPosition:c,toPosition:g,connectionStatus:xr(o),toNode:f,toHandle:p});let m="";const v={sourceX:a.x,sourceY:a.y,sourcePosition:c,targetX:h.x,targetY:h.y,targetPosition:g};switch(n){case wr.Bezier:[m]=bo(v);break;case wr.SimpleBezier:[m]=cs(v);break;case wr.Step:[m]=Ao(l(l({},v),{},{borderRadius:0}));break;case wr.SmoothStep:[m]=Ao(v);break;default:[m]=Eo(v)}return(0,d.jsx)("path",{d:m,fill:"none",className:"react-flow__connection-path",style:t})};Ws.displayName="ConnectionLine";const Vs={};function Ks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vs;(0,r.useRef)(e),Ri();(0,r.useEffect)((()=>{}),[e])}function Gs(e){let{nodeTypes:t,edgeTypes:n,onInit:o,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:s,onEdgeDoubleClick:u,onNodeMouseEnter:l,onNodeMouseMove:c,onNodeMouseLeave:h,onNodeContextMenu:f,onSelectionContextMenu:p,onSelectionStart:g,onSelectionEnd:m,connectionLineType:v,connectionLineStyle:y,connectionLineComponent:b,connectionLineContainerStyle:D,selectionKeyCode:C,selectionOnDrag:w,selectionMode:E,multiSelectionKeyCode:k,panActivationKeyCode:F,zoomActivationKeyCode:x,deleteKeyCode:A,onlyRenderVisibleElements:S,elementsSelectable:_,defaultViewport:I,translateExtent:P,minZoom:T,maxZoom:N,preventScrolling:R,defaultMarkerColor:M,zoomOnScroll:B,zoomOnPinch:O,panOnScroll:z,panOnScrollSpeed:L,panOnScrollMode:j,zoomOnDoubleClick:H,panOnDrag:U,onPaneClick:q,onPaneMouseEnter:W,onPaneMouseMove:V,onPaneMouseLeave:K,onPaneScroll:G,onPaneContextMenu:Y,paneClickDistance:Z,nodeClickDistance:Q,onEdgeContextMenu:X,onEdgeMouseEnter:$,onEdgeMouseMove:J,onEdgeMouseLeave:ee,reconnectRadius:te,onReconnect:ne,onReconnectStart:re,onReconnectEnd:oe,noDragClassName:ie,noWheelClassName:ae,noPanClassName:se,disableKeyboardA11y:ue,nodeExtent:le,rfId:ce,viewport:de,onViewportChange:he}=e;return Ks(t),Ks(n),Ri(),(0,r.useRef)(!1),(0,r.useEffect)((()=>{}),[]),function(e){const t=Ea(),n=(0,r.useRef)(!1);(0,r.useEffect)((()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout((()=>e(t)),1),n.current=!0)}),[e,t.viewportInitialized])}(o),function(e){const t=Ni(Ls),n=Ri();(0,r.useEffect)((()=>{e&&(null===t||void 0===t||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))}),[e,t])}(de),(0,d.jsx)(Za,{onPaneClick:q,onPaneMouseEnter:W,onPaneMouseMove:V,onPaneMouseLeave:K,onPaneContextMenu:Y,onPaneScroll:G,paneClickDistance:Z,deleteKeyCode:A,selectionKeyCode:C,selectionOnDrag:w,selectionMode:E,onSelectionStart:g,onSelectionEnd:m,multiSelectionKeyCode:k,panActivationKeyCode:F,zoomActivationKeyCode:x,elementsSelectable:_,zoomOnScroll:B,zoomOnPinch:O,zoomOnDoubleClick:H,panOnScroll:z,panOnScrollSpeed:L,panOnScrollMode:j,panOnDrag:U,defaultViewport:I,translateExtent:P,minZoom:T,maxZoom:N,onSelectionContextMenu:p,preventScrolling:R,noDragClassName:ie,noWheelClassName:ae,noPanClassName:se,disableKeyboardA11y:ue,onViewportChange:he,isControlledViewport:!!de,children:(0,d.jsxs)(zs,{children:[(0,d.jsx)(Bs,{edgeTypes:n,onEdgeClick:a,onEdgeDoubleClick:u,onReconnect:ne,onReconnectStart:re,onReconnectEnd:oe,onlyRenderVisibleElements:S,onEdgeContextMenu:X,onEdgeMouseEnter:$,onEdgeMouseMove:J,onEdgeMouseLeave:ee,reconnectRadius:te,defaultMarkerColor:M,noPanClassName:se,disableKeyboardA11y:ue,rfId:ce}),(0,d.jsx)(qs,{style:y,type:v,component:b,containerStyle:D}),(0,d.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,d.jsx)(ts,{nodeTypes:t,onNodeClick:i,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:c,onNodeMouseLeave:h,onNodeContextMenu:f,nodeClickDistance:Q,onlyRenderVisibleElements:S,noPanClassName:se,noDragClassName:ie,disableKeyboardA11y:ue,nodeExtent:le,rfId:ce}),(0,d.jsx)("div",{className:"react-flow__viewport-portal"})]})})}Gs.displayName="GraphView";const Ys=(0,r.memo)(Gs),Zs=function(){var e,t;let{nodes:n,edges:r,defaultNodes:o,defaultEdges:i,width:a,height:s,fitView:u,fitViewOptions:c,minZoom:d=.5,maxZoom:h=2,nodeOrigin:f,nodeExtent:p}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const g=new Map,m=new Map,v=new Map,y=new Map,b=null!==(e=null!==i&&void 0!==i?i:r)&&void 0!==e?e:[],D=null!==(t=null!==o&&void 0!==o?o:n)&&void 0!==t?t:[],C=null!==f&&void 0!==f?f:[0,0],w=null!==p&&void 0!==p?p:mr;Ho(v,y,b);const E=Bo(D,g,m,{nodeOrigin:C,nodeExtent:w,elevateNodesOnSelect:!1});let k=[0,0,1];if(u&&a&&s){var F;const e=Ir(g,{filter:e=>!(!e.width&&!e.initialWidth||!e.height&&!e.initialHeight)}),{x:t,y:n,zoom:r}=eo(e,a,s,d,h,null!==(F=null===c||void 0===c?void 0:c.padding)&&void 0!==F?F:.1);k=[t,n,r]}return{rfId:"1",width:0,height:0,transform:k,nodes:D,nodesInitialized:E,nodeLookup:g,parentLookup:m,edges:b,edgeLookup:y,connectionLookup:v,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==o,hasDefaultEdges:void 0!==i,panZoom:null,minZoom:d,maxZoom:h,translateExtent:mr,nodeExtent:w,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:yr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:C,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:null!==u&&void 0!==u&&u,fitViewOptions:c,fitViewResolver:null,connection:l({},Cr),connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:Zr,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},Qs=e=>{let{nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:i,height:a,fitView:s,fitViewOptions:u,minZoom:c,maxZoom:d,nodeOrigin:h,nodeExtent:f}=e;return((e,t)=>e?Ci(e,t):Ci)(((e,p)=>{async function g(){const{nodeLookup:t,panZoom:n,fitViewOptions:r,fitViewResolver:o,width:i,height:a,minZoom:s,maxZoom:u}=p();n&&(await Tr({nodes:t,width:i,height:a,panZoom:n,minZoom:s,maxZoom:u},r),null===o||void 0===o||o.resolve(!0),e({fitViewResolver:null}))}return l(l({},Zs({nodes:t,edges:n,width:i,height:a,fitView:s,fitViewOptions:u,minZoom:c,maxZoom:d,nodeOrigin:h,nodeExtent:f,defaultNodes:r,defaultEdges:o})),{},{setNodes:t=>{const{nodeLookup:n,parentLookup:r,nodeOrigin:o,elevateNodesOnSelect:i,fitViewQueued:a}=p(),s=Bo(t,n,r,{nodeOrigin:o,nodeExtent:f,elevateNodesOnSelect:i,checkEquality:!0});a&&s?(g(),e({nodes:t,nodesInitialized:s,fitViewQueued:!1,fitViewOptions:void 0})):e({nodes:t,nodesInitialized:s})},setEdges:t=>{const{connectionLookup:n,edgeLookup:r}=p();Ho(n,r,t),e({edges:t})},setDefaultNodesAndEdges:(t,n)=>{if(t){const{setNodes:n}=p();n(t),e({hasDefaultNodes:!0})}if(n){const{setEdges:t}=p();t(n),e({hasDefaultEdges:!0})}},updateNodeInternals:t=>{const{triggerNodeChanges:n,nodeLookup:r,parentLookup:o,domNode:i,nodeOrigin:a,nodeExtent:s,debug:u,fitViewQueued:c}=p(),{changes:d,updatedInternals:h}=function(e,t,n,r,o,i){const a=null===r||void 0===r?void 0:r.querySelector(".xyflow__viewport");let s=!1;if(!a)return{changes:[],updatedInternals:s};const u=[],c=window.getComputedStyle(a),{m22:d}=new window.DOMMatrixReadOnly(c.transform),h=[];for(const f of e.values()){const e=t.get(f.id);if(!e)continue;if(e.hidden){t.set(e.id,l(l({},e),{},{internals:l(l({},e.internals),{},{handleBounds:void 0})})),s=!0;continue}const r=uo(f.nodeElement),a=e.measured.width!==r.width||e.measured.height!==r.height;if(r.width&&r.height&&(a||!e.internals.handleBounds||f.force)){const c=f.nodeElement.getBoundingClientRect(),p=no(e.extent)?e.extent:i;let{positionAbsolute:g}=e.internals;e.parentId&&"parent"===e.extent?g=Or(g,r,t.get(e.parentId)):p&&(g=Br(g,p,r));const m=l(l({},e),{},{measured:r,internals:l(l({},e.internals),{},{positionAbsolute:g,handleBounds:{source:go("source",f.nodeElement,c,d,e.id),target:go("target",f.nodeElement,c,d,e.id)}})});t.set(e.id,m),e.parentId&&Oo(m,t,n,{nodeOrigin:o}),s=!0,a&&(u.push({id:e.id,type:"dimensions",dimensions:r}),e.expandParent&&e.parentId&&h.push({id:e.id,parentId:e.parentId,rect:qr(m,o)}))}}if(h.length>0){const e=Lo(h,t,n,o);u.push(...e)}return{changes:u,updatedInternals:s}}(t,r,o,i,a,s);h&&(!function(e,t,n){const r=Mo(No,n);for(const o of e.values())if(o.parentId)Oo(o,e,t,r);else{const e=_r(o,r.nodeOrigin),t=no(o.extent)?o.extent:r.nodeExtent,n=Br(e,t,ro(o));o.internals.positionAbsolute=n}}(r,o,{nodeOrigin:a,nodeExtent:s}),c?(g(),e({fitViewQueued:!1,fitViewOptions:void 0})):e({}),(null===d||void 0===d?void 0:d.length)>0&&(u&&console.log("React Flow: trigger node changes",d),null===n||void 0===n||n(d)))},updateNodePositions:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=[],r=[],{nodeLookup:o,triggerNodeChanges:i}=p();for(const[u,c]of e){const e=o.get(u),i=!!(null!==e&&void 0!==e&&e.expandParent&&null!==e&&void 0!==e&&e.parentId&&null!==c&&void 0!==c&&c.position),d={id:u,type:"position",position:i?{x:Math.max(0,c.position.x),y:Math.max(0,c.position.y)}:c.position,dragging:t};var a,s;if(i&&e.parentId)n.push({id:u,parentId:e.parentId,rect:l(l({},c.internals.positionAbsolute),{},{width:null!==(a=c.measured.width)&&void 0!==a?a:0,height:null!==(s=c.measured.height)&&void 0!==s?s:0})});r.push(d)}if(n.length>0){const{parentLookup:e,nodeOrigin:t}=p(),i=Lo(n,o,e,t);r.push(...i)}i(r)},triggerNodeChanges:e=>{const{onNodesChange:t,setNodes:n,nodes:r,hasDefaultNodes:o,debug:i}=p();if(null!==e&&void 0!==e&&e.length){if(o){n(ca(e,r))}i&&console.log("React Flow: trigger node changes",e),null===t||void 0===t||t(e)}},triggerEdgeChanges:e=>{const{onEdgesChange:t,setEdges:n,edges:r,hasDefaultEdges:o,debug:i}=p();if(null!==e&&void 0!==e&&e.length){if(o){n(da(e,r))}i&&console.log("React Flow: trigger edge changes",e),null===t||void 0===t||t(e)}},addSelectedNodes:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:o,triggerEdgeChanges:i}=p();if(t){o(e.map((e=>ha(e,!0))))}else o(fa(r,new Set([...e]),!0)),i(fa(n))},addSelectedEdges:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:o,triggerEdgeChanges:i}=p();if(t){i(e.map((e=>ha(e,!0))))}else i(fa(n,new Set([...e]))),o(fa(r,new Set,!0))},unselectNodesAndEdges:function(){let{nodes:e,edges:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{edges:n,nodes:r,nodeLookup:o,triggerNodeChanges:i,triggerEdgeChanges:a}=p(),s=t||n,u=(e||r).map((e=>{const t=o.get(e.id);return t&&(t.selected=!1),ha(e.id,!1)})),l=s.map((e=>ha(e.id,!1)));i(u),a(l)},setMinZoom:t=>{const{panZoom:n,maxZoom:r}=p();null===n||void 0===n||n.setScaleExtent([t,r]),e({minZoom:t})},setMaxZoom:t=>{const{panZoom:n,minZoom:r}=p();null===n||void 0===n||n.setScaleExtent([r,t]),e({maxZoom:t})},setTranslateExtent:t=>{var n;null===(n=p().panZoom)||void 0===n||n.setTranslateExtent(t),e({translateExtent:t})},setPaneClickDistance:e=>{var t;null===(t=p().panZoom)||void 0===t||t.setClickDistance(e)},resetSelectedElements:()=>{const{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:r,elementsSelectable:o}=p();if(!o)return;const i=t.reduce(((e,t)=>t.selected?[...e,ha(t.id,!1)]:e),[]),a=e.reduce(((e,t)=>t.selected?[...e,ha(t.id,!1)]:e),[]);n(i),r(a)},setNodeExtent:t=>{const{nodes:n,nodeLookup:r,parentLookup:o,nodeOrigin:i,elevateNodesOnSelect:a,nodeExtent:s}=p();t[0][0]===s[0][0]&&t[0][1]===s[0][1]&&t[1][0]===s[1][0]&&t[1][1]===s[1][1]||(Bo(n,r,o,{nodeOrigin:i,nodeExtent:t,elevateNodesOnSelect:a,checkEquality:!1}),e({nodeExtent:t}))},panBy:e=>{const{transform:t,width:n,height:r,panZoom:o,translateExtent:i}=p();return async function(e){let{delta:t,panZoom:n,transform:r,translateExtent:o,width:i,height:a}=e;if(!n||!t.x&&!t.y)return Promise.resolve(!1);const s=await n.setViewportConstrained({x:r[0]+t.x,y:r[1]+t.y,zoom:r[2]},[[0,0],[i,a]],o),u=!!s&&(s.x!==r[0]||s.y!==r[1]||s.k!==r[2]);return Promise.resolve(u)}({delta:e,panZoom:o,transform:t,translateExtent:i,width:n,height:r})},cancelConnection:()=>{e({connection:l({},Cr)})},updateConnection:t=>{e({connection:t})},reset:()=>e(l({},Zs()))})}),Object.is)};function Xs(e){let{initialNodes:t,initialEdges:n,defaultNodes:o,defaultEdges:i,initialWidth:a,initialHeight:s,initialMinZoom:u,initialMaxZoom:l,initialFitViewOptions:c,fitView:h,nodeOrigin:f,nodeExtent:p,children:g}=e;const[m]=(0,r.useState)((()=>Qs({nodes:t,edges:n,defaultNodes:o,defaultEdges:i,width:a,height:s,fitView:h,minZoom:u,maxZoom:l,fitViewOptions:c,nodeOrigin:f,nodeExtent:p})));return(0,d.jsx)(Pi,{value:m,children:(0,d.jsx)(Ca,{children:g})})}function $s(e){let{children:t,nodes:n,edges:o,defaultNodes:i,defaultEdges:a,width:s,height:u,fitView:l,fitViewOptions:c,minZoom:h,maxZoom:f,nodeOrigin:p,nodeExtent:g}=e;return(0,r.useContext)(Ii)?(0,d.jsx)(d.Fragment,{children:t}):(0,d.jsx)(Xs,{initialNodes:n,initialEdges:o,defaultNodes:i,defaultEdges:a,initialWidth:s,initialHeight:u,fitView:l,initialFitViewOptions:c,initialMinZoom:h,initialMaxZoom:f,nodeOrigin:p,nodeExtent:g,children:t})}const Js={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var eu=va((function(e,t){let{nodes:n,edges:o,defaultNodes:i,defaultEdges:a,className:s,nodeTypes:u,edgeTypes:f,onNodeClick:p,onEdgeClick:g,onInit:m,onMove:v,onMoveStart:y,onMoveEnd:b,onConnect:D,onConnectStart:C,onConnectEnd:w,onClickConnectStart:E,onClickConnectEnd:k,onNodeMouseEnter:F,onNodeMouseMove:x,onNodeMouseLeave:A,onNodeContextMenu:S,onNodeDoubleClick:_,onNodeDragStart:I,onNodeDrag:P,onNodeDragStop:T,onNodesDelete:N,onEdgesDelete:R,onDelete:M,onSelectionChange:B,onSelectionDragStart:O,onSelectionDrag:z,onSelectionDragStop:L,onSelectionContextMenu:j,onSelectionStart:H,onSelectionEnd:U,onBeforeDelete:q,connectionMode:W,connectionLineType:V=wr.Bezier,connectionLineStyle:K,connectionLineComponent:G,connectionLineContainerStyle:Y,deleteKeyCode:Z="Backspace",selectionKeyCode:Q="Shift",selectionOnDrag:X=!1,selectionMode:$=Dr.Full,panActivationKeyCode:J="Space",multiSelectionKeyCode:ee=(to()?"Meta":"Control"),zoomActivationKeyCode:te=(to()?"Meta":"Control"),snapToGrid:ne,snapGrid:re,onlyRenderVisibleElements:oe=!1,selectNodesOnDrag:ie,nodesDraggable:ae,nodesConnectable:se,nodesFocusable:ue,nodeOrigin:le=Xi,edgesFocusable:ce,edgesReconnectable:de,elementsSelectable:he=!0,defaultViewport:fe=$i,minZoom:pe=.5,maxZoom:ge=2,translateExtent:me=mr,preventScrolling:ve=!0,nodeExtent:ye,defaultMarkerColor:be="#b1b1b7",zoomOnScroll:De=!0,zoomOnPinch:Ce=!0,panOnScroll:we=!1,panOnScrollSpeed:Ee=.5,panOnScrollMode:ke=br.Free,zoomOnDoubleClick:Fe=!0,panOnDrag:xe=!0,onPaneClick:Ae,onPaneMouseEnter:Se,onPaneMouseMove:_e,onPaneMouseLeave:Ie,onPaneScroll:Pe,onPaneContextMenu:Te,paneClickDistance:Ne=0,nodeClickDistance:Re=0,children:Me,onReconnect:Be,onReconnectStart:Oe,onReconnectEnd:ze,onEdgeContextMenu:Le,onEdgeDoubleClick:je,onEdgeMouseEnter:He,onEdgeMouseMove:Ue,onEdgeMouseLeave:qe,reconnectRadius:We=10,onNodesChange:Ve,onEdgesChange:Ke,noDragClassName:Ge="nodrag",noWheelClassName:Ye="nowheel",noPanClassName:Ze="nopan",fitView:Qe,fitViewOptions:Xe,connectOnClick:$e,attributionPosition:Je,proOptions:et,defaultEdgeOptions:tt,elevateNodesOnSelect:nt,elevateEdgesOnSelect:rt,disableKeyboardA11y:ot=!1,autoPanOnConnect:it,autoPanOnNodeDrag:at,autoPanSpeed:st,connectionRadius:ut,isValidConnection:lt,onError:ct,style:dt,id:ht,nodeDragThreshold:ft,viewport:pt,onViewportChange:gt,width:mt,height:vt,colorMode:yt="light",debug:bt,onScroll:Dt}=e,Ct=c(e,Si);const wt=ht||"1",Et=function(e){var t;const[n,o]=(0,r.useState)("system"===e?null:e);return(0,r.useEffect)((()=>{if("system"!==e)return void o(e);const t=ra(),n=()=>o(null!==t&&void 0!==t&&t.matches?"dark":"light");return n(),null===t||void 0===t||t.addEventListener("change",n),()=>{null===t||void 0===t||t.removeEventListener("change",n)}}),[e]),null!==n?n:null!==(t=ra())&&void 0!==t&&t.matches?"dark":"light"}(yt),kt=(0,r.useCallback)((e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),null===Dt||void 0===Dt||Dt(e)}),[Dt]);return(0,d.jsx)("div",l(l({"data-testid":"rf__wrapper"},Ct),{},{onScroll:kt,style:l(l({},dt),Js),ref:t,className:h(["react-flow",s,Et]),id:ht,children:(0,d.jsxs)($s,{nodes:n,edges:o,width:mt,height:vt,fitView:Qe,fitViewOptions:Xe,minZoom:pe,maxZoom:ge,nodeOrigin:le,nodeExtent:ye,children:[(0,d.jsx)(Ys,{onInit:m,onNodeClick:p,onEdgeClick:g,onNodeMouseEnter:F,onNodeMouseMove:x,onNodeMouseLeave:A,onNodeContextMenu:S,onNodeDoubleClick:_,nodeTypes:u,edgeTypes:f,connectionLineType:V,connectionLineStyle:K,connectionLineComponent:G,connectionLineContainerStyle:Y,selectionKeyCode:Q,selectionOnDrag:X,selectionMode:$,deleteKeyCode:Z,multiSelectionKeyCode:ee,panActivationKeyCode:J,zoomActivationKeyCode:te,onlyRenderVisibleElements:oe,defaultViewport:fe,translateExtent:me,minZoom:pe,maxZoom:ge,preventScrolling:ve,zoomOnScroll:De,zoomOnPinch:Ce,zoomOnDoubleClick:Fe,panOnScroll:we,panOnScrollSpeed:Ee,panOnScrollMode:ke,panOnDrag:xe,onPaneClick:Ae,onPaneMouseEnter:Se,onPaneMouseMove:_e,onPaneMouseLeave:Ie,onPaneScroll:Pe,onPaneContextMenu:Te,paneClickDistance:Ne,nodeClickDistance:Re,onSelectionContextMenu:j,onSelectionStart:H,onSelectionEnd:U,onReconnect:Be,onReconnectStart:Oe,onReconnectEnd:ze,onEdgeContextMenu:Le,onEdgeDoubleClick:je,onEdgeMouseEnter:He,onEdgeMouseMove:Ue,onEdgeMouseLeave:qe,reconnectRadius:We,defaultMarkerColor:be,noDragClassName:Ge,noWheelClassName:Ye,noPanClassName:Ze,rfId:wt,disableKeyboardA11y:ot,nodeExtent:ye,viewport:pt,onViewportChange:gt}),(0,d.jsx)(na,{nodes:n,edges:o,defaultNodes:i,defaultEdges:a,onConnect:D,onConnectStart:C,onConnectEnd:w,onClickConnectStart:E,onClickConnectEnd:k,nodesDraggable:ae,nodesConnectable:se,nodesFocusable:ue,edgesFocusable:ce,edgesReconnectable:de,elementsSelectable:he,elevateNodesOnSelect:nt,elevateEdgesOnSelect:rt,minZoom:pe,maxZoom:ge,nodeExtent:ye,onNodesChange:Ve,onEdgesChange:Ke,snapToGrid:ne,snapGrid:re,connectionMode:W,translateExtent:me,connectOnClick:$e,defaultEdgeOptions:tt,fitView:Qe,fitViewOptions:Xe,onNodesDelete:N,onEdgesDelete:R,onDelete:M,onNodeDragStart:I,onNodeDrag:P,onNodeDragStop:T,onSelectionDrag:z,onSelectionDragStart:O,onSelectionDragStop:L,onMove:v,onMoveStart:y,onMoveEnd:b,noPanClassName:Ze,nodeOrigin:le,rfId:wt,autoPanOnConnect:it,autoPanOnNodeDrag:at,autoPanSpeed:st,onError:ct,connectionRadius:ut,isValidConnection:lt,selectNodesOnDrag:ie,nodeDragThreshold:ft,onBeforeDelete:q,paneClickDistance:Ne,debug:bt}),(0,d.jsx)(Qi,{onSelectionChange:B}),Me,(0,d.jsx)(Wi,{proOptions:et,position:Je}),(0,d.jsx)(Hi,{rfId:wt,disableKeyboardA11y:ot})]})}))}));pr();function tu(e){let{dimensions:t,lineWidth:n,variant:r,className:o}=e;return(0,d.jsx)("path",{strokeWidth:n,d:"M".concat(t[0]/2," 0 V").concat(t[1]," M0 ").concat(t[1]/2," H").concat(t[0]),className:h(["react-flow__background-pattern",r,o])})}function nu(e){let{radius:t,className:n}=e;return(0,d.jsx)("circle",{cx:t,cy:t,r:t,className:h(["react-flow__background-pattern","dots",n])})}var ru;!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(ru||(ru={}));const ou={[ru.Dots]:1,[ru.Lines]:1,[ru.Cross]:6},iu=e=>({transform:e.transform,patternId:"pattern-".concat(e.rfId)});function au(e){let{id:t,variant:n=ru.Dots,gap:o=20,size:i,lineWidth:a=1,offset:s=0,color:u,bgColor:c,style:f,className:p,patternClassName:g}=e;const m=(0,r.useRef)(null),{transform:v,patternId:y}=Ni(iu,wi),b=i||ou[n],D=n===ru.Dots,C=n===ru.Cross,w=Array.isArray(o)?o:[o,o],E=[w[0]*v[2]||1,w[1]*v[2]||1],k=b*v[2],F=Array.isArray(s)?s:[s,s],x=C?[k,k]:E,A=[F[0]*v[2]||1+x[0]/2,F[1]*v[2]||1+x[1]/2],S="".concat(y).concat(t||"");return(0,d.jsxs)("svg",{className:h(["react-flow__background",p]),style:l(l(l({},f),xa),{},{"--xy-background-color-props":c,"--xy-background-pattern-color-props":u}),ref:m,"data-testid":"rf__background",children:[(0,d.jsx)("pattern",{id:S,x:v[0]%E[0],y:v[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:"translate(-".concat(A[0],",-").concat(A[1],")"),children:D?(0,d.jsx)(nu,{radius:k/2,className:g}):(0,d.jsx)(tu,{dimensions:x,lineWidth:a,variant:n,className:g})}),(0,d.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(S,")")})]})}au.displayName="Background";const su=(0,r.memo)(au);function uu(){return(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,d.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function lu(){return(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,d.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function cu(){return(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,d.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function du(){return(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,d.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function hu(){return(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,d.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function fu(e){let{children:t,className:n}=e,r=c(e,_i);return(0,d.jsx)("button",l(l({type:"button",className:h(["react-flow__controls-button",n])},r),{},{children:t}))}const pu=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function gu(e){let{style:t,showZoom:n=!0,showFitView:r=!0,showInteractive:o=!0,fitViewOptions:i,onZoomIn:a,onZoomOut:s,onFitView:u,onInteractiveChange:l,className:c,children:f,position:p="bottom-left",orientation:g="vertical","aria-label":m="React Flow controls"}=e;const v=Ri(),{isInteractive:y,minZoomReached:b,maxZoomReached:D}=Ni(pu,wi),{zoomIn:C,zoomOut:w,fitView:E}=Ea(),k="horizontal"===g?"horizontal":"vertical";return(0,d.jsxs)(qi,{className:h(["react-flow__controls",k,c]),position:p,style:t,"data-testid":"rf__controls","aria-label":m,children:[n&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(fu,{onClick:()=>{C(),null===a||void 0===a||a()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:D,children:(0,d.jsx)(uu,{})}),(0,d.jsx)(fu,{onClick:()=>{w(),null===s||void 0===s||s()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b,children:(0,d.jsx)(lu,{})})]}),r&&(0,d.jsx)(fu,{className:"react-flow__controls-fitview",onClick:()=>{E(i),null===u||void 0===u||u()},title:"fit view","aria-label":"fit view",children:(0,d.jsx)(cu,{})}),o&&(0,d.jsx)(fu,{className:"react-flow__controls-interactive",onClick:()=>{v.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),null===l||void 0===l||l(!y)},title:"toggle interactivity","aria-label":"toggle interactivity",children:y?(0,d.jsx)(hu,{}):(0,d.jsx)(du,{})}),f]})}gu.displayName="Controls";const mu=(0,r.memo)(gu);const vu=(0,r.memo)((function(e){let{id:t,x:n,y:r,width:o,height:i,style:a,color:s,strokeColor:u,strokeWidth:l,className:c,borderRadius:f,shapeRendering:p,selected:g,onClick:m}=e;const{background:v,backgroundColor:y}=a||{},b=s||v||y;return(0,d.jsx)("rect",{className:h(["react-flow__minimap-node",{selected:g},c]),x:n,y:r,rx:f,ry:f,width:o,height:i,style:{fill:b,stroke:u,strokeWidth:l},shapeRendering:p,onClick:m?e=>m(e,t):void 0})})),yu=e=>e.nodes.map((e=>e.id)),bu=e=>e instanceof Function?e:()=>e;const Du=(0,r.memo)((function(e){let{id:t,nodeColorFunc:n,nodeStrokeColorFunc:r,nodeClassNameFunc:o,nodeBorderRadius:i,nodeStrokeWidth:a,shapeRendering:s,NodeComponent:u,onClick:l}=e;const{node:c,x:h,y:f,width:p,height:g}=Ni((e=>{const{internals:n}=e.nodeLookup.get(t),r=n.userNode,{x:o,y:i}=n.positionAbsolute,{width:a,height:s}=ro(r);return{node:r,x:o,y:i,width:a,height:s}}),wi);return c&&!c.hidden&&oo(c)?(0,d.jsx)(u,{x:h,y:f,width:p,height:g,style:c.style,selected:!!c.selected,className:o(c),color:n(c),borderRadius:i,strokeColor:r(c),strokeWidth:a,shapeRendering:s,onClick:l,id:c.id}):null}));var Cu=(0,r.memo)((function(e){let{nodeStrokeColor:t,nodeColor:n,nodeClassName:r="",nodeBorderRadius:o=5,nodeStrokeWidth:i,nodeComponent:a=vu,onClick:s}=e;const u=Ni(yu,wi),l=bu(n),c=bu(t),h=bu(r),f="undefined"===typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,d.jsx)(d.Fragment,{children:u.map((e=>(0,d.jsx)(Du,{id:e,nodeColorFunc:l,nodeStrokeColorFunc:c,nodeClassNameFunc:h,nodeBorderRadius:o,nodeStrokeWidth:i,NodeComponent:a,onClick:s,shapeRendering:f},e)))})}));const wu=e=>!e.hidden,Eu=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Vr(Ir(e.nodeLookup,{filter:wu}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}};function ku(e){var t,n;let{style:o,className:i,nodeStrokeColor:a,nodeColor:s,nodeClassName:u="",nodeBorderRadius:c=5,nodeStrokeWidth:f,nodeComponent:p,bgColor:g,maskColor:m,maskStrokeColor:v,maskStrokeWidth:y,position:b="bottom-right",onClick:D,onNodeClick:C,pannable:w=!1,zoomable:E=!1,ariaLabel:k="React Flow mini map",inversePan:F,zoomStep:x=10,offsetScale:A=5}=e;const S=Ri(),_=(0,r.useRef)(null),{boundingRect:I,viewBB:P,rfId:T,panZoom:N,translateExtent:R,flowWidth:M,flowHeight:B}=Ni(Eu,wi),O=null!==(t=null===o||void 0===o?void 0:o.width)&&void 0!==t?t:200,z=null!==(n=null===o||void 0===o?void 0:o.height)&&void 0!==n?n:150,L=I.width/O,j=I.height/z,H=Math.max(L,j),U=H*O,q=H*z,W=A*H,V=I.x-(U-I.width)/2-W,K=I.y-(q-I.height)/2-W,G=U+2*W,Y=q+2*W,Z="".concat("react-flow__minimap-desc","-").concat(T),Q=(0,r.useRef)(0),X=(0,r.useRef)();Q.current=H,(0,r.useEffect)((()=>{if(_.current&&N)return X.current=function(e){let{domNode:t,panZoom:n,getTransform:r,getViewScale:o}=e;const i=Te(t);return{update:function(e){let{translateExtent:t,width:a,height:s,zoomStep:u=10,pannable:l=!0,zoomable:c=!0,inversePan:d=!1}=e,h=[0,0];const f=nr().on("start",(e=>{var t,n;"mousedown"!==e.sourceEvent.type&&"touchstart"!==e.sourceEvent.type||(h=[null!==(t=e.sourceEvent.clientX)&&void 0!==t?t:e.sourceEvent.touches[0].clientX,null!==(n=e.sourceEvent.clientY)&&void 0!==n?n:e.sourceEvent.touches[0].clientY])})).on("zoom",l?e=>{var i,u;const l=r();if("mousemove"!==e.sourceEvent.type&&"touchmove"!==e.sourceEvent.type||!n)return;const c=[null!==(i=e.sourceEvent.clientX)&&void 0!==i?i:e.sourceEvent.touches[0].clientX,null!==(u=e.sourceEvent.clientY)&&void 0!==u?u:e.sourceEvent.touches[0].clientY],f=[c[0]-h[0],c[1]-h[1]];h=c;const p=o()*Math.max(l[2],Math.log(l[2]))*(d?-1:1),g={x:l[0]-f[0]*p,y:l[1]-f[1]*p},m=[[0,0],[a,s]];n.setViewportConstrained({x:g.x,y:g.y,zoom:l[2]},m,t)}:null).on("zoom.wheel",c?e=>{const t=r();if("wheel"!==e.sourceEvent.type||!n)return;const o=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*u,i=t[2]*Math.pow(2,o);n.scaleTo(i)}:null);i.call(f,{})},destroy:function(){i.on("zoom",null)},pointer:Ne}}({domNode:_.current,panZoom:N,getTransform:()=>S.getState().transform,getViewScale:()=>Q.current}),()=>{var e;null===(e=X.current)||void 0===e||e.destroy()}}),[N]),(0,r.useEffect)((()=>{var e;null===(e=X.current)||void 0===e||e.update({translateExtent:R,width:M,height:B,inversePan:F,pannable:w,zoomStep:x,zoomable:E})}),[w,E,F,x,R,M,B]);const $=D?e=>{var t;const[n,r]=(null===(t=X.current)||void 0===t?void 0:t.pointer(e))||[0,0];D(e,{x:n,y:r})}:void 0,J=C?(0,r.useCallback)(((e,t)=>{const n=S.getState().nodeLookup.get(t).internals.userNode;C(e,n)}),[]):void 0;return(0,d.jsx)(qi,{position:b,style:l(l({},o),{},{"--xy-minimap-background-color-props":"string"===typeof g?g:void 0,"--xy-minimap-mask-background-color-props":"string"===typeof m?m:void 0,"--xy-minimap-mask-stroke-color-props":"string"===typeof v?v:void 0,"--xy-minimap-mask-stroke-width-props":"number"===typeof y?y*H:void 0,"--xy-minimap-node-background-color-props":"string"===typeof s?s:void 0,"--xy-minimap-node-stroke-color-props":"string"===typeof a?a:void 0,"--xy-minimap-node-stroke-width-props":"number"===typeof f?f:void 0}),className:h(["react-flow__minimap",i]),"data-testid":"rf__minimap",children:(0,d.jsxs)("svg",{width:O,height:z,viewBox:"".concat(V," ").concat(K," ").concat(G," ").concat(Y),className:"react-flow__minimap-svg",role:"img","aria-labelledby":Z,ref:_,onClick:$,children:[k&&(0,d.jsx)("title",{id:Z,children:k}),(0,d.jsx)(Cu,{onClick:J,nodeColor:s,nodeStrokeColor:a,nodeBorderRadius:c,nodeClassName:u,nodeStrokeWidth:f,nodeComponent:p}),(0,d.jsx)("path",{className:"react-flow__minimap-mask",d:"M".concat(V-W,",").concat(K-W,"h").concat(G+2*W,"v").concat(Y+2*W,"h").concat(-G-2*W,"z\n        M").concat(P.x,",").concat(P.y,"h").concat(P.width,"v").concat(P.height,"h").concat(-P.width,"z"),fillRule:"evenodd",pointerEvents:"none"})]})})}ku.displayName="MiniMap";const Fu=(0,r.memo)(ku);(0,r.memo)((function(e){let{nodeId:t,position:n,variant:o=ii.Handle,className:i,style:a={},children:s,color:u,minWidth:c=10,minHeight:f=10,maxWidth:p=Number.MAX_VALUE,maxHeight:g=Number.MAX_VALUE,keepAspectRatio:m=!1,resizeDirection:v,shouldResize:y,onResizeStart:b,onResize:D,onResizeEnd:C}=e;const w=La(),E="string"===typeof t?t:w,k=Ri(),F=(0,r.useRef)(null),x=o===ii.Line?"right":"bottom-right",A=null!==n&&void 0!==n?n:x,S=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(F.current&&E)return S.current||(S.current=fi({domNode:F.current,nodeId:E,getStoreItems:()=>{const{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:o,domNode:i}=k.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:r,nodeOrigin:o,paneDomNode:i}},onChange:(e,t)=>{const{triggerNodeChanges:n,nodeLookup:r,parentLookup:o,nodeOrigin:i}=k.getState(),a=[],s={x:e.x,y:e.y},u=r.get(E);if(u&&u.expandParent&&u.parentId){var c,d,h,f,p,g,m;const t=null!==(c=u.origin)&&void 0!==c?c:i,n=null!==(d=null!==(h=e.width)&&void 0!==h?h:u.measured.width)&&void 0!==d?d:0,v=null!==(f=null!==(p=e.height)&&void 0!==p?p:u.measured.height)&&void 0!==f?f:0,y=Lo([{id:u.id,parentId:u.parentId,rect:l({width:n,height:v},io({x:null!==(g=e.x)&&void 0!==g?g:u.position.x,y:null!==(m=e.y)&&void 0!==m?m:u.position.y},{width:n,height:v},u.parentId,r,t))}],r,o,i);a.push(...y),s.x=e.x?Math.max(t[0]*n,e.x):void 0,s.y=e.y?Math.max(t[1]*v,e.y):void 0}if(void 0!==s.x&&void 0!==s.y){const e={id:E,type:"position",position:l({},s)};a.push(e)}if(void 0!==e.width&&void 0!==e.height){const t={id:E,type:"dimensions",resizing:!0,setAttributes:!v||("horizontal"===v?"width":"height"),dimensions:{width:e.width,height:e.height}};a.push(t)}for(const v of t){const e=l(l({},v),{},{type:"position"});a.push(e)}n(a)},onEnd:e=>{let{width:t,height:n}=e;const r={id:E,type:"dimensions",resizing:!1,dimensions:{width:t,height:n}};k.getState().triggerNodeChanges([r])}})),S.current.update({controlPosition:A,boundaries:{minWidth:c,minHeight:f,maxWidth:p,maxHeight:g},keepAspectRatio:m,resizeDirection:v,onResizeStart:b,onResize:D,onResizeEnd:C,shouldResize:y}),()=>{var e;null===(e=S.current)||void 0===e||e.destroy()}}),[A,c,f,p,g,m,b,D,C,y]);const _=A.split("-"),I=o===ii.Line?"borderColor":"backgroundColor",P=u?l(l({},a),{},{[I]:u}):a;return(0,d.jsx)("div",{className:h(["react-flow__resize-control","nodrag",..._,o,i]),ref:F,style:P,children:s})}));var xu=n(5837);function Au(e){return e&&"object"===typeof e?"position"in e||"type"in e?_u(e.position):"start"in e||"end"in e?_u(e):"line"in e||"column"in e?Su(e):"":""}function Su(e){return Iu(e&&e.line)+":"+Iu(e&&e.column)}function _u(e){return Su(e&&e.start)+"-"+Su(e&&e.end)}function Iu(e){return e&&"number"===typeof e?e:1}class Pu extends Error{constructor(e,t,n){const r=[null,null];let o={start:{line:null,column:null},end:{line:null,column:null}};if(super(),"string"===typeof t&&(n=t,t=void 0),"string"===typeof n){const e=n.indexOf(":");-1===e?r[1]=n:(r[0]=n.slice(0,e),r[1]=n.slice(e+1))}t&&("type"in t||"position"in t?t.position&&(o=t.position):"start"in t||"end"in t?o=t:("line"in t||"column"in t)&&(o.start=t)),this.name=Au(t)||"1:1",this.message="object"===typeof e?e.message:e,this.stack="","object"===typeof e&&e.stack&&(this.stack=e.stack),this.reason=this.message,this.fatal,this.line=o.start.line,this.column=o.start.column,this.position=o,this.source=r[0],this.ruleId=r[1],this.file,this.actual,this.expected,this.url,this.note}}Pu.prototype.file="",Pu.prototype.name="",Pu.prototype.reason="",Pu.prototype.message="",Pu.prototype.stack="",Pu.prototype.fatal=null,Pu.prototype.column=null,Pu.prototype.line=null,Pu.prototype.source=null,Pu.prototype.ruleId=null,Pu.prototype.position=null;const Tu={basename:function(e,t){if(void 0!==t&&"string"!==typeof t)throw new TypeError('"ext" argument must be a string');Nu(e);let n,r=0,o=-1,i=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;i--;)if(47===e.charCodeAt(i)){if(n){r=i+1;break}}else o<0&&(n=!0,o=i+1);return o<0?"":e.slice(r,o)}if(t===e)return"";let a=-1,s=t.length-1;for(;i--;)if(47===e.charCodeAt(i)){if(n){r=i+1;break}}else a<0&&(n=!0,a=i+1),s>-1&&(e.charCodeAt(i)===t.charCodeAt(s--)?s<0&&(o=i):(s=-1,o=a));r===o?o=a:o<0&&(o=e.length);return e.slice(r,o)},dirname:function(e){if(Nu(e),0===e.length)return".";let t,n=-1,r=e.length;for(;--r;)if(47===e.charCodeAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.charCodeAt(0)?"/":".":1===n&&47===e.charCodeAt(0)?"//":e.slice(0,n)},extname:function(e){Nu(e);let t,n=e.length,r=-1,o=0,i=-1,a=0;for(;n--;){const s=e.charCodeAt(n);if(47!==s)r<0&&(t=!0,r=n+1),46===s?i<0?i=n:1!==a&&(a=1):i>-1&&(a=-1);else if(t){o=n+1;break}}if(i<0||r<0||0===a||1===a&&i===r-1&&i===o+1)return"";return e.slice(i,r)},join:function(){let e,t=-1;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(;++t<r.length;)Nu(r[t]),r[t]&&(e=void 0===e?r[t]:e+"/"+r[t]);return void 0===e?".":function(e){Nu(e);const t=47===e.charCodeAt(0);let n=function(e,t){let n,r,o="",i=0,a=-1,s=0,u=-1;for(;++u<=e.length;){if(u<e.length)n=e.charCodeAt(u);else{if(47===n)break;n=47}if(47===n){if(a===u-1||1===s);else if(a!==u-1&&2===s){if(o.length<2||2!==i||46!==o.charCodeAt(o.length-1)||46!==o.charCodeAt(o.length-2))if(o.length>2){if(r=o.lastIndexOf("/"),r!==o.length-1){r<0?(o="",i=0):(o=o.slice(0,r),i=o.length-1-o.lastIndexOf("/")),a=u,s=0;continue}}else if(o.length>0){o="",i=0,a=u,s=0;continue}t&&(o=o.length>0?o+"/..":"..",i=2)}else o.length>0?o+="/"+e.slice(a+1,u):o=e.slice(a+1,u),i=u-a-1;a=u,s=0}else 46===n&&s>-1?s++:s=-1}return o}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.charCodeAt(e.length-1)&&(n+="/");return t?"/"+n:n}(e)},sep:"/"};function Nu(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Ru={cwd:function(){return"/"}};function Mu(e){return null!==e&&"object"===typeof e&&e.href&&e.origin}function Bu(e){if("string"===typeof e)e=new URL(e);else if(!Mu(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.charCodeAt(n)&&50===t.charCodeAt(n+1)){const e=t.charCodeAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const Ou=["history","path","basename","stem","extname","dirname"];class zu{constructor(e){let t;t=e?"string"===typeof e||function(e){return xu(e)}(e)?{value:e}:Mu(e)?{path:e}:e:{},this.data={},this.messages=[],this.history=[],this.cwd=Ru.cwd(),this.value,this.stored,this.result,this.map;let n,r=-1;for(;++r<Ou.length;){const e=Ou[r];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)Ou.includes(n)||(this[n]=t[n])}get path(){return this.history[this.history.length-1]}set path(e){Mu(e)&&(e=Bu(e)),ju(e,"path"),this.path!==e&&this.history.push(e)}get dirname(){return"string"===typeof this.path?Tu.dirname(this.path):void 0}set dirname(e){Hu(this.basename,"dirname"),this.path=Tu.join(e||"",this.basename)}get basename(){return"string"===typeof this.path?Tu.basename(this.path):void 0}set basename(e){ju(e,"basename"),Lu(e,"basename"),this.path=Tu.join(this.dirname||"",e)}get extname(){return"string"===typeof this.path?Tu.extname(this.path):void 0}set extname(e){if(Lu(e,"extname"),Hu(this.dirname,"extname"),e){if(46!==e.charCodeAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Tu.join(this.dirname,this.stem+(e||""))}get stem(){return"string"===typeof this.path?Tu.basename(this.path,this.extname):void 0}set stem(e){ju(e,"stem"),Lu(e,"stem"),this.path=Tu.join(this.dirname||"",e+(this.extname||""))}toString(e){return(this.value||"").toString(e||void 0)}message(e,t,n){const r=new Pu(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=null,r}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}}function Lu(e,t){if(e&&e.includes(Tu.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Tu.sep+"`")}function ju(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Hu(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Uu(e){if(e)throw e}var qu=n(3240);function Wu(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Vu(){const e=[],t={run:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let o=-1;const i=n.pop();if("function"!==typeof i)throw new TypeError("Expected function as last argument, not "+i);!function t(r){const a=e[++o];let s=-1;if(r)i(r);else{for(var u=arguments.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=arguments[c];for(;++s<n.length;)null!==l[s]&&void 0!==l[s]||(l[s]=n[s]);n=l,a?function(e,t){let n;return o;function o(){for(var t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];const u=e.length>o.length;let l;u&&o.push(i);try{l=e.apply(this,o)}catch(r){if(u&&n)throw r;return i(r)}u||(l&&l.then&&"function"===typeof l.then?l.then(a,i):l instanceof Error?i(l):a(l))}function i(e){if(!n){n=!0;for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];t(e,...o)}}function a(e){i(null,e)}}(a,t)(...l):i(null,...l)}}(null,...n)},use:function(n){if("function"!==typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const Ku=function e(){const t=Vu(),n=[];let r,o={},i=-1;return a.data=s,a.Parser=void 0,a.Compiler=void 0,a.freeze=function(){if(r)return a;for(;++i<n.length;){const[e,...r]=n[i];if(!1===r[0])continue;!0===r[0]&&(r[0]=void 0);const o=e.call(a,...r);"function"===typeof o&&t.use(o)}return r=!0,i=Number.POSITIVE_INFINITY,a},a.attachers=n,a.use=u,a.parse=function(e){a.freeze();const t=el(e),n=a.Parser;if(Zu("parse",n),Yu(n,"parse"))return new n(String(t),t).parse();return n(String(t),t)},a.stringify=function(e,t){a.freeze();const n=el(t),r=a.Compiler;if(Qu("stringify",r),$u(e),Yu(r,"compile"))return new r(e,n).compile();return r(e,n)},a.run=function(e,n,r){$u(e),a.freeze(),r||"function"!==typeof n||(r=n,n=void 0);if(!r)return new Promise(o);function o(o,i){function a(t,n,a){n=n||e,t?i(t):o?o(n):r(null,n,a)}t.run(e,el(n),a)}o(null,r)},a.runSync=function(e,t){let n,r;return a.run(e,t,o),Ju("runSync","run",r),n;function o(e,t){Uu(e),n=t,r=!0}},a.process=function(e,t){if(a.freeze(),Zu("process",a.Parser),Qu("process",a.Compiler),!t)return new Promise(n);function n(n,r){const o=el(e);function i(e,o){e||!o?r(e):n?n(o):t(null,o)}a.run(a.parse(o),o,((e,t,n)=>{if(!e&&t&&n){const o=a.stringify(t,n);void 0===o||null===o||("string"===typeof(r=o)||xu(r)?n.value=o:n.result=o),i(e,n)}else i(e);var r}))}n(null,t)},a.processSync=function(e){let t;a.freeze(),Zu("processSync",a.Parser),Qu("processSync",a.Compiler);const n=el(e);return a.process(n,r),Ju("processSync","process",t),n;function r(e){t=!0,Uu(e)}},a;function a(){const t=e();let r=-1;for(;++r<n.length;)t.use(...n[r]);return t.data(qu(!0,{},o)),t}function s(e,t){return"string"===typeof e?2===arguments.length?(Xu("data",r),o[e]=t,a):Gu.call(o,e)&&o[e]||null:e?(Xu("data",r),o=e,a):o}function u(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];let u;if(Xu("use",r),null===e||void 0===e);else if("function"===typeof e)h(e,...i);else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?d(e):c(e)}return u&&(o.settings=Object.assign(o.settings||{},u)),a;function l(e){if("function"===typeof e)h(e);else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;h(t,...n)}else c(e)}}function c(e){d(e.plugins),e.settings&&(u=Object.assign(u||{},e.settings))}function d(e){let t=-1;if(null===e||void 0===e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){l(e[t])}}}function h(e,t){let r,o=-1;for(;++o<n.length;)if(n[o][0]===e){r=n[o];break}r?(Wu(r[1])&&Wu(t)&&(t=qu(!0,r[1],t)),r[1]=t):n.push([...arguments])}}}().freeze(),Gu={}.hasOwnProperty;function Yu(e,t){return"function"===typeof e&&e.prototype&&(function(e){let t;for(t in e)if(Gu.call(e,t))return!0;return!1}(e.prototype)||t in e.prototype)}function Zu(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `Parser`")}function Qu(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `Compiler`")}function Xu(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function $u(e){if(!Wu(e)||"string"!==typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function Ju(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function el(e){return function(e){return Boolean(e&&"object"===typeof e&&"message"in e&&"messages"in e)}(e)?e:new zu(e)}const tl={};function nl(e,t,n){if(function(e){return Boolean(e&&"object"===typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return rl(e.children,t,n)}return Array.isArray(e)?rl(e,t,n):""}function rl(e,t,n){const r=[];let o=-1;for(;++o<e.length;)r[o]=nl(e[o],t,n);return r.join("")}function ol(e,t,n,r){const o=e.length;let i,a=0;if(t=t<0?-t>o?0:o+t:t>o?o:t,n=n>0?n:0,r.length<1e4)i=Array.from(r),i.unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);a<r.length;)i=r.slice(a,a+1e4),i.unshift(t,0),e.splice(...i),a+=1e4,t+=1e4}function il(e,t){return e.length>0?(ol(e,e.length,0,t),e):t}const al={}.hasOwnProperty;function sl(e,t){let n;for(n in t){const r=(al.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let i;if(o)for(i in o){al.call(r,i)||(r[i]=[]);const e=o[i];ul(r[i],Array.isArray(e)?e:e?[e]:[])}}}function ul(e,t){let n=-1;const r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);ol(e,0,0,r)}const ll=Cl(/[A-Za-z]/),cl=Cl(/[\dA-Za-z]/),dl=Cl(/[#-'*+\--9=?A-Z^-~]/);function hl(e){return null!==e&&(e<32||127===e)}const fl=Cl(/\d/),pl=Cl(/[\dA-Fa-f]/),gl=Cl(/[!-/:-@[-`{-~]/);function ml(e){return null!==e&&e<-2}function vl(e){return null!==e&&(e<0||32===e)}function yl(e){return-2===e||-1===e||32===e}const bl=Cl(/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/),Dl=Cl(/\s/);function Cl(e){return function(t){return null!==t&&e.test(String.fromCharCode(t))}}function wl(e,t,n,r){const o=r?r-1:Number.POSITIVE_INFINITY;let i=0;return function(r){if(yl(r))return e.enter(n),a(r);return t(r)};function a(r){return yl(r)&&i++<o?(e.consume(r),a):(e.exit(n),t(r))}}const El={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,(function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),wl(e,t,"linePrefix")}),(function(t){return e.enter("paragraph"),r(t)}));let n;return t;function r(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,o(t)}function o(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):ml(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),o)}}};const kl={tokenize:function(e){const t=this,n=[];let r,o,i,a=0;return s;function s(r){if(a<n.length){const o=n[a];return t.containerState=o[1],e.attempt(o[0].continuation,u,l)(r)}return l(r)}function u(e){if(a++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&y();const n=t.events.length;let o,i=n;for(;i--;)if("exit"===t.events[i][0]&&"chunkFlow"===t.events[i][1].type){o=t.events[i][1].end;break}v(a);let s=n;for(;s<t.events.length;)t.events[s][1].end=Object.assign({},o),s++;return ol(t.events,i+1,0,t.events.slice(n)),t.events.length=s,l(e)}return s(e)}function l(o){if(a===n.length){if(!r)return h(o);if(r.currentConstruct&&r.currentConstruct.concrete)return p(o);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Fl,c,d)(o)}function c(e){return r&&y(),v(a),h(e)}function d(e){return t.parser.lazy[t.now().line]=a!==n.length,i=t.now().offset,p(e)}function h(n){return t.containerState={},e.attempt(Fl,f,p)(n)}function f(e){return a++,n.push([t.currentConstruct,t.containerState]),h(e)}function p(n){return null===n?(r&&y(),v(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:o,_tokenizer:r}),g(n))}function g(n){return null===n?(m(e.exit("chunkFlow"),!0),v(0),void e.consume(n)):ml(n)?(e.consume(n),m(e.exit("chunkFlow")),a=0,t.interrupt=void 0,s):(e.consume(n),g)}function m(e,n){const s=t.sliceStream(e);if(n&&s.push(null),e.previous=o,o&&(o.next=e),o=e,r.defineSkip(e.start),r.write(s),t.parser.lazy[e.start.line]){let e=r.events.length;for(;e--;)if(r.events[e][1].start.offset<i&&(!r.events[e][1].end||r.events[e][1].end.offset>i))return;const n=t.events.length;let o,s,u=n;for(;u--;)if("exit"===t.events[u][0]&&"chunkFlow"===t.events[u][1].type){if(o){s=t.events[u][1].end;break}o=!0}for(v(a),e=n;e<t.events.length;)t.events[e][1].end=Object.assign({},s),e++;ol(t.events,u+1,0,t.events.slice(n)),t.events.length=e}}function v(r){let o=n.length;for(;o-- >r;){const r=n[o];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function y(){r.write([null]),o=void 0,r=void 0,t.containerState._closeFlow=void 0}}},Fl={tokenize:function(e,t,n){return wl(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};const xl={tokenize:function(e,t,n){return function(t){return yl(t)?wl(e,r,"linePrefix")(t):r(t)};function r(e){return null===e||ml(e)?t(e):n(e)}},partial:!0};function Al(e){const t={};let n,r,o,i,a,s,u,l=-1;for(;++l<e.length;){for(;l in t;)l=t[l];if(n=e[l],l&&"chunkFlow"===n[1].type&&"listItemPrefix"===e[l-1][1].type&&(s=n[1]._tokenizer.events,o=0,o<s.length&&"lineEndingBlank"===s[o][1].type&&(o+=2),o<s.length&&"content"===s[o][1].type))for(;++o<s.length&&"content"!==s[o][1].type;)"chunkText"===s[o][1].type&&(s[o][1]._isInFirstContentOfListItem=!0,o++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,Sl(e,l)),l=t[l],u=!0);else if(n[1]._container){for(o=l,r=void 0;o--&&(i=e[o],"lineEnding"===i[1].type||"lineEndingBlank"===i[1].type);)"enter"===i[0]&&(r&&(e[r][1].type="lineEndingBlank"),i[1].type="lineEnding",r=o);r&&(n[1].end=Object.assign({},e[r][1].start),a=e.slice(r,l),a.unshift(n),ol(e,r,l-r+1,a))}}return!u}function Sl(e,t){const n=e[t][1],r=e[t][2];let o=t-1;const i=[],a=n._tokenizer||r.parser[n.contentType](n.start),s=a.events,u=[],l={};let c,d,h=-1,f=n,p=0,g=0;const m=[g];for(;f;){for(;e[++o][1]!==f;);i.push(o),f._tokenizer||(c=r.sliceStream(f),f.next||c.push(null),d&&a.defineSkip(f.start),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(c),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=n;++h<s.length;)"exit"===s[h][0]&&"enter"===s[h-1][0]&&s[h][1].type===s[h-1][1].type&&s[h][1].start.line!==s[h][1].end.line&&(g=h+1,m.push(g),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(a.events=[],f?(f._tokenizer=void 0,f.previous=void 0):m.pop(),h=m.length;h--;){const t=s.slice(m[h],m[h+1]),n=i.pop();u.unshift([n,n+t.length-1]),ol(e,n,2,t)}for(h=-1;++h<u.length;)l[p+u[h][0]]=p+u[h][1],p+=u[h][1]-u[h][0]-1;return l}const _l={tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?o(t):ml(t)?e.check(Il,i,o)(t):(e.consume(t),r)}function o(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function i(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}},resolve:function(e){return Al(e),e}},Il={tokenize:function(e,t,n){const r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),wl(e,o,"linePrefix")};function o(o){if(null===o||ml(o))return n(o);const i=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}},partial:!0};const Pl={tokenize:function(e){const t=this,n=e.attempt(xl,(function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}),e.attempt(this.parser.constructs.flowInitial,r,wl(e,e.attempt(this.parser.constructs.flow,r,e.attempt(_l,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};const Tl={resolveAll:Bl()},Nl=Ml("string"),Rl=Ml("text");function Ml(e){return{tokenize:function(t){const n=this,r=this.parser.constructs[e],o=t.attempt(r,i,a);return i;function i(e){return u(e)?o(e):a(e)}function a(e){if(null!==e)return t.enter("data"),t.consume(e),s;t.consume(e)}function s(e){return u(e)?(t.exit("data"),o(e)):(t.consume(e),s)}function u(e){if(null===e)return!0;const t=r[e];let o=-1;if(t)for(;++o<t.length;){const e=t[o];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}},resolveAll:Bl("text"===e?Ol:void 0)}}function Bl(e){return function(t,n){let r,o=-1;for(;++o<=t.length;)void 0===r?t[o]&&"data"===t[o][1].type&&(r=o,o++):t[o]&&"data"===t[o][1].type||(o!==r+2&&(t[r][1].end=t[o-1][1].end,t.splice(r+2,o-r-2),o=r+2),r=void 0);return e?e(t,n):t}}function Ol(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],o=t.sliceStream(r);let i,a=o.length,s=-1,u=0;for(;a--;){const e=o[a];if("string"===typeof e){for(s=e.length;32===e.charCodeAt(s-1);)u++,s--;if(s)break;s=-1}else if(-2===e)i=!0,u++;else if(-1!==e){a++;break}}if(u){const o={type:n===e.length||i||u<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-u,offset:r.end.offset-u,_index:r.start._index+a,_bufferIndex:a?s:r.start._bufferIndex+s},end:Object.assign({},r.end)};r.end=Object.assign({},o.start),r.start.offset===r.end.offset?Object.assign(r,o):(e.splice(n,0,["enter",o,t],["exit",o,t]),n+=2)}n++}return e}function zl(e,t,n){const r=[];let o=-1;for(;++o<e.length;){const i=e[o].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}function Ll(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const o={},i=[];let a=[],s=[],u=!0;const l={consume:function(e){ml(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,D()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++));c.previous=e,u=!0},enter:function(e,t){const n=t||{};return n.type=e,n.start=p(),c.events.push(["enter",n,c]),s.push(n),n},exit:function(e){const t=s.pop();return t.end=p(),c.events.push(["exit",t,c]),t},attempt:y((function(e,t){b(e,t.from)})),check:y(v),interrupt:y(v,{interrupt:!0})},c={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:f,sliceSerialize:function(e,t){return function(e,t){let n=-1;const r=[];let o;for(;++n<e.length;){const i=e[n];let a;if("string"===typeof i)a=i;else switch(i){case-5:a="\r";break;case-4:a="\n";break;case-3:a="\r\n";break;case-2:a=t?" ":"\t";break;case-1:if(!t&&o)continue;a=" ";break;default:a=String.fromCharCode(i)}o=-2===i,r.push(a)}return r.join("")}(f(e),t)},now:p,defineSkip:function(e){o[e.line]=e.column,D()},write:function(e){if(a=il(a,e),g(),null!==a[a.length-1])return[];return b(t,0),c.events=zl(i,c.events,c),c.events}};let d,h=t.tokenize.call(c,l);return t.resolveAll&&i.push(t),c;function f(e){return function(e,t){const n=t.start._index,r=t.start._bufferIndex,o=t.end._index,i=t.end._bufferIndex;let a;if(n===o)a=[e[n].slice(r,i)];else{if(a=e.slice(n,o),r>-1){const e=a[0];"string"===typeof e?a[0]=e.slice(r):a.shift()}i>0&&a.push(e[o].slice(0,i))}return a}(a,e)}function p(){const{line:e,column:t,offset:n,_index:o,_bufferIndex:i}=r;return{line:e,column:t,offset:n,_index:o,_bufferIndex:i}}function g(){let e;for(;r._index<a.length;){const t=a[r._index];if("string"===typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)m(t.charCodeAt(r._bufferIndex));else m(t)}}function m(e){u=void 0,d=e,h=h(e)}function v(e,t){t.restore()}function y(e,t){return function(n,o,i){let a,d,h,f;return Array.isArray(n)?g(n):"tokenize"in n?g([n]):function(e){return t;function t(t){const n=null!==t&&e[t],r=null!==t&&e.null;return g([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}(n);function g(e){return a=e,d=0,0===e.length?i:m(e[d])}function m(e){return function(n){f=function(){const e=p(),t=c.previous,n=c.currentConstruct,o=c.events.length,i=Array.from(s);return{restore:a,from:o};function a(){r=e,c.previous=t,c.currentConstruct=n,c.events.length=o,s=i,D()}}(),h=e,e.partial||(c.currentConstruct=e);if(e.name&&c.parser.constructs.disable.null.includes(e.name))return y(n);return e.tokenize.call(t?Object.assign(Object.create(c),t):c,l,v,y)(n)}}function v(t){return u=!0,e(h,f),o}function y(e){return u=!0,f.restore(),++d<a.length?m(a[d]):i}}}function b(e,t){e.resolveAll&&!i.includes(e)&&i.push(e),e.resolve&&ol(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function D(){r.line in o&&r.column<2&&(r.column=o[r.line],r.offset+=o[r.line]-1)}}const jl={name:"thematicBreak",tokenize:function(e,t,n){let r,o=0;return function(t){return e.enter("thematicBreak"),function(e){return r=e,i(e)}(t)};function i(i){return i===r?(e.enter("thematicBreakSequence"),a(i)):o>=3&&(null===i||ml(i))?(e.exit("thematicBreak"),t(i)):n(i)}function a(t){return t===r?(e.consume(t),o++,a):(e.exit("thematicBreakSequence"),yl(t)?wl(e,i,"whitespace")(t):i(t))}}};const Hl={name:"list",tokenize:function(e,t,n){const r=this,o=r.events[r.events.length-1];let i=o&&"linePrefix"===o[1].type?o[2].sliceSerialize(o[1],!0).length:0,a=0;return function(t){const o=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===o?!r.containerState.marker||t===r.containerState.marker:fl(t)){if(r.containerState.type||(r.containerState.type=o,e.enter(o,{_container:!0})),"listUnordered"===o)return e.enter("listItemPrefix"),42===t||45===t?e.check(jl,n,u)(t):u(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),s(t)}return n(t)};function s(t){return fl(t)&&++a<10?(e.consume(t),s):(!r.interrupt||a<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),u(t)):n(t)}function u(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(xl,r.interrupt?n:l,e.attempt(Ul,d,c))}function l(e){return r.containerState.initialBlankLine=!0,i++,d(e)}function c(t){return yl(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),d):n(t)}function d(n){return r.containerState.size=i+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}},continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(xl,o,i);function o(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,wl(e,t,"listItemIndent",r.containerState.size+1)(n)}function i(n){return r.containerState.furtherBlankLines||!yl(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(ql,t,a)(n))}function a(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,wl(e,e.attempt(Hl,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}},exit:function(e){e.exit(this.containerState.type)}},Ul={tokenize:function(e,t,n){const r=this;return wl(e,(function(e){const o=r.events[r.events.length-1];return!yl(e)&&o&&"listItemPrefixWhitespace"===o[1].type?t(e):n(e)}),"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},ql={tokenize:function(e,t,n){const r=this;return wl(e,(function(e){const o=r.events[r.events.length-1];return o&&"listItemIndent"===o[1].type&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(e):n(e)}),"listItemIndent",r.containerState.size+1)},partial:!0};const Wl={name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),o}return n(t)};function o(n){return yl(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){const r=this;return function(t){if(yl(t))return wl(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return o(t)};function o(r){return e.attempt(Wl,t,n)(r)}}},exit:function(e){e.exit("blockQuote")}};function Vl(e,t,n,r,o,i,a,s,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return function(t){if(60===t)return e.enter(r),e.enter(o),e.enter(i),e.consume(t),e.exit(i),d;if(null===t||32===t||41===t||hl(t))return n(t);return e.enter(r),e.enter(a),e.enter(s),e.enter("chunkString",{contentType:"string"}),p(t)};function d(n){return 62===n?(e.enter(i),e.consume(n),e.exit(i),e.exit(o),e.exit(r),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),h(n))}function h(t){return 62===t?(e.exit("chunkString"),e.exit(s),d(t)):null===t||60===t||ml(t)?n(t):(e.consume(t),92===t?f:h)}function f(t){return 60===t||62===t||92===t?(e.consume(t),h):h(t)}function p(o){return c||null!==o&&41!==o&&!vl(o)?c<l&&40===o?(e.consume(o),c++,p):41===o?(e.consume(o),c--,p):null===o||32===o||40===o||hl(o)?n(o):(e.consume(o),92===o?g:p):(e.exit("chunkString"),e.exit(s),e.exit(a),e.exit(r),t(o))}function g(t){return 40===t||41===t||92===t?(e.consume(t),p):p(t)}}function Kl(e,t,n,r,o,i){const a=this;let s,u=0;return function(t){return e.enter(r),e.enter(o),e.consume(t),e.exit(o),e.enter(i),l};function l(d){return u>999||null===d||91===d||93===d&&!s||94===d&&!u&&"_hiddenFootnoteSupport"in a.parser.constructs?n(d):93===d?(e.exit(i),e.enter(o),e.consume(d),e.exit(o),e.exit(r),t):ml(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),l):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(t){return null===t||91===t||93===t||ml(t)||u++>999?(e.exit("chunkString"),l(t)):(e.consume(t),s||(s=!yl(t)),92===t?d:c)}function d(t){return 91===t||92===t||93===t?(e.consume(t),u++,c):c(t)}}function Gl(e,t,n,r,o,i){let a;return function(t){if(34===t||39===t||40===t)return e.enter(r),e.enter(o),e.consume(t),e.exit(o),a=40===t?41:t,s;return n(t)};function s(n){return n===a?(e.enter(o),e.consume(n),e.exit(o),e.exit(r),t):(e.enter(i),u(n))}function u(t){return t===a?(e.exit(i),s(a)):null===t?n(t):ml(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),wl(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),l(t))}function l(t){return t===a||null===t||ml(t)?(e.exit("chunkString"),u(t)):(e.consume(t),92===t?c:l)}function c(t){return t===a||92===t?(e.consume(t),l):l(t)}}function Yl(e,t){let n;return function r(o){if(ml(o))return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),n=!0,r;if(yl(o))return wl(e,r,n?"linePrefix":"lineSuffix")(o);return t(o)}}function Zl(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ql={name:"definition",tokenize:function(e,t,n){const r=this;let o;return function(t){return e.enter("definition"),function(t){return Kl.call(r,e,i,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function i(t){return o=Zl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),a):n(t)}function a(t){return vl(t)?Yl(e,s)(t):s(t)}function s(t){return Vl(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function u(t){return e.attempt(Xl,l,l)(t)}function l(t){return yl(t)?wl(e,c,"whitespace")(t):c(t)}function c(i){return null===i||ml(i)?(e.exit("definition"),r.parser.defined.push(o),t(i)):n(i)}}},Xl={tokenize:function(e,t,n){return function(t){return vl(t)?Yl(e,r)(t):n(t)};function r(t){return Gl(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function o(t){return yl(t)?wl(e,i,"whitespace")(t):i(t)}function i(e){return null===e||ml(e)?t(e):n(e)}},partial:!0};const $l={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),wl(e,o,"linePrefix",5)(t)};function o(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?i(e):n(e)}function i(t){return null===t?s(t):ml(t)?e.attempt(Jl,i,s)(t):(e.enter("codeFlowValue"),a(t))}function a(t){return null===t||ml(t)?(e.exit("codeFlowValue"),i(t)):(e.consume(t),a)}function s(n){return e.exit("codeIndented"),t(n)}}},Jl={tokenize:function(e,t,n){const r=this;return o;function o(t){return r.parser.lazy[r.now().line]?n(t):ml(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o):wl(e,i,"linePrefix",5)(t)}function i(e){const i=r.events[r.events.length-1];return i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?t(e):ml(e)?o(e):n(e)}},partial:!0};const ec={name:"headingAtx",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),o(t)}(t)};function o(t){return 35===t&&r++<6?(e.consume(t),o):null===t||vl(t)?(e.exit("atxHeadingSequence"),i(t)):n(t)}function i(n){return 35===n?(e.enter("atxHeadingSequence"),a(n)):null===n||ml(n)?(e.exit("atxHeading"),t(n)):yl(n)?wl(e,i,"whitespace")(n):(e.enter("atxHeadingText"),s(n))}function a(t){return 35===t?(e.consume(t),a):(e.exit("atxHeadingSequence"),i(t))}function s(t){return null===t||35===t||vl(t)?(e.exit("atxHeadingText"),i(t)):(e.consume(t),s)}},resolve:function(e,t){let n,r,o=e.length-2,i=3;"whitespace"===e[i][1].type&&(i+=2);o-2>i&&"whitespace"===e[o][1].type&&(o-=2);"atxHeadingSequence"===e[o][1].type&&(i===o-1||o-4>i&&"whitespace"===e[o-2][1].type)&&(o-=i+1===o?2:4);o>i&&(n={type:"atxHeadingText",start:e[i][1].start,end:e[o][1].end},r={type:"chunkText",start:e[i][1].start,end:e[o][1].end,contentType:"text"},ol(e,i,o-i+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e}};const tc={name:"setextUnderline",tokenize:function(e,t,n){const r=this;let o;return function(t){let a,s=r.events.length;for(;s--;)if("lineEnding"!==r.events[s][1].type&&"linePrefix"!==r.events[s][1].type&&"content"!==r.events[s][1].type){a="paragraph"===r.events[s][1].type;break}if(!r.parser.lazy[r.now().line]&&(r.interrupt||a))return e.enter("setextHeadingLine"),o=t,function(t){return e.enter("setextHeadingLineSequence"),i(t)}(t);return n(t)};function i(t){return t===o?(e.consume(t),i):(e.exit("setextHeadingLineSequence"),yl(t)?wl(e,a,"lineSuffix")(t):a(t))}function a(r){return null===r||ml(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}},resolveTo:function(e,t){let n,r,o,i=e.length;for(;i--;)if("enter"===e[i][0]){if("content"===e[i][1].type){n=i;break}"paragraph"===e[i][1].type&&(r=i)}else"content"===e[i][1].type&&e.splice(i,1),o||"definition"!==e[i][1].type||(o=i);const a={type:"setextHeading",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)};e[r][1].type="setextHeadingText",o?(e.splice(r,0,["enter",a,t]),e.splice(o+1,0,["exit",e[n][1],t]),e[n][1].end=Object.assign({},e[o][1].end)):e[n][1]=a;return e.push(["exit",a,t]),e}};const nc=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],rc=["pre","script","style","textarea"],oc={name:"htmlFlow",tokenize:function(e,t,n){const r=this;let o,i,a,s,u;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),l}(t)};function l(s){return 33===s?(e.consume(s),c):47===s?(e.consume(s),i=!0,f):63===s?(e.consume(s),o=3,r.interrupt?t:R):ll(s)?(e.consume(s),a=String.fromCharCode(s),p):n(s)}function c(i){return 45===i?(e.consume(i),o=2,d):91===i?(e.consume(i),o=5,s=0,h):ll(i)?(e.consume(i),o=4,r.interrupt?t:R):n(i)}function d(o){return 45===o?(e.consume(o),r.interrupt?t:R):n(o)}function h(o){const i="CDATA[";return o===i.charCodeAt(s++)?(e.consume(o),6===s?r.interrupt?t:x:h):n(o)}function f(t){return ll(t)?(e.consume(t),a=String.fromCharCode(t),p):n(t)}function p(s){if(null===s||47===s||62===s||vl(s)){const u=47===s,l=a.toLowerCase();return u||i||!rc.includes(l)?nc.includes(a.toLowerCase())?(o=6,u?(e.consume(s),g):r.interrupt?t(s):x(s)):(o=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(s):i?m(s):v(s)):(o=1,r.interrupt?t(s):x(s))}return 45===s||cl(s)?(e.consume(s),a+=String.fromCharCode(s),p):n(s)}function g(o){return 62===o?(e.consume(o),r.interrupt?t:x):n(o)}function m(t){return yl(t)?(e.consume(t),m):k(t)}function v(t){return 47===t?(e.consume(t),k):58===t||95===t||ll(t)?(e.consume(t),y):yl(t)?(e.consume(t),v):k(t)}function y(t){return 45===t||46===t||58===t||95===t||cl(t)?(e.consume(t),y):b(t)}function b(t){return 61===t?(e.consume(t),D):yl(t)?(e.consume(t),b):v(t)}function D(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),u=t,C):yl(t)?(e.consume(t),D):w(t)}function C(t){return t===u?(e.consume(t),u=null,E):null===t||ml(t)?n(t):(e.consume(t),C)}function w(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||vl(t)?b(t):(e.consume(t),w)}function E(e){return 47===e||62===e||yl(e)?v(e):n(e)}function k(t){return 62===t?(e.consume(t),F):n(t)}function F(t){return null===t||ml(t)?x(t):yl(t)?(e.consume(t),F):n(t)}function x(t){return 45===t&&2===o?(e.consume(t),I):60===t&&1===o?(e.consume(t),P):62===t&&4===o?(e.consume(t),M):63===t&&3===o?(e.consume(t),R):93===t&&5===o?(e.consume(t),N):!ml(t)||6!==o&&7!==o?null===t||ml(t)?(e.exit("htmlFlowData"),A(t)):(e.consume(t),x):(e.exit("htmlFlowData"),e.check(ic,B,A)(t))}function A(t){return e.check(ac,S,B)(t)}function S(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),_}function _(t){return null===t||ml(t)?A(t):(e.enter("htmlFlowData"),x(t))}function I(t){return 45===t?(e.consume(t),R):x(t)}function P(t){return 47===t?(e.consume(t),a="",T):x(t)}function T(t){if(62===t){const n=a.toLowerCase();return rc.includes(n)?(e.consume(t),M):x(t)}return ll(t)&&a.length<8?(e.consume(t),a+=String.fromCharCode(t),T):x(t)}function N(t){return 93===t?(e.consume(t),R):x(t)}function R(t){return 62===t?(e.consume(t),M):45===t&&2===o?(e.consume(t),R):x(t)}function M(t){return null===t||ml(t)?(e.exit("htmlFlowData"),B(t)):(e.consume(t),M)}function B(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},concrete:!0},ic={tokenize:function(e,t,n){return function(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(xl,t,n)}},partial:!0},ac={tokenize:function(e,t,n){const r=this;return function(t){if(ml(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o;return n(t)};function o(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0};const sc={tokenize:function(e,t,n){const r=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o};function o(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0},uc={name:"codeFenced",tokenize:function(e,t,n){const r=this,o={tokenize:function(e,t,n){let o=0;return a;function a(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),u}function u(t){return e.enter("codeFencedFence"),yl(t)?wl(e,l,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):l(t)}function l(t){return t===i?(e.enter("codeFencedFenceSequence"),c(t)):n(t)}function c(t){return t===i?(o++,e.consume(t),c):o>=s?(e.exit("codeFencedFenceSequence"),yl(t)?wl(e,d,"whitespace")(t):d(t)):n(t)}function d(r){return null===r||ml(r)?(e.exit("codeFencedFence"),t(r)):n(r)}},partial:!0};let i,a=0,s=0;return function(t){return function(t){const n=r.events[r.events.length-1];return a=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,i=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(t)}(t)};function u(t){return t===i?(s++,e.consume(t),u):s<3?n(t):(e.exit("codeFencedFenceSequence"),yl(t)?wl(e,l,"whitespace")(t):l(t))}function l(n){return null===n||ml(n)?(e.exit("codeFencedFence"),r.interrupt?t(n):e.check(sc,f,y)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),c(n))}function c(t){return null===t||ml(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),l(t)):yl(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),wl(e,d,"whitespace")(t)):96===t&&t===i?n(t):(e.consume(t),c)}function d(t){return null===t||ml(t)?l(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return null===t||ml(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),l(t)):96===t&&t===i?n(t):(e.consume(t),h)}function f(t){return e.attempt(o,y,p)(t)}function p(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),g}function g(t){return a>0&&yl(t)?wl(e,m,"linePrefix",a+1)(t):m(t)}function m(t){return null===t||ml(t)?e.check(sc,f,y)(t):(e.enter("codeFlowValue"),v(t))}function v(t){return null===t||ml(t)?(e.exit("codeFlowValue"),m(t)):(e.consume(t),v)}function y(n){return e.exit("codeFenced"),t(n)}},concrete:!0};const lc=document.createElement("i");function cc(e){const t="&"+e+";";lc.innerHTML=t;const n=lc.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}const dc={name:"characterReference",tokenize:function(e,t,n){const r=this;let o,i,a=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),s};function s(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),o=31,i=cl,l(t))}function u(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,i=pl,l):(e.enter("characterReferenceValue"),o=7,i=fl,l(t))}function l(s){if(59===s&&a){const o=e.exit("characterReferenceValue");return i!==cl||cc(r.sliceSerialize(o))?(e.enter("characterReferenceMarker"),e.consume(s),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(s)}return i(s)&&a++<o?(e.consume(s),l):n(s)}}};const hc={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return gl(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};const fc={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),wl(e,t,"linePrefix")}}};const pc={name:"labelEnd",tokenize:function(e,t,n){const r=this;let o,i,a=r.events.length;for(;a--;)if(("labelImage"===r.events[a][1].type||"labelLink"===r.events[a][1].type)&&!r.events[a][1]._balanced){o=r.events[a][1];break}return function(t){if(!o)return n(t);if(o._inactive)return c(t);return i=r.parser.defined.includes(Zl(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),s};function s(t){return 40===t?e.attempt(gc,l,i?l:c)(t):91===t?e.attempt(mc,l,i?u:c)(t):i?l(t):c(t)}function u(t){return e.attempt(vc,l,c)(t)}function l(e){return t(e)}function c(e){return o._balanced=!0,n(e)}},resolveTo:function(e,t){let n,r,o,i,a=e.length,s=0;for(;a--;)if(n=e[a][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[a][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(o){if("enter"===e[a][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=a,"labelLink"!==n.type)){s=2;break}}else"labelEnd"===n.type&&(o=a);const u={type:"labelLink"===e[r][1].type?"link":"image",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[r][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[r+s+2][1].end),end:Object.assign({},e[o-2][1].start)};return i=[["enter",u,t],["enter",l,t]],i=il(i,e.slice(r+1,r+s+3)),i=il(i,[["enter",c,t]]),i=il(i,zl(t.parser.constructs.insideSpan.null,e.slice(r+s+4,o-3),t)),i=il(i,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),i=il(i,e.slice(o+1)),i=il(i,[["exit",u,t]]),ol(e,r,e.length,i),e},resolveAll:function(e){let t=-1;for(;++t<e.length;){const n=e[t][1];"labelImage"!==n.type&&"labelLink"!==n.type&&"labelEnd"!==n.type||(e.splice(t+1,"labelImage"===n.type?4:2),n.type="data",t++)}return e}},gc={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),r};function r(t){return vl(t)?Yl(e,o)(t):o(t)}function o(t){return 41===t?l(t):Vl(e,i,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function i(t){return vl(t)?Yl(e,s)(t):l(t)}function a(e){return n(e)}function s(t){return 34===t||39===t||40===t?Gl(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):l(t)}function u(t){return vl(t)?Yl(e,l)(t):l(t)}function l(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},mc={tokenize:function(e,t,n){const r=this;return function(t){return Kl.call(r,e,o,i,"reference","referenceMarker","referenceString")(t)};function o(e){return r.parser.defined.includes(Zl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function i(e){return n(e)}}},vc={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};const yc={name:"labelStartImage",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),o};function o(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),i):n(t)}function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:pc.resolveAll};function bc(e){return null===e||vl(e)||Dl(e)?1:bl(e)?2:void 0}const Dc={name:"attention",tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,o=bc(r);let i;return function(t){return i=t,e.enter("attentionSequence"),a(t)};function a(s){if(s===i)return e.consume(s),a;const u=e.exit("attentionSequence"),l=bc(s),c=!l||2===l&&o||n.includes(s),d=!o||2===o&&l||n.includes(r);return u._open=Boolean(42===i?c:c&&(o||!d)),u._close=Boolean(42===i?d:d&&(l||!c)),t(s)}},resolveAll:function(e,t){let n,r,o,i,a,s,u,l,c=-1;for(;++c<e.length;)if("enter"===e[c][0]&&"attentionSequence"===e[c][1].type&&e[c][1]._close)for(n=c;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[c][1]).charCodeAt(0)){if((e[n][1]._close||e[c][1]._open)&&(e[c][1].end.offset-e[c][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[c][1].end.offset-e[c][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[c][1].end.offset-e[c][1].start.offset>1?2:1;const d=Object.assign({},e[n][1].end),h=Object.assign({},e[c][1].start);Cc(d,-s),Cc(h,s),i={type:s>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},e[n][1].end)},a={type:s>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[c][1].start),end:h},o={type:s>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[c][1].start)},r={type:s>1?"strong":"emphasis",start:Object.assign({},i.start),end:Object.assign({},a.end)},e[n][1].end=Object.assign({},i.start),e[c][1].start=Object.assign({},a.end),u=[],e[n][1].end.offset-e[n][1].start.offset&&(u=il(u,[["enter",e[n][1],t],["exit",e[n][1],t]])),u=il(u,[["enter",r,t],["enter",i,t],["exit",i,t],["enter",o,t]]),u=il(u,zl(t.parser.constructs.insideSpan.null,e.slice(n+1,c),t)),u=il(u,[["exit",o,t],["enter",a,t],["exit",a,t],["exit",r,t]]),e[c][1].end.offset-e[c][1].start.offset?(l=2,u=il(u,[["enter",e[c][1],t],["exit",e[c][1],t]])):l=0,ol(e,n-1,c-n+3,u),c=n+u.length-l-2;break}c=-1;for(;++c<e.length;)"attentionSequence"===e[c][1].type&&(e[c][1].type="data");return e}};function Cc(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const wc={name:"autolink",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o};function o(t){return ll(t)?(e.consume(t),i):u(t)}function i(e){return 43===e||45===e||46===e||cl(e)?(r=1,a(e)):u(e)}function a(t){return 58===t?(e.consume(t),r=0,s):(43===t||45===t||46===t||cl(t))&&r++<32?(e.consume(t),a):(r=0,u(t))}function s(r){return 62===r?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):null===r||32===r||60===r||hl(r)?n(r):(e.consume(r),s)}function u(t){return 64===t?(e.consume(t),l):dl(t)?(e.consume(t),u):n(t)}function l(e){return cl(e)?c(e):n(e)}function c(n){return 46===n?(e.consume(n),r=0,l):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):d(n)}function d(t){if((45===t||cl(t))&&r++<63){const n=45===t?d:c;return e.consume(t),n}return n(t)}}};const Ec={name:"htmlText",tokenize:function(e,t,n){const r=this;let o,i,a;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),s};function s(t){return 33===t?(e.consume(t),u):47===t?(e.consume(t),D):63===t?(e.consume(t),y):ll(t)?(e.consume(t),E):n(t)}function u(t){return 45===t?(e.consume(t),l):91===t?(e.consume(t),i=0,f):ll(t)?(e.consume(t),v):n(t)}function l(t){return 45===t?(e.consume(t),h):n(t)}function c(t){return null===t?n(t):45===t?(e.consume(t),d):ml(t)?(a=c,T(t)):(e.consume(t),c)}function d(t){return 45===t?(e.consume(t),h):c(t)}function h(e){return 62===e?P(e):45===e?d(e):c(e)}function f(t){const r="CDATA[";return t===r.charCodeAt(i++)?(e.consume(t),6===i?p:f):n(t)}function p(t){return null===t?n(t):93===t?(e.consume(t),g):ml(t)?(a=p,T(t)):(e.consume(t),p)}function g(t){return 93===t?(e.consume(t),m):p(t)}function m(t){return 62===t?P(t):93===t?(e.consume(t),m):p(t)}function v(t){return null===t||62===t?P(t):ml(t)?(a=v,T(t)):(e.consume(t),v)}function y(t){return null===t?n(t):63===t?(e.consume(t),b):ml(t)?(a=y,T(t)):(e.consume(t),y)}function b(e){return 62===e?P(e):y(e)}function D(t){return ll(t)?(e.consume(t),C):n(t)}function C(t){return 45===t||cl(t)?(e.consume(t),C):w(t)}function w(t){return ml(t)?(a=w,T(t)):yl(t)?(e.consume(t),w):P(t)}function E(t){return 45===t||cl(t)?(e.consume(t),E):47===t||62===t||vl(t)?k(t):n(t)}function k(t){return 47===t?(e.consume(t),P):58===t||95===t||ll(t)?(e.consume(t),F):ml(t)?(a=k,T(t)):yl(t)?(e.consume(t),k):P(t)}function F(t){return 45===t||46===t||58===t||95===t||cl(t)?(e.consume(t),F):x(t)}function x(t){return 61===t?(e.consume(t),A):ml(t)?(a=x,T(t)):yl(t)?(e.consume(t),x):k(t)}function A(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),o=t,S):ml(t)?(a=A,T(t)):yl(t)?(e.consume(t),A):(e.consume(t),_)}function S(t){return t===o?(e.consume(t),o=void 0,I):null===t?n(t):ml(t)?(a=S,T(t)):(e.consume(t),S)}function _(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||vl(t)?k(t):(e.consume(t),_)}function I(e){return 47===e||62===e||vl(e)?k(e):n(e)}function P(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}function T(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),N}function N(t){return yl(t)?wl(e,R,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):R(t)}function R(t){return e.enter("htmlTextData"),a(t)}}};const kc={name:"labelStartLink",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),o};function o(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:pc.resolveAll};const Fc={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),r};function r(r){return ml(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}};const xc={name:"codeText",tokenize:function(e,t,n){let r,o,i=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),a(t)};function a(t){return 96===t?(e.consume(t),i++,a):(e.exit("codeTextSequence"),s(t))}function s(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),s):96===t?(o=e.enter("codeTextSequence"),r=0,l(t)):ml(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):(e.enter("codeTextData"),u(t))}function u(t){return null===t||32===t||96===t||ml(t)?(e.exit("codeTextData"),s(t)):(e.consume(t),u)}function l(n){return 96===n?(e.consume(n),r++,l):r===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(o.type="codeTextData",u(n))}},resolve:function(e){let t,n,r=e.length-4,o=3;if(("lineEnding"===e[o][1].type||"space"===e[o][1].type)&&("lineEnding"===e[r][1].type||"space"===e[r][1].type))for(t=o;++t<r;)if("codeTextData"===e[t][1].type){e[o][1].type="codeTextPadding",e[r][1].type="codeTextPadding",o+=2,r-=2;break}t=o-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}};const Ac={42:Hl,43:Hl,45:Hl,48:Hl,49:Hl,50:Hl,51:Hl,52:Hl,53:Hl,54:Hl,55:Hl,56:Hl,57:Hl,62:Wl},Sc={91:Ql},_c={[-2]:$l,[-1]:$l,32:$l},Ic={35:ec,42:jl,45:[tc,jl],60:oc,61:tc,95:jl,96:uc,126:uc},Pc={38:dc,92:hc},Tc={[-5]:fc,[-4]:fc,[-3]:fc,33:yc,38:dc,42:Dc,60:[wc,Ec],91:kc,92:[Fc,hc],93:pc,95:Dc,96:xc},Nc={null:[Dc,Tl]},Rc={null:[42,95]},Mc={null:[]};function Bc(t){const n=function(e){const t={};let n=-1;for(;++n<e.length;)sl(t,e[n]);return t}([e,...(t||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:o(El),document:o(kl),flow:o(Pl),string:o(Nl),text:o(Rl)};return r;function o(e){return function(t){return Ll(r,e,t)}}}const Oc=/[\0\t\n\r]/g;function zc(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535===(65535&n)||65534===(65535&n)||n>1114111?"\ufffd":String.fromCharCode(n)}const Lc=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function jc(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return zc(n.slice(t?2:1),t?16:10)}return cc(n)||e}const Hc={}.hasOwnProperty,Uc=function(e,t,n){return"string"!==typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ne),autolinkProtocol:A,autolinkEmail:A,atxHeading:s($),blockQuote:s(G),characterEscape:A,characterReference:A,codeFenced:s(Y),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:s(Y,u),codeText:s(Z,u),codeTextData:A,data:A,codeFlowValue:A,definition:s(Q),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:s(X),hardBreakEscape:s(J),hardBreakTrailing:s(J),htmlFlow:s(ee,u),htmlFlowData:A,htmlText:s(ee,u),htmlTextData:A,image:s(te),label:u,link:s(ne),listItem:s(oe),listItemValue:p,listOrdered:s(re,f),listUnordered:s(re),paragraph:s(ie),reference:H,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:s($),strong:s(ae),thematicBreak:s(ue)},exit:{atxHeading:c(),atxHeadingSequence:E,autolink:c(),autolinkEmail:K,autolinkProtocol:V,blockQuote:c(),characterEscapeValue:S,characterReferenceMarkerHexadecimal:q,characterReferenceMarkerNumeric:q,characterReferenceValue:W,codeFenced:c(y),codeFencedFence:v,codeFencedFenceInfo:g,codeFencedFenceMeta:m,codeFlowValue:S,codeIndented:c(b),codeText:c(N),codeTextData:S,data:S,definition:c(),definitionDestinationString:w,definitionLabelString:D,definitionTitleString:C,emphasis:c(),hardBreakEscape:c(I),hardBreakTrailing:c(I),htmlFlow:c(P),htmlFlowData:S,htmlText:c(T),htmlTextData:S,image:c(M),label:O,labelText:B,lineEnding:_,link:c(R),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:U,resourceDestinationString:z,resourceTitleString:L,resource:j,setextHeading:c(x),setextHeadingLineSequence:F,setextHeadingText:k,strong:c(),thematicBreak:c()}};Wc(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(e){let n={type:"root",children:[]};const r={stack:[n],tokenStack:[],config:t,enter:l,exit:d,buffer:u,resume:h,setData:i,getData:a},s=[];let c=-1;for(;++c<e.length;)if("listOrdered"===e[c][1].type||"listUnordered"===e[c][1].type)if("enter"===e[c][0])s.push(c);else{c=o(e,s.pop(),c)}for(c=-1;++c<e.length;){const n=t[e[c][0]];Hc.call(n,e[c][1].type)&&n[e[c][1].type].call(Object.assign({sliceSerialize:e[c][2].sliceSerialize},r),e[c][1])}if(r.tokenStack.length>0){const e=r.tokenStack[r.tokenStack.length-1];(e[1]||Kc).call(r,void 0,e[0])}for(n.position={start:qc(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:qc(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},c=-1;++c<t.transforms.length;)n=t.transforms[c](n)||n;return n}function o(e,t,n){let r,o,i,a,s=t-1,u=-1,l=!1;for(;++s<=n;){const t=e[s];if("listUnordered"===t[1].type||"listOrdered"===t[1].type||"blockQuote"===t[1].type?("enter"===t[0]?u++:u--,a=void 0):"lineEndingBlank"===t[1].type?"enter"===t[0]&&(!r||a||u||i||(i=s),a=void 0):"linePrefix"===t[1].type||"listItemValue"===t[1].type||"listItemMarker"===t[1].type||"listItemPrefix"===t[1].type||"listItemPrefixWhitespace"===t[1].type||(a=void 0),!u&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===u&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let a=s;for(o=void 0;a--;){const t=e[a];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;o&&(e[o][1].type="lineEndingBlank",l=!0),t[1].type="lineEnding",o=a}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}i&&(!o||i<o)&&(r._spread=!0),r.end=Object.assign({},o?e[o][1].start:t[1].end),e.splice(o||s,0,["exit",r,t[2]]),s++,n++}"listItemPrefix"===t[1].type&&(r={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0},e.splice(s,0,["enter",r,t[2]]),s++,n++,i=void 0,a=!0)}}return e[t][1]._spread=l,n}function i(e,t){n[e]=t}function a(e){return n[e]}function s(e,t){return n;function n(n){l.call(this,e(n),n),t&&t.call(this,n)}}function u(){this.stack.push({type:"fragment",children:[]})}function l(e,t,n){return this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n]),e.position={start:qc(t.start)},e}function c(e){return t;function t(t){e&&e.call(this,t),d.call(this,t)}}function d(e,t){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+Au({start:e.start,end:e.end})+"): it\u2019s not open");if(r[0].type!==e.type)if(t)t.call(this,e,r[0]);else{(r[1]||Kc).call(this,e,r[0])}return n.position.end=qc(e.end),n}function h(){return function(e,t){const n=t||tl;return nl(e,"boolean"!==typeof n.includeImageAlt||n.includeImageAlt,"boolean"!==typeof n.includeHtml||n.includeHtml)}(this.stack.pop())}function f(){i("expectingFirstListItemValue",!0)}function p(e){if(a("expectingFirstListItemValue")){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),i("expectingFirstListItemValue")}}function g(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function m(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function v(){a("flowCodeInside")||(this.buffer(),i("flowCodeInside",!0))}function y(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),i("flowCodeInside")}function b(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function D(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Zl(this.sliceSerialize(e)).toLowerCase()}function C(){const e=this.resume();this.stack[this.stack.length-1].title=e}function w(){const e=this.resume();this.stack[this.stack.length-1].url=e}function E(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function k(){i("setextHeadingSlurpLineEnding",!0)}function F(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).charCodeAt(0)?1:2}function x(){i("setextHeadingSlurpLineEnding")}function A(e){const t=this.stack[this.stack.length-1];let n=t.children[t.children.length-1];n&&"text"===n.type||(n=se(),n.position={start:qc(e.start)},t.children.push(n)),this.stack.push(n)}function S(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=qc(e.end)}function _(e){const n=this.stack[this.stack.length-1];if(a("atHardBreak")){return n.children[n.children.length-1].position.end=qc(e.end),void i("atHardBreak")}!a("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(n.type)&&(A.call(this,e),S.call(this,e))}function I(){i("atHardBreak",!0)}function P(){const e=this.resume();this.stack[this.stack.length-1].value=e}function T(){const e=this.resume();this.stack[this.stack.length-1].value=e}function N(){const e=this.resume();this.stack[this.stack.length-1].value=e}function R(){const e=this.stack[this.stack.length-1];if(a("inReference")){const t=a("referenceType")||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;i("referenceType")}function M(){const e=this.stack[this.stack.length-1];if(a("inReference")){const t=a("referenceType")||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;i("referenceType")}function B(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(Lc,jc)}(t),n.identifier=Zl(t).toLowerCase()}function O(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(i("inReference",!0),"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function z(){const e=this.resume();this.stack[this.stack.length-1].url=e}function L(){const e=this.resume();this.stack[this.stack.length-1].title=e}function j(){i("inReference")}function H(){i("referenceType","collapsed")}function U(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Zl(this.sliceSerialize(e)).toLowerCase(),i("referenceType","full")}function q(e){i("characterReferenceType",e.type)}function W(e){const t=this.sliceSerialize(e),n=a("characterReferenceType");let r;if(n)r=zc(t,"characterReferenceMarkerNumeric"===n?10:16),i("characterReferenceType");else{r=cc(t)}const o=this.stack.pop();o.value+=r,o.position.end=qc(e.end)}function V(e){S.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function K(e){S.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function G(){return{type:"blockquote",children:[]}}function Y(){return{type:"code",lang:null,meta:null,value:""}}function Z(){return{type:"inlineCode",value:""}}function Q(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function X(){return{type:"emphasis",children:[]}}function $(){return{type:"heading",depth:void 0,children:[]}}function J(){return{type:"break"}}function ee(){return{type:"html",value:""}}function te(){return{type:"image",title:null,url:"",alt:null}}function ne(){return{type:"link",title:null,url:"",children:[]}}function re(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function oe(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function ie(){return{type:"paragraph",children:[]}}function ae(){return{type:"strong",children:[]}}function se(){return{type:"text",value:""}}function ue(){return{type:"thematicBreak"}}}(n)(function(e){for(;!Al(e););return e}(Bc(n).document().write(function(){let e,t=1,n="",r=!0;return function(o,i,a){const s=[];let u,l,c,d,h;for(o=n+o.toString(i),c=0,n="",r&&(65279===o.charCodeAt(0)&&c++,r=void 0);c<o.length;){if(Oc.lastIndex=c,u=Oc.exec(o),d=u&&void 0!==u.index?u.index:o.length,h=o.charCodeAt(d),!u){n=o.slice(c);break}if(10===h&&c===d&&e)s.push(-3),e=void 0;else switch(e&&(s.push(-5),e=void 0),c<d&&(s.push(o.slice(c,d)),t+=d-c),h){case 0:s.push(65533),t++;break;case 9:for(l=4*Math.ceil(t/4),s.push(-2);t++<l;)s.push(-1);break;case 10:s.push(-4),t=1;break;default:e=!0,t=1}c=d+1}return a&&(e&&s.push(-5),n&&s.push(n),s.push(null)),s}}()(e,t,!0))))};function qc(e){return{line:e.line,column:e.column,offset:e.offset}}function Wc(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Wc(e,r):Vc(e,r)}}function Vc(e,t){let n;for(n in t)if(Hc.call(t,n))if("canContainEols"===n){const r=t[n];r&&e[n].push(...r)}else if("transforms"===n){const r=t[n];r&&e[n].push(...r)}else if("enter"===n||"exit"===n){const r=t[n];r&&Object.assign(e[n],r)}}function Kc(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Au({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Au({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Au({start:t.start,end:t.end})+") is still open")}function Gc(e){Object.assign(this,{Parser:t=>{const n=this.data("settings");return Uc(t,Object.assign({},n,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}function Yc(e){const t=[];let n=-1,r=0,o=0;for(;++n<e.length;){const i=e.charCodeAt(n);let a="";if(37===i&&cl(e.charCodeAt(n+1))&&cl(e.charCodeAt(n+2)))o=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(a=String.fromCharCode(i));else if(i>55295&&i<57344){const t=e.charCodeAt(n+1);i<56320&&t>56319&&t<57344?(a=String.fromCharCode(i,t),o=1):a="\ufffd"}else a=String.fromCharCode(i);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+o+1,a=""),o&&(n+=o,o=0)}return t.join("")+e.slice(r)}const Zc=function(e){if(void 0===e||null===e)return Xc;if("string"===typeof e)return function(e){return Qc(t);function t(t){return t&&t.type===e}}(e);if("object"===typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Zc(e[n]);return Qc(r);function r(){let e=-1;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(;++e<t.length;)if(t[e].call(this,...r))return!0;return!1}}(e):function(e){return Qc(t);function t(t){let n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"===typeof e)return Qc(e);throw new Error("Expected function, string, or object as test")};function Qc(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return Boolean(t&&"object"===typeof t&&"type"in t&&Boolean(e.call(this,t,...r)))}}function Xc(){return!0}const $c=!0,Jc=!1,ed=function(e,t,n,r){"function"===typeof t&&"function"!==typeof n&&(r=n,n=t,t=null);const o=Zc(t),i=r?-1:1;!function e(a,s,u){const l=a&&"object"===typeof a?a:{};if("string"===typeof l.type){const e="string"===typeof l.tagName?l.tagName:"string"===typeof l.name?l.name:void 0;Object.defineProperty(c,"name",{value:"node ("+a.type+(e?"<"+e+">":"")+")"})}return c;function c(){let l,c,d,h=[];if((!t||o(a,s,u[u.length-1]||null))&&(h=function(e){if(Array.isArray(e))return e;if("number"===typeof e)return[$c,e];return[e]}(n(a,u)),h[0]===Jc))return h;if(a.children&&"skip"!==h[0])for(c=(r?a.children.length:-1)+i,d=u.concat(a);c>-1&&c<a.children.length;){if(l=e(a.children[c],c,d)(),l[0]===Jc)return l;c="number"===typeof l[1]?l[1]:c+i}return h}}(e,void 0,[])()};const td=function(e,t,n,r){"function"===typeof t&&"function"!==typeof n&&(r=n,n=t,t=null),ed(e,t,(function(e,t){const r=t[t.length-1];return n(e,r?r.children.indexOf(e):null,r)}),r)},nd=od("start"),rd=od("end");function od(e){return function(t){const n=t&&t.position&&t.position[e]||{};return{line:n.line||null,column:n.column||null,offset:n.offset>-1?n.offset:null}}}const id={}.hasOwnProperty;function ad(e){return String(e||"").toUpperCase()}function sd(e,t){const n=String(t.identifier).toUpperCase(),r=Yc(n.toLowerCase()),o=e.footnoteOrder.indexOf(n);let i;-1===o?(e.footnoteOrder.push(n),e.footnoteCounts[n]=1,i=e.footnoteOrder.length):(e.footnoteCounts[n]++,i=o+1);const a=e.footnoteCounts[n],s={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fn-"+r,id:e.clobberPrefix+"fnref-"+r+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};e.patch(t,s);const u={type:"element",tagName:"sup",properties:{},children:[s]};return e.patch(t,u),e.applyData(t,u)}function ud(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return{type:"text",value:"!["+t.alt+r};const o=e.all(t),i=o[0];i&&"text"===i.type?i.value="["+i.value:o.unshift({type:"text",value:"["});const a=o[o.length-1];return a&&"text"===a.type?a.value+=r:o.push({type:"text",value:r}),o}function ld(e){const t=e.spread;return void 0===t||null===t?e.children.length>1:t}function cd(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),o=0;const i=[];for(;r;)i.push(dd(t.slice(o,r.index),o>0,!0),r[0]),o=r.index+r[0].length,r=n.exec(t);return i.push(dd(t.slice(o),o>0,!1)),i.join("")}function dd(e,t,n){let r=0,o=e.length;if(t){let t=e.codePointAt(r);for(;9===t||32===t;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(o-1);for(;9===t||32===t;)o--,t=e.codePointAt(o-1)}return o>r?e.slice(r,o):""}const hd={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",r=t.lang?t.lang.match(/^[^ \t]+(?=[ \t]|$)/):null,o={};r&&(o.className=["language-"+r]);let i={type:"element",tagName:"code",properties:o,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:sd,footnote:function(e,t){const n=e.footnoteById;let r=1;for(;r in n;)r++;const o=String(r);return n[o]={type:"footnoteDefinition",identifier:o,children:[{type:"paragraph",children:t.children}],position:t.position},sd(e,{type:"footnoteReference",identifier:o,position:t.position})},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.dangerous){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}return null},imageReference:function(e,t){const n=e.definition(t.identifier);if(!n)return ud(e,t);const r={src:Yc(n.url||""),alt:t.alt};null!==n.title&&void 0!==n.title&&(r.title=n.title);const o={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,o),e.applyData(t,o)},image:function(e,t){const n={src:Yc(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)},linkReference:function(e,t){const n=e.definition(t.identifier);if(!n)return ud(e,t);const r={href:Yc(n.url||"")};null!==n.title&&void 0!==n.title&&(r.title=n.title);const o={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)},link:function(e,t){const n={href:Yc(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},listItem:function(e,t,n){const r=e.all(t),o=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=ld(n[r])}return t}(n):ld(t),i={},a=[];if("boolean"===typeof t.checked){const e=r[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},r.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let s=-1;for(;++s<r.length;){const e=r[s];(o||0!==s||"element"!==e.type||"p"!==e.tagName)&&a.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||o?a.push(e):a.push(...e.children)}const u=r[r.length-1];u&&(o||"element"!==u.type||"p"!==u.tagName)&&a.push({type:"text",value:"\n"});const l={type:"element",tagName:"li",properties:i,children:a};return e.patch(t,l),e.applyData(t,l)},list:function(e,t){const n={},r=e.all(t);let o=-1;for("number"===typeof t.start&&1!==t.start&&(n.start=t.start);++o<r.length;){const e=r[o];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),r=n.shift(),o=[];if(r){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],n),o.push(n)}if(n.length>0){const r={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},i=nd(t.children[1]),a=rd(t.children[t.children.length-1]);i.line&&a.line&&(r.position={start:i,end:a}),o.push(r)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(o,!0)};return e.patch(t,i),e.applyData(t,i)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const r=n?n.children:void 0,o=0===(r?r.indexOf(t):1)?"th":"td",i=n&&"table"===n.type?n.align:void 0,a=i?i.length:t.children.length;let s=-1;const u=[];for(;++s<a;){const n=t.children[s],r={},a=i?i[s]:void 0;a&&(r.align=a);let l={type:"element",tagName:o,properties:r,children:[]};n&&(l.children=e.all(n),e.patch(n,l),l=e.applyData(t,l)),u.push(l)}const l={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,l),e.applyData(t,l)},text:function(e,t){const n={type:"text",value:cd(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:fd,yaml:fd,definition:fd,footnoteDefinition:fd};function fd(){return null}const pd={}.hasOwnProperty;function gd(e,t){const n=t||{},r=n.allowDangerousHtml||!1,o={};return a.dangerous=r,a.clobberPrefix=void 0===n.clobberPrefix||null===n.clobberPrefix?"user-content-":n.clobberPrefix,a.footnoteLabel=n.footnoteLabel||"Footnotes",a.footnoteLabelTagName=n.footnoteLabelTagName||"h2",a.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},a.footnoteBackLabel=n.footnoteBackLabel||"Back to content",a.unknownHandler=n.unknownHandler,a.passThrough=n.passThrough,a.handlers=l(l({},hd),n.handlers),a.definition=function(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return td(e,"definition",(e=>{const n=ad(e.identifier);n&&!id.call(t,n)&&(t[n]=e)})),function(e){const n=ad(e);return n&&id.call(t,n)?t[n]:null}}(e),a.footnoteById=o,a.footnoteOrder=[],a.footnoteCounts={},a.patch=md,a.applyData=vd,a.one=function(e,t){return yd(a,e,t)},a.all=function(e){return bd(a,e)},a.wrap=Dd,a.augment=i,td(e,"footnoteDefinition",(e=>{const t=String(e.identifier).toUpperCase();pd.call(o,t)||(o[t]=e)})),a;function i(e,t){if(e&&"data"in e&&e.data){const n=e.data;n.hName&&("element"!==t.type&&(t={type:"element",tagName:"",properties:{},children:[]}),t.tagName=n.hName),"element"===t.type&&n.hProperties&&(t.properties=l(l({},t.properties),n.hProperties)),"children"in t&&t.children&&n.hChildren&&(t.children=n.hChildren)}if(e){const n="type"in e?e:{position:e};(function(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column})(n)||(t.position={start:nd(n),end:rd(n)})}return t}function a(e,t,n,r){return Array.isArray(n)&&(r=n,n={}),i(e,{type:"element",tagName:t,properties:n||{},children:r||[]})}}function md(e,t){e.position&&(t.position=function(e){return{start:nd(e),end:rd(e)}}(e))}function vd(e,t){let n=t;if(e&&e.data){const t=e.data.hName,r=e.data.hChildren,o=e.data.hProperties;"string"===typeof t&&("element"===n.type?n.tagName=t:n={type:"element",tagName:t,properties:{},children:[]}),"element"===n.type&&o&&(n.properties=l(l({},n.properties),o)),"children"in n&&n.children&&null!==r&&void 0!==r&&(n.children=r)}return n}function yd(e,t,n){const r=t&&t.type;if(!r)throw new Error("Expected node, got `"+t+"`");return pd.call(e.handlers,r)?e.handlers[r](e,t,n):e.passThrough&&e.passThrough.includes(r)?"children"in t?l(l({},t),{},{children:bd(e,t)}):t:e.unknownHandler?e.unknownHandler(e,t,n):function(e,t){const n=t.data||{},r=!("value"in t)||pd.call(n,"hProperties")||pd.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:bd(e,t)}:{type:"text",value:t.value};return e.patch(t,r),e.applyData(t,r)}(e,t)}function bd(e,t){const n=[];if("children"in t){const r=t.children;let o=-1;for(;++o<r.length;){const i=yd(e,r[o],t);if(i){if(o&&"break"===r[o-1].type&&(Array.isArray(i)||"text"!==i.type||(i.value=i.value.replace(/^\s+/,"")),!Array.isArray(i)&&"element"===i.type)){const e=i.children[0];e&&"text"===e.type&&(e.value=e.value.replace(/^\s+/,""))}Array.isArray(i)?n.push(...i):n.push(i)}}}return n}function Dd(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function Cd(e,t){const n=gd(e,t),r=n.one(e,null),o=function(e){const t=[];let n=-1;for(;++n<e.footnoteOrder.length;){const r=e.footnoteById[e.footnoteOrder[n]];if(!r)continue;const o=e.all(r),i=String(r.identifier).toUpperCase(),a=Yc(i.toLowerCase());let s=0;const u=[];for(;++s<=e.footnoteCounts[i];){const t={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+a+(s>1?"-"+s:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:"\u21a9"}]};s>1&&t.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(s)}]}),u.length>0&&u.push({type:"text",value:" "}),u.push(t)}const l=o[o.length-1];if(l&&"element"===l.type&&"p"===l.tagName){const e=l.children[l.children.length-1];e&&"text"===e.type?e.value+=" ":l.children.push({type:"text",value:" "}),l.children.push(...u)}else o.push(...u);const c={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+a},children:e.wrap(o,!0)};e.patch(r,c),t.push(c)}if(0!==t.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:l(l({},JSON.parse(JSON.stringify(e.footnoteLabelProperties))),{},{id:"footnote-label"}),children:[{type:"text",value:e.footnoteLabel}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(t,!0)},{type:"text",value:"\n"}]}}(n);return o&&r.children.push({type:"text",value:"\n"},o),Array.isArray(r)?{type:"root",children:r}:r}const wd=function(e,t){return e&&"run"in e?function(e,t){return(n,r,o)=>{e.run(Cd(n,t),r,(e=>{o(e)}))}}(e,t):function(e){return t=>Cd(t,e)}(e||t)};var Ed=n(5173);class kd{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}function Fd(e,t){const n={},r={};let o=-1;for(;++o<e.length;)Object.assign(n,e[o].property),Object.assign(r,e[o].normal);return new kd(n,r,t)}function xd(e){return e.toLowerCase()}kd.prototype.property={},kd.prototype.normal={},kd.prototype.space=null;class Ad{constructor(e,t){this.property=e,this.attribute=t}}Ad.prototype.space=null,Ad.prototype.boolean=!1,Ad.prototype.booleanish=!1,Ad.prototype.overloadedBoolean=!1,Ad.prototype.number=!1,Ad.prototype.commaSeparated=!1,Ad.prototype.spaceSeparated=!1,Ad.prototype.commaOrSpaceSeparated=!1,Ad.prototype.mustUseProperty=!1,Ad.prototype.defined=!1;let Sd=0;const _d=Bd(),Id=Bd(),Pd=Bd(),Td=Bd(),Nd=Bd(),Rd=Bd(),Md=Bd();function Bd(){return 2**++Sd}const Od=Object.keys(t);class zd extends Ad{constructor(e,n,r,o){let i=-1;if(super(e,n),Ld(this,"space",o),"number"===typeof r)for(;++i<Od.length;){const e=Od[i];Ld(this,Od[i],(r&t[e])===t[e])}}}function Ld(e,t,n){n&&(e[t]=n)}zd.prototype.defined=!0;const jd={}.hasOwnProperty;function Hd(e){const t={},n={};let r;for(r in e.properties)if(jd.call(e.properties,r)){const o=e.properties[r],i=new zd(r,e.transform(e.attributes||{},r),o,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),t[r]=i,n[xd(r)]=r,n[xd(i.attribute)]=r}return new kd(t,n,e.space)}const Ud=Hd({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),qd=Hd({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Wd(e,t){return t in e?e[t]:t}function Vd(e,t){return Wd(e,t.toLowerCase())}const Kd=Hd({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Vd,properties:{xmlns:null,xmlnsXLink:null}}),Gd=Hd({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:Id,ariaAutoComplete:null,ariaBusy:Id,ariaChecked:Id,ariaColCount:Td,ariaColIndex:Td,ariaColSpan:Td,ariaControls:Nd,ariaCurrent:null,ariaDescribedBy:Nd,ariaDetails:null,ariaDisabled:Id,ariaDropEffect:Nd,ariaErrorMessage:null,ariaExpanded:Id,ariaFlowTo:Nd,ariaGrabbed:Id,ariaHasPopup:null,ariaHidden:Id,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Nd,ariaLevel:Td,ariaLive:null,ariaModal:Id,ariaMultiLine:Id,ariaMultiSelectable:Id,ariaOrientation:null,ariaOwns:Nd,ariaPlaceholder:null,ariaPosInSet:Td,ariaPressed:Id,ariaReadOnly:Id,ariaRelevant:null,ariaRequired:Id,ariaRoleDescription:Nd,ariaRowCount:Td,ariaRowIndex:Td,ariaRowSpan:Td,ariaSelected:Id,ariaSetSize:Td,ariaSort:null,ariaValueMax:Td,ariaValueMin:Td,ariaValueNow:Td,ariaValueText:null,role:null}}),Yd=Hd({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Vd,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Rd,acceptCharset:Nd,accessKey:Nd,action:null,allow:null,allowFullScreen:_d,allowPaymentRequest:_d,allowUserMedia:_d,alt:null,as:null,async:_d,autoCapitalize:null,autoComplete:Nd,autoFocus:_d,autoPlay:_d,blocking:Nd,capture:null,charSet:null,checked:_d,cite:null,className:Nd,cols:Td,colSpan:null,content:null,contentEditable:Id,controls:_d,controlsList:Nd,coords:Td|Rd,crossOrigin:null,data:null,dateTime:null,decoding:null,default:_d,defer:_d,dir:null,dirName:null,disabled:_d,download:Pd,draggable:Id,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:_d,formTarget:null,headers:Nd,height:Td,hidden:_d,high:Td,href:null,hrefLang:null,htmlFor:Nd,httpEquiv:Nd,id:null,imageSizes:null,imageSrcSet:null,inert:_d,inputMode:null,integrity:null,is:null,isMap:_d,itemId:null,itemProp:Nd,itemRef:Nd,itemScope:_d,itemType:Nd,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:_d,low:Td,manifest:null,max:null,maxLength:Td,media:null,method:null,min:null,minLength:Td,multiple:_d,muted:_d,name:null,nonce:null,noModule:_d,noValidate:_d,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:_d,optimum:Td,pattern:null,ping:Nd,placeholder:null,playsInline:_d,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:_d,referrerPolicy:null,rel:Nd,required:_d,reversed:_d,rows:Td,rowSpan:Td,sandbox:Nd,scope:null,scoped:_d,seamless:_d,selected:_d,shadowRootClonable:_d,shadowRootDelegatesFocus:_d,shadowRootMode:null,shape:null,size:Td,sizes:null,slot:null,span:Td,spellCheck:Id,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Td,step:null,style:null,tabIndex:Td,target:null,title:null,translate:null,type:null,typeMustMatch:_d,useMap:null,value:Id,width:Td,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Nd,axis:null,background:null,bgColor:null,border:Td,borderColor:null,bottomMargin:Td,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:_d,declare:_d,event:null,face:null,frame:null,frameBorder:null,hSpace:Td,leftMargin:Td,link:null,longDesc:null,lowSrc:null,marginHeight:Td,marginWidth:Td,noResize:_d,noHref:_d,noShade:_d,noWrap:_d,object:null,profile:null,prompt:null,rev:null,rightMargin:Td,rules:null,scheme:null,scrolling:Id,standby:null,summary:null,text:null,topMargin:Td,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Td,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:_d,disableRemotePlayback:_d,prefix:null,property:null,results:Td,security:null,unselectable:null}}),Zd=Hd({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Wd,properties:{about:Md,accentHeight:Td,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Td,amplitude:Td,arabicForm:null,ascent:Td,attributeName:null,attributeType:null,azimuth:Td,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Td,by:null,calcMode:null,capHeight:Td,className:Nd,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Td,diffuseConstant:Td,direction:null,display:null,dur:null,divisor:Td,dominantBaseline:null,download:_d,dx:null,dy:null,edgeMode:null,editable:null,elevation:Td,enableBackground:null,end:null,event:null,exponent:Td,externalResourcesRequired:null,fill:null,fillOpacity:Td,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Rd,g2:Rd,glyphName:Rd,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Td,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Td,horizOriginX:Td,horizOriginY:Td,id:null,ideographic:Td,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Td,k:Td,k1:Td,k2:Td,k3:Td,k4:Td,kernelMatrix:Md,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Td,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Td,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Td,overlineThickness:Td,paintOrder:null,panose1:null,path:null,pathLength:Td,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Nd,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Td,pointsAtY:Td,pointsAtZ:Td,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Md,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Md,rev:Md,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Md,requiredFeatures:Md,requiredFonts:Md,requiredFormats:Md,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Td,specularExponent:Td,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Td,strikethroughThickness:Td,string:null,stroke:null,strokeDashArray:Md,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Td,strokeOpacity:Td,strokeWidth:null,style:null,surfaceScale:Td,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Md,tabIndex:Td,tableValues:null,target:null,targetX:Td,targetY:Td,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Md,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Td,underlineThickness:Td,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Td,values:null,vAlphabetic:Td,vMathematical:Td,vectorEffect:null,vHanging:Td,vIdeographic:Td,version:null,vertAdvY:Td,vertOriginX:Td,vertOriginY:Td,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Td,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Qd=Fd([qd,Ud,Kd,Gd,Yd],"html"),Xd=Fd([qd,Ud,Kd,Gd,Zd],"svg");function $d(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{td(t,"element",((t,n,r)=>{const o=r;let i;if(e.allowedElements?i=!e.allowedElements.includes(t.tagName):e.disallowedElements&&(i=e.disallowedElements.includes(t.tagName)),!i&&e.allowElement&&"number"===typeof n&&(i=!e.allowElement(t,n,o)),i&&"number"===typeof n)return e.unwrapDisallowed&&t.children?o.children.splice(n,1,...t.children):o.children.splice(n,1),n}))}}var Jd=n(4589);function eh(e){const t=e&&"object"===typeof e&&"text"===e.type?e.value||"":e;return"string"===typeof t&&""===t.replace(/[ \t\n\f\r]/g,"")}const th=/^data[-\w.:]+$/i,nh=/-[a-z]/g,rh=/[A-Z]/g;function oh(e){return"-"+e.toLowerCase()}function ih(e){return e.charAt(1).toUpperCase()}const ah={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};const sh=n(351),uh=["http","https","mailto","tel"];function lh(e){const t=(e||"").trim(),n=t.charAt(0);if("#"===n||"/"===n)return t;const r=t.indexOf(":");if(-1===r)return t;let o=-1;for(;++o<uh.length;){const e=uh[o];if(r===e.length&&t.slice(0,e.length).toLowerCase()===e)return t}return o=t.indexOf("?"),-1!==o&&r>o?t:(o=t.indexOf("#"),-1!==o&&r>o?t:"javascript:void(0)")}const ch={}.hasOwnProperty,dh=new Set(["table","thead","tbody","tfoot","tr"]);function hh(e,t){const n=[];let r,o=-1;for(;++o<t.children.length;)r=t.children[o],"element"===r.type?n.push(fh(e,r,o,t)):"text"===r.type?"element"===t.type&&dh.has(t.tagName)&&eh(r)||n.push(r.value):"raw"!==r.type||e.options.skipHtml||n.push(r.value);return n}function fh(e,t,n,o){const i=e.options,a=void 0===i.transformLinkUri?lh:i.transformLinkUri,s=e.schema,u=t.tagName,l={};let c,d=s;if("html"===s.space&&"svg"===u&&(d=Xd,e.schema=d),t.properties)for(c in t.properties)ch.call(t.properties,c)&&gh(l,c,t.properties[c],e);"ol"!==u&&"ul"!==u||e.listDepth++;const h=hh(e,t);"ol"!==u&&"ul"!==u||e.listDepth--,e.schema=s;const f=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},p=i.components&&ch.call(i.components,u)?i.components[u]:u,g="string"===typeof p||p===r.Fragment;if(!Jd.isValidElementType(p))throw new TypeError("Component for name `".concat(u,"` not defined or is not renderable"));if(l.key=n,"a"===u&&i.linkTarget&&(l.target="function"===typeof i.linkTarget?i.linkTarget(String(l.href||""),t.children,"string"===typeof l.title?l.title:null):i.linkTarget),"a"===u&&a&&(l.href=a(String(l.href||""),t.children,"string"===typeof l.title?l.title:null)),g||"code"!==u||"element"!==o.type||"pre"===o.tagName||(l.inline=!0),g||"h1"!==u&&"h2"!==u&&"h3"!==u&&"h4"!==u&&"h5"!==u&&"h6"!==u||(l.level=Number.parseInt(u.charAt(1),10)),"img"===u&&i.transformImageUri&&(l.src=i.transformImageUri(String(l.src||""),String(l.alt||""),"string"===typeof l.title?l.title:null)),!g&&"li"===u&&"element"===o.type){const e=function(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if("element"===n.type&&"input"===n.tagName)return n}return null}(t);l.checked=e&&e.properties?Boolean(e.properties.checked):null,l.index=ph(o,t),l.ordered="ol"===o.tagName}var m;return g||"ol"!==u&&"ul"!==u||(l.ordered="ol"===u,l.depth=e.listDepth),"td"!==u&&"th"!==u||(l.align&&(l.style||(l.style={}),l.style.textAlign=l.align,delete l.align),g||(l.isHeader="th"===u)),g||"tr"!==u||"element"!==o.type||(l.isHeader=Boolean("thead"===o.tagName)),i.sourcePos&&(l["data-sourcepos"]=[(m=f).start.line,":",m.start.column,"-",m.end.line,":",m.end.column].map(String).join("")),!g&&i.rawSourcePos&&(l.sourcePosition=t.position),!g&&i.includeElementIndex&&(l.index=ph(o,t),l.siblingCount=ph(o)),g||(l.node=t),h.length>0?r.createElement(p,l,h):r.createElement(p,l)}function ph(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)"element"===e.children[n].type&&r++;return r}function gh(e,t,n,r){const o=function(e,t){const n=xd(t);let r=t,o=Ad;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&th.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(nh,ih);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!nh.test(e)){let n=e.replace(rh,oh);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}o=zd}return new o(r,t)}(r.schema,t);let i=n;null!==i&&void 0!==i&&i===i&&(Array.isArray(i)&&(i=o.commaSeparated?function(e,t){const n=t||{};return(""===e[e.length-1]?[...e,""]:e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}(i):i.join(" ").trim()),"style"===o.property&&"string"===typeof i&&(i=function(e){const t={};try{sh(e,n)}catch(r){}return t;function n(e,n){const r="-ms-"===e.slice(0,4)?"ms-".concat(e.slice(4)):e;t[r.replace(/-([a-z])/g,mh)]=n}}(i)),o.space&&o.property?e[ch.call(ah,o.property)?ah[o.property]:o.property]=i:o.attribute&&(e[o.attribute]=i))}function mh(e,t){return t.toUpperCase()}const vh={}.hasOwnProperty,yh={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function bh(e){for(const r in yh)if(vh.call(yh,r)&&vh.call(e,r)){const e=yh[r];console.warn("[react-markdown] Warning: please ".concat(e.to?"use `".concat(e.to,"` instead of"):"remove"," `").concat(r,"` (see <").concat("https://github.com/remarkjs/react-markdown/blob/main/changelog.md","#").concat(e.id,"> for more info)")),delete yh[r]}const t=Ku().use(Gc).use(e.remarkPlugins||[]).use(wd,l(l({},e.remarkRehypeOptions),{},{allowDangerousHtml:!0})).use(e.rehypePlugins||[]).use($d,e),n=new zu;"string"===typeof e.children?n.value=e.children:void 0!==e.children&&null!==e.children&&console.warn("[react-markdown] Warning: please pass a string as `children` (not: `".concat(e.children,"`)"));const o=t.runSync(t.parse(n),n);if("root"!==o.type)throw new TypeError("Expected a `root` node");let i=r.createElement(r.Fragment,{},hh({options:e,schema:Qd,listDepth:0},o));return e.className&&(i=r.createElement("div",{className:e.className},i)),i}function Dh(e,t){const n=String(e);if("string"!==typeof t)throw new TypeError("Expected character");let r=0,o=n.indexOf(t);for(;-1!==o;)r++,o=n.indexOf(t,o+t.length);return r}bh.propTypes={children:Ed.string,className:Ed.string,allowElement:Ed.func,allowedElements:Ed.arrayOf(Ed.string),disallowedElements:Ed.arrayOf(Ed.string),unwrapDisallowed:Ed.bool,remarkPlugins:Ed.arrayOf(Ed.oneOfType([Ed.object,Ed.func,Ed.arrayOf(Ed.oneOfType([Ed.bool,Ed.string,Ed.object,Ed.func,Ed.arrayOf(Ed.any)]))])),rehypePlugins:Ed.arrayOf(Ed.oneOfType([Ed.object,Ed.func,Ed.arrayOf(Ed.oneOfType([Ed.bool,Ed.string,Ed.object,Ed.func,Ed.arrayOf(Ed.any)]))])),sourcePos:Ed.bool,rawSourcePos:Ed.bool,skipHtml:Ed.bool,includeElementIndex:Ed.bool,transformLinkUri:Ed.oneOfType([Ed.func,Ed.bool]),linkTarget:Ed.oneOfType([Ed.func,Ed.string]),transformImageUri:Ed.func,components:Ed.object};Eh(/[A-Za-z]/),Eh(/[\dA-Za-z]/),Eh(/[#-'*+\--9=?A-Z^-~]/);Eh(/\d/),Eh(/[\dA-Fa-f]/),Eh(/[!-/:-@[-`{-~]/);const Ch=Eh(/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDD00-\uDEB3\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF])/),wh=Eh(/\s/);function Eh(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}const kh=function(e){if(null===e||void 0===e)return xh;if("function"===typeof e)return Fh(e);if("object"===typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=kh(e[n]);return Fh(r);function r(){let e=-1;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(;++e<t.length;)if(t[e].apply(this,r))return!0;return!1}}(e):function(e){const t=e;return Fh(n);function n(n){const r=n;let o;for(o in e)if(r[o]!==t[o])return!1;return!0}}(e);if("string"===typeof e)return function(e){return Fh(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function Fh(e){return function(t,n,r){return Boolean(Ah(t)&&e.call(this,t,"number"===typeof n?n:void 0,r||void 0))}}function xh(){return!0}function Ah(e){return null!==e&&"object"===typeof e&&"type"in e}const Sh=[],_h=!0,Ih=!1;function Ph(e,t,n,r){let o;"function"===typeof t&&"function"!==typeof n?(r=n,n=t):o=t;const i=kh(o),a=r?-1:1;!function e(o,s,u){const l=o&&"object"===typeof o?o:{};if("string"===typeof l.type){const e="string"===typeof l.tagName?l.tagName:"string"===typeof l.name?l.name:void 0;Object.defineProperty(c,"name",{value:"node ("+o.type+(e?"<"+e+">":"")+")"})}return c;function c(){let l,c,d,h=Sh;if((!t||i(o,s,u[u.length-1]||void 0))&&(h=function(e){if(Array.isArray(e))return e;if("number"===typeof e)return[_h,e];return null===e||void 0===e?Sh:[e]}(n(o,u)),h[0]===Ih))return h;if("children"in o&&o.children){const t=o;if(t.children&&"skip"!==h[0])for(c=(r?t.children.length:-1)+a,d=u.concat(t);c>-1&&c<t.children.length;){const n=t.children[c];if(l=e(n,c,d)(),l[0]===Ih)return l;c="number"===typeof l[1]?l[1]:c+a}}return h}}(e,void 0,[])()}function Th(e,t,n){const r=kh((n||{}).ignore||[]),o=function(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const e=n[r];t.push([Nh(e[0]),Rh(e[1])])}return t}(t);let i=-1;for(;++i<o.length;)Ph(e,"text",a);function a(e,t){let n,a=-1;for(;++a<t.length;){const e=t[a],o=n?n.children:void 0;if(r(e,o?o.indexOf(e):void 0,n))return;n=e}if(n)return function(e,t){const n=t[t.length-1],r=o[i][0],a=o[i][1];let s=0;const u=n.children.indexOf(e);let l=!1,c=[];r.lastIndex=0;let d=r.exec(e.value);for(;d;){const n=d.index,o={index:d.index,input:d.input,stack:[...t,e]};let i=a(...d,o);if("string"===typeof i&&(i=i.length>0?{type:"text",value:i}:void 0),!1===i?r.lastIndex=n+1:(s!==n&&c.push({type:"text",value:e.value.slice(s,n)}),Array.isArray(i)?c.push(...i):i&&c.push(i),s=n+d[0].length,l=!0),!r.global)break;d=r.exec(e.value)}l?(s<e.value.length&&c.push({type:"text",value:e.value.slice(s)}),n.children.splice(u,1,...c)):c=[e];return u+c.length}(e,t)}}function Nh(e){return"string"===typeof e?new RegExp(function(e){if("string"!==typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(e),"g"):e}function Rh(e){return"function"===typeof e?e:function(){return e}}const Mh="phrasing",Bh=["autolink","link","image","label"];function Oh(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function zh(e){this.config.enter.autolinkProtocol.call(this,e)}function Lh(e){this.config.exit.autolinkProtocol.call(this,e)}function jh(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function Hh(e){this.config.exit.autolinkEmail.call(this,e)}function Uh(e){this.exit(e)}function qh(e){Th(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Wh],[/(?<=^|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]|(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDD00-\uDEB3\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF]))([\+\x2D\.0-9A-Z_a-z]+)@([\x2D0-9A-Z_a-z]+(?:\.[\x2D0-9A-Z_a-z]+)+)/g,Vh]],{ignore:["link","linkReference"]})}function Wh(e,t,n,r,o){let i="";if(!Kh(o))return!1;if(/^w/i.test(t)&&(n=t+n,t="",i="http://"),!function(e){const t=e.split(".");if(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))return!1;return!0}(n))return!1;const a=function(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const o=Dh(e,"(");let i=Dh(e,")");for(;-1!==r&&o>i;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),i++;return[e,n]}(n+r);if(!a[0])return!1;const s={type:"link",title:null,url:i+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[s,{type:"text",value:a[1]}]:s}function Vh(e,t,n,r){return!(!Kh(r,!0)||/[-\d_]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function Kh(e,t){const n=e.input.charCodeAt(e.index-1);return(0===e.index||wh(n)||Ch(n))&&(!t||47!==n)}function Gh(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}function Yh(){this.buffer()}function Zh(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function Qh(){this.buffer()}function Xh(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function $h(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Gh(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Jh(e){this.exit(e)}function ef(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Gh(this.sliceSerialize(e)).toLowerCase(),n.label=t}function tf(e){this.exit(e)}function nf(e,t,n,r){const o=n.createTracker(r);let i=o.move("[^");const a=n.enter("footnoteReference"),s=n.enter("reference");return i+=o.move(n.safe(n.associationId(e),{after:"]",before:i})),s(),a(),i+=o.move("]"),i}function rf(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:function(e,n,r,o){const i=r.createTracker(o);let a=i.move("[^");const s=r.enter("footnoteDefinition"),u=r.enter("label");a+=i.move(r.safe(r.associationId(e),{before:a,after:"]"})),u(),a+=i.move("]:"),e.children&&e.children.length>0&&(i.shift(4),a+=i.move((t?"\n":" ")+r.indentLines(r.containerFlow(e,i.current()),t?af:of)));return s(),a},footnoteReference:nf},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]}}function of(e,t,n){return 0===t?e:af(e,t,n)}function af(e,t,n){return(n?"":"    ")+e}nf.peek=function(){return"["};const sf=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];function uf(e){this.enter({type:"delete",children:[]},e)}function lf(e){this.exit(e)}function cf(e,t,n,r){const o=n.createTracker(r),i=n.enter("strikethrough");let a=o.move("~~");return a+=n.containerPhrasing(e,l(l({},o.current()),{},{before:a,after:"~"})),a+=o.move("~~"),i(),a}function df(e){return e.length}function hf(e){const t="string"===typeof e?e.codePointAt(0):0;return 67===t||99===t?99:76===t||108===t?108:82===t||114===t?114:0}function ff(e,t,n){return">"+(n?"":" ")+e}function pf(e,t,n){if("string"===typeof t&&(t=[t]),!t||0===t.length)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function gf(e,t,n,r){let o=-1;for(;++o<n.unsafe.length;)if("\n"===n.unsafe[o].character&&(i=n.stack,a=n.unsafe[o],pf(i,a.inConstruct,!0)&&!pf(i,a.notInConstruct,!1)))return/[ \t]/.test(r.before)?"":" ";var i,a;return"\\\n"}function mf(e,t,n){return(n?"":"    ")+e}function vf(e){const t=e.options.quote||'"';if('"'!==t&&"'"!==t)throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function yf(e){return"&#x"+e.toString(16).toUpperCase()+";"}cf.peek=function(){return"~"};Cf(/[A-Za-z]/),Cf(/[\dA-Za-z]/),Cf(/[#-'*+\--9=?A-Z^-~]/);Cf(/\d/),Cf(/[\dA-Fa-f]/),Cf(/[!-/:-@[-`{-~]/);const bf=Cf(/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDD00-\uDEB3\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF])/),Df=Cf(/\s/);function Cf(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function wf(e){return null===e||function(e){return null!==e&&(e<0||32===e)}(e)||Df(e)?1:bf(e)?2:void 0}function Ef(e,t,n){const r=wf(e),o=wf(t);return void 0===r?void 0===o?"_"===n?{inside:!0,outside:!0}:{inside:!1,outside:!1}:1===o?{inside:!0,outside:!0}:{inside:!1,outside:!0}:1===r?void 0===o?{inside:!1,outside:!1}:1===o?{inside:!0,outside:!0}:{inside:!1,outside:!1}:void 0===o?{inside:!1,outside:!1}:1===o?{inside:!0,outside:!1}:{inside:!1,outside:!1}}function kf(e,t,n,r){const o=function(e){const t=e.options.emphasis||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}(n),i=n.enter("emphasis"),a=n.createTracker(r),s=a.move(o);let u=a.move(n.containerPhrasing(e,l({after:o,before:s},a.current())));const c=u.charCodeAt(0),d=Ef(r.before.charCodeAt(r.before.length-1),c,o);d.inside&&(u=yf(c)+u.slice(1));const h=u.charCodeAt(u.length-1),f=Ef(r.after.charCodeAt(0),h,o);f.inside&&(u=u.slice(0,-1)+yf(h));const p=a.move(o);return i(),n.attentionEncodeSurroundingInfo={after:f.outside,before:d.outside},s+u+p}kf.peek=function(e,t,n){return n.options.emphasis||"*"};const Ff=function(e){if(null===e||void 0===e)return Af;if("function"===typeof e)return xf(e);if("object"===typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Ff(e[n]);return xf(r);function r(){let e=-1;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(;++e<t.length;)if(t[e].apply(this,r))return!0;return!1}}(e):function(e){const t=e;return xf(n);function n(n){const r=n;let o;for(o in e)if(r[o]!==t[o])return!1;return!0}}(e);if("string"===typeof e)return function(e){return xf(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function xf(e){return function(t,n,r){return Boolean(Sf(t)&&e.call(this,t,"number"===typeof n?n:void 0,r||void 0))}}function Af(){return!0}function Sf(e){return null!==e&&"object"===typeof e&&"type"in e}const _f=[],If=!0,Pf=!1;function Tf(e,t,n,r){let o;"function"===typeof t&&"function"!==typeof n?(r=n,n=t):o=t;const i=Ff(o),a=r?-1:1;!function e(o,s,u){const l=o&&"object"===typeof o?o:{};if("string"===typeof l.type){const e="string"===typeof l.tagName?l.tagName:"string"===typeof l.name?l.name:void 0;Object.defineProperty(c,"name",{value:"node ("+o.type+(e?"<"+e+">":"")+")"})}return c;function c(){let l,c,d,h=_f;if((!t||i(o,s,u[u.length-1]||void 0))&&(h=function(e){if(Array.isArray(e))return e;if("number"===typeof e)return[If,e];return null===e||void 0===e?_f:[e]}(n(o,u)),h[0]===Pf))return h;if("children"in o&&o.children){const t=o;if(t.children&&"skip"!==h[0])for(c=(r?t.children.length:-1)+a,d=u.concat(t);c>-1&&c<t.children.length;){const n=t.children[c];if(l=e(n,c,d)(),l[0]===Pf)return l;c="number"===typeof l[1]?l[1]:c+a}}return h}}(e,void 0,[])()}const Nf={};function Rf(e,t){const n=t||Nf;return Mf(e,"boolean"!==typeof n.includeImageAlt||n.includeImageAlt,"boolean"!==typeof n.includeHtml||n.includeHtml)}function Mf(e,t,n){if(function(e){return Boolean(e&&"object"===typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Bf(e.children,t,n)}return Array.isArray(e)?Bf(e,t,n):""}function Bf(e,t,n){const r=[];let o=-1;for(;++o<e.length;)r[o]=Mf(e[o],t,n);return r.join("")}function Of(e,t){let n=!1;return function(e,t,n,r){let o,i,a;"function"===typeof t&&"function"!==typeof n?(i=void 0,a=t,o=n):(i=t,a=n,o=r),Tf(e,i,(function(e,t){const n=t[t.length-1],r=n?n.children.indexOf(e):void 0;return a(e,r,n)}),o)}(e,(function(e){if("value"in e&&/\r?\n|\r/.test(e.value)||"break"===e.type)return n=!0,Pf})),Boolean((!e.depth||e.depth<3)&&Rf(e)&&(t.options.setext||n))}function zf(e){return e.value||""}function Lf(e,t,n,r){const o=vf(n),i='"'===o?"Quote":"Apostrophe",a=n.enter("image");let s=n.enter("label");const u=n.createTracker(r);let c=u.move("![");return c+=u.move(n.safe(e.alt,l({before:c,after:"]"},u.current()))),c+=u.move("]("),s(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(s=n.enter("destinationLiteral"),c+=u.move("<"),c+=u.move(n.safe(e.url,l({before:c,after:">"},u.current()))),c+=u.move(">")):(s=n.enter("destinationRaw"),c+=u.move(n.safe(e.url,l({before:c,after:e.title?" ":")"},u.current())))),s(),e.title&&(s=n.enter("title".concat(i)),c+=u.move(" "+o),c+=u.move(n.safe(e.title,l({before:c,after:o},u.current()))),c+=u.move(o),s()),c+=u.move(")"),a(),c}function jf(e,t,n,r){const o=e.referenceType,i=n.enter("imageReference");let a=n.enter("label");const s=n.createTracker(r);let u=s.move("![");const c=n.safe(e.alt,l({before:u,after:"]"},s.current()));u+=s.move(c+"]["),a();const d=n.stack;n.stack=[],a=n.enter("reference");const h=n.safe(n.associationId(e),l({before:u,after:"]"},s.current()));return a(),n.stack=d,i(),"full"!==o&&c&&c===h?"shortcut"===o?u=u.slice(0,-1):u+=s.move("]"):u+=s.move(h+"]"),u}function Hf(e,t,n){let r=e.value||"",o="`",i=-1;for(;new RegExp("(^|[^`])"+o+"([^`]|$)").test(r);)o+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++i<n.unsafe.length;){const e=n.unsafe[i],t=n.compilePattern(e);let o;if(e.atBreak)for(;o=t.exec(r);){let e=o.index;10===r.charCodeAt(e)&&13===r.charCodeAt(e-1)&&e--,r=r.slice(0,e)+" "+r.slice(o.index+1)}}return o+r+o}function Uf(e,t){const n=Rf(e);return Boolean(!t.options.resourceLink&&e.url&&!e.title&&e.children&&1===e.children.length&&"text"===e.children[0].type&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}function qf(e,t,n,r){const o=vf(n),i='"'===o?"Quote":"Apostrophe",a=n.createTracker(r);let s,u;if(Uf(e,n)){const t=n.stack;n.stack=[],s=n.enter("autolink");let r=a.move("<");return r+=a.move(n.containerPhrasing(e,l({before:r,after:">"},a.current()))),r+=a.move(">"),s(),n.stack=t,r}s=n.enter("link"),u=n.enter("label");let c=a.move("[");return c+=a.move(n.containerPhrasing(e,l({before:c,after:"]("},a.current()))),c+=a.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),c+=a.move("<"),c+=a.move(n.safe(e.url,l({before:c,after:">"},a.current()))),c+=a.move(">")):(u=n.enter("destinationRaw"),c+=a.move(n.safe(e.url,l({before:c,after:e.title?" ":")"},a.current())))),u(),e.title&&(u=n.enter("title".concat(i)),c+=a.move(" "+o),c+=a.move(n.safe(e.title,l({before:c,after:o},a.current()))),c+=a.move(o),u()),c+=a.move(")"),s(),c}function Wf(e,t,n,r){const o=e.referenceType,i=n.enter("linkReference");let a=n.enter("label");const s=n.createTracker(r);let u=s.move("[");const c=n.containerPhrasing(e,l({before:u,after:"]"},s.current()));u+=s.move(c+"]["),a();const d=n.stack;n.stack=[],a=n.enter("reference");const h=n.safe(n.associationId(e),l({before:u,after:"]"},s.current()));return a(),n.stack=d,i(),"full"!==o&&c&&c===h?"shortcut"===o?u=u.slice(0,-1):u+=s.move("]"):u+=s.move(h+"]"),u}function Vf(e){const t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Kf(e){const t=e.options.rule||"*";if("*"!==t&&"-"!==t&&"_"!==t)throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}zf.peek=function(){return"<"},Lf.peek=function(){return"!"},jf.peek=function(){return"!"},Hf.peek=function(){return"`"},qf.peek=function(e,t,n){return Uf(e,n)?"<":"["},Wf.peek=function(){return"["};const Gf=function(e){if(null===e||void 0===e)return Zf;if("function"===typeof e)return Yf(e);if("object"===typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Gf(e[n]);return Yf(r);function r(){let e=-1;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(;++e<t.length;)if(t[e].apply(this,r))return!0;return!1}}(e):function(e){const t=e;return Yf(n);function n(n){const r=n;let o;for(o in e)if(r[o]!==t[o])return!1;return!0}}(e);if("string"===typeof e)return function(e){return Yf(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function Yf(e){return function(t,n,r){return Boolean(Qf(t)&&e.call(this,t,"number"===typeof n?n:void 0,r||void 0))}}function Zf(){return!0}function Qf(e){return null!==e&&"object"===typeof e&&"type"in e}const Xf=Gf(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function $f(e,t,n,r){const o=function(e){const t=e.options.strong||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}(n),i=n.enter("strong"),a=n.createTracker(r),s=a.move(o+o);let u=a.move(n.containerPhrasing(e,l({after:o,before:s},a.current())));const c=u.charCodeAt(0),d=Ef(r.before.charCodeAt(r.before.length-1),c,o);d.inside&&(u=yf(c)+u.slice(1));const h=u.charCodeAt(u.length-1),f=Ef(r.after.charCodeAt(0),h,o);f.inside&&(u=u.slice(0,-1)+yf(h));const p=a.move(o+o);return i(),n.attentionEncodeSurroundingInfo={after:f.outside,before:d.outside},s+u+p}$f.peek=function(e,t,n){return n.options.strong||"*"};const Jf={blockquote:function(e,t,n,r){const o=n.enter("blockquote"),i=n.createTracker(r);i.move("> "),i.shift(2);const a=n.indentLines(n.containerFlow(e,i.current()),ff);return o(),a},break:gf,code:function(e,t,n,r){const o=function(e){const t=e.options.fence||"`";if("`"!==t&&"~"!==t)throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}(n),i=e.value||"",a="`"===o?"GraveAccent":"Tilde";if(function(e,t){return Boolean(!1===t.options.fences&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}(e,n)){const e=n.enter("codeIndented"),t=n.indentLines(i,mf);return e(),t}const s=n.createTracker(r),u=o.repeat(Math.max(function(e,t){const n=String(e);let r=n.indexOf(t),o=r,i=0,a=0;if("string"!==typeof t)throw new TypeError("Expected substring");for(;-1!==r;)r===o?++i>a&&(a=i):i=1,o=r+t.length,r=n.indexOf(t,o);return a}(i,o)+1,3)),c=n.enter("codeFenced");let d=s.move(u);if(e.lang){const t=n.enter("codeFencedLang".concat(a));d+=s.move(n.safe(e.lang,l({before:d,after:" ",encode:["`"]},s.current()))),t()}if(e.lang&&e.meta){const t=n.enter("codeFencedMeta".concat(a));d+=s.move(" "),d+=s.move(n.safe(e.meta,l({before:d,after:"\n",encode:["`"]},s.current()))),t()}return d+=s.move("\n"),i&&(d+=s.move(i+"\n")),d+=s.move(u),c(),d},definition:function(e,t,n,r){const o=vf(n),i='"'===o?"Quote":"Apostrophe",a=n.enter("definition");let s=n.enter("label");const u=n.createTracker(r);let c=u.move("[");return c+=u.move(n.safe(n.associationId(e),l({before:c,after:"]"},u.current()))),c+=u.move("]: "),s(),!e.url||/[\0- \u007F]/.test(e.url)?(s=n.enter("destinationLiteral"),c+=u.move("<"),c+=u.move(n.safe(e.url,l({before:c,after:">"},u.current()))),c+=u.move(">")):(s=n.enter("destinationRaw"),c+=u.move(n.safe(e.url,l({before:c,after:e.title?" ":"\n"},u.current())))),s(),e.title&&(s=n.enter("title".concat(i)),c+=u.move(" "+o),c+=u.move(n.safe(e.title,l({before:c,after:o},u.current()))),c+=u.move(o),s()),a(),c},emphasis:kf,hardBreak:gf,heading:function(e,t,n,r){const o=Math.max(Math.min(6,e.depth||1),1),i=n.createTracker(r);if(Of(e,n)){const t=n.enter("headingSetext"),r=n.enter("phrasing"),a=n.containerPhrasing(e,l(l({},i.current()),{},{before:"\n",after:"\n"}));return r(),t(),a+"\n"+(1===o?"=":"-").repeat(a.length-(Math.max(a.lastIndexOf("\r"),a.lastIndexOf("\n"))+1))}const a="#".repeat(o),s=n.enter("headingAtx"),u=n.enter("phrasing");i.move(a+" ");let c=n.containerPhrasing(e,l({before:"# ",after:"\n"},i.current()));return/^[\t ]/.test(c)&&(c=yf(c.charCodeAt(0))+c.slice(1)),c=c?a+" "+c:a,n.options.closeAtx&&(c+=" "+a),u(),s(),c},html:zf,image:Lf,imageReference:jf,inlineCode:Hf,link:qf,linkReference:Wf,list:function(e,t,n,r){const o=n.enter("list"),i=n.bulletCurrent;let a=e.ordered?function(e){const t=e.options.bulletOrdered||".";if("."!==t&&")"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}(n):Vf(n);const s=e.ordered?"."===a?")":".":function(e){const t=Vf(e),n=e.options.bulletOther;if(!n)return"*"===t?"-":"*";if("*"!==n&&"+"!==n&&"-"!==n)throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}(n);let u=!(!t||!n.bulletLastUsed)&&a===n.bulletLastUsed;if(!e.ordered){const t=e.children?e.children[0]:void 0;if("*"!==a&&"-"!==a||!t||t.children&&t.children[0]||"list"!==n.stack[n.stack.length-1]||"listItem"!==n.stack[n.stack.length-2]||"list"!==n.stack[n.stack.length-3]||"listItem"!==n.stack[n.stack.length-4]||0!==n.indexStack[n.indexStack.length-1]||0!==n.indexStack[n.indexStack.length-2]||0!==n.indexStack[n.indexStack.length-3]||(u=!0),Kf(n)===a&&t){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n&&"listItem"===n.type&&n.children&&n.children[0]&&"thematicBreak"===n.children[0].type){u=!0;break}}}}u&&(a=s),n.bulletCurrent=a;const l=n.containerFlow(e,r);return n.bulletLastUsed=a,n.bulletCurrent=i,o(),l},listItem:function(e,t,n,r){const o=function(e){const t=e.options.listItemIndent||"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}(n);let i=n.bulletCurrent||Vf(n);t&&"list"===t.type&&t.ordered&&(i=("number"===typeof t.start&&t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+i);let a=i.length+1;("tab"===o||"mixed"===o&&(t&&"list"===t.type&&t.spread||e.spread))&&(a=4*Math.ceil(a/4));const s=n.createTracker(r);s.move(i+" ".repeat(a-i.length)),s.shift(a);const u=n.enter("listItem"),l=n.indentLines(n.containerFlow(e,s.current()),(function(e,t,n){if(t)return(n?"":" ".repeat(a))+e;return(n?i:i+" ".repeat(a-i.length))+e}));return u(),l},paragraph:function(e,t,n,r){const o=n.enter("paragraph"),i=n.enter("phrasing"),a=n.containerPhrasing(e,r);return i(),o(),a},root:function(e,t,n,r){return(e.children.some((function(e){return Xf(e)}))?n.containerPhrasing:n.containerFlow).call(n,e,r)},strong:$f,text:function(e,t,n,r){return n.safe(e.value,r)},thematicBreak:function(e,t,n){const r=(Kf(n)+(n.options.ruleSpaces?" ":"")).repeat(function(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}(n));return n.options.ruleSpaces?r.slice(0,-1):r}};function ep(e){const t=e._align;this.enter({type:"table",align:t.map((function(e){return"none"===e?null:e})),children:[]},e),this.data.inTable=!0}function tp(e){this.exit(e),this.data.inTable=void 0}function np(e){this.enter({type:"tableRow",children:[]},e)}function rp(e){this.exit(e)}function op(e){this.enter({type:"tableCell",children:[]},e)}function ip(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,ap));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function ap(e,t){return"|"===t?t:e}function sp(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,o=t.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:function(e,t,n){let r=Jf.inlineCode(e,t,n);n.stack.includes("tableCell")&&(r=r.replace(/\|/g,"\\$&"));return r},table:function(e,t,n,r){return s(function(e,t,n){const r=e.children;let o=-1;const i=[],a=t.enter("table");for(;++o<r.length;)i[o]=u(r[o],t,n);return a(),i}(e,n,r),e.align)},tableCell:a,tableRow:function(e,t,n,r){const o=u(e,n,r),i=s([o]);return i.slice(0,i.indexOf("\n"))}}};function a(e,t,n,r){const o=n.enter("tableCell"),a=n.enter("phrasing"),s=n.containerPhrasing(e,l(l({},r),{},{before:i,after:i}));return a(),o(),s}function s(e,t){return function(e,t){const n=t||{},r=(n.align||[]).concat(),o=n.stringLength||df,i=[],a=[],s=[],u=[];let l=0,c=-1;for(;++c<e.length;){const t=[],r=[];let i=-1;for(e[c].length>l&&(l=e[c].length);++i<e[c].length;){const a=null===(d=e[c][i])||void 0===d?"":String(d);if(!1!==n.alignDelimiters){const e=o(a);r[i]=e,(void 0===u[i]||e>u[i])&&(u[i]=e)}t.push(a)}a[c]=t,s[c]=r}var d;let h=-1;if("object"===typeof r&&"length"in r)for(;++h<l;)i[h]=hf(r[h]);else{const e=hf(r);for(;++h<l;)i[h]=e}h=-1;const f=[],p=[];for(;++h<l;){const e=i[h];let t="",r="";99===e?(t=":",r=":"):108===e?t=":":114===e&&(r=":");let o=!1===n.alignDelimiters?1:Math.max(1,u[h]-t.length-r.length);const a=t+"-".repeat(o)+r;!1!==n.alignDelimiters&&(o=t.length+o+r.length,o>u[h]&&(u[h]=o),p[h]=o),f[h]=a}a.splice(1,0,f),s.splice(1,0,p),c=-1;const g=[];for(;++c<a.length;){const e=a[c],t=s[c];h=-1;const r=[];for(;++h<l;){const o=e[h]||"";let a="",s="";if(!1!==n.alignDelimiters){const e=u[h]-(t[h]||0),n=i[h];114===n?a=" ".repeat(e):99===n?e%2?(a=" ".repeat(e/2+.5),s=" ".repeat(e/2-.5)):(a=" ".repeat(e/2),s=a):s=" ".repeat(e)}!1===n.delimiterStart||h||r.push("|"),!1===n.padding||!1===n.alignDelimiters&&""===o||!1===n.delimiterStart&&!h||r.push(" "),!1!==n.alignDelimiters&&r.push(a),r.push(o),!1!==n.alignDelimiters&&r.push(s),!1!==n.padding&&r.push(" "),!1===n.delimiterEnd&&h===l-1||r.push("|")}g.push(!1===n.delimiterEnd?r.join("").replace(/ +$/,""):r.join(""))}return g.join("\n")}(e,{align:t,alignDelimiters:r,padding:n,stringLength:o})}function u(e,t,n){const r=e.children;let o=-1;const i=[],s=t.enter("tableRow");for(;++o<r.length;)i[o]=a(r[o],0,t,n);return s(),i}}function up(e){const t=this.stack[this.stack.length-2];t.type,t.checked="taskListCheckValueChecked"===e.type}function lp(e){const t=this.stack[this.stack.length-2];if(t&&"listItem"===t.type&&"boolean"===typeof t.checked){const e=this.stack[this.stack.length-1];e.type;const n=e.children[0];if(n&&"text"===n.type){const r=t.children;let o,i=-1;for(;++i<r.length;){const e=r[i];if("paragraph"===e.type){o=e;break}}o===e&&(n.value=n.value.slice(1),0===n.value.length?e.children.shift():e.position&&n.position&&"number"===typeof n.position.start.offset&&(n.position.start.column++,n.position.start.offset++,e.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function cp(e,t,n,r){const o=e.children[0],i="boolean"===typeof e.checked&&o&&"paragraph"===o.type,a="["+(e.checked?"x":" ")+"] ",s=n.createTracker(r);i&&s.move(a);let u=Jf.listItem(e,t,n,l(l({},r),s.current()));return i&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,(function(e){return e+a}))),u}function dp(e,t,n,r){const o=e.length;let i,a=0;if(t=t<0?-t>o?0:o+t:t>o?o:t,n=n>0?n:0,r.length<1e4)i=Array.from(r),i.unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);a<r.length;)i=r.slice(a,a+1e4),i.unshift(t,0),e.splice(...i),a+=1e4,t+=1e4}const hp={}.hasOwnProperty;function fp(e,t){let n;for(n in t){const r=(hp.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let i;if(o)for(i in o){hp.call(r,i)||(r[i]=[]);const e=o[i];pp(r[i],Array.isArray(e)?e:e?[e]:[])}}}function pp(e,t){let n=-1;const r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);dp(e,0,0,r)}const gp=Dp(/[A-Za-z]/),mp=Dp(/[\dA-Za-z]/);Dp(/[#-'*+\--9=?A-Z^-~]/);Dp(/\d/),Dp(/[\dA-Fa-f]/),Dp(/[!-/:-@[-`{-~]/);function vp(e){return null!==e&&(e<0||32===e)}const yp=Dp(/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDD00-\uDEB3\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF])/),bp=Dp(/\s/);function Dp(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}const Cp={tokenize:function(e,t,n){let r=0;return function t(i){if((87===i||119===i)&&r<3)return r++,e.consume(i),t;if(46===i&&3===r)return e.consume(i),o;return n(i)};function o(e){return null===e?n(e):t(e)}},partial:!0},wp={tokenize:function(e,t,n){let r,o,i;return a;function a(t){return 46===t||95===t?e.check(kp,u,s)(t):null===t||vp(t)||bp(t)||45!==t&&yp(t)?u(t):(i=!0,e.consume(t),a)}function s(t){return 95===t?r=!0:(o=r,r=void 0),e.consume(t),a}function u(e){return o||r||!i?n(e):t(e)}},partial:!0},Ep={tokenize:function(e,t){let n=0,r=0;return o;function o(a){return 40===a?(n++,e.consume(a),o):41===a&&r<n?i(a):33===a||34===a||38===a||39===a||41===a||42===a||44===a||46===a||58===a||59===a||60===a||63===a||93===a||95===a||126===a?e.check(kp,t,i)(a):null===a||vp(a)||bp(a)?t(a):(e.consume(a),o)}function i(t){return 41===t&&r++,e.consume(t),o}},partial:!0},kp={tokenize:function(e,t,n){return r;function r(a){return 33===a||34===a||39===a||41===a||42===a||44===a||46===a||58===a||59===a||63===a||95===a||126===a?(e.consume(a),r):38===a?(e.consume(a),i):93===a?(e.consume(a),o):60===a||null===a||vp(a)||bp(a)?t(a):n(a)}function o(e){return null===e||40===e||91===e||vp(e)||bp(e)?t(e):r(e)}function i(e){return gp(e)?a(e):n(e)}function a(t){return 59===t?(e.consume(t),r):gp(t)?(e.consume(t),a):n(t)}},partial:!0},Fp={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(e){return mp(e)?n(e):t(e)}},partial:!0},xp={name:"wwwAutolink",tokenize:function(e,t,n){const r=this;return function(t){if(87!==t&&119!==t||!Pp.call(r,r.previous)||Mp(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Cp,e.attempt(wp,e.attempt(Ep,o),n),n)(t)};function o(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:Pp},Ap={name:"protocolAutolink",tokenize:function(e,t,n){const r=this;let o="",i=!1;return function(t){if((72===t||104===t)&&Tp.call(r,r.previous)&&!Mp(r.events))return e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),o+=String.fromCodePoint(t),e.consume(t),a;return n(t)};function a(t){if(gp(t)&&o.length<5)return o+=String.fromCodePoint(t),e.consume(t),a;if(58===t){const n=o.toLowerCase();if("http"===n||"https"===n)return e.consume(t),s}return n(t)}function s(t){return 47===t?(e.consume(t),i?u:(i=!0,s)):n(t)}function u(t){return null===t||function(e){return null!==e&&(e<32||127===e)}(t)||vp(t)||bp(t)||yp(t)?n(t):e.attempt(wp,e.attempt(Ep,l),n)(t)}function l(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}},previous:Tp},Sp={name:"emailAutolink",tokenize:function(e,t,n){const r=this;let o,i;return function(t){if(!Rp(t)||!Np.call(r,r.previous)||Mp(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(t)};function a(t){return Rp(t)?(e.consume(t),a):64===t?(e.consume(t),s):n(t)}function s(t){return 46===t?e.check(Fp,l,u)(t):45===t||95===t||mp(t)?(i=!0,e.consume(t),s):l(t)}function u(t){return e.consume(t),o=!0,s}function l(a){return i&&o&&gp(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(a)):n(a)}},previous:Np},_p={};let Ip=48;for(;Ip<123;)_p[Ip]=Sp,Ip++,58===Ip?Ip=65:91===Ip&&(Ip=97);function Pp(e){return null===e||40===e||42===e||95===e||91===e||93===e||126===e||vp(e)}function Tp(e){return!gp(e)}function Np(e){return!(47===e||Rp(e))}function Rp(e){return 43===e||45===e||46===e||95===e||mp(e)}function Mp(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if(("labelLink"===r.type||"labelImage"===r.type)&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}_p[43]=Sp,_p[45]=Sp,_p[46]=Sp,_p[95]=Sp,_p[72]=[Sp,Ap],_p[104]=[Sp,Ap],_p[87]=[Sp,xp],_p[119]=[Sp,xp];zp(/[A-Za-z]/),zp(/[\dA-Za-z]/),zp(/[#-'*+\--9=?A-Z^-~]/);zp(/\d/),zp(/[\dA-Fa-f]/),zp(/[!-/:-@[-`{-~]/);function Bp(e){return null!==e&&(e<0||32===e)}function Op(e){return-2===e||-1===e||32===e}zp(/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDD00-\uDEB3\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF])/),zp(/\s/);function zp(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function Lp(e,t,n,r){const o=r?r-1:Number.POSITIVE_INFINITY;let i=0;return function(r){if(Op(r))return e.enter(n),a(r);return t(r)};function a(r){return Op(r)&&i++<o?(e.consume(r),a):(e.exit(n),t(r))}}const jp={partial:!0,tokenize:function(e,t,n){return function(t){return Op(t)?Lp(e,r,"linePrefix")(t):r(t)};function r(e){return null===e||function(e){return null!==e&&e<-2}(e)?t(e):n(e)}}};function Hp(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Up={tokenize:function(e,t,n){const r=this;return Lp(e,(function(e){const o=r.events[r.events.length-1];return o&&"gfmFootnoteDefinitionIndent"===o[1].type&&4===o[2].sliceSerialize(o[1],!0).length?t(e):n(e)}),"gfmFootnoteDefinitionIndent",5)},partial:!0};function qp(e,t,n){const r=this;let o=r.events.length;const i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;o--;){const e=r.events[o][1];if("labelImage"===e.type){a=e;break}if("gfmFootnoteCall"===e.type||"labelLink"===e.type||"label"===e.type||"image"===e.type||"link"===e.type)break}return function(o){if(!a||!a._balanced)return n(o);const s=Hp(r.sliceSerialize({start:a.end,end:r.now()}));if(94!==s.codePointAt(0)||!i.includes(s.slice(1)))return n(o);return e.enter("gfmFootnoteCallLabelMarker"),e.consume(o),e.exit("gfmFootnoteCallLabelMarker"),t(o)}}function Wp(e,t){let n,r=e.length;for(;r--;)if("labelImage"===e[r][1].type&&"enter"===e[r][0]){n=e[r][1];break}e[r+1][1].type="data",e[r+3][1].type="gfmFootnoteCallLabelMarker";const o={type:"gfmFootnoteCall",start:Object.assign({},e[r+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[r+3][1].end),end:Object.assign({},e[r+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},u=[e[r+1],e[r+2],["enter",o,t],e[r+3],e[r+4],["enter",i,t],["exit",i,t],["enter",a,t],["enter",s,t],["exit",s,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",o,t]];return e.splice(r,e.length-r+1,...u),e}function Vp(e,t,n){const r=this,o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,a=0;return function(t){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(t),e.exit("gfmFootnoteCallLabelMarker"),s};function s(t){return 94!==t?n(t):(e.enter("gfmFootnoteCallMarker"),e.consume(t),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(s){if(a>999||93===s&&!i||null===s||91===s||Bp(s))return n(s);if(93===s){e.exit("chunkString");const i=e.exit("gfmFootnoteCallString");return o.includes(Hp(r.sliceSerialize(i)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(s),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(s)}return Bp(s)||(i=!0),a++,e.consume(s),92===s?l:u}function l(t){return 91===t||92===t||93===t?(e.consume(t),a++,u):u(t)}}function Kp(e,t,n){const r=this,o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,a,s=0;return function(t){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),u};function u(t){return 94===t?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",l):n(t)}function l(t){if(s>999||93===t&&!a||null===t||91===t||Bp(t))return n(t);if(93===t){e.exit("chunkString");const n=e.exit("gfmFootnoteDefinitionLabelString");return i=Hp(r.sliceSerialize(n)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),d}return Bp(t)||(a=!0),s++,e.consume(t),92===t?c:l}function c(t){return 91===t||92===t||93===t?(e.consume(t),s++,l):l(t)}function d(t){return 58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),o.includes(i)||o.push(i),Lp(e,h,"gfmFootnoteDefinitionWhitespace")):n(t)}function h(e){return t(e)}}function Gp(e,t,n){return e.check(jp,t,e.attempt(Up,t,n))}function Yp(e){e.exit("gfmFootnoteDefinition")}function Zp(e,t,n,r){const o=e.length;let i,a=0;if(t=t<0?-t>o?0:o+t:t>o?o:t,n=n>0?n:0,r.length<1e4)i=Array.from(r),i.unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);a<r.length;)i=r.slice(a,a+1e4),i.unshift(t,0),e.splice(...i),a+=1e4,t+=1e4}$p(/[A-Za-z]/),$p(/[\dA-Za-z]/),$p(/[#-'*+\--9=?A-Z^-~]/);$p(/\d/),$p(/[\dA-Fa-f]/),$p(/[!-/:-@[-`{-~]/);const Qp=$p(/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDD00-\uDEB3\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF])/),Xp=$p(/\s/);function $p(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function Jp(e){return null===e||function(e){return null!==e&&(e<0||32===e)}(e)||Xp(e)?1:Qp(e)?2:void 0}function eg(e,t,n){const r=[];let o=-1;for(;++o<e.length;){const i=e[o].resolveAll;i&&!r.includes(i)&&(t=i(t,n),r.push(i))}return t}function tg(e){let t=(e||{}).singleTilde;const n={name:"strikethrough",tokenize:function(e,n,r){const o=this.previous,i=this.events;let a=0;return function(t){if(126===o&&"characterEscape"!==i[i.length-1][1].type)return r(t);return e.enter("strikethroughSequenceTemporary"),s(t)};function s(i){const u=Jp(o);if(126===i)return a>1?r(i):(e.consume(i),a++,s);if(a<2&&!t)return r(i);const l=e.exit("strikethroughSequenceTemporary"),c=Jp(i);return l._open=!c||2===c&&Boolean(u),l._close=!u||2===u&&Boolean(c),n(i)}},resolveAll:function(e,t){let n=-1;for(;++n<e.length;)if("enter"===e[n][0]&&"strikethroughSequenceTemporary"===e[n][1].type&&e[n][1]._close){let r=n;for(;r--;)if("exit"===e[r][0]&&"strikethroughSequenceTemporary"===e[r][1].type&&e[r][1]._open&&e[n][1].end.offset-e[n][1].start.offset===e[r][1].end.offset-e[r][1].start.offset){e[n][1].type="strikethroughSequence",e[r][1].type="strikethroughSequence";const o={type:"strikethrough",start:Object.assign({},e[r][1].start),end:Object.assign({},e[n][1].end)},i={type:"strikethroughText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},a=[["enter",o,t],["enter",e[r][1],t],["exit",e[r][1],t],["enter",i,t]],s=t.parser.constructs.insideSpan.null;s&&Zp(a,a.length,0,eg(s,e.slice(r+1,n),t)),Zp(a,a.length,0,[["exit",i,t],["enter",e[n][1],t],["exit",e[n][1],t],["exit",o,t]]),Zp(e,r-1,n-r+3,a),n=r+a.length-2;break}}n=-1;for(;++n<e.length;)"strikethroughSequenceTemporary"===e[n][1].type&&(e[n][1].type="data");return e}};return null!==t&&void 0!==t||(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}}}ig(/[A-Za-z]/),ig(/[\dA-Za-z]/),ig(/[#-'*+\--9=?A-Z^-~]/);ig(/\d/),ig(/[\dA-Fa-f]/),ig(/[!-/:-@[-`{-~]/);function ng(e){return null!==e&&e<-2}function rg(e){return null!==e&&(e<0||32===e)}function og(e){return-2===e||-1===e||32===e}ig(/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDD00-\uDEB3\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF])/),ig(/\s/);function ig(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function ag(e,t,n,r){const o=r?r-1:Number.POSITIVE_INFINITY;let i=0;return function(r){if(og(r))return e.enter(n),a(r);return t(r)};function a(r){return og(r)&&i++<o?(e.consume(r),a):(e.exit(n),t(r))}}class sg{constructor(){this.map=[]}add(e,t,n){!function(e,t,n,r){let o=0;if(0===n&&0===r.length)return;for(;o<e.map.length;){if(e.map[o][0]===t)return e.map[o][1]+=n,void e.map[o][2].push(...r);o+=1}e.map.push([t,n,r])}(this,e,t,n)}consume(e){if(this.map.sort((function(e,t){return e[0]-t[0]})),0===this.map.length)return;let t=this.map.length;const n=[];for(;t>0;)t-=1,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push(e.slice()),e.length=0;let r=n.pop();for(;r;){for(const t of r)e.push(t);r=n.pop()}this.map.length=0}}function ug(e,t){let n=!1;const r=[];for(;t<e.length;){const o=e[t];if(n){if("enter"===o[0])"tableContent"===o[1].type&&r.push("tableDelimiterMarker"===e[t+1][1].type?"left":"none");else if("tableContent"===o[1].type){if("tableDelimiterMarker"===e[t-1][1].type){const e=r.length-1;r[e]="left"===r[e]?"center":"right"}}else if("tableDelimiterRow"===o[1].type)break}else"enter"===o[0]&&"tableDelimiterRow"===o[1].type&&(n=!0);t+=1}return r}function lg(e,t,n){const r=this;let o,i=0,a=0;return function(e){let t=r.events.length-1;for(;t>-1;){const e=r.events[t][1].type;if("lineEnding"!==e&&"linePrefix"!==e)break;t--}const o=t>-1?r.events[t][1].type:null,i="tableHead"===o||"tableRow"===o?D:s;if(i===D&&r.parser.lazy[r.now().line])return n(e);return i(e)};function s(t){return e.enter("tableHead"),e.enter("tableRow"),function(e){if(124===e)return u(e);return o=!0,a+=1,u(e)}(t)}function u(t){return null===t?n(t):ng(t)?a>1?(a=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),d):n(t):og(t)?ag(e,u,"whitespace")(t):(a+=1,o&&(o=!1,i+=1),124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),o=!0,u):(e.enter("data"),l(t)))}function l(t){return null===t||124===t||rg(t)?(e.exit("data"),u(t)):(e.consume(t),92===t?c:l)}function c(t){return 92===t||124===t?(e.consume(t),l):l(t)}function d(t){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(t):(e.enter("tableDelimiterRow"),o=!1,og(t)?ag(e,h,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):h(t))}function h(t){return 45===t||58===t?p(t):124===t?(o=!0,e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),f):b(t)}function f(t){return og(t)?ag(e,p,"whitespace")(t):p(t)}function p(t){return 58===t?(a+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),g):45===t?(a+=1,g(t)):null===t||ng(t)?y(t):b(t)}function g(t){return 45===t?(e.enter("tableDelimiterFiller"),m(t)):b(t)}function m(t){return 45===t?(e.consume(t),m):58===t?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),v):(e.exit("tableDelimiterFiller"),v(t))}function v(t){return og(t)?ag(e,y,"whitespace")(t):y(t)}function y(n){return 124===n?h(n):(null===n||ng(n))&&o&&i===a?(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(n)):b(n)}function b(e){return n(e)}function D(t){return e.enter("tableRow"),C(t)}function C(n){return 124===n?(e.enter("tableCellDivider"),e.consume(n),e.exit("tableCellDivider"),C):null===n||ng(n)?(e.exit("tableRow"),t(n)):og(n)?ag(e,C,"whitespace")(n):(e.enter("data"),w(n))}function w(t){return null===t||124===t||rg(t)?(e.exit("data"),C(t)):(e.consume(t),92===t?E:w)}function E(t){return 92===t||124===t?(e.consume(t),w):w(t)}}function cg(e,t){let n,r,o,i=-1,a=!0,s=0,u=[0,0,0,0],l=[0,0,0,0],c=!1,d=0;const h=new sg;for(;++i<e.length;){const f=e[i],p=f[1];"enter"===f[0]?"tableHead"===p.type?(c=!1,0!==d&&(hg(h,t,d,n,r),r=void 0,d=0),n={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},h.add(i,0,[["enter",n,t]])):"tableRow"===p.type||"tableDelimiterRow"===p.type?(a=!0,o=void 0,u=[0,0,0,0],l=[0,i+1,0,0],c&&(c=!1,r={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},h.add(i,0,[["enter",r,t]])),s="tableDelimiterRow"===p.type?2:r?3:1):!s||"data"!==p.type&&"tableDelimiterMarker"!==p.type&&"tableDelimiterFiller"!==p.type?"tableCellDivider"===p.type&&(a?a=!1:(0!==u[1]&&(l[0]=l[1],o=dg(h,t,u,s,void 0,o)),u=l,l=[u[1],i,0,0])):(a=!1,0===l[2]&&(0!==u[1]&&(l[0]=l[1],o=dg(h,t,u,s,void 0,o),u=[0,0,0,0]),l[2]=i)):"tableHead"===p.type?(c=!0,d=i):"tableRow"===p.type||"tableDelimiterRow"===p.type?(d=i,0!==u[1]?(l[0]=l[1],o=dg(h,t,u,s,i,o)):0!==l[1]&&(o=dg(h,t,l,s,i,o)),s=0):!s||"data"!==p.type&&"tableDelimiterMarker"!==p.type&&"tableDelimiterFiller"!==p.type||(l[3]=i)}for(0!==d&&hg(h,t,d,n,r),h.consume(t.events),i=-1;++i<t.events.length;){const e=t.events[i];"enter"===e[0]&&"table"===e[1].type&&(e[1]._align=ug(t.events,i))}return e}function dg(e,t,n,r,o,i){const a=1===r?"tableHeader":2===r?"tableDelimiter":"tableData";0!==n[0]&&(i.end=Object.assign({},fg(t.events,n[0])),e.add(n[0],0,[["exit",i,t]]));const s=fg(t.events,n[1]);if(i={type:a,start:Object.assign({},s),end:Object.assign({},s)},e.add(n[1],0,[["enter",i,t]]),0!==n[2]){const o=fg(t.events,n[2]),i=fg(t.events,n[3]),a={type:"tableContent",start:Object.assign({},o),end:Object.assign({},i)};if(e.add(n[2],0,[["enter",a,t]]),2!==r){const r=t.events[n[2]],o=t.events[n[3]];if(r[1].end=Object.assign({},o[1].end),r[1].type="chunkText",r[1].contentType="text",n[3]>n[2]+1){const t=n[2]+1,r=n[3]-n[2]-1;e.add(t,r,[])}}e.add(n[3]+1,0,[["exit",a,t]])}return void 0!==o&&(i.end=Object.assign({},fg(t.events,o)),e.add(o,0,[["exit",i,t]]),i=void 0),i}function hg(e,t,n,r,o){const i=[],a=fg(t.events,n);o&&(o.end=Object.assign({},a),i.push(["exit",o,t])),r.end=Object.assign({},a),i.push(["exit",r,t]),e.add(n+1,0,i)}function fg(e,t){const n=e[t],r="enter"===n[0]?"start":"end";return n[1][r]}gg(/[A-Za-z]/),gg(/[\dA-Za-z]/),gg(/[#-'*+\--9=?A-Z^-~]/);gg(/\d/),gg(/[\dA-Fa-f]/),gg(/[!-/:-@[-`{-~]/);function pg(e){return-2===e||-1===e||32===e}gg(/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDD00-\uDEB3\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF])/),gg(/\s/);function gg(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}const mg={name:"tasklistCheck",tokenize:function(e,t,n){const r=this;return function(t){if(null!==r.previous||!r._gfmTasklistFirstContentOfListItem)return n(t);return e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),o};function o(t){return function(e){return null!==e&&(e<0||32===e)}(t)?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),i):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),i):n(t)}function i(t){return 93===t?(e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):n(t)}function a(r){return function(e){return null!==e&&e<-2}(r)?t(r):pg(r)?e.check({tokenize:vg},t,n)(r):n(r)}}};function vg(e,t,n){return function(e,t,n,r){const o=r?r-1:Number.POSITIVE_INFINITY;let i=0;return function(r){return pg(r)?(e.enter(n),a(r)):t(r)};function a(r){return pg(r)&&i++<o?(e.consume(r),a):(e.exit(n),t(r))}}(e,(function(e){return null===e?n(e):t(e)}),"whitespace")}function yg(e){return function(e){const t={};let n=-1;for(;++n<e.length;)fp(t,e[n]);return t}([{text:_p},{document:{91:{name:"gfmFootnoteDefinition",tokenize:Kp,continuation:{tokenize:Gp},exit:Yp}},text:{91:{name:"gfmFootnoteCall",tokenize:Vp},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:qp,resolveTo:Wp}}},tg(e),{flow:{null:{name:"table",tokenize:lg,resolveAll:cg}}},{text:{91:mg}}])}const bg={};function Dg(e){const t=e||bg,n=this.data(),r=n.micromarkExtensions||(n.micromarkExtensions=[]),o=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),i=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);r.push(yg(t)),o.push([{transforms:[qh],enter:{literalAutolink:Oh,literalAutolinkEmail:zh,literalAutolinkHttp:zh,literalAutolinkWww:zh},exit:{literalAutolink:Uh,literalAutolinkEmail:Hh,literalAutolinkHttp:Lh,literalAutolinkWww:jh}},{enter:{gfmFootnoteCallString:Yh,gfmFootnoteCall:Zh,gfmFootnoteDefinitionLabelString:Qh,gfmFootnoteDefinition:Xh},exit:{gfmFootnoteCallString:$h,gfmFootnoteCall:Jh,gfmFootnoteDefinitionLabelString:ef,gfmFootnoteDefinition:tf}},{canContainEols:["delete"],enter:{strikethrough:uf},exit:{strikethrough:lf}},{enter:{table:ep,tableData:op,tableHeader:op,tableRow:np},exit:{codeText:ip,table:tp,tableData:rp,tableHeader:rp,tableRow:rp}},{exit:{taskListCheckValueChecked:up,taskListCheckValueUnchecked:up,paragraph:lp}}]),i.push(function(e){return{extensions:[{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Mh,notInConstruct:Bh},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Mh,notInConstruct:Bh},{character:":",before:"[ps]",after:"\\/",inConstruct:Mh,notInConstruct:Bh}]},rf(e),{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:sf}],handlers:{delete:cf}},sp(e),{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:cp}}]}}(t))}const Cg=["node"],wg={customNode:function(e){let{data:t}=e;const n=t.isEntraRole,r=t.isGraphPermission,o=n||r?{position:"relative",display:"inline-block",borderRadius:16,padding:3,overflow:"visible"}:{},i=n?{position:"absolute",zIndex:0,top:0,left:0,right:0,bottom:0,borderRadius:16,pointerEvents:"none",background:"linear-gradient(90deg, #e92a67 0%, #2a8af6 100%)",boxShadow:"0 0 8px #ffffff22, 0 0 12px #ae53ba44, 0 0 16px #2a8af644, 0 0 20px #e92a6733"}:r?{position:"absolute",zIndex:0,top:0,left:0,right:0,bottom:0,borderRadius:16,pointerEvents:"none",background:"linear-gradient(90deg, #2a8af6 0%, #60aaff 100%)",boxShadow:"0 0 8px #60aaff55, 0 0 12px #2a8af644, 0 0 16px #2a8af644, 0 0 20px #60aaff33"}:{},a=l({fontFamily:"'Fira Mono', 'Menlo', 'Monaco', 'Consolas', 'Liberation Mono', 'Courier New', monospace",fontWeight:500,fontSize:17,letterSpacing:"-0.5px",lineHeight:1.2},n?{position:"relative",zIndex:1,padding:"16px 20px",borderRadius:13,minWidth:t.isGraphPermission?600:400,maxWidth:t.isGraphPermission?600:400,background:"#151515",color:"#fff",border:"none",boxShadow:"0 1px 4px 0 #fff3, 0 0 4px 0 #ae53ba22, 0 0 6px 0 #2a8af611",textAlign:"center"}:r?{position:"relative",zIndex:1,padding:"16px 20px",borderRadius:13,minWidth:600,maxWidth:600,background:"#151d2b",color:"#fff",border:"none",boxShadow:"0 1px 8px 0 #60aaff33, 0 0 8px 0 #2a8af622, 0 0 12px 0 #2a8af611",textAlign:"center"}:{padding:10,border:"1px solid #777",borderRadius:5,minWidth:350,maxWidth:350,textAlign:"center",background:"none",color:"white"}),s=n?{fontSize:14,color:"#8b8b8b",fontFamily:"'Fira Mono', 'Menlo', 'Monaco', 'Consolas', 'Liberation Mono', 'Courier New', monospace",fontWeight:400,marginTop:4,letterSpacing:0}:{};return(0,d.jsxs)("div",{style:o,children:[(n||r)&&(0,d.jsx)("div",{style:i}),(0,d.jsxs)("div",{style:a,children:[(0,d.jsx)(Ha,{type:"target",position:kr.Left,id:"left",style:{background:"#555"}}),(0,d.jsx)("div",{children:t.label}),n&&t.subtitle&&(0,d.jsx)("div",{style:s,children:t.subtitle}),(0,d.jsx)(Ha,{type:"source",position:kr.Right,id:"right",style:{background:"#555"}})]})]})}},Eg={strong:e=>{let{node:t}=e,n=c(e,Cg);return(0,d.jsx)("strong",{className:"p-1 rounded bg-yellow-700/60",children:n.children})}},kg=e=>{var t,o,i;let{data:a,roleMembers:s,onGraphPermissionNodeClick:u,graphPermissionApps:l}=e;const[c,h]=(0,r.useState)(""),f=a.nodes.filter((e=>e.data.label.toLowerCase().includes(c.toLowerCase()))),p=new Set(f.map((e=>e.id))),g=new Set,m=new Set,v=new Set,y=e=>{g.has(e)||(g.add(e),m.add(e),a.edges.forEach((t=>{t.source===e&&(m.add(t.target),v.add(t.id||"".concat(t.source,"-").concat(t.target)),y(t.target))})))};p.forEach((e=>{if(g.has(e))return;g.add(e),m.add(e);const t=new Set;a.edges.forEach((n=>{n.source===e&&(t.add(n.target),m.add(n.target),v.add(n.id||"".concat(n.source,"-").concat(n.target))),n.target===e&&(t.add(n.source),m.add(n.source),v.add(n.id||"".concat(n.source,"-").concat(n.target)))})),t.forEach((e=>{y(e)}))}));const b=a.nodes.filter((e=>m.has(e.id))),D=a.edges.filter((e=>m.has(e.source)&&m.has(e.target)&&v.has(e.id||"".concat(e.source,"-").concat(e.target)))),[C,w]=(0,r.useState)(null),[E,k]=(0,r.useState)(""),F=(0,r.useRef)(null);(0,r.useEffect)((()=>{function e(e){C&&F.current&&!F.current.contains(e.target)&&w(null)}return C&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[C]),(0,r.useEffect)((()=>{C||k("")}),[C]);return(0,d.jsxs)("div",{style:{height:"90vh",borderTop:"1px solid #ddd",overflow:"hidden",color:"white"},className:"relative",children:[(0,d.jsx)("div",{className:"absolute top-4 right-4 z-20",children:(0,d.jsx)("input",{type:"text",placeholder:"Type to filter...",value:c,onChange:e=>h(e.target.value),className:"p-2 w-60 border border-gray-700 bg-gray-800 text-gray-100 rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,d.jsxs)("div",{className:"absolute right-4 top-16 z-20 bg-gray-900 bg-opacity-80 rounded px-2 py-1 border border-gray-700 flex items-center gap-1 text-xs text-gray-300 shadow",children:[(0,d.jsx)("span",{className:"inline-block w-5 h-1 rounded",style:{background:"#16a34a"}}),"Green lines are direct privilege escalations to Global Admin"]}),(0,d.jsxs)(eu,{nodes:b,edges:D,nodeTypes:wg,colorMode:"dark",minZoom:.01,fitView:!0,onNodeClick:async(e,t)=>{w(t);try{const e=await n(6283)("./".concat(t.id,".md")),r=await fetch(e.default),o=await r.text();k(o)}catch(r){k("No information available for this node.")}},children:[(0,d.jsx)(Fu,{}),(0,d.jsx)(su,{}),(0,d.jsx)(mu,{})]}),C&&(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 overflow-y-auto backdrop-blur-sm",children:(0,d.jsxs)("div",{ref:F,className:"bg-gray-900 rounded-lg shadow-lg max-w-4xl w-full p-6 relative my-8 border border-white",style:{maxHeight:"90vh",overflowY:"auto"},children:[(0,d.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-white text-2xl",onClick:()=>w(null),"aria-label":"Close",children:"\xd7"}),(0,d.jsxs)("div",{className:"prose prose-invert prose-a:text-white prose-headings:text-white max-w-none text-gray-100",children:[(0,d.jsx)(bh,{remarkPlugins:[Dg],components:Eg,children:E}),(null===(t=C.data)||void 0===t?void 0:t.isEntraRole)&&s&&s[C.id]&&(0,d.jsxs)("div",{className:"mt-6",children:[(0,d.jsx)("div",{className:"font-bold text-lg mb-2 text-white",children:"Members of this Entra role:"}),(0,d.jsxs)("ul",{className:"list-disc ml-6",children:[0===s[C.id].length&&(0,d.jsx)("li",{className:"text-gray-400",children:"No members found."}),s[C.id].map((e=>(0,d.jsxs)("li",{className:"mb-1",children:[(0,d.jsx)("span",{className:"font-mono text-sm text-blue-200",children:e.displayName}),e.userPrincipalName&&(0,d.jsx)("span",{className:"ml-2 text-xs text-gray-400",children:e.userPrincipalName}),e.mail&&(0,d.jsx)("span",{className:"ml-2 text-xs text-gray-400",children:e.mail}),e.type&&(0,d.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:e.type.replace("microsoft.graph.","")})]},e.id)))]})]}),(null===(o=C.data)||void 0===o?void 0:o.isGraphPermission)&&l&&(0,d.jsxs)("div",{className:"mt-6",children:[(0,d.jsx)("div",{className:"font-bold text-lg mb-2 text-white",children:"Applications with this Graph API permission:"}),(0,d.jsxs)("ul",{className:"list-disc ml-6",children:[(0===(null===(i=l[C.id])||void 0===i?void 0:i.length)||!l[C.id])&&(0,d.jsx)("li",{className:"text-gray-400",children:"No applications found."}),(l[C.id]||[]).map((e=>(0,d.jsxs)("li",{className:"mb-1",children:[(0,d.jsx)("span",{className:"font-mono text-sm text-blue-200",children:e.displayName}),(0,d.jsxs)("span",{className:"ml-2 text-xs text-gray-400",children:["App ID: ",e.appId]})]},e.id)))]})]})]})]})})]})},Fg={nodes:[{id:"azureDevOpsAdmin",type:"customNode",data:{label:"Azure DevOps Administrator",isEntraRole:!0},position:{x:0,y:0},sourcePosition:"right",targetPosition:"left"},{id:"authAdmin",type:"customNode",data:{label:"Authentication Administrator",isEntraRole:!0},position:{x:0,y:160},sourcePosition:"right",targetPosition:"left"},{id:"helpdeskAdmin",type:"customNode",data:{label:"Helpdesk Administrator",isEntraRole:!0},position:{x:0,y:240},sourcePosition:"right",targetPosition:"left"},{id:"passwordAdmin",type:"customNode",data:{label:"Password Administrator",isEntraRole:!0},position:{x:0,y:320},sourcePosition:"right",targetPosition:"left"},{id:"userAdmin1",type:"customNode",data:{label:"User Administrator",isEntraRole:!0},position:{x:0,y:400},sourcePosition:"right",targetPosition:"left"},{id:"hybridIdAdmin1",type:"customNode",data:{label:"Hybrid Identity Administrator",isEntraRole:!0},position:{x:0,y:560},sourcePosition:"right",targetPosition:"left"},{id:"partnerTier1Support",type:"customNode",data:{label:"Partner Tier1 Support",isEntraRole:!0},position:{x:0,y:640},sourcePosition:"right",targetPosition:"left"},{id:"cloudAppAdmin",type:"customNode",data:{label:"Cloud Application Administrator",isEntraRole:!0},position:{x:0,y:720},sourcePosition:"right",targetPosition:"left"},{id:"appAdmin",type:"customNode",data:{label:"Application Administrator",isEntraRole:!0},position:{x:0,y:800},sourcePosition:"right",targetPosition:"left"},{id:"userAdmin2",type:"customNode",data:{label:"User Administrator",isEntraRole:!0},position:{x:0,y:960},sourcePosition:"right",targetPosition:"left"},{id:"directoryWriters",type:"customNode",data:{label:"Directory Writers",isEntraRole:!0},position:{x:0,y:1040},sourcePosition:"right",targetPosition:"left"},{id:"exchangeAdmin",type:"customNode",data:{label:"Exchange Administrator",isEntraRole:!0},position:{x:0,y:1120},sourcePosition:"right",targetPosition:"left"},{id:"groupsAdmin",type:"customNode",data:{label:"Group Administrator",isEntraRole:!0},position:{x:0,y:1200},sourcePosition:"right",targetPosition:"left"},{id:"identityGovernanceAdmin",type:"customNode",data:{label:"Identity Governance Administrator",isEntraRole:!0},position:{x:0,y:1280},sourcePosition:"right",targetPosition:"left"},{id:"knowledgeAdmin",type:"customNode",data:{label:"Knowledge Administrator",isEntraRole:!0},position:{x:0,y:1360},sourcePosition:"right",targetPosition:"left"},{id:"knowledgeManager",type:"customNode",data:{label:"Knowledge Manager",isEntraRole:!0},position:{x:0,y:1440},sourcePosition:"right",targetPosition:"left"},{id:"lifecycleWorkflowsAdmin",type:"customNode",data:{label:"Lifecycle Workflows Administrator",isEntraRole:!0},position:{x:0,y:1520},sourcePosition:"right",targetPosition:"left"},{id:"partnerTier1Support2",type:"customNode",data:{label:"Partner Tier1 Support",isEntraRole:!0},position:{x:0,y:1600},sourcePosition:"right",targetPosition:"left"},{id:"sharePointAdmin",type:"customNode",data:{label:"SharePoint Administrator",isEntraRole:!0},position:{x:0,y:1680},sourcePosition:"right",targetPosition:"left"},{id:"teamsAdmin",type:"customNode",data:{label:"Teams Administrator",isEntraRole:!0},position:{x:0,y:1760},sourcePosition:"right",targetPosition:"left"},{id:"win365Admin",type:"customNode",data:{label:"Windows 365 Administrator",isEntraRole:!0},position:{x:0,y:1840},sourcePosition:"right",targetPosition:"left"},{id:"yammerAdmin",type:"customNode",data:{label:"Yammer Administrator",isEntraRole:!0},position:{x:0,y:1920},sourcePosition:"right",targetPosition:"left"},{id:"intuneAdmin",type:"customNode",data:{label:"Intune Administrator",isEntraRole:!0},position:{x:0,y:2e3},sourcePosition:"right",targetPosition:"left"},{id:"privilegedRoleAdmin",type:"customNode",data:{label:"Privileged Role Administrator",isEntraRole:!0},position:{x:0,y:2160},sourcePosition:"right",targetPosition:"left"},{id:"partnerTier2Support",type:"customNode",data:{label:"Partner Tier2 Support",isEntraRole:!0},position:{x:0,y:2240},sourcePosition:"right",targetPosition:"left"},{id:"privilegedAuthAdmin",type:"customNode",data:{label:"Privileged Authentication Administrator",isEntraRole:!0},position:{x:0,y:2320},sourcePosition:"right",targetPosition:"left"},{id:"hybridIdAdmin2",type:"customNode",data:{label:"Hybrid Identity Administrator",isEntraRole:!0},position:{x:0,y:2480},sourcePosition:"right",targetPosition:"left"},{id:"domainNameAdmin",type:"customNode",data:{label:"Domain Name Administrator",isEntraRole:!0},position:{x:0,y:2560},sourcePosition:"right",targetPosition:"left"},{id:"externalIdpAdmin",type:"customNode",data:{label:"External Identity Provider Administrator",isEntraRole:!0},position:{x:0,y:2640},sourcePosition:"right",targetPosition:"left"},{id:"securityAdmin",type:"customNode",data:{label:"Security Administrator",isEntraRole:!0},position:{x:0,y:2720},sourcePosition:"right",targetPosition:"left"},{id:"conditionalAccessAdmin",type:"customNode",data:{label:"Conditional Access Administrator",isEntraRole:!0},position:{x:0,y:2850},sourcePosition:"right",targetPosition:"left"},{id:"devOpsPipeline",type:"customNode",data:{label:"Impersonate a DevOps pipeline"},position:{x:600,y:10},sourcePosition:"right",targetPosition:"left"},{id:"passwordResetSPOwner",type:"customNode",data:{label:"Reset the password of a Service Principal owner"},position:{x:600,y:280},sourcePosition:"right",targetPosition:"left"},{id:"createPrivilegedApp",type:"customNode",data:{label:"Create a Service Principal with privileged application permissions"},position:{x:600,y:750},sourcePosition:"right",targetPosition:"left"},{id:"privilegedAzureAccess",type:"customNode",data:{label:"Privileged Azure Resource Access via Group Membership"},position:{x:600,y:1200},sourcePosition:"right",targetPosition:"left"},{id:"compromisedSP",type:"customNode",data:{label:"Impersonate a Service Principal with privileged application permissions"},position:{x:1200,y:550},sourcePosition:"right",targetPosition:"left"},{id:"managedIdentity",type:"customNode",data:{label:"Managed Identity with privileged Graph API permission"},position:{x:1200,y:1200},sourcePosition:"right",targetPosition:"left"},{id:"tokenTheft",type:"customNode",data:{label:"Token theft from Global Admin device"},position:{x:1200,y:2e3},sourcePosition:"right",targetPosition:"left"},{id:"directGlobalAdminTakeover",type:"customNode",data:{label:"Assign or reset a Global Administrator password and MFA"},position:{x:1200,y:2200},sourcePosition:"right",targetPosition:"left"},{id:"federatedDomainInjection",type:"customNode",data:{label:"Federated Domain Injection + SAML Token forgery"},position:{x:1200,y:2400},sourcePosition:"right",targetPosition:"left"},{id:"disableDefenderEDR",type:"customNode",data:{label:"Disable Defender EDR"},position:{x:1200,y:2550},sourcePosition:"right",targetPosition:"left"},{id:"tenantLockoutCAP",type:"customNode",data:{label:"Create or modify a Conditional Access Policy to allow or block access"},position:{x:2500,y:2700},sourcePosition:"right",targetPosition:"left"},{id:"user",type:"customNode",data:{label:"User Account"},position:{x:1300,y:350},sourcePosition:"right",targetPosition:"left"},{id:"hasGraphPermission",type:"customNode",data:{label:"Has Graph API permissions"},position:{x:1800,y:700},sourcePosition:"right",targetPosition:"left"},{id:"groupGraph",data:{label:"Graph API permissions"},position:{x:2450,y:550},style:{width:720,height:800,backgroundColor:"rgba(1, 170, 255, 0.15)",borderRadius:16},type:"group"},{id:"graphCAP",type:"customNode",data:{label:"Policy.ReadWrite.ConditionalAccess",isGraphPermission:!0},position:{x:2500,y:600},sourcePosition:"right",targetPosition:"left"},{id:"graphDeleteUser",type:"customNode",data:{label:"User.DeleteRestore.All",isGraphPermission:!0},position:{x:2500,y:670},sourcePosition:"right",targetPosition:"left"},{id:"graphDisableAccount",type:"customNode",data:{label:"User.EnableDisableAccount.All",isGraphPermission:!0},position:{x:2500,y:740},sourcePosition:"right",targetPosition:"left"},{id:"graphAADGroup",type:"customNode",data:{label:"PrivilegedAccess.ReadWrite.AzureADGroup",isGraphPermission:!0},position:{x:2500,y:850},sourcePosition:"right",targetPosition:"left"},{id:"graphPrivAADGroup",type:"customNode",data:{label:"PrivilegedAssignmentSchedule.ReadWrite.AzureADGroup",isGraphPermission:!0},position:{x:2500,y:920},sourcePosition:"right",targetPosition:"left"},{id:"graphRoleAssignment",type:"customNode",data:{label:"RoleAssignmentSchedule.ReadWrite.Directory",isGraphPermission:!0},position:{x:2500,y:990},sourcePosition:"right",targetPosition:"left"},{id:"graphRoleManagement",type:"customNode",data:{label:"RoleManagement.ReadWrite.Directory",isGraphPermission:!0},position:{x:2500,y:1060},sourcePosition:"right",targetPosition:"left"},{id:"graphAuthMethod",type:"customNode",data:{label:"UserAuthenticationMethod.ReadWrite.All",isGraphPermission:!0},position:{x:2500,y:1130},sourcePosition:"right",targetPosition:"left"},{id:"graphOther",type:"customNode",data:{label:"Other Graph API permission",isGraphPermission:!0},position:{x:2500,y:1250},sourcePosition:"right",targetPosition:"left"},{id:"globalAdmin",type:"customNode",data:{label:"\ud83d\udc51 Global Administrator",isEntraRole:!0},position:{x:3600,y:1600},sourcePosition:"right",targetPosition:"left"},{id:"tenantHijack",type:"customNode",data:{label:"Tenant Hijack and Ransomware"},position:{x:4300,y:1607},sourcePosition:"right",targetPosition:"left"}],edges:[{id:"e_azureDevOps_devOpsPipeline",source:"azureDevOpsAdmin",target:"devOpsPipeline",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_devOpsPipeline_compromisedSP",source:"devOpsPipeline",target:"compromisedSP",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_authAdmin_pwdReset",source:"authAdmin",target:"passwordResetSPOwner",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_helpdeskAdmin_pwdReset",source:"helpdeskAdmin",target:"passwordResetSPOwner",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_passwordAdmin_pwdReset",source:"passwordAdmin",target:"passwordResetSPOwner",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_userAdmin1_pwdReset",source:"userAdmin1",target:"passwordResetSPOwner",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_pwdReset_compSP",source:"passwordResetSPOwner",target:"compromisedSP",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_cloudAppAdmin_createPrivilegedApp",source:"cloudAppAdmin",target:"createPrivilegedApp",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_appAdmin_createPrivilegedApp",source:"appAdmin",target:"createPrivilegedApp",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_createPrivilegedApp_compSP",source:"createPrivilegedApp",target:"compromisedSP",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_hybridIdAdmin1_compSP",source:"hybridIdAdmin1",target:"compromisedSP",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_partnerTier1Support_compSP",source:"partnerTier1Support",target:"compromisedSP",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_userAdmin2_privilegedAzure",source:"userAdmin2",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_directoryWriters_privilegedAzure",source:"directoryWriters",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_exchangeAdmin_privilegedAzure",source:"exchangeAdmin",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_groupsAdmin_privilegedAzure",source:"groupsAdmin",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_identityGovernanceAdmin_privilegedAzure",source:"identityGovernanceAdmin",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_knowledgeAdmin_privilegedAzure",source:"knowledgeAdmin",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_knowledgeManager_privilegedAzure",source:"knowledgeManager",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_lifecycleWorkflowsAdmin_privilegedAzure",source:"lifecycleWorkflowsAdmin",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_partnerTier1Support2_privilegedAzure",source:"partnerTier1Support2",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_sharePointAdmin_privilegedAzure",source:"sharePointAdmin",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_teamsAdmin_privilegedAzure",source:"teamsAdmin",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_win365Admin_privilegedAzure",source:"win365Admin",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_yammerAdmin_privilegedAzure",source:"yammerAdmin",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_intuneAdmin_privilegedAzure",source:"intuneAdmin",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_privilegedAzure_managedIdentity",source:"privilegedAzureAccess",target:"managedIdentity",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_privilegedAzure_compSP",source:"privilegedAzureAccess",target:"compromisedSP",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_graphAADGroup_globalAdmin",source:"graphAADGroup",target:"globalAdmin",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_graphPrivAADGroup_globalAdmin",source:"graphPrivAADGroup",target:"globalAdmin",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_graphRoleAssignment_globalAdmin",source:"graphRoleAssignment",target:"globalAdmin",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_graphRoleManagement_globalAdmin",source:"graphRoleManagement",target:"globalAdmin",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_graphAuthMethod_globalAdmin",source:"graphAuthMethod",target:"globalAdmin",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_graphOther_globalAdmin",source:"graphOther",target:"globalAdmin",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_user_hasGraphPermission",source:"user",target:"hasGraphPermission",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_managedIdentity_hasGraphPermission",source:"managedIdentity",target:"hasGraphPermission",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_tokenTheft_globalAdmin",source:"tokenTheft",target:"globalAdmin",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_intuneAdmin_tokenTheft",source:"intuneAdmin",target:"tokenTheft",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_privRoleAdmin_directGlobal",source:"privilegedRoleAdmin",target:"directGlobalAdminTakeover",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_partnerTier2Support_directGlobal",source:"partnerTier2Support",target:"directGlobalAdminTakeover",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_privAuthAdmin_directGlobal",source:"privilegedAuthAdmin",target:"directGlobalAdminTakeover",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_directGlobal_globalAdmin",source:"directGlobalAdminTakeover",target:"globalAdmin",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_hybridIdAdmin2_federatedDomain",source:"hybridIdAdmin2",target:"federatedDomainInjection",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_domainName_federatedDomain",source:"domainNameAdmin",target:"federatedDomainInjection",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_externalIdp_federatedDomain",source:"externalIdpAdmin",target:"federatedDomainInjection",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_securityAdmin_federatedDomain",source:"securityAdmin",target:"federatedDomainInjection",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_federatedDomain_globalAdmin",source:"federatedDomainInjection",target:"globalAdmin",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_conditionalAccessAdmin_tenantLockout",source:"conditionalAccessAdmin",target:"tenantLockoutCAP",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_compromisedSP_hasGraphPermission",source:"compromisedSP",target:"hasGraphPermission",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_hasGraphPermission_graphCAP",source:"hasGraphPermission",target:"graphCAP",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_hasGraphPermission_graphDeleteUser",source:"hasGraphPermission",target:"graphDeleteUser",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_hasGraphPermission_graphDisableAccount",source:"hasGraphPermission",target:"graphDisableAccount",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_hasGraphPermission_graphAADGroup",source:"hasGraphPermission",target:"graphAADGroup",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_hasGraphPermission_graphPrivAADGroup",source:"hasGraphPermission",target:"graphPrivAADGroup",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_hasGraphPermission_graphRoleAssignment",source:"hasGraphPermission",target:"graphRoleAssignment",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_hasGraphPermission_graphRoleManagement",source:"hasGraphPermission",target:"graphRoleManagement",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_hasGraphPermission_graphAuthMethod",source:"hasGraphPermission",target:"graphAuthMethod",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_hasGraphPermission_graphOther",source:"hasGraphPermission",target:"graphOther",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_graphCAP_tenantHijack",source:"graphCAP",target:"tenantHijack",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_graphDeleteUser_tenantHijack",source:"graphDeleteUser",target:"tenantHijack",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_graphDisableAccount_tenantHijack",source:"graphDisableAccount",target:"tenantHijack",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_tenantLockoutCAP_tenantHijack",source:"tenantLockoutCAP",target:"tenantHijack",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_globalAdmin_tenantHijack",source:"globalAdmin",target:"tenantHijack",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_disableDefenderEDR_globalAdmin",source:"disableDefenderEDR",target:"globalAdmin",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_securityAdmin_disableDefenderEDR",source:"securityAdmin",target:"disableDefenderEDR",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_securityAdmin_federatedDomainInjection",source:"securityAdmin",target:"federatedDomainInjection",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_securityAdmin_tenantLockoutCAP",source:"securityAdmin",target:"tenantLockoutCAP",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}}]},xg={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Ag=400,Sg=499,_g=500,Ig=599,Pg=[xg.OPENID_SCOPE,xg.PROFILE_SCOPE,xg.OFFLINE_ACCESS_SCOPE],Tg=[...Pg,xg.EMAIL_SCOPE],Ng="Content-Type",Rg="Content-Length",Mg="Retry-After",Bg="X-AnchorMailbox",Og="x-ms-request-id",zg="x-ms-httpver",Lg="active-account-filters",jg="common",Hg="organizations",Ug="consumers",qg="access_token",Wg="xms_cc",Vg={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},Kg={PLAIN:"plain",S256:"S256"},Gg="code",Yg="id_token token refresh_token",Zg="query",Qg="fragment",Xg="query",$g="authorization_code",Jg="refresh_token",em="MSSTS",tm="ADFS",nm="Generic",rm="-",om=".",im={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},am="appmetadata",sm="1",um="authority-metadata",lm=86400,cm="config",dm="cache",hm="network",fm="hardcoded_values",pm={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},gm={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},mm=60,vm=3600,ym="throttling",bm="retry-after, h429",Dm="invalid_grant",Cm="client_mismatch",wm=200,Em=400,km="1",Fm="3",xm="4",Am="2",Sm="4",_m="5",Im="0",Pm="1",Tm="2",Nm="3",Rm="4",Mm="pop";var Bm;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(Bm||(Bm={}));class Om{constructor(e,t,n){this.level=Bm.Info;const r=e||Om.createDefaultLoggerOptions();this.localCallback=r.loggerCallback||(()=>{}),this.piiLoggingEnabled=r.piiLoggingEnabled||!1,this.level="number"===typeof r.logLevel?r.logLevel:Bm.Info,this.correlationId=r.correlationId||xg.EMPTY_STRING,this.packageName=t||xg.EMPTY_STRING,this.packageVersion=n||xg.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Bm.Info}}clone(e,t,n){return new Om({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const n=(new Date).toUTCString(),r="[".concat(n,"] : [").concat(t.correlationId||this.correlationId||"","]"),o="".concat(r," : ").concat(this.packageName,"@").concat(this.packageVersion," : ").concat(Bm[t.logLevel]," - ").concat(e);this.executeCallback(t.logLevel,o,t.containsPii||!1)}executeCallback(e,t,n){this.localCallback&&this.localCallback(e,t,n)}error(e,t){this.logMessage(e,{logLevel:Bm.Error,containsPii:!1,correlationId:t||xg.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:Bm.Error,containsPii:!0,correlationId:t||xg.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:Bm.Warning,containsPii:!1,correlationId:t||xg.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:Bm.Warning,containsPii:!0,correlationId:t||xg.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:Bm.Info,containsPii:!1,correlationId:t||xg.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:Bm.Info,containsPii:!0,correlationId:t||xg.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:Bm.Verbose,containsPii:!1,correlationId:t||xg.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:Bm.Verbose,containsPii:!0,correlationId:t||xg.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:Bm.Trace,containsPii:!1,correlationId:t||xg.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:Bm.Trace,containsPii:!0,correlationId:t||xg.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const zm="AAD",Lm="OIDC",jm="EAR",Hm="none",Um="unexpected_error",qm="post_request_failed",Wm={[Um]:"Unexpected error in authentication.",[qm]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class Vm extends Error{constructor(e,t,n){super(t?"".concat(e,": ").concat(t):e),Object.setPrototypeOf(this,Vm.prototype),this.errorCode=e||xg.EMPTY_STRING,this.errorMessage=t||xg.EMPTY_STRING,this.subError=n||xg.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function Km(e,t){return new Vm(e,t?"".concat(Wm[e]," ").concat(t):Wm[e])}const Gm="client_info_decoding_error",Ym="client_info_empty_error",Zm="token_parsing_error",Qm="null_or_empty_token",Xm="endpoints_resolution_error",$m="network_error",Jm="openid_config_error",ev="hash_not_deserialized",tv="invalid_state",nv="state_mismatch",rv="state_not_found",ov="nonce_mismatch",iv="auth_time_not_found",av="max_age_transpired",sv="multiple_matching_tokens",uv="multiple_matching_accounts",lv="multiple_matching_appMetadata",cv="request_cannot_be_made",dv="cannot_remove_empty_scope",hv="cannot_append_scopeset",fv="empty_input_scopeset",pv="device_code_polling_cancelled",gv="device_code_expired",mv="device_code_unknown_error",vv="no_account_in_silent_request",yv="invalid_cache_record",bv="invalid_cache_environment",Dv="no_account_found",Cv="no_crypto_object",wv="unexpected_credential_type",Ev="invalid_assertion",kv="invalid_client_credential",Fv="token_refresh_required",xv="user_timeout_reached",Av="token_claims_cnf_required_for_signedjwt",Sv="authorization_code_missing_from_server_response",_v="binding_key_not_removed",Iv="end_session_endpoint_not_supported",Pv="key_id_missing",Tv="no_network_connectivity",Nv="user_canceled",Rv="missing_tenant_id_error",Mv="method_not_implemented",Bv="nested_app_auth_bridge_disabled",Ov={[Gm]:"The client info could not be parsed/decoded correctly",[Ym]:"The client info was empty",[Zm]:"Token cannot be parsed",[Qm]:"The token is null or empty",[Xm]:"Endpoints cannot be resolved",[$m]:"Network request failed",[Jm]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[ev]:"The hash parameters could not be deserialized",[tv]:"State was not the expected format",[nv]:"State mismatch error",[rv]:"State not found",[ov]:"Nonce mismatch error",[iv]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[av]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[sv]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[uv]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[lv]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[cv]:"Token request cannot be made without authorization code or refresh token.",[dv]:"Cannot remove null or empty scope from ScopeSet",[hv]:"Cannot append ScopeSet",[fv]:"Empty input ScopeSet cannot be processed",[pv]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[gv]:"Device code is expired.",[mv]:"Device code stopped polling for unknown reasons.",[vv]:"Please pass an account object, silent flow is not supported without account information",[yv]:"Cache record object was null or undefined.",[bv]:"Invalid environment when attempting to create cache entry",[Dv]:"No account found in cache for given key.",[Cv]:"No crypto object detected.",[wv]:"Unexpected credential type.",[Ev]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[kv]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Fv]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[xv]:"User defined timeout for device code polling reached",[Av]:"Cannot generate a POP jwt if the token_claims are not populated",[Sv]:"Server response does not contain an authorization code to proceed",[_v]:"Could not remove the credential's binding key from storage.",[Iv]:"The provided authority does not support logout",[Pv]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Tv]:"No network connectivity. Check your internet connection.",[Nv]:"User cancelled the flow.",[Rv]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Mv]:"This method has not been implemented",[Bv]:"The nested app auth bridge is disabled"};class zv extends Vm{constructor(e,t){super(e,t?"".concat(Ov[e],": ").concat(t):Ov[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,zv.prototype)}}function Lv(e,t){return new zv(e,t)}const jv={createNewGuid:()=>{throw Lv(Mv)},base64Decode:()=>{throw Lv(Mv)},base64Encode:()=>{throw Lv(Mv)},base64UrlEncode:()=>{throw Lv(Mv)},encodeKid:()=>{throw Lv(Mv)},async getPublicKeyThumbprint(){throw Lv(Mv)},async removeTokenBindingKey(){throw Lv(Mv)},async clearKeystore(){throw Lv(Mv)},async signJwt(){throw Lv(Mv)},async hashString(){throw Lv(Mv)}},Hv="@azure/msal-common",Uv="15.6.0";function qv(e,t){const n=function(e){if(!e)throw Lv(Qm);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);if(!t||t.length<4)throw Lv(Zm);return t[2]}(e);try{const e=t(n);return JSON.parse(e)}catch(r){throw Lv(Zm)}}function Wv(e,t){if(0===t||Date.now()-3e5>e+t)throw Lv(av)}function Vv(){return Math.round((new Date).getTime()/1e3)}function Kv(e){return e.getTime()/1e3}function Gv(e){return e?new Date(1e3*Number(e)):new Date}function Yv(e,t){const n=Number(e)||0;return Vv()+t>n}function Zv(e){return[ey(e),ty(e),ny(e),ry(e),oy(e)].join(rm).toLowerCase()}function Qv(e,t,n,r,o){return{credentialType:im.ID_TOKEN,homeAccountId:e,environment:t,clientId:r,secret:n,realm:o}}function Xv(e,t,n,r,o,i,a,s,u,l,c,d,h,f,p){var g,m;const v={homeAccountId:e,credentialType:im.ACCESS_TOKEN,secret:n,cachedAt:Vv().toString(),expiresOn:a.toString(),extendedExpiresOn:s.toString(),environment:t,clientId:r,realm:o,target:i,tokenType:c||gm.BEARER};if(d&&(v.userAssertionHash=d),l&&(v.refreshOn=l.toString()),f&&(v.requestedClaims=f,v.requestedClaimsHash=p),(null===(g=v.tokenType)||void 0===g?void 0:g.toLowerCase())!==gm.BEARER.toLowerCase())switch(v.credentialType=im.ACCESS_TOKEN_WITH_AUTH_SCHEME,v.tokenType){case gm.POP:const e=qv(n,u);if(null===e||void 0===e||null===(m=e.cnf)||void 0===m||!m.kid)throw Lv(Av);v.keyId=e.cnf.kid;break;case gm.SSH:v.keyId=h}return v}function $v(e,t,n,r,o,i,a){const s={credentialType:im.REFRESH_TOKEN,homeAccountId:e,environment:t,clientId:r,secret:n};return i&&(s.userAssertionHash=i),o&&(s.familyId=o),a&&(s.expiresOn=a.toString()),s}function Jv(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")}function ey(e){return[e.homeAccountId,e.environment].join(rm).toLowerCase()}function ty(e){const t=e.credentialType===im.REFRESH_TOKEN&&e.familyId||e.clientId;return[e.credentialType,t,e.realm||""].join(rm).toLowerCase()}function ny(e){return(e.target||"").toLowerCase()}function ry(e){return(e.requestedClaimsHash||"").toLowerCase()}function oy(e){return e.tokenType&&e.tokenType.toLowerCase()!==gm.BEARER.toLowerCase()?e.tokenType.toLowerCase():""}function iy(){return Vv()+lm}function ay(e,t,n){e.authorization_endpoint=t.authorization_endpoint,e.token_endpoint=t.token_endpoint,e.end_session_endpoint=t.end_session_endpoint,e.issuer=t.issuer,e.endpointsFromNetwork=n,e.jwks_uri=t.jwks_uri}function sy(e,t,n){e.aliases=t.aliases,e.preferred_cache=t.preferred_cache,e.preferred_network=t.preferred_network,e.aliasesFromNetwork=n}function uy(e){return e.expiresAt<=Vv()}const ly="redirect_uri_empty",cy="claims_request_parsing_error",dy="authority_uri_insecure",hy="url_parse_error",fy="empty_url_error",py="empty_input_scopes_error",gy="invalid_prompt_value",my="invalid_claims",vy="token_request_empty",yy="logout_request_empty",by="invalid_code_challenge_method",Dy="pkce_params_missing",Cy="invalid_cloud_discovery_metadata",wy="invalid_authority_metadata",Ey="untrusted_authority",ky="missing_ssh_jwk",Fy="missing_ssh_kid",xy="missing_nonce_authentication_header",Ay="invalid_authentication_header",Sy="cannot_set_OIDCOptions",_y="cannot_allow_platform_broker",Iy="authority_mismatch",Py={[ly]:"A redirect URI is required for all calls, and none has been set.",[cy]:"Could not parse the given claims request object.",[dy]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[hy]:"URL could not be parsed into appropriate segments.",[fy]:"URL was empty or null.",[py]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[gy]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[my]:"Given claims parameter must be a stringified JSON object.",[vy]:"Token request was empty and not found in cache.",[yy]:"The logout request was null or undefined.",[by]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Dy]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Cy]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[wy]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Ey]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[ky]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[Fy]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[xy]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Ay]:"Invalid authentication header provided",[Sy]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[_y]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[Iy]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class Ty extends Vm{constructor(e){super(e,Py[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,Ty.prototype)}}function Ny(e){return new Ty(e)}class Ry{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return 0===Object.keys(t).length}catch(t){}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},n=e.split("&"),r=e=>decodeURIComponent(e.replace(/\+/g," "));return n.forEach((e=>{if(e.trim()){const[n,o]=e.split(/=(.+)/g,2);n&&o&&(t[r(n)]=r(o))}})),t}static trimArrayEntries(e){return e.map((e=>e.trim()))}static removeEmptyStringsFromArray(e){return e.filter((e=>!!e))}static jsonParseHelper(e){try{return JSON.parse(e)}catch(t){return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}class My{constructor(e){const t=e?Ry.trimArrayEntries([...e]):[],n=t?Ry.removeEmptyStringsFromArray(t):[];if(!n||!n.length)throw Ny(py);this.scopes=new Set,n.forEach((e=>this.scopes.add(e)))}static fromString(e){const t=(e||xg.EMPTY_STRING).split(" ");return new My(t)}static createSearchScopes(e){const t=new My(e);return t.containsOnlyOIDCScopes()?t.removeScope(xg.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}containsScope(e){const t=this.printScopesLowerCase().split(" "),n=new My(t);return!!e&&n.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&(this.scopes.size>=e.scopes.size&&e.asArray().every((e=>this.containsScope(e))))}containsOnlyOIDCScopes(){let e=0;return Tg.forEach((t=>{this.containsScope(t)&&(e+=1)})),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach((e=>this.appendScope(e)))}catch(t){throw Lv(hv)}}removeScope(e){if(!e)throw Lv(dv);this.scopes.delete(e.trim())}removeOIDCScopes(){Tg.forEach((e=>{this.scopes.delete(e)}))}unionScopeSets(e){if(!e)throw Lv(fv);const t=new Set;return e.scopes.forEach((e=>t.add(e.toLowerCase()))),this.scopes.forEach((e=>t.add(e.toLowerCase()))),t}intersectingScopeSets(e){if(!e)throw Lv(fv);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),n=e.getScopeCount(),r=this.getScopeCount();return t.size<r+n}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach((t=>e.push(t))),e}printScopes(){if(this.scopes){return this.asArray().join(" ")}return xg.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function By(e,t){if(!e)throw Lv(Ym);try{const n=t(e);return JSON.parse(n)}catch(n){throw Lv(Gm)}}function Oy(e){if(!e)throw Lv(Gm);const t=e.split(om,2);return{uid:t[0],utid:t.length<2?xg.EMPTY_STRING:t[1]}}const zy=["isHomeTenant"],Ly=["isHomeTenant"];function jy(e,t){return!!e&&!!t&&e===t.split(".")[1]}function Hy(e,t,n,r){if(r){const{oid:t,sub:n,tid:o,name:i,tfp:a,acr:s}=r,u=o||a||s||"";return{tenantId:u,localAccountId:t||n||"",name:i,isHomeTenant:jy(u,e)}}return{tenantId:n,localAccountId:t,isHomeTenant:jy(n,e)}}function Uy(e,t,n,r){let o=e;if(t){const{isHomeTenant:n}=t,r=c(t,zy);o=l(l({},e),r)}if(n){const t=Hy(e.homeAccountId,e.localAccountId,e.tenantId,n),{isHomeTenant:i}=t,a=c(t,Ly);return o=l(l(l({},o),a),{},{idTokenClaims:n,idToken:r}),o}return o}const qy=0,Wy=1,Vy=2,Ky=3;function Gy(e){if(e){return e.tid||e.tfp||e.acr||null}return null}class Yy{generateAccountId(){return[this.homeAccountId,this.environment].join(rm).toLowerCase()}generateAccountKey(){return Yy.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map((e=>[e.tenantId,e])))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(rm).toLowerCase()}static createAccount(e,t,n){var r,o,i,a,s,u,l,c;const d=new Yy;let h;t.authorityType===Wy?d.authorityType=tm:t.protocolMode===Lm?d.authorityType=nm:d.authorityType=em,e.clientInfo&&n&&(h=By(e.clientInfo,n)),d.clientInfo=e.clientInfo,d.homeAccountId=e.homeAccountId,d.nativeAccountId=e.nativeAccountId;const f=e.environment||t&&t.getPreferredCache();if(!f)throw Lv(bv);d.environment=f,d.realm=(null===(r=h)||void 0===r?void 0:r.utid)||Gy(e.idTokenClaims)||"",d.localAccountId=(null===(o=h)||void 0===o?void 0:o.uid)||(null===(i=e.idTokenClaims)||void 0===i?void 0:i.oid)||(null===(a=e.idTokenClaims)||void 0===a?void 0:a.sub)||"";const p=(null===(s=e.idTokenClaims)||void 0===s?void 0:s.preferred_username)||(null===(u=e.idTokenClaims)||void 0===u?void 0:u.upn),g=null!==(l=e.idTokenClaims)&&void 0!==l&&l.emails?e.idTokenClaims.emails[0]:null;if(d.username=p||g||"",d.name=(null===(c=e.idTokenClaims)||void 0===c?void 0:c.name)||"",d.cloudGraphHostName=e.cloudGraphHostName,d.msGraphHost=e.msGraphHost,e.tenantProfiles)d.tenantProfiles=e.tenantProfiles;else{const t=Hy(e.homeAccountId,d.localAccountId,d.realm,e.idTokenClaims);d.tenantProfiles=[t]}return d}static createFromAccountInfo(e,t,n){var r;const o=new Yy;return o.authorityType=e.authorityType||nm,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=t,o.msGraphHost=n,o.tenantProfiles=Array.from((null===(r=e.tenantProfiles)||void 0===r?void 0:r.values())||[]),o}static generateHomeAccountId(e,t,n,r,o){if(t!==Wy&&t!==Vy){if(e)try{const t=By(e,r.base64Decode);if(t.uid&&t.utid)return"".concat(t.uid,".").concat(t.utid)}catch(i){}n.warning("No client info in response")}return(null===o||void 0===o?void 0:o.sub)||""}static isAccountEntity(e){return!!e&&(e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"))}static accountInfoIsEqual(e,t,n){if(!e||!t)return!1;let r=!0;if(n){const n=e.idTokenClaims||{},o=t.idTokenClaims||{};r=n.iat===o.iat&&n.nonce===o.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&r}}function Zy(e){return e.startsWith("#/")?e.substring(2):e.startsWith("#")||e.startsWith("?")?e.substring(1):e}function Qy(e){if(!e||e.indexOf("=")<0)return null;try{const t=Zy(e),n=Object.fromEntries(new URLSearchParams(t));if(n.code||n.ear_jwe||n.error||n.error_description||n.state)return n}catch(t){throw Lv(ev)}return null}function Xy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const r=new Array;return e.forEach(((e,o)=>{!t&&n&&o in n?r.push("".concat(o,"=").concat(e)):r.push("".concat(o,"=").concat(encodeURIComponent(e)))})),r.join("&")}class $y{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Ny(fy);e.includes("#")||(this._urlString=$y.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return Ry.endsWith(t,"?")?t=t.slice(0,-1):Ry.endsWith(t,"?/")&&(t=t.slice(0,-2)),Ry.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch(t){throw Ny(hy)}if(!e.HostNameAndPort||!e.PathSegments)throw Ny(hy);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw Ny(dy)}static appendQueryString(e,t){return t?e.indexOf("?")<0?"".concat(e,"?").concat(t):"".concat(e,"&").concat(t):e}static removeHashFromUrl(e){return $y.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),n=t.PathSegments;return!e||0===n.length||n[0]!==jg&&n[0]!==Hg||(n[0]=e),$y.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw Ny(hy);const n={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let r=n.AbsolutePath.split("/");return r=r.filter((e=>e&&e.length>0)),n.PathSegments=r,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(t);if(!n)throw Ny(hy);return n[2]}static getAbsoluteUrl(e,t){if(e[0]===xg.FORWARD_SLASH){const n=new $y(t).getUrlComponents();return n.Protocol+"//"+n.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new $y(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Qy(e)}}const Jy={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},eb={tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},tb=new Set;function nb(e,t,n,r){if(null===r||void 0===r||r.trace("getAliasesFromMetadata called with source: ".concat(n)),e&&t){const o=rb(t,e);if(o)return null===r||void 0===r||r.trace("getAliasesFromMetadata: found cloud discovery metadata in ".concat(n,", returning aliases")),o.aliases;null===r||void 0===r||r.trace("getAliasesFromMetadata: did not find cloud discovery metadata in ".concat(n))}return null}function rb(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r.aliases.includes(t))return r}return null}eb.metadata.forEach((e=>{e.aliases.forEach((e=>{tb.add(e)}))}));const ob="cache_quota_exceeded",ib="cache_error_unknown",ab={[ob]:"Exceeded cache storage capacity.",[ib]:"Unexpected error occurred when using cache storage."};class sb extends Error{constructor(e,t){const n=t||(ab[e]?ab[e]:ab[ib]);super("".concat(e,": ").concat(n)),Object.setPrototypeOf(this,sb.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}}class ub{constructor(e,t,n,r){this.clientId=e,this.cryptoImpl=t,this.commonLogger=n.clone(Hv,Uv),this.staticAuthorityOptions=r}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const t=this.getAllAccounts(e);if(t.length>1){return t.sort((e=>e.idTokenClaims?-1:1))[0]}return 1===t.length?t[0]:null}getBaseAccountInfo(e){const t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap((e=>this.getTenantProfilesFromAccountEntity(e,null===t||void 0===t?void 0:t.tenantId,t)))}getTenantedAccountInfoByFilter(e,t,n,r){let o,i=null;if(r&&!this.tenantProfileMatchesFilter(n,r))return null;const a=this.getIdToken(e,t,n.tenantId);return a&&(o=qv(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(o,r))?null:(i=Uy(e,n,o,null===a||void 0===a?void 0:a.secret),i)}getTenantProfilesFromAccountEntity(e,t,n){const r=e.getAccountInfo();let o=r.tenantProfiles||new Map;const i=this.getTokenKeys();if(t){const e=o.get(t);if(!e)return[];o=new Map([[t,e]])}const a=[];return o.forEach((e=>{const t=this.getTenantedAccountInfoByFilter(r,i,e,n);t&&a.push(t)})),a}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId))&&((!t.name||e.name===t.name)&&(void 0===t.isHomeTenant||e.isHomeTenant===t.isHomeTenant))}idTokenClaimsMatchTenantProfileFilter(e,t){if(t){if(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId))return!1;if(t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint))return!1;if(t.username&&!this.matchUsername(e.preferred_username,t.username))return!1;if(t.name&&!this.matchName(e,t.name))return!1;if(t.sid&&!this.matchSid(e,t.sid))return!1}return!0}async saveCacheRecord(e,t,n){if(!e)throw Lv(yv);try{e.account&&await this.setAccount(e.account,t),e.idToken&&!1!==(null===n||void 0===n?void 0:n.idToken)&&await this.setIdTokenCredential(e.idToken,t),e.accessToken&&!1!==(null===n||void 0===n?void 0:n.accessToken)&&await this.saveAccessToken(e.accessToken,t),e.refreshToken&&!1!==(null===n||void 0===n?void 0:n.refreshToken)&&await this.setRefreshTokenCredential(e.refreshToken,t),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(s){var r,o;if(null===(r=this.commonLogger)||void 0===r||r.error("CacheManager.saveCacheRecord: failed"),s instanceof Error){var i,a;if(null===(i=this.commonLogger)||void 0===i||i.errorPii("CacheManager.saveCacheRecord: ".concat(s.message),t),"QuotaExceededError"===s.name||"NS_ERROR_DOM_QUOTA_REACHED"===s.name||s.message.includes("exceeded the quota"))throw null===(a=this.commonLogger)||void 0===a||a.error("CacheManager.saveCacheRecord: exceeded storage quota",t),new sb(ob);throw new sb(s.name,s.message)}throw null===(o=this.commonLogger)||void 0===o||o.errorPii("CacheManager.saveCacheRecord: ".concat(s),t),new sb(ib)}}async saveAccessToken(e,t){const n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},r=this.getTokenKeys(),o=My.fromString(e.target),i=[];r.accessToken.forEach((e=>{if(!this.accessTokenKeyMatchesFilter(e,n,!1))return;const t=this.getAccessTokenCredential(e);if(t&&this.credentialMatchesFilter(t,n)){My.fromString(t.target).intersectingScopeSets(o)&&i.push(this.removeAccessToken(e))}})),await Promise.all(i),await this.setAccessTokenCredential(e,t)}getAccountsFilteredBy(e){const t=this.getAccountKeys(),n=[];return t.forEach((t=>{var r;if(!this.isAccountKey(t,e.homeAccountId))return;const o=this.getAccount(t,this.commonLogger);if(!o)return;if(e.homeAccountId&&!this.matchHomeAccountId(o,e.homeAccountId))return;if(e.username&&!this.matchUsername(o.username,e.username))return;if(e.environment&&!this.matchEnvironment(o,e.environment))return;if(e.realm&&!this.matchRealm(o,e.realm))return;if(e.nativeAccountId&&!this.matchNativeAccountId(o,e.nativeAccountId))return;if(e.authorityType&&!this.matchAuthorityType(o,e.authorityType))return;const i={localAccountId:null===e||void 0===e?void 0:e.localAccountId,name:null===e||void 0===e?void 0:e.name},a=null===(r=o.tenantProfiles)||void 0===r?void 0:r.filter((e=>this.tenantProfileMatchesFilter(e,i)));a&&0===a.length||n.push(o)})),n}isAccountKey(e,t,n){return!(e.split(rm).length<3)&&(!(t&&!e.toLowerCase().includes(t.toLowerCase()))&&!(n&&!e.toLowerCase().includes(n.toLowerCase())))}isCredentialKey(e){if(e.split(rm).length<6)return!1;const t=e.toLowerCase();if(-1===t.indexOf(im.ID_TOKEN.toLowerCase())&&-1===t.indexOf(im.ACCESS_TOKEN.toLowerCase())&&-1===t.indexOf(im.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===t.indexOf(im.REFRESH_TOKEN.toLowerCase()))return!1;if(t.indexOf(im.REFRESH_TOKEN.toLowerCase())>-1){const e="".concat(im.REFRESH_TOKEN).concat(rm).concat(this.clientId).concat(rm),n="".concat(im.REFRESH_TOKEN).concat(rm).concat(sm).concat(rm);if(-1===t.indexOf(e.toLowerCase())&&-1===t.indexOf(n.toLowerCase()))return!1}else if(-1===t.indexOf(this.clientId.toLowerCase()))return!1;return!0}credentialMatchesFilter(e,t){if(t.clientId&&!this.matchClientId(e,t.clientId))return!1;if(t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash))return!1;if("string"===typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId))return!1;if(t.environment&&!this.matchEnvironment(e,t.environment))return!1;if(t.realm&&!this.matchRealm(e,t.realm))return!1;if(t.credentialType&&!this.matchCredentialType(e,t.credentialType))return!1;if(t.familyId&&!this.matchFamilyId(e,t.familyId))return!1;if(t.target&&!this.matchTarget(e,t.target))return!1;if((t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash)return!1;if(e.credentialType===im.ACCESS_TOKEN_WITH_AUTH_SCHEME){if(t.tokenType&&!this.matchTokenType(e,t.tokenType))return!1;if(t.tokenType===gm.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId))return!1}return!0}getAppMetadataFilteredBy(e){const t=this.getKeys(),n={};return t.forEach((t=>{if(!this.isAppMetadata(t))return;const r=this.getAppMetadata(t);r&&(e.environment&&!this.matchEnvironment(r,e.environment)||e.clientId&&!this.matchClientId(r,e.clientId)||(n[t]=r))})),n}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let n=null;return t.forEach((t=>{if(!this.isAuthorityMetadata(t)||-1===t.indexOf(this.clientId))return;const r=this.getAuthorityMetadata(t);r&&-1!==r.aliases.indexOf(e)&&(n=r)})),n}async removeAllAccounts(){const e=this.getAccountKeys(),t=[];e.forEach((e=>{t.push(this.removeAccount(e))})),await Promise.all(t)}async removeAccount(e){const t=this.getAccount(e,this.commonLogger);t&&(await this.removeAccountContext(t),this.removeItem(e))}async removeAccountContext(e){const t=this.getTokenKeys(),n=e.generateAccountId(),r=[];t.idToken.forEach((e=>{0===e.indexOf(n)&&this.removeIdToken(e)})),t.accessToken.forEach((e=>{0===e.indexOf(n)&&r.push(this.removeAccessToken(e))})),t.refreshToken.forEach((e=>{0===e.indexOf(n)&&this.removeRefreshToken(e)})),await Promise.all(r)}async removeAccessToken(e){const t=this.getAccessTokenCredential(e);if(t){if(t.credentialType.toLowerCase()===im.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&t.tokenType===gm.POP){const e=t.keyId;if(e)try{await this.cryptoImpl.removeTokenBindingKey(e)}catch(n){throw Lv(_v)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach((e=>{this.isAppMetadata(e)&&this.removeItem(e)})),!0}readAccountFromCache(e){const t=Yy.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,n,r,o){this.commonLogger.trace("CacheManager - getIdToken called");const i={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:im.ID_TOKEN,clientId:this.clientId,realm:n},a=this.getIdTokensByFilter(i,t),s=a.size;if(s<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(s>1){let t=a;if(!n){const n=new Map;a.forEach(((t,r)=>{t.realm===e.tenantId&&n.set(r,t)}));const r=n.size;if(r<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(1===r)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),n.values().next().value;t=n}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),t.forEach(((e,t)=>{this.removeIdToken(t)})),r&&o&&r.addFields({multiMatchedID:a.size},o),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t){const n=t&&t.idToken||this.getTokenKeys().idToken,r=new Map;return n.forEach((t=>{if(!this.idTokenKeyMatchesFilter(t,l({clientId:this.clientId},e)))return;const n=this.getIdTokenCredential(t);n&&this.credentialMatchesFilter(n,e)&&r.set(t,n)})),r}idTokenKeyMatchesFilter(e,t){const n=e.toLowerCase();return(!t.clientId||-1!==n.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==n.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,n,r,o,i){this.commonLogger.trace("CacheManager - getAccessToken called");const a=My.createSearchScopes(t.scopes),s=t.authenticationScheme||gm.BEARER,u=s&&s.toLowerCase()!==gm.BEARER.toLowerCase()?im.ACCESS_TOKEN_WITH_AUTH_SCHEME:im.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:u,clientId:this.clientId,realm:r||e.tenantId,target:a,tokenType:s,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},c=n&&n.accessToken||this.getTokenKeys().accessToken,d=[];c.forEach((e=>{if(this.accessTokenKeyMatchesFilter(e,l,!0)){const t=this.getAccessTokenCredential(e);t&&this.credentialMatchesFilter(t,l)&&d.push(t)}}));const h=d.length;return h<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):h>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),d.forEach((e=>{this.removeAccessToken(Zv(e))})),o&&i&&o.addFields({multiMatchedAT:d.length},i),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),d[0])}accessTokenKeyMatchesFilter(e,t,n){const r=e.toLowerCase();if(t.clientId&&-1===r.indexOf(t.clientId.toLowerCase()))return!1;if(t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))return!1;if(t.realm&&-1===r.indexOf(t.realm.toLowerCase()))return!1;if(t.requestedClaimsHash&&-1===r.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){const e=t.target.asArray();for(let t=0;t<e.length;t++){if(n&&!r.includes(e[t].toLowerCase()))return!1;if(!n&&r.includes(e[t].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const t=this.getTokenKeys(),n=[];return t.accessToken.forEach((t=>{if(!this.accessTokenKeyMatchesFilter(t,e,!0))return;const r=this.getAccessTokenCredential(t);r&&this.credentialMatchesFilter(r,e)&&n.push(r)})),n}getRefreshToken(e,t,n,r,o){this.commonLogger.trace("CacheManager - getRefreshToken called");const i=t?sm:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:im.REFRESH_TOKEN,clientId:this.clientId,familyId:i},s=n&&n.refreshToken||this.getTokenKeys().refreshToken,u=[];s.forEach((e=>{if(this.refreshTokenKeyMatchesFilter(e,a)){const t=this.getRefreshTokenCredential(e);t&&this.credentialMatchesFilter(t,a)&&u.push(t)}}));const l=u.length;return l<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(l>1&&r&&o&&r.addFields({multiMatchedRT:l},o),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),u[0])}refreshTokenKeyMatchesFilter(e,t){const n=e.toLowerCase();return(!t.familyId||-1!==n.indexOf(t.familyId.toLowerCase()))&&(!(!t.familyId&&t.clientId&&-1===n.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==n.indexOf(t.homeAccountId.toLowerCase())))}readAppMetadataFromCache(e){const t={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(t),r=Object.keys(n).map((e=>n[e])),o=r.length;if(o<1)return null;if(o>1)throw Lv(lv);return r[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!(!t||t.familyId!==sm)}matchHomeAccountId(e,t){return!("string"!==typeof e.homeAccountId||t!==e.homeAccountId)}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){var n;return!(t.toLowerCase()!==(null===(n=e.name)||void 0===n?void 0:n.toLowerCase()))}matchUsername(e,t){return!(!e||"string"!==typeof e||(null===t||void 0===t?void 0:t.toLowerCase())!==e.toLowerCase())}matchUserAssertionHash(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const n=function(e,t){let n;const r=e.canonicalAuthority;if(r){var o;const i=new $y(r).getUrlComponents().HostNameAndPort;n=nb(i,null===(o=e.cloudDiscoveryMetadata)||void 0===o?void 0:o.metadata,cm,t)||nb(i,eb.metadata,fm,t)||e.knownAuthorities}return n||[]}(this.staticAuthorityOptions,this.commonLogger);if(n.includes(t)&&n.includes(e.environment))return!0}const n=this.getAuthorityMetadataByAlias(t);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!(!e.clientId||t!==e.clientId)}matchFamilyId(e,t){return!(!e.familyId||t!==e.familyId)}matchRealm(e,t){var n;return!((null===(n=e.realm)||void 0===n?void 0:n.toLowerCase())!==t.toLowerCase())}matchNativeAccountId(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||(e.preferred_username===t||e.upn===t)}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!(!e.authorityType||t.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,t){if(e.credentialType!==im.ACCESS_TOKEN&&e.credentialType!==im.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)return!1;return My.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!(!e.tokenType||e.tokenType!==t)}matchKeyId(e,t){return!(!e.keyId||e.keyId!==t)}isAppMetadata(e){return-1!==e.indexOf(am)}isAuthorityMetadata(e){return-1!==e.indexOf(um)}generateAuthorityMetadataCacheKey(e){return"".concat(um,"-").concat(this.clientId,"-").concat(e)}static toObject(e,t){for(const n in t)e[n]=t[n];return e}}class lb extends ub{async setAccount(){throw Lv(Mv)}getAccount(){throw Lv(Mv)}async setIdTokenCredential(){throw Lv(Mv)}getIdTokenCredential(){throw Lv(Mv)}async setAccessTokenCredential(){throw Lv(Mv)}getAccessTokenCredential(){throw Lv(Mv)}async setRefreshTokenCredential(){throw Lv(Mv)}getRefreshTokenCredential(){throw Lv(Mv)}setAppMetadata(){throw Lv(Mv)}getAppMetadata(){throw Lv(Mv)}setServerTelemetry(){throw Lv(Mv)}getServerTelemetry(){throw Lv(Mv)}setAuthorityMetadata(){throw Lv(Mv)}getAuthorityMetadata(){throw Lv(Mv)}getAuthorityMetadataKeys(){throw Lv(Mv)}setThrottlingCache(){throw Lv(Mv)}getThrottlingCache(){throw Lv(Mv)}removeItem(){throw Lv(Mv)}getKeys(){throw Lv(Mv)}getAccountKeys(){throw Lv(Mv)}getTokenKeys(){throw Lv(Mv)}}const cb={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},db={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Bm.Info,correlationId:xg.EMPTY_STRING},hb={claimsBasedCachingEnabled:!1},fb={async sendGetRequestAsync(){throw Lv(Mv)},async sendPostRequestAsync(){throw Lv(Mv)}},pb={sku:xg.SKU,version:Uv,cpu:xg.EMPTY_STRING,os:xg.EMPTY_STRING},gb={clientSecret:xg.EMPTY_STRING,clientAssertion:void 0},mb={azureCloudInstance:Hm,tenant:"".concat(xg.DEFAULT_COMMON_TENANT)},vb={application:{appName:"",appVersion:""}};function yb(e){return e.authOptions.authority.options.protocolMode===Lm}const bb={sendGetRequestAsync:()=>Promise.reject(Lv(Mv)),sendPostRequestAsync:()=>Promise.reject(Lv(Mv))},Db="acquireTokenByCode",Cb="acquireTokenByRefreshToken",wb="acquireTokenSilent",Eb="acquireTokenSilentAsync",kb="acquireTokenPopup",Fb="acquireTokenPreRedirect",xb="acquireTokenRedirect",Ab="cryptoOptsGetPublicKeyThumbprint",Sb="cryptoOptsSignJwt",_b="silentCacheClientAcquireToken",Ib="silentIframeClientAcquireToken",Pb="awaitConcurrentIframe",Tb="silentRefreshClientAcquireToken",Nb="ssoSilent",Rb="standardInteractionClientGetDiscoveredAuthority",Mb="nativeInteractionClientAcquireToken",Bb="networkClientSendPostRequestAsync",Ob="refreshTokenClientExecutePostToTokenEndpoint",zb="authorizationCodeClientExecutePostToTokenEndpoint",Lb="refreshTokenClientExecuteTokenRequest",jb="refreshTokenClientAcquireToken",Hb="refreshTokenClientAcquireTokenWithCachedRefreshToken",Ub="refreshTokenClientAcquireTokenByRefreshToken",qb="refreshTokenClientCreateTokenRequestBody",Wb="acquireTokenFromCache",Vb="silentFlowClientAcquireCachedToken",Kb="silentFlowClientGenerateResultFromCacheRecord",Gb="acquireTokenBySilentIframe",Yb="initializeBaseRequest",Zb="initializeSilentRequest",Qb="initializeClientApplication",Xb="initializeCache",$b="silentIframeClientTokenHelper",Jb="silentHandlerInitiateAuthRequest",eD="silentHandlerMonitorIframeForHash",tD="silentHandlerLoadFrame",nD="silentHandlerLoadFrameSync",rD="standardInteractionClientCreateAuthCodeClient",oD="standardInteractionClientGetClientConfiguration",iD="standardInteractionClientInitializeAuthorizationRequest",aD="getAuthCodeUrl",sD="getStandardParams",uD="handleCodeResponseFromServer",lD="handleCodeResponse",cD="handleResponseEar",dD="handleResponsePlatformBroker",hD="handleResponseCode",fD="updateTokenEndpointAuthority",pD="authClientAcquireToken",gD="authClientExecuteTokenRequest",mD="authClientCreateTokenRequestBody",vD="popTokenGenerateCnf",yD="popTokenGenerateKid",bD="handleServerTokenResponse",DD="deserializeResponse",CD="authorityFactoryCreateDiscoveredInstance",wD="authorityResolveEndpointsAsync",ED="authorityGetCloudDiscoveryMetadataFromNetwork",kD="authorityUpdateCloudDiscoveryMetadata",FD="authorityGetEndpointMetadataFromNetwork",xD="authorityUpdateEndpointMetadata",AD="authorityUpdateMetadataWithRegionalInformation",SD="regionDiscoveryDetectRegion",_D="regionDiscoveryGetRegionFromIMDS",ID="regionDiscoveryGetCurrentVersion",PD="acquireTokenByCodeAsync",TD="handleRedirectPromise",ND="handleNativeRedirectPromise",RD="nativeMessageHandlerHandshake",MD="removeHiddenIframe",BD="clearTokensAndKeysWithClaims",OD="cacheManagerGetRefreshToken",zD="importExistingCache",LD="setUserData",jD="localStorageUpdated",HD="generatePkceCodes",UD="generateCodeVerifier",qD="generateCodeChallengeFromVerifier",WD="sha256Digest",VD="getRandomValues",KD="generateHKDF",GD="generateBaseKey",YD="base64Decode",ZD="urlEncodeArr",QD="encrypt",XD="decrypt",$D="generateEarKey",JD="decryptEarResponse",eC=(new Map([[Db,"ATByCode"],[Cb,"ATByRT"],[wb,"ATS"],[Eb,"ATSAsync"],[kb,"ATPopup"],[xb,"ATRedirect"],[Ab,"CryptoGetPKThumb"],[Sb,"CryptoSignJwt"],[_b,"SltCacheClientAT"],[Ib,"SltIframeClientAT"],[Tb,"SltRClientAT"],[Nb,"SsoSlt"],[Rb,"StdIntClientGetDiscAuth"],["fetchAccountIdWithNativeBroker","FetchAccIdWithNtvBroker"],[Mb,"NtvIntClientAT"],["baseClientCreateTokenRequestHeaders","BaseClientCreateTReqHead"],[Bb,"NetClientSendPost"],[Ob,"RTClientExecPost"],[zb,"AuthCodeClientExecPost"],["brokerHandshake","BrokerHandshake"],["acquireTokenByRefreshTokenInBroker","ATByRTInBroker"],["acquireTokenByBroker","ATByBroker"],[Lb,"RTClientExecTReq"],[jb,"RTClientAT"],[Hb,"RTClientATWithCachedRT"],[Ub,"RTClientATByRT"],[qb,"RTClientCreateTReqBody"],[Wb,"ATFromCache"],[Vb,"SltFlowClientATCached"],[Kb,"SltFlowClientGenResFromCache"],[Gb,"ATBySltIframe"],[Yb,"InitBaseReq"],[Zb,"InitSltReq"],[Qb,"InitClientApplication"],[Xb,"InitCache"],[zD,"importCache"],[LD,"setUserData"],[jD,"localStorageUpdated"],[$b,"SIClientTHelper"],[Jb,"SHandlerInitAuthReq"],[eD,"SltHandlerMonitorIframeForHash"],[tD,"SHandlerLoadFrame"],[nD,"SHandlerLoadFrameSync"],[rD,"StdIntClientCreateAuthCodeClient"],[oD,"StdIntClientGetClientConf"],[iD,"StdIntClientInitAuthReq"],[aD,"GetAuthCodeUrl"],[uD,"HandleCodeResFromServer"],[lD,"HandleCodeResp"],[cD,"HandleRespEar"],[hD,"HandleRespCode"],[dD,"HandleRespPlatBroker"],[fD,"UpdTEndpointAuth"],[pD,"AuthClientAT"],[gD,"AuthClientExecTReq"],[mD,"AuthClientCreateTReqBody"],[vD,"PopTGenCnf"],[yD,"PopTGenKid"],[bD,"HandleServerTRes"],[DD,"DeserializeRes"],[CD,"AuthFactCreateDiscInst"],[wD,"AuthResolveEndpointsAsync"],["authorityResolveEndpointsFromLocalSources","AuthResolveEndpointsFromLocal"],[ED,"AuthGetCDMetaFromNet"],[kD,"AuthUpdCDMeta"],[FD,"AuthUpdCDMetaFromNet"],[xD,"AuthUpdEndpointMeta"],[AD,"AuthUpdMetaWithRegInfo"],[SD,"RegDiscDetectReg"],[_D,"RegDiscGetRegFromIMDS"],[ID,"RegDiscGetCurrentVer"],[PD,"ATByCodeAsync"],["getEndpointMetadataFromNetwork","GetEndpointMetaFromNet"],["getCloudDiscoveryMetadataFromNetworkMeasurement","GetCDMetaFromNet"],[TD,"HandleRedirectPromise"],[ND,"HandleNtvRedirectPromise"],["updateCloudDiscoveryMetadataMeasurement","UpdateCDMeta"],["usernamePasswordClientAcquireToken","UserPassClientAT"],[RD,"NtvMsgHandlerHandshake"],["nativeGenerateAuthResult","NtvGenAuthRes"],[MD,"RemoveHiddenIframe"],[BD,"ClearTAndKeysWithClaims"],[OD,"CacheManagerGetRT"],[HD,"GenPkceCodes"],[UD,"GenCodeVerifier"],[qD,"GenCodeChallengeFromVerifier"],[WD,"Sha256Digest"],[VD,"GetRandomValues"],[KD,"genHKDF"],[GD,"genBaseKey"],[YD,"b64Decode"],[ZD,"urlEncArr"],[QD,"encrypt"],[XD,"decrypt"],[$D,"genEarKey"],[JD,"decryptEarResp"]]),1);new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT","unencryptedCacheCount","encryptedCacheExpiredCount"]);class tC{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class nC{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:eC,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new tC}}startPerformanceMeasurement(){return new tC}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const rC="invalid_grant",oC=483,iC=600,aC="msal",sC=30,uC="msal.js.browser",lC="53ee284d-920a-4b59-9d30-a60315b26836",cC="ppnbnpeolgkicgegkbkbjmhlideopiji",dC="MATS",hC="Handshake",fC="HandshakeResponse",pC="GetToken",gC="Response",mC="localStorage",vC="sessionStorage",yC="memoryStorage",bC="GET",DC="POST",CC="signin",wC="signout",EC="request.origin",kC="urlHash",FC="request.params",xC="code.verifier",AC="interaction.status",SC="request.native",_C="msal.account.keys",IC="msal.token.keys",PC="wrapper.sku",TC="wrapper.version",NC=861,RC=862,MC=863,BC=865,OC=866,zC=61,LC=961,jC=962;var HC;!function(e){e.Redirect="redirect",e.Popup="popup",e.Silent="silent",e.None="none"}(HC||(HC={}));const UC="startup",qC="login",WC="logout",VC="acquireToken",KC="ssoSilent",GC="handleRedirect",YC="none",ZC={scopes:Pg},QC="@azure/msal-react",XC="msal.db",$C="".concat(XC,".keys"),JC=0,ew=1,tw=2,nw=3,rw=4,ow=5,iw=[JC,ow,rw];class aw{navigateInternal(e,t){return aw.defaultNavigateWindow(e,t)}navigateExternal(e,t){return aw.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise((e=>{setTimeout((()=>{e(!0)}),t.timeout)}))}}class sw extends Vm{constructor(e,t,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,sw.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=n}}function uw(e,t,n,r){return e.errorMessage="".concat(e.errorMessage,", additionalErrorInfo: error.name:").concat(null===r||void 0===r?void 0:r.name,", error.message:").concat(null===r||void 0===r?void 0:r.message),new sw(e,t,n)}const lw="pkce_not_created",cw="ear_jwk_empty",dw="ear_jwe_empty",hw="crypto_nonexistent",fw="empty_navigate_uri",pw="hash_empty_error",gw="no_state_in_hash",mw="hash_does_not_contain_known_properties",vw="unable_to_parse_state",yw="state_interaction_type_mismatch",bw="interaction_in_progress",Dw="popup_window_error",Cw="empty_window_error",ww="user_cancelled",Ew="monitor_popup_timeout",kw="monitor_window_timeout",Fw="redirect_in_iframe",xw="block_iframe_reload",Aw="block_nested_popups",Sw="iframe_closed_prematurely",_w="silent_logout_unsupported",Iw="no_account_error",Pw="silent_prompt_value_error",Tw="no_token_request_cache_error",Nw="unable_to_parse_token_request_cache_error",Rw="auth_request_not_set_error",Mw="invalid_cache_type",Bw="non_browser_environment",Ow="database_not_open",zw="no_network_connectivity",Lw="post_request_failed",jw="get_request_failed",Hw="failed_to_parse_response",Uw="unable_to_load_token",qw="crypto_key_not_found",Ww="auth_code_required",Vw="auth_code_or_nativeAccountId_required",Kw="spa_code_and_nativeAccountId_present",Gw="database_unavailable",Yw="unable_to_acquire_token_from_native_platform",Zw="native_handshake_timeout",Qw="native_extension_not_installed",Xw="native_connection_not_established",$w="uninitialized_public_client_application",Jw="native_prompt_not_supported",eE="invalid_base64_string",tE="invalid_pop_token_request",nE="failed_to_build_headers",rE="failed_to_parse_headers",oE="failed_to_decrypt_ear_response",iE="For more visit: aka.ms/msaljs/browser-errors",aE={[lw]:"The PKCE code challenge and verifier could not be generated.",[cw]:"No EAR encryption key provided. This is unexpected.",[dw]:"Server response does not contain ear_jwe property. This is unexpected.",[hw]:"The crypto object or function is not available.",[fw]:"Navigation URI is empty. Please check stack trace for more info.",[pw]:"Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ".concat(iE),[gw]:"Hash does not contain state. Please verify that the request originated from msal.",[mw]:"Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ".concat(iE),[vw]:"Unable to parse state. Please verify that the request originated from msal.",[yw]:"Hash contains state but the interaction type does not match the caller.",[bw]:"Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ".concat(iE),[Dw]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[Cw]:"window.open returned null or undefined window object.",[ww]:"User cancelled the flow.",[Ew]:"Token acquisition in popup failed due to timeout.  ".concat(iE),[kw]:"Token acquisition in iframe failed due to timeout.  ".concat(iE),[Fw]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[xw]:"Request was blocked inside an iframe because MSAL detected an authentication response.  ".concat(iE),[Aw]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[Sw]:"The iframe being monitored was closed prematurely.",[_w]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[Iw]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[Pw]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[Tw]:"No token request found in cache.",[Nw]:"The cached token request could not be parsed.",[Rw]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Mw]:"Invalid cache type",[Bw]:"Login and token requests are not supported in non-browser environments.",[Ow]:"Database is not open!",[zw]:"No network connectivity. Check your internet connection.",[Lw]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[jw]:"Network request failed. Please check the network trace to determine root cause.",[Hw]:"Failed to parse network response. Check network trace.",[Uw]:"Error loading token to cache.",[qw]:"Cryptographic Key or Keypair not found in browser storage.",[Ww]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Vw]:"An authorization code or nativeAccountId must be provided to this flow.",[Kw]:"Request cannot contain both spa code and native account id.",[Gw]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[Yw]:"Unable to acquire token from native platform.  ".concat(iE),[Zw]:"Timed out while attempting to establish connection to browser extension",[Qw]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[Xw]:"Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ".concat(iE),[$w]:"You must call and await the initialize function before attempting to call any other MSAL API.  ".concat(iE),[Jw]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[eE]:"Invalid base64 encoded string.",[tE]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[nE]:"Failed to build request headers object.",[rE]:"Failed to parse response headers",[oE]:"Failed to decrypt ear response"};class sE extends Vm{constructor(e,t){super(e,aE[e],t),Object.setPrototypeOf(this,sE.prototype),this.name="BrowserAuthError"}}function uE(e,t){return new sE(e,t)}class lE{async sendGetRequestAsync(e,t){let n,r={},o=0;const i=cE(t);try{n=await fetch(e,{method:bC,headers:i})}catch(a){throw uw(uE(window.navigator.onLine?jw:zw),void 0,void 0,a)}r=dE(n.headers);try{return o=n.status,{headers:r,body:await n.json(),status:o}}catch(a){throw uw(uE(Hw),o,r,a)}}async sendPostRequestAsync(e,t){const n=t&&t.body||"",r=cE(t);let o,i=0,a={};try{o=await fetch(e,{method:DC,headers:r,body:n})}catch(s){throw uw(uE(window.navigator.onLine?Lw:zw),void 0,void 0,s)}a=dE(o.headers);try{return i=o.status,{headers:a,body:await o.json(),status:i}}catch(s){throw uw(uE(Hw),i,a,s)}}}function cE(e){try{const t=new Headers;if(!e||!e.headers)return t;const n=e.headers;return Object.entries(n).forEach((e=>{let[n,r]=e;t.append(n,r)})),t}catch(t){throw uw(uE(nE),void 0,void 0,t)}}function dE(e){try{const t={};return e.forEach(((e,n)=>{t[n]=e})),t}catch(t){throw uE(rE)}}function hE(e){return encodeURIComponent(pE(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function fE(e){return gE(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function pE(e){return gE((new TextEncoder).encode(e))}function gE(e){const t=Array.from(e,(e=>String.fromCodePoint(e))).join("");return btoa(t)}function mE(e){return(new TextDecoder).decode(vE(e))}function vE(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw uE(eE)}const n=atob(t);return Uint8Array.from(n,(e=>e.codePointAt(0)||0))}const yE="AES-GCM",bE="HKDF",DE="SHA-256",CE=new Uint8Array([1,0,1]),wE="0123456789abcdef",EE=new Uint32Array(1),kE="raw",FE="encrypt",xE="decrypt",AE={name:"RSASSA-PKCS1-v1_5",hash:DE,modulusLength:2048,publicExponent:CE};async function SE(e,t,n){null===t||void 0===t||t.addQueueMeasurement(WD,n);const r=(new TextEncoder).encode(e);return window.crypto.subtle.digest(DE,r)}function _E(e){return window.crypto.getRandomValues(e)}function IE(){return window.crypto.getRandomValues(EE),EE[0]}function PE(){const e=Date.now(),t=1024*IE()+(1023&IE()),n=new Uint8Array(16),r=Math.trunc(t/2**30),o=t&2**30-1,i=IE();n[0]=e/2**40,n[1]=e/2**32,n[2]=e/2**24,n[3]=e/65536,n[4]=e/256,n[5]=e,n[6]=112|r>>>8,n[7]=r,n[8]=128|o>>>24,n[9]=o>>>16,n[10]=o>>>8,n[11]=o,n[12]=i>>>24,n[13]=i>>>16,n[14]=i>>>8,n[15]=i;let a="";for(let s=0;s<n.length;s++)a+=wE.charAt(n[s]>>>4),a+=wE.charAt(15&n[s]),3!==s&&5!==s&&7!==s&&9!==s||(a+="-");return a}async function TE(e){return window.crypto.subtle.exportKey("jwk",e)}async function NE(){const e=await ME(),t={alg:"dir",kty:"oct",k:fE(new Uint8Array(e))};return pE(JSON.stringify(t))}async function RE(e,t){const n=t.split(".");if(5!==n.length)throw uE(oE,"jwe_length");const r=await async function(e){const t=mE(e),n=vE(JSON.parse(t).k);return window.crypto.subtle.importKey(kE,n,yE,!1,[xE])}(e).catch((()=>{throw uE(oE,"import_key")}));try{const e=(new TextEncoder).encode(n[0]),t=vE(n[2]),o=vE(n[3]),i=vE(n[4]),a=8*i.byteLength,s=new Uint8Array(o.length+i.length);s.set(o),s.set(i,o.length);const u=await window.crypto.subtle.decrypt({name:yE,iv:t,tagLength:a,additionalData:e},r,s);return(new TextDecoder).decode(u)}catch(o){throw uE(oE,"decrypt")}}async function ME(){const e=await window.crypto.subtle.generateKey({name:yE,length:256},!0,[FE,xE]);return window.crypto.subtle.exportKey(kE,e)}async function BE(e){return window.crypto.subtle.importKey(kE,e,bE,!1,["deriveKey"])}async function OE(e,t,n){return window.crypto.subtle.deriveKey({name:bE,salt:t,hash:DE,info:(new TextEncoder).encode(n)},e,{name:yE,length:256},!1,[FE,xE])}async function zE(e,t,n){const r=(new TextEncoder).encode(t),o=window.crypto.getRandomValues(new Uint8Array(16)),i=await OE(e,o,n),a=await window.crypto.subtle.encrypt({name:yE,iv:new Uint8Array(12)},i,r);return{data:fE(new Uint8Array(a)),nonce:fE(o)}}async function LE(e,t,n,r){const o=vE(r),i=await OE(e,vE(t),n),a=await window.crypto.subtle.decrypt({name:yE,iv:new Uint8Array(12)},i,o);return(new TextDecoder).decode(a)}async function jE(e){const t=await SE(e);return fE(new Uint8Array(t))}const HE="storage_not_supported",UE="stubbed_public_client_application_called",qE="in_mem_redirect_unavailable",WE={[HE]:"Given storage configuration option was not supported.",[UE]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[qE]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class VE extends Vm{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,VE.prototype)}}function KE(e){return new VE(e,WE[e])}function GE(e){e.location.hash="","function"===typeof e.history.replaceState&&e.history.replaceState(null,"","".concat(e.location.origin).concat(e.location.pathname).concat(e.location.search))}function YE(){return window.parent!==window}function ZE(){return"undefined"!==typeof window&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function QE(){if("undefined"!==typeof window&&window.opener&&window.opener!==window&&"string"===typeof window.name&&0===window.name.indexOf("".concat(aC,".")))throw uE(Aw)}function XE(){if("undefined"===typeof window)throw uE(Bw)}function $E(e){if(!e)throw uE($w)}function JE(e){XE(),function(){if($y.hashContainsKnownProperties(window.location.hash)&&YE())throw uE(xw)}(),QE(),$E(e)}function ek(e,t){if(JE(e),function(e){if(YE()&&!e)throw uE(Fw)}(t.system.allowRedirectInIframe),t.cache.cacheLocation===yC&&!t.cache.storeAuthStateInCookie)throw KE(qE)}function tk(e){const t=document.createElement("link");t.rel="preconnect",t.href=new URL(e).origin,t.crossOrigin="anonymous",document.head.appendChild(t),window.setTimeout((()=>{try{document.head.removeChild(t)}catch(e){}}),1e4)}const nk=1e4;const rk="4.12.0";class ok{static loggerCallback(e,t){switch(e){case Bm.Error:return void console.error(t);case Bm.Info:return void console.info(t);case Bm.Verbose:return void console.debug(t);case Bm.Warning:return void console.warn(t);default:return void console.log(t)}}constructor(e){var t,n;let r;this.browserEnvironment="undefined"!==typeof window,this.config=function(e,t){let{auth:n,cache:r,system:o,telemetry:i}=e;const a={clientId:xg.EMPTY_STRING,authority:"".concat(xg.DEFAULT_AUTHORITY),knownAuthorities:[],cloudDiscoveryMetadata:xg.EMPTY_STRING,authorityMetadata:xg.EMPTY_STRING,redirectUri:"undefined"!==typeof window?ZE():"",postLogoutRedirectUri:xg.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:zm,OIDCOptions:{serverResponseType:Qg,defaultScopes:[xg.OPENID_SCOPE,xg.PROFILE_SCOPE,xg.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:Hm,tenant:xg.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},s={cacheLocation:vC,temporaryCacheLocation:vC,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!r||r.cacheLocation!==mC),claimsBasedCachingEnabled:!1},u={loggerCallback:()=>{},logLevel:Bm.Info,piiLoggingEnabled:!1},c=l(l({},cb),{},{loggerOptions:u,networkClient:t?new lE:bb,navigationClient:new aw,loadFrameTimeout:0,windowHashTimeout:(null===o||void 0===o?void 0:o.loadFrameTimeout)||6e4,iframeHashTimeout:(null===o||void 0===o?void 0:o.loadFrameTimeout)||nk,navigateFrameWait:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:(null===o||void 0===o?void 0:o.nativeBrokerHandshakeTimeout)||2e3,pollIntervalMilliseconds:sC}),d=l(l(l({},c),o),{},{loggerOptions:(null===o||void 0===o?void 0:o.loggerOptions)||u}),h={application:{appName:xg.EMPTY_STRING,appVersion:xg.EMPTY_STRING},client:new nC};(null===n||void 0===n?void 0:n.protocolMode)!==Lm&&null!==n&&void 0!==n&&n.OIDCOptions&&new Om(d.loggerOptions).warning(JSON.stringify(Ny(Sy)));if(null!==n&&void 0!==n&&n.protocolMode&&n.protocolMode===Lm&&null!==d&&void 0!==d&&d.allowPlatformBroker)throw Ny(_y);return{auth:l(l(l({},a),n),{},{OIDCOptions:l(l({},a.OIDCOptions),null===n||void 0===n?void 0:n.OIDCOptions)}),cache:l(l({},s),r),system:d,telemetry:l(l({},h),i)}}(e,this.browserEnvironment);try{r=window[vC]}catch(c){}const o=null===(t=r)||void 0===t?void 0:t.getItem("msal.browser.log.level"),i=null===(n=r)||void 0===n||null===(n=n.getItem("msal.browser.log.pii"))||void 0===n?void 0:n.toLowerCase(),a="true"===i||"false"!==i&&void 0,s=l({},this.config.system.loggerOptions),u=o&&Object.keys(Bm).includes(o)?Bm[o]:void 0;u&&(s.loggerCallback=ok.loggerCallback,s.logLevel=u),void 0!==a&&(s.piiLoggingEnabled=a),this.logger=new Om(s,"@azure/msal-browser",rk),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class ik extends ok{getModuleName(){return ik.MODULE_NAME}getId(){return ik.ID}async initialize(){return this.available="undefined"!==typeof window,this.available}}ik.MODULE_NAME="",ik.ID="StandardOperatingContext";const ak="missing_kid_error",sk="missing_alg_error",uk={[ak]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[sk]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class lk extends Vm{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,lk.prototype)}}function ck(e){return new lk(e,uk[e])}class dk{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw ck(ak);if(!e.alg)throw ck(sk);const t=new dk({typ:e.typ||Mm,kid:e.kid,alg:e.alg});return JSON.stringify(t)}}class hk{constructor(){this.dbName=XC,this.version=1,this.tableName=$C,this.dbOpen=!1}async open(){return new Promise(((e,t)=>{const n=window.indexedDB.open(this.dbName,this.version);n.addEventListener("upgradeneeded",(e=>{e.target.result.createObjectStore(this.tableName)})),n.addEventListener("success",(t=>{const n=t;this.db=n.target.result,this.dbOpen=!0,e()})),n.addEventListener("error",(()=>t(uE(Gw))))}))}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise(((t,n)=>{if(!this.db)return n(uE(Ow));const r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);r.addEventListener("success",(e=>{const n=e;this.closeConnection(),t(n.target.result)})),r.addEventListener("error",(e=>{this.closeConnection(),n(e)}))}))}async setItem(e,t){return await this.validateDbIsOpen(),new Promise(((n,r)=>{if(!this.db)return r(uE(Ow));const o=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);o.addEventListener("success",(()=>{this.closeConnection(),n()})),o.addEventListener("error",(e=>{this.closeConnection(),r(e)}))}))}async removeItem(e){return await this.validateDbIsOpen(),new Promise(((t,n)=>{if(!this.db)return n(uE(Ow));const r=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);r.addEventListener("success",(()=>{this.closeConnection(),t()})),r.addEventListener("error",(e=>{this.closeConnection(),n(e)}))}))}async getKeys(){return await this.validateDbIsOpen(),new Promise(((e,t)=>{if(!this.db)return t(uE(Ow));const n=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();n.addEventListener("success",(t=>{const n=t;this.closeConnection(),e(n.target.result)})),n.addEventListener("error",(e=>{this.closeConnection(),t(e)}))}))}async containsKey(e){return await this.validateDbIsOpen(),new Promise(((t,n)=>{if(!this.db)return n(uE(Ow));const r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);r.addEventListener("success",(e=>{const n=e;this.closeConnection(),t(1===n.target.result)})),r.addEventListener("error",(e=>{this.closeConnection(),n(e)}))}))}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise(((e,t)=>{const n=window.indexedDB.deleteDatabase(XC),r=setTimeout((()=>t(!1)),200);n.addEventListener("success",(()=>(clearTimeout(r),e(!0)))),n.addEventListener("blocked",(()=>(clearTimeout(r),e(!0)))),n.addEventListener("error",(()=>(clearTimeout(r),t(!1))))}))}}class fk{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach(((t,n)=>{e.push(n)})),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}class pk{constructor(e){this.inMemoryCache=new fk,this.indexedDBCache=new hk,this.logger=e}handleDatabaseAccessError(e){if(!(e instanceof sE&&e.errorCode===Gw))throw e;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")}async getItem(e){const t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(n){this.handleDatabaseAccessError(n)}return t}async setItem(e,t){this.inMemoryCache.setItem(e,t);try{await this.indexedDBCache.setItem(e,t)}catch(n){this.handleDatabaseAccessError(n)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(0===e.length)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e}async containsKey(e){const t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(n){this.handleDatabaseAccessError(n)}return t}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}class gk{constructor(e,t,n){this.logger=e,function(e){if(!window)throw uE(Bw);if(!window.crypto)throw uE(hw);if(!e&&!window.crypto.subtle)throw uE(hw,"crypto_subtle_undefined")}(null!==n&&void 0!==n&&n),this.cache=new pk(this.logger),this.performanceClient=t}createNewGuid(){return PE()}base64Encode(e){return pE(e)}base64Decode(e){return mE(e)}base64UrlEncode(e){return hE(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var t;const n=null===(t=this.performanceClient)||void 0===t?void 0:t.startMeasurement(Ab,e.correlationId),r=await async function(e,t){return window.crypto.subtle.generateKey(AE,e,t)}(gk.EXTRACTABLE,gk.POP_KEY_USAGES),o=await TE(r.publicKey),i=mk({e:o.e,kty:o.kty,n:o.n}),a=await this.hashString(i),s=await TE(r.privateKey),u=await async function(e,t,n){return window.crypto.subtle.importKey("jwk",e,AE,t,n)}(s,!1,["sign"]);return await this.cache.setItem(a,{privateKey:u,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),n&&n.end({success:!0}),a}async removeTokenBindingKey(e){await this.cache.removeItem(e);return!await this.cache.containsKey(e)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error("Clearing keystore failed with error: ".concat(e.message)):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,t,n,r){var o;const i=null===(o=this.performanceClient)||void 0===o?void 0:o.startMeasurement(Sb,r),a=await this.cache.getItem(t);if(!a)throw uE(qw);const s=await TE(a.publicKey),u=mk(s),c=hE(JSON.stringify({kid:t})),d=hE(dk.getShrHeaderString(l(l({},null===n||void 0===n?void 0:n.header),{},{alg:s.alg,kid:c})));e.cnf={jwk:JSON.parse(u)};const h=hE(JSON.stringify(e)),f="".concat(d,".").concat(h),p=(new TextEncoder).encode(f),g=await async function(e,t){return window.crypto.subtle.sign(AE,e,t)}(a.privateKey,p),m=fE(new Uint8Array(g)),v="".concat(f,".").concat(m);return i&&i.end({success:!0}),v}async hashString(e){return jE(e)}}function mk(e){return JSON.stringify(e,Object.keys(e).sort())}gk.POP_KEY_USAGES=["sign","verify"],gk.EXTRACTABLE=!0;const vk=(e,t,n,r,o)=>function(){n.trace("Executing function ".concat(t));const i=null===r||void 0===r?void 0:r.startMeasurement(t,o);if(o){const e=t+"CallCount";null===r||void 0===r||r.incrementFields({[e]:1},o)}try{const r=e(...arguments);return null===i||void 0===i||i.end({success:!0}),n.trace("Returning result from ".concat(t)),r}catch(a){n.trace("Error occurred in ".concat(t));try{n.trace(JSON.stringify(a))}catch(a){n.trace("Unable to print error message.")}throw null===i||void 0===i||i.end({success:!1},a),a}},yk=(e,t,n,r,o)=>function(){n.trace("Executing function ".concat(t));const i=null===r||void 0===r?void 0:r.startMeasurement(t,o);if(o){const e=t+"CallCount";null===r||void 0===r||r.incrementFields({[e]:1},o)}return null===r||void 0===r||r.setPreQueueTime(t,o),e(...arguments).then((e=>(n.trace("Returning result from ".concat(t)),null===i||void 0===i||i.end({success:!0}),e))).catch((e=>{n.trace("Error occurred in ".concat(t));try{n.trace(JSON.stringify(e))}catch(e){n.trace("Unable to print error message.")}throw null===i||void 0===i||i.end({success:!1},e),e}))};class bk{constructor(e,t,n,r){this.networkInterface=e,this.logger=t,this.performanceClient=n,this.correlationId=r}async detectRegion(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(SD,this.correlationId);let r=e;if(r)t.region_source=Fm;else{const e=bk.IMDS_OPTIONS;try{const n=await yk(this.getRegionFromIMDS.bind(this),_D,this.logger,this.performanceClient,this.correlationId)(xg.IMDS_VERSION,e);if(n.status===wm&&(r=n.body,t.region_source=xm),n.status===Em){const n=await yk(this.getCurrentVersion.bind(this),ID,this.logger,this.performanceClient,this.correlationId)(e);if(!n)return t.region_source=km,null;const o=await yk(this.getRegionFromIMDS.bind(this),_D,this.logger,this.performanceClient,this.correlationId)(n,e);o.status===wm&&(r=o.body,t.region_source=xm)}}catch(o){return t.region_source=km,null}}return r||(t.region_source=km),r||null}async getRegionFromIMDS(e,t){var n;return null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(_D,this.correlationId),this.networkInterface.sendGetRequestAsync("".concat(xg.IMDS_ENDPOINT,"?api-version=").concat(e,"&format=text"),t,xg.IMDS_TIMEOUT)}async getCurrentVersion(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(ID,this.correlationId);try{const t=await this.networkInterface.sendGetRequestAsync("".concat(xg.IMDS_ENDPOINT,"?format=json"),e);return t.status===Em&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0?t.body["newest-versions"][0]:null}catch(n){return null}}}bk.IMDS_OPTIONS={headers:{Metadata:"true"}};class Dk{constructor(e,t,n,r,o,i,a,s){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=n,this.authorityOptions=r,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=o,this.performanceClient=a,this.correlationId=i,this.managedIdentity=s||!1,this.regionDiscovery=new bk(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(xg.CIAM_AUTH_URL))return Ky;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case xg.ADFS:return Wy;case xg.DSTS:return Vy}return qy}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new $y(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Lv(Xm)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Lv(Xm)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Lv(Xm)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Lv(Iv);return this.replacePath(this.metadata.end_session_endpoint)}throw Lv(Xm)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Lv(Xm)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Lv(Xm)}canReplaceTenant(e){return 1===e.PathSegments.length&&!Dk.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===qy&&this.protocolMode!==Lm}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const n=new $y(this.metadata.canonical_authority).getUrlComponents(),r=n.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach(((e,o)=>{let i=r[o];if(0===o&&this.canReplaceTenant(n)){const e=new $y(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];i!==e&&(this.logger.verbose("Replacing tenant domain name ".concat(i," with id ").concat(e)),i=e)}e!==i&&(t=t.replace("/".concat(i,"/"),"/".concat(e,"/")))})),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Wy||this.protocolMode===Lm&&!this.isAliasOfKnownMicrosoftAuthority(e)?"".concat(this.canonicalAuthority,".well-known/openid-configuration"):"".concat(this.canonicalAuthority,"v2.0/.well-known/openid-configuration")}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var e,t;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(wD,this.correlationId);const n=this.getCurrentMetadataEntity(),r=await yk(this.updateCloudDiscoveryMetadata.bind(this),kD,this.logger,this.performanceClient,this.correlationId)(n);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,n.preferred_network);const o=await yk(this.updateEndpointMetadata.bind(this),xD,this.logger,this.performanceClient,this.correlationId)(n);this.updateCachedMetadata(n,r,{source:o}),null===(t=this.performanceClient)||void 0===t||t.addFields({cloudDiscoverySource:r,authorityEndpointSource:o},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:iy(),jwks_uri:""}),e}updateCachedMetadata(e,t,n){t!==dm&&(null===n||void 0===n?void 0:n.source)!==dm&&(e.expiresAt=iy(),e.canonical_authority=this.canonicalAuthority);const r=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(r,e),this.metadata=e}async updateEndpointMetadata(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(xD,this.correlationId);const n=this.updateEndpointMetadataFromLocalSources(e);if(n){var r;if(n.source===fm)if(null!==(r=this.authorityOptions.azureRegionConfiguration)&&void 0!==r&&r.azureRegion&&n.metadata){ay(e,await yk(this.updateMetadataWithRegionalInformation.bind(this),AD,this.logger,this.performanceClient,this.correlationId)(n.metadata),!1),e.canonical_authority=this.canonicalAuthority}return n.source}let o=await yk(this.getEndpointMetadataFromNetwork.bind(this),FD,this.logger,this.performanceClient,this.correlationId)();var i;if(o)return null!==(i=this.authorityOptions.azureRegionConfiguration)&&void 0!==i&&i.azureRegion&&(o=await yk(this.updateMetadataWithRegionalInformation.bind(this),AD,this.logger,this.performanceClient,this.correlationId)(o)),ay(e,o,!0),hm;throw Lv(Jm,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),ay(e,t,!1),{source:cm};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const t=this.getEndpointMetadataFromHardcodedValues();if(t)return ay(e,t,!1),{source:fm,metadata:t};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const n=uy(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:dm}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new $y(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(e){throw Ny(wy)}return null}async getEndpointMetadataFromNetwork(){var e;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(FD,this.correlationId);const t={},n=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose("Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ".concat(n));try{const e=await this.networkInterface.sendGetRequestAsync(n,t),r=function(e){return e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("jwks_uri")}(e.body);return r?e.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(r){return this.logger.verbose("Authority.getEndpointMetadataFromNetwork: ".concat(r)),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Jy?Jy[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var t,n;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(AD,this.correlationId);const r=null===(n=this.authorityOptions.azureRegionConfiguration)||void 0===n?void 0:n.azureRegion;if(r){var o;if(r!==xg.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Am,this.regionDiscoveryMetadata.region_used=r,Dk.replaceWithRegionalInformation(e,r);const t=await yk(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),SD,this.logger,this.performanceClient,this.correlationId)(null===(o=this.authorityOptions.azureRegionConfiguration)||void 0===o?void 0:o.environmentRegion,this.regionDiscoveryMetadata);if(t)return this.regionDiscoveryMetadata.region_outcome=Sm,this.regionDiscoveryMetadata.region_used=t,Dk.replaceWithRegionalInformation(e,t);this.regionDiscoveryMetadata.region_outcome=_m}return e}async updateCloudDiscoveryMetadata(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(kD,this.correlationId);const n=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(n)return n;const r=await yk(this.getCloudDiscoveryMetadataFromNetwork.bind(this),ED,this.logger,this.performanceClient,this.correlationId)();if(r)return sy(e,r,!0),hm;throw Ny(Ey)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii("Known Authorities: ".concat(this.authorityOptions.knownAuthorities||xg.NOT_APPLICABLE)),this.logger.verbosePii("Authority Metadata: ".concat(this.authorityOptions.authorityMetadata||xg.NOT_APPLICABLE)),this.logger.verbosePii("Canonical Authority: ".concat(e.canonical_authority||xg.NOT_APPLICABLE));const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),sy(e,t,!1),cm;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const t=(n=this.hostnameAndPort,rb(eb.metadata,n));if(t)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),sy(e,t,!1),fm;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}var n;const r=uy(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),dm):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Ky)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),Dk.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=rb(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),e)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),e;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(e){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Ny(Cy)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),Dk.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var e;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(ED,this.correlationId);const t="".concat(xg.AAD_INSTANCE_DISCOVERY_ENDPT).concat(this.canonicalAuthority,"oauth2/v2.0/authorize"),n={};let r=null;try{const e=await this.networkInterface.sendGetRequestAsync(t,n);let o,i;if(function(e){return e.hasOwnProperty("tenant_discovery_endpoint")&&e.hasOwnProperty("metadata")}(e.body))o=e.body,i=o.metadata,this.logger.verbosePii("tenant_discovery_endpoint is: ".concat(o.tenant_discovery_endpoint));else{if(!function(e){return e.hasOwnProperty("error")&&e.hasOwnProperty("error_description")}(e.body))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(this.logger.warning("A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ".concat(e.status)),o=e.body,o.error===xg.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning("The CloudInstanceDiscoveryErrorResponse error is ".concat(o.error)),this.logger.warning("The CloudInstanceDiscoveryErrorResponse error description is ".concat(o.error_description)),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),i=[]}this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=rb(i,this.hostnameAndPort)}catch(o){if(o instanceof Vm)this.logger.error("There was a network error while attempting to get the cloud discovery instance metadata.\nError: ".concat(o.errorCode,"\nError Description: ").concat(o.errorMessage));else{const e=o;this.logger.error("A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ".concat(e.name,"\nError Description: ").concat(e.message))}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=Dk.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter((e=>e&&$y.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort)).length>0}static generateAuthority(e,t){let n;if(t&&t.azureCloudInstance!==Hm){const e=t.tenant?t.tenant:xg.DEFAULT_COMMON_TENANT;n="".concat(t.azureCloudInstance,"/").concat(e,"/")}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return xg.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Lv(Xm)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return tb.has(e)}static isPublicCloudAuthority(e){return xg.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,n){const r=new $y(e);r.validateAsUri();const o=r.getUrlComponents();let i="".concat(t,".").concat(o.HostNameAndPort);this.isPublicCloudAuthority(o.HostNameAndPort)&&(i="".concat(t,".").concat(xg.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX));const a=$y.constructAuthorityUriFromObject(l(l({},r.getUrlComponents()),{},{HostNameAndPort:i})).urlString;return n?"".concat(a,"?").concat(n):a}static replaceWithRegionalInformation(e,t){const n=l({},e);return n.authorization_endpoint=Dk.buildRegionalAuthorityString(n.authorization_endpoint,t),n.token_endpoint=Dk.buildRegionalAuthorityString(n.token_endpoint,t),n.end_session_endpoint&&(n.end_session_endpoint=Dk.buildRegionalAuthorityString(n.end_session_endpoint,t)),n}static transformCIAMAuthority(e){let t=e;const n=new $y(e).getUrlComponents();if(0===n.PathSegments.length&&n.HostNameAndPort.endsWith(xg.CIAM_AUTH_URL)){const e=n.HostNameAndPort.split(".")[0];t="".concat(t).concat(e).concat(xg.AAD_TENANT_DOMAIN_SUFFIX)}return t}}function Ck(e){return e.endsWith(xg.FORWARD_SLASH)?e:"".concat(e).concat(xg.FORWARD_SLASH)}Dk.reservedTenantDomains=new Set(["{tenant}","{tenantid}",jg,Ug,Hg]);const wk="no_tokens_found",Ek="native_account_unavailable",kk="refresh_token_expired",Fk="bad_token",xk=["interaction_required","consent_required","login_required",Fk],Ak=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Sk={[wk]:"No refresh token found in the cache. Please sign-in.",[Ek]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[kk]:"Refresh token has expired.",[Fk]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class _k extends Vm{constructor(e,t,n,r,o,i,a,s){super(e,t,n),Object.setPrototypeOf(this,_k.prototype),this.timestamp=r||xg.EMPTY_STRING,this.traceId=o||xg.EMPTY_STRING,this.correlationId=i||xg.EMPTY_STRING,this.claims=a||xg.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=s}}function Ik(e,t,n){const r=!!e&&xk.indexOf(e)>-1,o=!!n&&Ak.indexOf(n)>-1,i=!!t&&xk.some((e=>t.indexOf(e)>-1));return r||i||o}function Pk(e){return new _k(e,Sk[e])}function Tk(e,t,n){var r;return{clientId:e,authority:t.authority,scopes:t.scopes,homeAccountIdentifier:n,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid,embeddedClientId:t.embeddedClientId||(null===(r=t.tokenBodyParameters)||void 0===r?void 0:r.clientId)}}const Nk=864e5,Rk="Lax",Mk="None";class Bk{initialize(){return Promise.resolve()}getItem(e){const t="".concat(encodeURIComponent(e)),n=document.cookie.split(";");for(let r=0;r<n.length;r++){const e=n[r],[o,...i]=decodeURIComponent(e).trim().split("="),a=i.join("=");if(o===t)return a}return""}getUserData(){throw Lv(Mv)}setItem(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Rk,i="".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t),";path=/;SameSite=").concat(o,";");if(n){const e=function(e){const t=new Date,n=new Date(t.getTime()+e*Nk);return n.toUTCString()}(n);i+="expires=".concat(e,";")}(r||o===Mk)&&(i+="Secure;"),document.cookie=i}async setUserData(){return Promise.reject(Lv(Mv))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),t=[];return e.forEach((e=>{const n=decodeURIComponent(e).trim().split("=");t.push(n[0])})),t}containsKey(e){return this.getKeys().includes(e)}}function Ok(e){const t=e.getItem(_C);return t?JSON.parse(t):[]}function zk(e,t){const n=t.getItem("".concat(IC,".").concat(e));if(n){const e=JSON.parse(n);if(e&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("accessToken")&&e.hasOwnProperty("refreshToken"))return e}return{idToken:[],accessToken:[],refreshToken:[]}}const Lk="msal.cache.encryption";class jk{constructor(e,t,n){if(!window.localStorage)throw KE(HE);this.memoryStorage=new fk,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=n,this.broadcast=new BroadcastChannel("msal.broadcast.cache")}async initialize(e){const t=new Bk,n=t.getItem(Lk);let r={key:"",id:""};if(n)try{r=JSON.parse(n)}catch(o){}if(r.key&&r.id){const t=vk(vE,YD,this.logger,this.performanceClient,e)(r.key);this.encryptionCookie={id:r.id,key:await yk(BE,KD,this.logger,this.performanceClient,e)(t)},await yk(this.importExistingCache.bind(this),zD,this.logger,this.performanceClient,e)(e)}else{this.clear();const n=PE(),r=await yk(ME,GD,this.logger,this.performanceClient,e)(),o=vk(fE,ZD,this.logger,this.performanceClient,e)(new Uint8Array(r));this.encryptionCookie={id:n,key:await yk(BE,KD,this.logger,this.performanceClient,e)(r)};const i={id:n,key:o};t.setItem(Lk,JSON.stringify(i),0,!0,Mk)}this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw uE($w);return this.memoryStorage.getItem(e)}setItem(e,t){window.localStorage.setItem(e,t)}async setUserData(e,t,n){if(!this.initialized||!this.encryptionCookie)throw uE($w);const{data:r,nonce:o}=await yk(zE,QD,this.logger,this.performanceClient,n)(this.encryptionCookie.key,t,this.getContext(e)),i={id:this.encryptionCookie.id,nonce:o,data:r};this.memoryStorage.setItem(e,t),this.setItem(e,JSON.stringify(i)),this.broadcast.postMessage({key:e,value:t,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear();Ok(this).forEach((e=>this.removeItem(e)));const e=zk(this.clientId,this);e.idToken.forEach((e=>this.removeItem(e))),e.accessToken.forEach((e=>this.removeItem(e))),e.refreshToken.forEach((e=>this.removeItem(e))),this.getKeys().forEach((e=>{(e.startsWith(xg.CACHE_PREFIX)||-1!==e.indexOf(this.clientId))&&this.removeItem(e)}))}async importExistingCache(e){if(!this.encryptionCookie)return;let t=Ok(this);t=await this.importArray(t,e),this.setItem(_C,JSON.stringify(t));const n=zk(this.clientId,this);n.idToken=await this.importArray(n.idToken,e),n.accessToken=await this.importArray(n.accessToken,e),n.refreshToken=await this.importArray(n.refreshToken,e),this.setItem("".concat(IC,".").concat(this.clientId),JSON.stringify(n))}async getItemFromEncryptedCache(e,t){if(!this.encryptionCookie)return null;const n=this.getItem(e);if(!n)return null;let r;try{r=JSON.parse(n)}catch(o){return null}return r.id&&r.nonce&&r.data?r.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):yk(LE,XD,this.logger,this.performanceClient,t)(this.encryptionCookie.key,r.nonce,this.getContext(e),r.data):(this.performanceClient.incrementFields({unencryptedCacheCount:1},t),null)}async importArray(e,t){const n=[],r=[];return e.forEach((e=>{const o=this.getItemFromEncryptedCache(e,t).then((t=>{t?(this.memoryStorage.setItem(e,t),n.push(e)):this.removeItem(e)}));r.push(o)})),await Promise.all(r),n}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const t=this.performanceClient.startMeasurement(jD);t.add({isBackground:!0});const{key:n,value:r,context:o}=e.data;return n?o&&o!==this.clientId?(this.logger.trace("Ignoring broadcast event from clientId: ".concat(o)),void t.end({success:!1,errorCode:"contextMismatch"})):(r?(this.memoryStorage.setItem(n,r),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(n),this.logger.verbose("Removed item from internal cache")),void t.end({success:!0})):(this.logger.error("Broadcast event missing key"),void t.end({success:!1,errorCode:"noKey"}))}}class Hk{constructor(){if(!window.sessionStorage)throw KE(HE)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}}const Uk="msal:initializeStart",qk="msal:initializeEnd",Wk="msal:accountAdded",Vk="msal:accountRemoved",Kk="msal:activeAccountChanged",Gk="msal:loginStart",Yk="msal:loginSuccess",Zk="msal:loginFailure",Qk="msal:acquireTokenStart",Xk="msal:acquireTokenSuccess",$k="msal:acquireTokenFailure",Jk="msal:acquireTokenFromNetworkStart",eF="msal:ssoSilentStart",tF="msal:ssoSilentSuccess",nF="msal:ssoSilentFailure",rF="msal:acquireTokenByCodeStart",oF="msal:acquireTokenByCodeSuccess",iF="msal:acquireTokenByCodeFailure",aF="msal:handleRedirectStart",sF="msal:handleRedirectEnd",uF="msal:popupOpened",lF="msal:logoutStart",cF="msal:logoutSuccess",dF="msal:logoutFailure",hF="msal:logoutEnd",fF="msal:restoreFromBFCache";class pF extends ub{constructor(e,t,n,r,o,i,a){super(e,n,r,a),this.cacheConfig=t,this.logger=r,this.internalStorage=new fk,this.browserStorage=gF(e,t.cacheLocation,r,o),this.temporaryCacheStorage=gF(e,t.temporaryCacheLocation,r,o),this.cookieStorage=new Bk,this.performanceClient=o,this.eventHandler=i}async initialize(e){await this.browserStorage.initialize(e)}validateAndParseJson(e){try{const t=JSON.parse(e);return t&&"object"===typeof t?t:null}catch(t){return null}}getAccount(e){this.logger.trace("BrowserCacheManager.getAccount called");const t=this.browserStorage.getUserData(e);if(!t)return this.removeAccountKeyFromMap(e),null;const n=this.validateAndParseJson(t);return n&&Yy.isAccountEntity(n)?ub.toObject(new Yy,n):(this.removeAccountKeyFromMap(e),null)}async setAccount(e,t){this.logger.trace("BrowserCacheManager.setAccount called");const n=e.generateAccountKey();await yk(this.browserStorage.setUserData.bind(this.browserStorage),LD,this.logger,this.performanceClient)(n,JSON.stringify(e),t);const r=this.addAccountKeyToMap(n);this.cacheConfig.cacheLocation===mC&&r&&this.eventHandler.emitEvent(Wk,void 0,e.getAccountInfo())}getAccountKeys(){return Ok(this.browserStorage)}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii("BrowserCacheManager.addAccountKeyToMap called with key: ".concat(e));const t=this.getAccountKeys();return-1===t.indexOf(e)?(t.push(e),this.browserStorage.setItem(_C,JSON.stringify(t)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii("BrowserCacheManager.removeAccountKeyFromMap called with key: ".concat(e));const t=this.getAccountKeys(),n=t.indexOf(e);n>-1?(t.splice(n,1),this.browserStorage.setItem(_C,JSON.stringify(t)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}async removeAccount(e){super.removeAccount(e),this.removeAccountKeyFromMap(e)}async removeAccountContext(e){await super.removeAccountContext(e),this.cacheConfig.cacheLocation===mC&&this.eventHandler.emitEvent(Vk,void 0,e.getAccountInfo())}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,im.ID_TOKEN)}async removeAccessToken(e){super.removeAccessToken(e),this.removeTokenKey(e,im.ACCESS_TOKEN)}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,im.REFRESH_TOKEN)}getTokenKeys(){return zk(this.clientId,this.browserStorage)}addTokenKey(e,t){this.logger.trace("BrowserCacheManager addTokenKey called");const n=this.getTokenKeys();switch(t){case im.ID_TOKEN:-1===n.idToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),n.idToken.push(e));break;case im.ACCESS_TOKEN:-1===n.accessToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),n.accessToken.push(e));break;case im.REFRESH_TOKEN:-1===n.refreshToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),n.refreshToken.push(e));break;default:throw this.logger.error("BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ".concat(t)),Lv(wv)}this.browserStorage.setItem("".concat(IC,".").concat(this.clientId),JSON.stringify(n))}removeTokenKey(e,t){this.logger.trace("BrowserCacheManager removeTokenKey called");const n=this.getTokenKeys();switch(t){case im.ID_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ".concat(e," from map"));const r=n.idToken.indexOf(e);r>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),n.idToken.splice(r,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case im.ACCESS_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ".concat(e," from map"));const o=n.accessToken.indexOf(e);o>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),n.accessToken.splice(o,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case im.REFRESH_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ".concat(e," from map"));const i=n.refreshToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),n.refreshToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error("BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ".concat(t)),Lv(wv)}this.browserStorage.setItem("".concat(IC,".").concat(this.clientId),JSON.stringify(n))}getIdTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,im.ID_TOKEN),null;const n=this.validateAndParseJson(t);return n&&(r=n)&&Jv(r)&&r.hasOwnProperty("realm")&&r.credentialType===im.ID_TOKEN?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,im.ID_TOKEN),null);var r}async setIdTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const n=Zv(e);await yk(this.browserStorage.setUserData.bind(this.browserStorage),LD,this.logger,this.performanceClient)(n,JSON.stringify(e),t),this.addTokenKey(n,im.ID_TOKEN)}getAccessTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,im.ACCESS_TOKEN),null;const n=this.validateAndParseJson(t);return n&&(r=n)&&Jv(r)&&r.hasOwnProperty("realm")&&r.hasOwnProperty("target")&&(r.credentialType===im.ACCESS_TOKEN||r.credentialType===im.ACCESS_TOKEN_WITH_AUTH_SCHEME)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,im.ACCESS_TOKEN),null);var r}async setAccessTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const n=Zv(e);await yk(this.browserStorage.setUserData.bind(this.browserStorage),LD,this.logger,this.performanceClient)(n,JSON.stringify(e),t),this.addTokenKey(n,im.ACCESS_TOKEN)}getRefreshTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,im.REFRESH_TOKEN),null;const n=this.validateAndParseJson(t);return n&&(r=n)&&Jv(r)&&r.credentialType===im.REFRESH_TOKEN?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,im.REFRESH_TOKEN),null);var r}async setRefreshTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const n=Zv(e);await yk(this.browserStorage.setUserData.bind(this.browserStorage),LD,this.logger,this.performanceClient)(n,JSON.stringify(e),t),this.addTokenKey(n,im.REFRESH_TOKEN)}getAppMetadata(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&(r=e,(o=n)&&0===r.indexOf(am)&&o.hasOwnProperty("clientId")&&o.hasOwnProperty("environment"))?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),n):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null);var r,o}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");const t=function(e){let{environment:t,clientId:n}=e;return[am,t,n].join(rm).toLowerCase()}(e);this.browserStorage.setItem(t,JSON.stringify(e))}getServerTelemetry(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){const n=0===e.indexOf(pm.CACHE_KEY);let r=!0;return t&&(r=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),n&&r}(e,n)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),n):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(e,t){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.browserStorage.setItem(e,JSON.stringify(t))}getAuthorityMetadata(e){const t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){return!!t&&0===e.indexOf(um)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri")}(e,n)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),n):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter((e=>this.isAuthorityMetadata(e)))}setWrapperMetadata(e,t){this.internalStorage.setItem(PC,e),this.internalStorage.setItem(TC,t)}getWrapperMetadata(){return[this.internalStorage.getItem(PC)||xg.EMPTY_STRING,this.internalStorage.getItem(TC)||xg.EMPTY_STRING]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(){const e=this.generateCacheKey(Lg),t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const n=this.validateAndParseJson(t);return n?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:n.homeAccountId,localAccountId:n.localAccountId,tenantId:n.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){const t=this.generateCacheKey(Lg);if(e){this.logger.verbose("setActiveAccount: Active account set");const n={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(t,JSON.stringify(n))}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(t);this.eventHandler.emitEvent(Kk)}getThrottlingCache(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){let n=!1;e&&(n=0===e.indexOf(ym));let r=!0;return t&&(r=t.hasOwnProperty("throttleTime")),n&&r}(e,n)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),n):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(e,t){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.browserStorage.setItem(e,JSON.stringify(t))}getTemporaryCache(e,t){const n=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const e=this.cookieStorage.getItem(n);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),e}const r=this.temporaryCacheStorage.getItem(n);if(!r){if(this.cacheConfig.cacheLocation===mC){const e=this.browserStorage.getItem(n);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),e}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),r}setTemporaryCache(e,t,n){const r=n?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(r,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(r,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}async clear(){await this.removeAllAccounts(),this.removeAppMetadata(),this.temporaryCacheStorage.getKeys().forEach((e=>{-1===e.indexOf(xg.CACHE_PREFIX)&&-1===e.indexOf(this.clientId)||this.removeTemporaryItem(e)})),this.browserStorage.getKeys().forEach((e=>{-1===e.indexOf(xg.CACHE_PREFIX)&&-1===e.indexOf(this.clientId)||this.browserStorage.removeItem(e)})),this.internalStorage.clear()}async clearTokensAndKeysWithClaims(e,t){e.addQueueMeasurement(BD,t);const n=this.getTokenKeys(),r=[];n.accessToken.forEach((e=>{const t=this.getAccessTokenCredential(e);null!==t&&void 0!==t&&t.requestedClaimsHash&&e.includes(t.requestedClaimsHash.toLowerCase())&&r.push(this.removeAccessToken(e))})),await Promise.all(r),r.length>0&&this.logger.warning("".concat(r.length," access tokens with claims in the cache keys have been removed from the cache."))}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):Ry.startsWith(e,xg.CACHE_PREFIX)?e:"".concat(xg.CACHE_PREFIX,".").concat(this.clientId,".").concat(e)}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(FC)),this.removeTemporaryItem(this.generateCacheKey(xC)),this.removeTemporaryItem(this.generateCacheKey(EC)),this.removeTemporaryItem(this.generateCacheKey(kC)),this.removeTemporaryItem(this.generateCacheKey(SC)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,t){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const n=pE(JSON.stringify(e));if(this.setTemporaryCache(FC,n,!0),t){const e=pE(t);this.setTemporaryCache(xC,e,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache(FC,!0);if(!e)throw uE(Tw);const t=this.getTemporaryCache(xC,!0);let n,r="";try{n=JSON.parse(mE(e)),t&&(r=mE(t))}catch(o){throw this.logger.errorPii("Attempted to parse: ".concat(e)),this.logger.error("Parsing cached token request threw with error: ".concat(o)),uE(Nw)}return[n,r]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(SC,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){var t;const n=null===(t=this.getInteractionInProgress())||void 0===t?void 0:t.clientId;return e?n===this.clientId:!!n}getInteractionInProgress(){const e="".concat(xg.CACHE_PREFIX,".").concat(AC),t=this.getTemporaryCache(e,!1);try{return t?JSON.parse(t):null}catch(n){return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),GE(window),null}}setInteractionInProgress(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:CC;const r="".concat(xg.CACHE_PREFIX,".").concat(AC);if(e){if(this.getInteractionInProgress())throw uE(bw);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:n}),!1)}else e||(null===(t=this.getInteractionInProgress())||void 0===t?void 0:t.clientId)!==this.clientId||this.removeTemporaryItem(r)}async hydrateCache(e,t){var n,r,o;const i=Qv(null===(n=e.account)||void 0===n?void 0:n.homeAccountId,null===(r=e.account)||void 0===r?void 0:r.environment,e.idToken,this.clientId,e.tenantId);let a;t.claims&&(a=await this.cryptoImpl.hashString(t.claims));const s={idToken:i,accessToken:Xv(null===(o=e.account)||void 0===o?void 0:o.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?Kv(e.expiresOn):0,e.extExpiresOn?Kv(e.extExpiresOn):0,mE,void 0,e.tokenType,void 0,t.sshKid,t.claims,a)};return this.saveCacheRecord(s,e.correlationId)}async saveCacheRecord(e,t,n){try{await super.saveCacheRecord(e,t,n)}catch(r){if(r instanceof sb&&this.performanceClient&&t)try{const e=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:e.refreshToken.length,cacheIdCount:e.idToken.length,cacheAtCount:e.accessToken.length},t)}catch(r){}throw r}}}function gF(e,t,n,r){try{switch(t){case mC:return new jk(e,n,r);case vC:return new Hk}}catch(o){n.error(o)}return new fk}class mF{constructor(e){this.eventCallbacks=new Map,this.logger=e||new Om({}),"undefined"!==typeof BroadcastChannel&&(this.broadcastChannel=new BroadcastChannel("msal.broadcast.event")),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,n){if("undefined"!==typeof window){const r=n||PE();return this.eventCallbacks.has(r)?(this.logger.error("Event callback with id: ".concat(r," is already registered. Please provide a unique id or remove the existing callback and try again.")),null):(this.eventCallbacks.set(r,[e,t||[]]),this.logger.verbose("Event callback registered with id: ".concat(r)),r)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose("Event callback ".concat(e," removed."))}emitEvent(e,t,n,r){var o;const i={eventType:e,interactionType:t||null,payload:n||null,error:r||null,timestamp:Date.now()};switch(e){case Wk:case Vk:case Kk:null===(o=this.broadcastChannel)||void 0===o||o.postMessage(i);break;default:this.invokeCallbacks(i)}}invokeCallbacks(e){this.eventCallbacks.forEach(((t,n)=>{let[r,o]=t;(0===o.length||o.includes(e.eventType))&&(this.logger.verbose("Emitting event to callback ".concat(n,": ").concat(e.eventType)),r.apply(null,[e]))}))}invokeCrossTabCallbacks(e){const t=e.data;this.invokeCallbacks(t)}subscribeCrossTab(){var e;null===(e=this.broadcastChannel)||void 0===e||e.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){var e;null===(e=this.broadcastChannel)||void 0===e||e.removeEventListener("message",this.invokeCrossTabCallbacks)}}const vF="home_account_id",yF="UPN",bF="client_id",DF="redirect_uri",CF="token_type",wF="req_cnf",EF="return_spa_code",kF="x-client-xtra-sku",FF="brk_client_id",xF="brk_redirect_uri",AF="instance_aware";function SF(e,t,n){if(!t)return;const r=e.get(bF);r&&e.has(FF)&&(null===n||void 0===n||n.addFields({embeddedClientId:r,embeddedRedirectUri:e.get(DF)},t))}function _F(e,t){e.set("response_type",t)}function IF(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Pg;!n||r.includes("openid")||t.includes("openid")||r.push("openid");const o=n?[...t||[],...r]:t||[],i=new My(o);e.set("scope",i.printScopes())}function PF(e,t){e.set(bF,t)}function TF(e,t){e.set(DF,t)}function NF(e,t){e.set("login_hint",t)}function RF(e,t){e.set(Bg,"UPN:".concat(t))}function MF(e,t){e.set(Bg,"Oid:".concat(t.uid,"@").concat(t.utid))}function BF(e,t){e.set("sid",t)}function OF(e,t,n){const r=function(e,t){let n;if(e)try{n=JSON.parse(e)}catch(r){throw Ny(my)}else n={};t&&t.length>0&&(n.hasOwnProperty(qg)||(n[qg]={}),n[qg][Wg]={values:t});return JSON.stringify(n)}(t,n);try{JSON.parse(r)}catch(o){throw Ny(my)}e.set("claims",r)}function zF(e,t){e.set("client-request-id",t)}function LF(e,t){e.set("x-client-SKU",t.sku),e.set("x-client-VER",t.version),t.os&&e.set("x-client-OS",t.os),t.cpu&&e.set("x-client-CPU",t.cpu)}function jF(e,t){null!==t&&void 0!==t&&t.appName&&e.set("x-app-name",t.appName),null!==t&&void 0!==t&&t.appVersion&&e.set("x-app-ver",t.appVersion)}function HF(e,t){t&&e.set("state",t)}function UF(e,t){e.set("client_secret",t)}function qF(e,t){t&&e.set("client_assertion",t)}function WF(e,t){t&&e.set("client_assertion_type",t)}function VF(e,t){e.set("grant_type",t)}function KF(e){e.set("client_info","1")}function GF(e){e.has(AF)||e.set(AF,"true")}function YF(e,t){Object.entries(t).forEach((t=>{let[n,r]=t;!e.has(n)&&r&&e.set(n,r)}))}function ZF(e,t){t&&(e.set(CF,gm.POP),e.set(wF,t))}function QF(e,t){t&&(e.set(CF,gm.SSH),e.set(wF,t))}function XF(e,t){e.set("x-client-current-telemetry",t.generateCurrentRequestHeaderValue()),e.set("x-client-last-telemetry",t.generateLastRequestHeaderValue())}function $F(e){e.set("x-ms-lib-capability",bm)}function JF(e,t,n){e.has(FF)||e.set(FF,t),e.has(xF)||e.set(xF,n)}async function ex(e,t,n,r,o,i,a){null===a||void 0===a||a.addQueueMeasurement(CD,i);const s=Dk.transformCIAMAuthority(Ck(e)),u=new Dk(s,t,n,r,o,i,a);try{return await yk(u.resolveEndpointsAsync.bind(u),wD,o,a,i)(),u}catch(l){throw Lv(Xm)}}class tx extends Vm{constructor(e,t,n,r,o){super(e,t,n),this.name="ServerError",this.errorNo=r,this.status=o,Object.setPrototypeOf(this,tx.prototype)}}class nx{static generateThrottlingStorageKey(e){return"".concat(ym,".").concat(JSON.stringify(e))}static preProcess(e,t){const n=nx.generateThrottlingStorageKey(t),r=e.getThrottlingCache(n);if(r){var o;if(r.throttleTime<Date.now())return void e.removeItem(n);throw new tx((null===(o=r.errorCodes)||void 0===o?void 0:o.join(" "))||xg.EMPTY_STRING,r.errorMessage,r.subError)}}static postProcess(e,t,n){if(nx.checkResponseStatus(n)||nx.checkResponseForRetryAfter(n)){const r={throttleTime:nx.calculateThrottleTime(parseInt(n.headers[Mg])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(nx.generateThrottlingStorageKey(t),r)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&(e.headers.hasOwnProperty(Mg)&&(e.status<200||e.status>=300))}static calculateThrottleTime(e){const t=e<=0?0:e,n=Date.now()/1e3;return Math.floor(1e3*Math.min(n+(t||mm),n+vm))}static removeThrottle(e,t,n,r){const o=Tk(t,n,r),i=this.generateThrottlingStorageKey(o);e.removeItem(i)}}class rx{constructor(e,t){this.config=function(e){let{authOptions:t,systemOptions:n,loggerOptions:r,cacheOptions:o,storageInterface:i,networkInterface:a,cryptoInterface:s,clientCredentials:u,libraryInfo:c,telemetry:d,serverTelemetryManager:h,persistencePlugin:f,serializableCache:p}=e;const g=l(l({},db),r);return{authOptions:(m=t,l({clientCapabilities:[],azureCloudOptions:mb,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1},m)),systemOptions:l(l({},cb),n),loggerOptions:g,cacheOptions:l(l({},hb),o),storageInterface:i||new lb(t.clientId,jv,new Om(g)),networkInterface:a||fb,cryptoInterface:s||jv,clientCredentials:u||gb,libraryInfo:l(l({},pb),c),telemetry:l(l({},vb),d),serverTelemetryManager:h||null,persistencePlugin:f||null,serializableCache:p||null};var m}(e),this.logger=new Om(this.config.loggerOptions,Hv,Uv),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[Ng]=xg.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case vF:try{const n=Oy(e.credential);t[Bg]="Oid:".concat(n.uid,"@").concat(n.utid)}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case yF:t[Bg]="UPN: ".concat(e.credential)}return t}async executePostToTokenEndpoint(e,t,n,r,o,i){var a;i&&(null===(a=this.performanceClient)||void 0===a||a.addQueueMeasurement(i,o));const s=await this.sendPostRequest(r,e,{body:t,headers:n},o);return this.config.serverTelemetryManager&&s.status<500&&429!==s.status&&this.config.serverTelemetryManager.clearTelemetryCache(),s}async sendPostRequest(e,t,n,r){let o;nx.preProcess(this.cacheManager,e);try{var i,a;o=await yk(this.networkClient.sendPostRequestAsync.bind(this.networkClient),Bb,this.logger,this.performanceClient,r)(t,n);const e=o.headers||{};null===(i=this.performanceClient)||void 0===i||i.addFields({refreshTokenSize:(null===(a=o.body.refresh_token)||void 0===a?void 0:a.length)||0,httpVerToken:e[zg]||"",requestId:e[Og]||""},r)}catch(u){if(u instanceof sw){const e=u.responseHeaders;var s;if(e)null===(s=this.performanceClient)||void 0===s||s.addFields({httpVerToken:e[zg]||"",requestId:e[Og]||"",contentTypeHeader:e[Ng]||void 0,contentLengthHeader:e[Rg]||void 0,httpStatus:u.httpStatus},r);throw u.error}throw u instanceof Vm?u:Lv($m)}return nx.postProcess(this.cacheManager,e,o),o}async updateAuthority(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(fD,t);const r="https://".concat(e,"/").concat(this.authority.tenant,"/"),o=await ex(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=o}createTokenQueryParameters(e){const t=new Map;return e.embeddedClientId&&JF(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&YF(t,e.tokenQueryParameters),zF(t,e.correlationId),SF(t,e.correlationId,this.performanceClient),Xy(t)}}class ox{static setRequestState(e,t,n){const r=ox.generateLibraryState(e,n);return t?"".concat(r).concat(xg.RESOURCE_DELIM).concat(t):r}static generateLibraryState(e,t){if(!e)throw Lv(Cv);const n={id:e.createNewGuid()};t&&(n.meta=t);const r=JSON.stringify(n);return e.base64Encode(r)}static parseRequestState(e,t){if(!e)throw Lv(Cv);if(!t)throw Lv(tv);try{const n=t.split(xg.RESOURCE_DELIM),r=n[0],o=n.length>1?n.slice(1).join(xg.RESOURCE_DELIM):xg.EMPTY_STRING,i=e.base64Decode(r),a=JSON.parse(i);return{userRequestState:o||xg.EMPTY_STRING,libraryState:a}}catch(n){throw Lv(tv)}}}const ix="sw";class ax{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(vD,e.correlationId);const r=await yk(this.generateKid.bind(this),vD,t,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:o}}async generateKid(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(yD,e.correlationId);return{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:ix}}async signPopToken(e,t,n){return this.signPayload(e,t,n)}async signPayload(e,t,n,r){const{resourceRequestMethod:o,resourceRequestUri:i,shrClaims:a,shrNonce:s,shrOptions:u}=n,c=i?new $y(i):void 0,d=null===c||void 0===c?void 0:c.getUrlComponents();return this.cryptoUtils.signJwt(l({at:e,ts:Vv(),m:null===o||void 0===o?void 0:o.toUpperCase(),u:null===d||void 0===d?void 0:d.HostNameAndPort,nonce:s||this.cryptoUtils.createNewGuid(),p:null===d||void 0===d?void 0:d.AbsolutePath,q:null!==d&&void 0!==d&&d.QueryString?[[],d.QueryString]:void 0,client_claims:a||void 0},r),t,u,n.correlationId)}}class sx{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class ux{constructor(e,t,n,r,o,i,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=n,this.logger=r,this.serializableCache=o,this.persistencePlugin=i,this.performanceClient=a}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){var n;const r="Error(s): ".concat(e.error_codes||xg.NOT_AVAILABLE," - Timestamp: ").concat(e.timestamp||xg.NOT_AVAILABLE," - Description: ").concat(e.error_description||xg.NOT_AVAILABLE," - Correlation ID: ").concat(e.correlation_id||xg.NOT_AVAILABLE," - Trace ID: ").concat(e.trace_id||xg.NOT_AVAILABLE),o=null!==(n=e.error_codes)&&void 0!==n&&n.length?e.error_codes[0]:void 0,i=new tx(e.error,r,e.suberror,o,e.status);if(t&&e.status&&e.status>=_g&&e.status<=Ig)return void this.logger.warning("executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n".concat(i));if(t&&e.status&&e.status>=Ag&&e.status<=Sg)return void this.logger.warning("executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n".concat(i));if(Ik(e.error,e.error_description,e.suberror))throw new _k(e.error,e.error_description,e.suberror,e.timestamp||xg.EMPTY_STRING,e.trace_id||xg.EMPTY_STRING,e.correlation_id||xg.EMPTY_STRING,e.claims||xg.EMPTY_STRING,o);throw i}}async handleServerTokenResponse(e,t,n,r,o,i,a,s,u){var l;let c,d;if(null===(l=this.performanceClient)||void 0===l||l.addQueueMeasurement(bD,e.correlation_id),e.id_token){if(c=qv(e.id_token||xg.EMPTY_STRING,this.cryptoObj.base64Decode),o&&o.nonce&&c.nonce!==o.nonce)throw Lv(ov);if(r.maxAge||0===r.maxAge){const e=c.auth_time;if(!e)throw Lv(iv);Wv(e,r.maxAge)}}this.homeAccountIdentifier=Yy.generateHomeAccountId(e.client_info||xg.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,c),o&&o.state&&(d=ox.parseRequestState(this.cryptoObj,o.state)),e.key_id=e.key_id||r.sshKid||void 0;const h=this.generateCacheRecord(e,t,n,r,c,i,o);let f;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),f=new sx(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(f)),a&&!s&&h.account){const e=h.account.generateAccountKey();if(!this.cacheStorage.getAccount(e))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await ux.generateAuthenticationResult(this.cryptoObj,t,h,!1,r,c,d,void 0,u)}await this.cacheStorage.saveCacheRecord(h,r.correlationId,r.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&f&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(f))}return ux.generateAuthenticationResult(this.cryptoObj,t,h,!1,r,c,d,e,u)}generateCacheRecord(e,t,n,r,o,i,a){const s=t.getPreferredCache();if(!s)throw Lv(bv);const u=Gy(o);let l,c;e.id_token&&o&&(l=Qv(this.homeAccountIdentifier,s,e.id_token,this.clientId,u||""),c=lx(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o,e.client_info,s,u,a,void 0,this.logger));let d=null;if(e.access_token){const o=e.scope?My.fromString(e.scope):new My(r.scopes||[]),a=("string"===typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,l=("string"===typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,c=("string"===typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,h=n+a,f=h+l,p=c&&c>0?n+c:void 0;d=Xv(this.homeAccountIdentifier,s,e.access_token,this.clientId,u||t.tenant||"",o.printScopes(),h,f,this.cryptoObj.base64Decode,p,e.token_type,i,e.key_id,r.claims,r.requestedClaimsHash)}let h=null;if(e.refresh_token){let t;if(e.refresh_token_expires_in){t=n+("string"===typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)}h=$v(this.homeAccountIdentifier,s,e.refresh_token,this.clientId,e.foci,i,t)}let f=null;return e.foci&&(f={clientId:this.clientId,environment:s,familyId:e.foci}),{account:c,idToken:l,accessToken:d,refreshToken:h,appMetadata:f}}static async generateAuthenticationResult(e,t,n,r,o,i,a,s,u){var l,c,d,h,f;let p,g,m=xg.EMPTY_STRING,v=[],y=null,b=xg.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType!==gm.POP||o.popKid)m=n.accessToken.secret;else{const t=new ax(e),{secret:r,keyId:i}=n.accessToken;if(!i)throw Lv(Pv);m=await t.signPopToken(r,i,o)}v=My.fromString(n.accessToken.target).asArray(),y=Gv(n.accessToken.expiresOn),p=Gv(n.accessToken.extendedExpiresOn),n.accessToken.refreshOn&&(g=Gv(n.accessToken.refreshOn))}n.appMetadata&&(b=n.appMetadata.familyId===sm?sm:"");const D=(null===i||void 0===i?void 0:i.oid)||(null===i||void 0===i?void 0:i.sub)||"",C=(null===i||void 0===i?void 0:i.tid)||"";null!==s&&void 0!==s&&s.spa_accountid&&n.account&&(n.account.nativeAccountId=null===s||void 0===s?void 0:s.spa_accountid);const w=n.account?Uy(n.account.getAccountInfo(),void 0,i,null===(l=n.idToken)||void 0===l?void 0:l.secret):null;return{authority:t.canonicalAuthority,uniqueId:D,tenantId:C,scopes:v,account:w,idToken:(null===n||void 0===n||null===(c=n.idToken)||void 0===c?void 0:c.secret)||"",idTokenClaims:i||{},accessToken:m,fromCache:r,expiresOn:y,extExpiresOn:p,refreshOn:g,correlationId:o.correlationId,requestId:u||xg.EMPTY_STRING,familyId:b,tokenType:(null===(d=n.accessToken)||void 0===d?void 0:d.tokenType)||xg.EMPTY_STRING,state:a?a.userRequestState:xg.EMPTY_STRING,cloudGraphHostName:(null===(h=n.account)||void 0===h?void 0:h.cloudGraphHostName)||xg.EMPTY_STRING,msGraphHost:(null===(f=n.account)||void 0===f?void 0:f.msGraphHost)||xg.EMPTY_STRING,code:null===s||void 0===s?void 0:s.spa_code,fromNativeBroker:!1}}}function lx(e,t,n,r,o,i,a,s,u,l,c){null===c||void 0===c||c.verbose("setCachedAccount called");const d=e.getAccountKeys().find((e=>e.startsWith(n)));let h=null;d&&(h=e.getAccount(d));const f=h||Yy.createAccount({homeAccountId:n,idTokenClaims:o,clientInfo:i,environment:a,cloudGraphHostName:null===u||void 0===u?void 0:u.cloud_graph_host_name,msGraphHost:null===u||void 0===u?void 0:u.msgraph_host,nativeAccountId:l},t,r),p=f.tenantProfiles||[],g=s||f.realm;if(g&&!p.find((e=>e.tenantId===g))){const e=Hy(n,f.localAccountId,g,o);p.push(e)}return f.tenantProfiles=p,f}class cx{static validateRedirectUri(e){if(!e)throw Ny(ly)}static validatePrompt(e){const t=[];for(const n in Vg)t.push(Vg[n]);if(t.indexOf(e)<0)throw Ny(gy)}static validateClaims(e){try{JSON.parse(e)}catch(t){throw Ny(my)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw Ny(Dy);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([Kg.PLAIN,Kg.S256].indexOf(e)<0)throw Ny(by)}}async function dx(e,t,n){if("string"===typeof e)return e;return e({clientId:t,tokenEndpoint:n})}class hx extends rx{constructor(e,t){var n;super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=null===(n=this.config.authOptions.authority.options.OIDCOptions)||void 0===n?void 0:n.defaultScopes}async acquireToken(e,t){var n,r;if(null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(pD,e.correlationId),!e.code)throw Lv(cv);const o=Vv(),i=await yk(this.executeTokenRequest.bind(this),gD,this.logger,this.performanceClient,e.correlationId)(this.authority,e),a=null===(r=i.headers)||void 0===r?void 0:r[Og],s=new ux(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(i.body),yk(s.handleServerTokenResponse.bind(s),bD,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,o,e,t,void 0,void 0,void 0,a)}getLogoutUri(e){if(!e)throw Ny(yy);const t=this.createLogoutUrlQueryString(e);return $y.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(gD,t.correlationId);const r=this.createTokenQueryParameters(t),o=$y.appendQueryString(e.tokenEndpoint,r),i=await yk(this.createTokenRequestBody.bind(this),mD,this.logger,this.performanceClient,t.correlationId)(t);let a;if(t.clientInfo)try{const e=By(t.clientInfo,this.cryptoUtils.base64Decode);a={credential:"".concat(e.uid).concat(om).concat(e.utid),type:vF}}catch(l){this.logger.verbose("Could not parse client info for CCS Header: "+l)}const s=this.createTokenRequestHeaders(a||t.ccsCredential),u=Tk(this.config.authOptions.clientId,t);return yk(this.executePostToTokenEndpoint.bind(this),zb,this.logger,this.performanceClient,t.correlationId)(o,i,s,u,t.correlationId,zb)}async createTokenRequestBody(e){var t,n;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(mD,e.correlationId);const r=new Map;if(PF(r,e.embeddedClientId||(null===(n=e.tokenBodyParameters)||void 0===n?void 0:n[bF])||this.config.authOptions.clientId),this.includeRedirectUri?TF(r,e.redirectUri):cx.validateRedirectUri(e.redirectUri),IF(r,e.scopes,!0,this.oidcDefaultScopes),function(e,t){e.set("code",t)}(r,e.code),LF(r,this.config.libraryInfo),jF(r,this.config.telemetry.application),$F(r),this.serverTelemetryManager&&!yb(this.config)&&XF(r,this.serverTelemetryManager),e.codeVerifier&&function(e,t){e.set("code_verifier",t)}(r,e.codeVerifier),this.config.clientCredentials.clientSecret&&UF(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const t=this.config.clientCredentials.clientAssertion;qF(r,await dx(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),WF(r,t.assertionType)}if(VF(r,$g),KF(r),e.authenticationScheme===gm.POP){const t=new ax(this.cryptoUtils,this.performanceClient);let n;if(e.popKid)n=this.cryptoUtils.encodeKid(e.popKid);else{n=(await yk(t.generateCnf.bind(t),vD,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}ZF(r,n)}else if(e.authenticationScheme===gm.SSH){if(!e.sshJwk)throw Ny(ky);QF(r,e.sshJwk)}let o;if((!Ry.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&OF(r,e.claims,this.config.authOptions.clientCapabilities),e.clientInfo)try{const t=By(e.clientInfo,this.cryptoUtils.base64Decode);o={credential:"".concat(t.uid).concat(om).concat(t.utid),type:vF}}catch(i){this.logger.verbose("Could not parse client info for CCS Header: "+i)}else o=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&o)switch(o.type){case vF:try{MF(r,Oy(o.credential))}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case yF:RF(r,o.credential)}return e.embeddedClientId&&JF(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&YF(r,e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[EF]||YF(r,{[EF]:"1"}),SF(r,e.correlationId,this.performanceClient),Xy(r)}createLogoutUrlQueryString(e){const t=new Map;return e.postLogoutRedirectUri&&function(e,t){e.set("post_logout_redirect_uri",t)}(t,e.postLogoutRedirectUri),e.correlationId&&zF(t,e.correlationId),e.idTokenHint&&function(e,t){e.set("id_token_hint",t)}(t,e.idTokenHint),e.state&&HF(t,e.state),e.logoutHint&&function(e,t){e.set("logout_hint",t)}(t,e.logoutHint),e.extraQueryParameters&&YF(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&GF(t),Xy(t,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}function fx(e){const{skus:t,libraryName:n,libraryVersion:r,extensionName:o,extensionVersion:i}=e,a=new Map([[0,[n,r]],[2,[o,i]]]);let s=[];if(null!==t&&void 0!==t&&t.length){if(s=t.split(","),s.length<4)return t}else s=Array.from({length:4},(()=>"|"));return a.forEach(((e,t)=>{var n,r;2===e.length&&null!==(n=e[0])&&void 0!==n&&n.length&&null!==(r=e[1])&&void 0!==r&&r.length&&function(e){const{skuArr:t,index:n,skuName:r,skuVersion:o}=e;if(n>=t.length)return;t[n]=[r,o].join("|")}({skuArr:s,index:t,skuName:e[0],skuVersion:e[1]})})),s.join(",")}class px{constructor(e,t){this.cacheOutcome=Im,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||xg.EMPTY_STRING,this.wrapperVer=e.wrapperVer||xg.EMPTY_STRING,this.telemetryCacheKey=pm.CACHE_KEY+rm+e.clientId}generateCurrentRequestHeaderValue(){const e="".concat(this.apiId).concat(pm.VALUE_SEPARATOR).concat(this.cacheOutcome),t=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();null!==n&&void 0!==n&&n.length&&t.push("broker_error=".concat(n));const r=t.join(pm.VALUE_SEPARATOR),o=[e,this.getRegionDiscoveryFields()].join(pm.VALUE_SEPARATOR);return[pm.SCHEMA_VERSION,o,r].join(pm.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=px.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*t).join(pm.VALUE_SEPARATOR),r=e.errors.slice(0,t).join(pm.VALUE_SEPARATOR),o=e.errors.length,i=[o,t<o?pm.OVERFLOW_TRUE:pm.OVERFLOW_FALSE].join(pm.VALUE_SEPARATOR);return[pm.SCHEMA_VERSION,e.cacheHits,n,r,i].join(pm.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=pm.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof Vm?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(pm.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=px.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey);else{const n={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n)}}static maxErrorsToSend(e){let t,n=0,r=0;const o=e.errors.length;for(t=0;t<o;t++){const o=e.failedRequests[2*t]||xg.EMPTY_STRING,i=e.failedRequests[2*t+1]||xg.EMPTY_STRING,a=e.errors[t]||xg.EMPTY_STRING;if(r+=o.toString().length+i.toString().length+a.length+3,!(r<pm.MAX_LAST_HEADER_BYTES))break;n+=1}return n}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||xg.EMPTY_STRING),e.push(this.regionSource||xg.EMPTY_STRING),e.push(this.regionOutcome||xg.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return fx(e)}}class gx{constructor(e,t,n,r,o,i,a,s,u){this.config=e,this.browserStorage=t,this.browserCrypto=n,this.networkClient=this.config.system.networkClient,this.eventHandler=o,this.navigationClient=i,this.nativeMessageHandler=s,this.correlationId=u||PE(),this.logger=r.clone(uC,rk,this.correlationId),this.performanceClient=a}async clearCacheOnLogout(e){if(e){Yy.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{await this.browserStorage.removeAccount(Yy.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch(t){this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),await this.browserStorage.clear(),await this.browserCrypto.clearKeystore()}catch(n){this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const t=e||this.config.auth.redirectUri;return $y.getAbsoluteUrl(t,ZE())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");const n={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new px(n,this.browserStorage)}async getDiscoveredAuthority(e){const{account:t}=e,n=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(Rb,this.correlationId);const r={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},o=e.requestAuthority||this.config.auth.authority,i=null!==n&&void 0!==n&&n.length?"true"===n:this.config.auth.instanceAware,a=t&&i?this.config.auth.authority.replace($y.getDomainFromUrl(o),t.environment):o,s=Dk.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),u=await yk(ex,CD,this.logger,this.performanceClient,this.correlationId)(s,this.config.system.networkClient,this.browserStorage,r,this.logger,this.correlationId,this.performanceClient);if(t&&!u.isAlias(t.environment))throw Ny(Iy);return u}}async function mx(e,t,n,r){n.addQueueMeasurement(Yb,e.correlationId);const o=e.authority||t.auth.authority,i=[...e&&e.scopes||[]],a=l(l({},e),{},{correlationId:e.correlationId,authority:o,scopes:i});if(a.authenticationScheme){if(a.authenticationScheme===gm.SSH){if(!e.sshJwk)throw Ny(ky);if(!e.sshKid)throw Ny(Fy)}r.verbose('Authentication Scheme set to "'.concat(a.authenticationScheme,'" as configured in Auth request'))}else a.authenticationScheme=gm.BEARER,r.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return t.cache.claimsBasedCachingEnabled&&e.claims&&!Ry.isEmptyObj(e.claims)&&(a.requestedClaimsHash=await jE(e.claims)),a}async function vx(e,t,n,r,o){r.addQueueMeasurement(Zb,e.correlationId);const i=await yk(mx,Yb,o,r,e.correlationId)(e,n,r,o);return l(l(l({},e),i),{},{account:t,forceRefresh:e.forceRefresh||!1})}class yx extends gx{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",null===e||void 0===e?void 0:e.correlationId);const t=l({correlationId:this.correlationId||PE()},e);if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const n=this.getLogoutHintFromIdTokenClaims(e.account);n&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=n)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=$y.getAbsoluteUrl(e.postLogoutRedirectUri,ZE())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=$y.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,ZE())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=$y.getAbsoluteUrl(ZE(),ZE())),t}getLogoutHintFromIdTokenClaims(e){const t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(rD,this.correlationId);const t=await yk(this.getClientConfiguration.bind(this),oD,this.logger,this.performanceClient,this.correlationId)(e);return new hx(t,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:t,requestAuthority:n,requestAzureCloudOptions:r,requestExtraQueryParameters:o,account:i}=e;this.performanceClient.addQueueMeasurement(oD,this.correlationId);const a=await yk(this.getDiscoveredAuthority.bind(this),Rb,this.logger,this.performanceClient,this.correlationId)({requestAuthority:n,requestAzureCloudOptions:r,requestExtraQueryParameters:o,account:i}),s=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:s.loggerCallback,piiLoggingEnabled:s.piiLoggingEnabled,logLevel:s.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:uC,version:rk,cpu:xg.EMPTY_STRING,os:xg.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,t){this.performanceClient.addQueueMeasurement(iD,this.correlationId);const n=this.getRedirectUri(e.redirectUri),r={interactionType:t},o=ox.setRequestState(this.browserCrypto,e&&e.state||xg.EMPTY_STRING,r),i=await yk(mx,Yb,this.logger,this.performanceClient,this.correlationId)(l(l({},e),{},{correlationId:this.correlationId}),this.config,this.performanceClient,this.logger),a=l(l({},i),{},{redirectUri:n,state:o,nonce:e.nonce||PE(),responseMode:this.config.auth.OIDCOptions.serverResponseType});if(e.loginHint||e.sid)return a;const s=e.account||this.browserStorage.getActiveAccount();return s&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii("Setting validated request account: ".concat(s.homeAccountId),this.correlationId),a.account=s),a}}const bx="user_switch",Dx={[bx]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class Cx extends Vm{constructor(e,t,n){super(e,t),Object.setPrototypeOf(this,Cx.prototype),this.name="NativeAuthError",this.ext=n}}function wx(e){return!(!e.ext||!e.ext.status||"PERSISTENT_ERROR"!==e.ext.status&&"DISABLED"!==e.ext.status)||(!(!e.ext||!e.ext.error||-2147186943!==e.ext.error)||"ContentError"===e.errorCode)}function Ex(e,t,n){if(n&&n.status)switch(n.status){case"ACCOUNT_UNAVAILABLE":return Pk(Ek);case"USER_INTERACTION_REQUIRED":return new _k(e,t);case"USER_CANCEL":return uE(ww);case"NO_NETWORK":return uE(zw)}return new Cx(e,Dx[e]||t,n)}class kx{constructor(e,t,n,r){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=r,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=n,this.handshakeEvent=n.startMeasurement(RD)}async sendMessage(e){this.logger.trace("NativeMessageHandler - sendMessage called.");const t={channel:lC,extensionId:this.extensionId,responseId:PE(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii("NativeMessageHandler - Sending request to browser extension: ".concat(JSON.stringify(t))),this.messageChannel.port1.postMessage(t),new Promise(((e,n)=>{this.resolvers.set(t.responseId,{resolve:e,reject:n})}))}static async createProvider(e,t,n){e.trace("NativeMessageHandler - createProvider called.");try{const r=new kx(e,t,n,cC);return await r.sendHandshakeRequest(),r}catch(r){const o=new kx(e,t,n);return await o.sendHandshakeRequest(),o}}async sendHandshakeRequest(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:lC,extensionId:this.extensionId,responseId:PE(),body:{method:hC}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=e=>{this.onChannelMessage(e)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise(((t,n)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:n}),this.timeoutId=window.setTimeout((()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),n(uE(Zw)),this.handshakeResolvers.delete(e.responseId)}),this.handshakeTimeoutMs)}))}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const t=e.data;if(t.channel&&t.channel===lC&&(!t.extensionId||t.extensionId===this.extensionId)&&t.body.method===hC){const e=this.handshakeResolvers.get(t.responseId);if(!e)return void this.logger.trace("NativeMessageHandler.onWindowMessage - resolver can't be found for request ".concat(t.responseId));this.logger.verbose(t.extensionId?"Extension with id: ".concat(t.extensionId," not installed"):"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),e.reject(uE(Qw))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const t=e.data,n=this.resolvers.get(t.responseId),r=this.handshakeResolvers.get(t.responseId);try{const e=t.body.method;if(e===gC){if(!n)return;const e=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii("NativeMessageHandler - Received response from browser extension: ".concat(JSON.stringify(e))),"Success"!==e.status)n.reject(Ex(e.code,e.description,e.ext));else{if(!e.result)throw Km(Um,"Event does not contain result.");e.result.code&&e.result.description?n.reject(Ex(e.result.code,e.result.description,e.result.ext)):n.resolve(e.result)}this.resolvers.delete(t.responseId)}else if(e===fC){if(!r)return void this.logger.trace("NativeMessageHandler.onChannelMessage - resolver can't be found for request ".concat(t.responseId));clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose("NativeMessageHandler - Received HandshakeResponse from extension: ".concat(this.extensionId)),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),r.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(o){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii("Error parsing response from WAM Extension: ".concat(o)),this.logger.errorPii("Unable to parse ".concat(e)),n?n.reject(o):r&&r.reject(o)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isPlatformBrokerAvailable(e,t,n,r){if(t.trace("isPlatformBrokerAvailable called"),!e.system.allowPlatformBroker)return t.trace("isPlatformBrokerAvailable: allowPlatformBroker is not enabled, returning false"),!1;if(!n)return t.trace("isPlatformBrokerAvailable: Platform extension provider is not initialized, returning false"),!1;if(r)switch(r){case gm.BEARER:case gm.POP:return t.trace("isPlatformBrokerAvailable: authenticationScheme is supported, returning true"),!0;default:return t.trace("isPlatformBrokerAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}function Fx(e,t,n){const r=Qy(e);if(!r)throw Zy(e)?(n.error("A ".concat(t," is present in the iframe but it does not contain known properties. It's likely that the ").concat(t," has been replaced by code running on the redirectUri page.")),n.errorPii("The ".concat(t," detected is: ").concat(e)),uE(mw)):(n.error("The request has returned to the redirectUri but a ".concat(t," is not present. It's likely that the ").concat(t," has been removed or the page has been redirected by code running on the redirectUri page.")),uE(pw));return r}function xx(e,t,n){if(!e.state)throw uE(gw);const r=function(e,t){if(!t)return null;try{return ox.parseRequestState(e,t).libraryState.meta}catch(n){throw Lv(tv)}}(t,e.state);if(!r)throw uE(vw);if(r.interactionType!==n)throw uE(yw)}function Ax(e,t,n,r){var o,i;const a=t.correlationId,s=new Map;PF(s,t.embeddedClientId||(null===(o=t.extraQueryParameters)||void 0===o?void 0:o[bF])||e.clientId);if(IF(s,[...t.scopes||[],...t.extraScopesToConsent||[]],!0,null===(i=e.authority.options.OIDCOptions)||void 0===i?void 0:i.defaultScopes),TF(s,t.redirectUri),zF(s,a),function(e,t){e.set("response_mode",t||Xg)}(s,t.responseMode),KF(s),t.prompt&&(!function(e,t){e.set("prompt",t)}(s,t.prompt),null===r||void 0===r||r.addFields({prompt:t.prompt},a)),t.domainHint&&(!function(e,t){e.set("domain_hint",t)}(s,t.domainHint),null===r||void 0===r||r.addFields({domainHintFromRequest:!0},a)),t.prompt!==Vg.SELECT_ACCOUNT)if(t.sid&&t.prompt===Vg.NONE)n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),BF(s,t.sid),null===r||void 0===r||r.addFields({sidFromRequest:!0},a);else if(t.account){const e=function(e){var t;return(null===(t=e.idTokenClaims)||void 0===t?void 0:t.sid)||null}(t.account);let o=function(e){var t;return(null===(t=e.idTokenClaims)||void 0===t?void 0:t.login_hint)||null}(t.account);if(o&&t.domainHint&&(n.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),o=null),o){n.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),NF(s,o),null===r||void 0===r||r.addFields({loginHintFromClaim:!0},a);try{MF(s,Oy(t.account.homeAccountId))}catch(u){n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e&&t.prompt===Vg.NONE){n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),BF(s,e),null===r||void 0===r||r.addFields({sidFromClaim:!0},a);try{MF(s,Oy(t.account.homeAccountId))}catch(u){n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(t.loginHint)n.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),NF(s,t.loginHint),RF(s,t.loginHint),null===r||void 0===r||r.addFields({loginHintFromRequest:!0},a);else if(t.account.username){n.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),NF(s,t.account.username),null===r||void 0===r||r.addFields({loginHintFromUpn:!0},a);try{MF(s,Oy(t.account.homeAccountId))}catch(u){n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else t.loginHint&&(n.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),NF(s,t.loginHint),RF(s,t.loginHint),null===r||void 0===r||r.addFields({loginHintFromRequest:!0},a));else n.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return t.nonce&&function(e,t){e.set("nonce",t)}(s,t.nonce),t.state&&HF(s,t.state),(t.claims||e.clientCapabilities&&e.clientCapabilities.length>0)&&OF(s,t.claims,e.clientCapabilities),t.embeddedClientId&&JF(s,e.clientId,e.redirectUri),!e.instanceAware||t.extraQueryParameters&&Object.keys(t.extraQueryParameters).includes(AF)||GF(s),s}function Sx(e,t,n,r){const o=Xy(t,n,r);return $y.appendQueryString(e.authorizationEndpoint,o)}function _x(e,t){if(!e.state||!t)throw e.state?Lv(rv,"Cached State"):Lv(rv,"Server State");let n,r;try{n=decodeURIComponent(e.state)}catch(o){throw Lv(tv,e.state)}try{r=decodeURIComponent(t)}catch(o){throw Lv(tv,e.state)}if(n!==r)throw Lv(nv);if(e.error||e.error_description||e.suberror){const t=function(e){var t,n;const r="code=",o=null===(t=e.error_uri)||void 0===t?void 0:t.lastIndexOf(r);return o&&o>=0?null===(n=e.error_uri)||void 0===n?void 0:n.substring(o+r.length):void 0}(e);if(Ik(e.error,e.error_description,e.suberror))throw new _k(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",t);throw new tx(e.error||"",e.error_description,e.suberror,t)}}class Ix{constructor(e,t,n,r,o){this.authModule=e,this.browserStorage=t,this.authCodeRequest=n,this.logger=r,this.performanceClient=o}async handleCodeResponse(e,t){let n;this.performanceClient.addQueueMeasurement(lD,t.correlationId);try{n=function(e,t){if(_x(e,t),!e.code)throw Lv(Sv);return e}(e,t.state)}catch(r){throw r instanceof tx&&r.subError===ww?uE(ww):r}return yk(this.handleCodeResponseFromServer.bind(this),uD,this.logger,this.performanceClient,t.correlationId)(n,t)}async handleCodeResponseFromServer(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.performanceClient.addQueueMeasurement(uD,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await yk(this.authModule.updateAuthority.bind(this.authModule),fD,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId),n&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const e=this.createCcsCredentials(t);e&&(this.authCodeRequest.ccsCredential=e)}return await yk(this.authModule.acquireToken.bind(this.authModule),pD,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:vF}:e.loginHint?{credential:e.loginHint,type:yF}:null}}function Px(e){if(null==e)throw new TypeError("Cannot destructure "+e)}class Tx extends rx{constructor(e,t){super(e,t)}async acquireCachedToken(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Vb,e.correlationId);let n=Im;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Ry.isEmptyObj(e.claims))throw this.setCacheOutcome(Pm,e.correlationId),Lv(Fv);if(!e.account)throw Lv(vv);const r=e.account.tenantId||function(e){var t;const n=null===(t=new $y(e).getUrlComponents().PathSegments.slice(-1)[0])||void 0===t?void 0:t.toLowerCase();switch(n){case jg:case Hg:case Ug:return;default:return n}}(e.authority),o=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,o,r,this.performanceClient,e.correlationId);if(!i)throw this.setCacheOutcome(Tm,e.correlationId),Lv(Fv);if(a=i.cachedAt,Number(a)>Vv()||Yv(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Nm,e.correlationId),Lv(Fv);var a;i.refreshOn&&Yv(i.refreshOn,0)&&(n=Rm);const s=e.authority||this.authority.getPreferredCache(),u={account:this.cacheManager.readAccountFromCache(e.account),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,o,r,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(n,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await yk(this.generateResultFromCacheRecord.bind(this),Kb,this.logger,this.performanceClient,e.correlationId)(u,e),n]}setCacheOutcome(e,t){var n,r;null===(n=this.serverTelemetryManager)||void 0===n||n.setCacheOutcome(e),null===(r=this.performanceClient)||void 0===r||r.addFields({cacheOutcome:e},t),e!==Im&&this.logger.info("Token refresh is required due to cache outcome: ".concat(e))}async generateResultFromCacheRecord(e,t){var n;let r;if(null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Kb,t.correlationId),e.idToken&&(r=qv(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){var o;const e=null===(o=r)||void 0===o?void 0:o.auth_time;if(!e)throw Lv(iv);Wv(e,t.maxAge)}return ux.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)}}class Nx extends yx{async acquireToken(e){this.performanceClient.addQueueMeasurement(_b,e.correlationId);const t=this.initializeServerTelemetryManager(zC),n=await yk(this.getClientConfiguration.bind(this),oD,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),r=new Tx(n,this.performanceClient);this.logger.verbose("Silent auth client created");try{const t=(await yk(r.acquireCachedToken.bind(r),Vb,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),t}catch(o){throw o instanceof sE&&o.errorCode===qw&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),o}}logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(null===t||void 0===t?void 0:t.account)}}const Rx=["prompt"],Mx=["scopes"];class Bx extends gx{constructor(e,t,n,r,o,i,a,s,u,l,c,d){var h;super(e,t,n,r,o,i,s,u,d),this.apiId=a,this.accountId=l,this.nativeMessageHandler=u,this.nativeStorageManager=c,this.silentCacheClient=new Nx(e,this.nativeStorageManager,n,r,o,i,s,u,d);const f=this.nativeMessageHandler.getExtensionId()===cC?"chrome":null!==(h=this.nativeMessageHandler.getExtensionId())&&void 0!==h&&h.length?"unknown":void 0;this.skus=px.makeExtraSkuString({libraryName:uC,libraryVersion:rk,extensionName:f,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters=l(l({},e.extraParameters),{},{[kF]:this.skus})}async acquireToken(e,t){this.performanceClient.addQueueMeasurement(Mb,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const n=this.performanceClient.startMeasurement(Mb,e.correlationId),r=Vv(),o=this.initializeServerTelemetryManager(this.apiId);try{const a=await this.initializeNativeRequest(e);try{const e=await this.acquireTokensFromCache(this.accountId,a);return n.end({success:!0,isNativeBroker:!1,fromCache:!0}),e}catch(i){if(t===ew)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),i;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const s=Object.assign({},(Px(a),a)),u={method:pC,request:s},l=await this.nativeMessageHandler.sendMessage(u),c=this.validateNativeResponse(l);return await this.handleNativeResponse(c,a,r).then((e=>(n.end({success:!0,isNativeBroker:!0,requestId:e.requestId}),o.clearNativeBrokerErrorCode(),e))).catch((e=>{throw n.end({success:!1,errorCode:e.errorCode,subErrorCode:e.subError,isNativeBroker:!0}),e}))}catch(i){throw i instanceof Cx&&o.setNativeBrokerErrorCode(i.errorCode),i}}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:My.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}async acquireTokensFromCache(e,t){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),Lv(Dv);const n=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!n)throw Lv(Dv);try{const e=this.createSilentCacheRequest(t,n),r=await this.silentCacheClient.acquireToken(e),o=l(l({},n),{},{idTokenClaims:null===r||void 0===r?void 0:r.idTokenClaims,idToken:null===r||void 0===r?void 0:r.idToken});return l(l({},r),{},{account:o})}catch(r){throw r}}async acquireTokenRedirect(e,t){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const n=Object.assign({},(Px(e),e));delete n.onRedirectNavigate;const r=await this.initializeNativeRequest(n),o={method:pC,request:r};try{const e=await this.nativeMessageHandler.sendMessage(o);this.validateNativeResponse(e)}catch(s){if(s instanceof Cx){if(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(s.errorCode),wx(s))throw s}}this.browserStorage.setTemporaryCache(SC,JSON.stringify(r),!0);const i={apiId:NC,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),await this.navigationClient.navigateExternal(a,i)}async handleRedirectPromise(e,t){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const n=this.browserStorage.getCachedNativeRequest();if(!n)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&(null===e||void 0===e||e.addFields({errorCode:"no_cached_request"},t)),null;const{prompt:r}=n,o=c(n,Rx);r&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(SC));const i={method:pC,request:o},a=Vv();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const e=await this.nativeMessageHandler.sendMessage(i);this.validateNativeResponse(e);const t=this.handleNativeResponse(e,o,a),n=await t;return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),n}catch(s){throw s}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,t,n){var r,o;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const i=qv(e.id_token,mE),a=this.createHomeAccountIdentifier(e,i),s=null===(r=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId}))||void 0===r?void 0:r.homeAccountId;if(null!==(o=t.extraParameters)&&void 0!==o&&o.child_client_id&&e.account.id!==t.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(a!==s&&e.account.id!==t.accountId)throw Ex(bx);const u=await this.getDiscoveredAuthority({requestAuthority:t.authority}),l=lx(this.browserStorage,u,a,mE,i,e.client_info,void 0,i.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);const c=await this.generateAuthenticationResult(e,t,i,l,u.canonicalAuthority,n);return await this.cacheAccount(l),await this.cacheNativeTokens(e,t,a,i,e.access_token,c.tenantId,n),c}createHomeAccountIdentifier(e,t){return Yy.generateHomeAccountId(e.client_info||xg.EMPTY_STRING,qy,this.logger,this.browserCrypto,t)}generateScopes(e,t){return e.scope?My.fromString(e.scope):My.fromString(t.scope)}async generatePopAccessToken(e,t){if(t.tokenType===gm.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const n=new ax(this.browserCrypto),r={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw Lv(Pv);return n.signPopToken(e.access_token,t.keyId,r)}return e.access_token}async generateAuthenticationResult(e,t,n,r,o,i){const a=this.addTelemetryFromNativeResponse(e),s=e.scope?My.fromString(e.scope):My.fromString(t.scope),u=e.account.properties||{},l=u.UID||n.oid||n.sub||xg.EMPTY_STRING,c=u.TenantId||n.tid||xg.EMPTY_STRING,d=Uy(r.getAccountInfo(),void 0,n,e.id_token);d.nativeAccountId!==e.account.id&&(d.nativeAccountId=e.account.id);const h=await this.generatePopAccessToken(e,t),f=t.tokenType===gm.POP?gm.POP:gm.BEARER;return{authority:o,uniqueId:l,tenantId:c,scopes:s.asArray(),account:d,idToken:e.id_token,idTokenClaims:n,accessToken:h,fromCache:!!a&&this.isResponseFromCache(a),expiresOn:Gv(i+e.expires_in),tokenType:f,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e){await this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e).catch((e=>{this.logger.error("Error occurred while removing account context from browser storage. ".concat(e))}))}cacheNativeTokens(e,t,n,r,o,i,a){const s=Qv(n,t.authority,e.id_token||"",t.clientId,r.tid||""),u=a+(t.tokenType===gm.POP?xg.SHR_NONCE_VALIDITY:("string"===typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0),l=this.generateScopes(e,t),c={idToken:s,accessToken:Xv(n,t.authority,o,t.clientId,r.tid||i,l.printScopes(),u,0,mE,void 0,t.tokenType,void 0,t.keyId)};return this.nativeStorageManager.saveCacheRecord(c,this.correlationId,t.storeInCache)}addTelemetryFromNativeResponse(e){const t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw Km(Um,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch(t){this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return"undefined"===typeof e.is_cached?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const t=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const n=new $y(t);n.validateAsUri();const{scopes:r}=e,o=c(e,Mx),i=new My(r||[]);i.appendScopes(Pg);const a=l(l({},o),{},{accountId:this.accountId,clientId:this.config.auth.clientId,authority:n.urlString,scope:i.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:(()=>{switch(this.apiId){case MC:case zC:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),Vg.NONE}if(e.prompt)switch(e.prompt){case Vg.NONE:case Vg.CONSENT:case Vg.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace("initializeNativeRequest: prompt = ".concat(e.prompt," is not compatible with native flow")),uE(Jw)}else this.logger.trace("initializeNativeRequest: prompt was not provided")})(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:l(l({},e.extraQueryParameters),e.tokenQueryParameters),extendedExpiryToken:!1,keyId:e.popKid});if(a.signPopToken&&e.popKid)throw uE(tE);if(this.handleExtraBrokerParams(a),a.extraParameters=a.extraParameters||{},a.extraParameters.telemetry=dC,e.authenticationScheme===gm.POP){const t={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},n=new ax(this.browserCrypto);let r;if(a.keyId)r=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:a.keyId})),a.signPopToken=!1;else{const o=await yk(n.generateCnf.bind(n),vD,this.logger,this.performanceClient,e.correlationId)(t,this.logger);r=o.reqCnfString,a.keyId=o.kid,a.signPopToken=!0}a.reqCnf=r}return this.addRequestSKUs(a),a}handleExtraBrokerParams(e){var t;const n=e.extraParameters&&e.extraParameters.hasOwnProperty(FF)&&e.extraParameters.hasOwnProperty(xF)&&e.extraParameters.hasOwnProperty(bF);if(!e.embeddedClientId&&!n)return;let r="";const o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[xF],r=e.extraParameters[bF]),e.extraParameters={child_client_id:r,child_redirect_uri:o},null===(t=this.performanceClient)||void 0===t||t.addFields({embeddedClientId:r,embeddedRedirectUri:o},e.correlationId)}}async function Ox(e,t,n,r,o){const i=Ax(l(l({},e.auth),{},{authority:t}),n,r,o);if(LF(i,{sku:uC,version:rk,os:"",cpu:""}),e.auth.protocolMode!==Lm&&jF(i,e.telemetry.application),n.platformBroker&&(function(e){e.set("nativebroker","1")}(i),n.authenticationScheme===gm.POP)){const e=new gk(r,o),t=new ax(e);let a;if(n.popKid)a=e.encodeKid(n.popKid);else{a=(await yk(t.generateCnf.bind(t),vD,r,o,n.correlationId)(n,r)).reqCnfString}ZF(i,a)}return SF(i,n.correlationId,o),i}async function zx(e,t,n,r,o){if(!n.codeChallenge)throw Ny(Dy);const i=await yk(Ox,sD,r,o,n.correlationId)(e,t,n,r,o);return _F(i,Gg),function(e,t,n){if(!t||!n)throw Ny(Dy);e.set("code_challenge",t),e.set("code_challenge_method",n)}(i,n.codeChallenge,xg.S256_CODE_CHALLENGE_METHOD),YF(i,n.extraQueryParameters||{}),Sx(t,i,e.auth.encodeExtraQueryParams,n.extraQueryParameters)}async function Lx(e,t,n,r,o,i){if(!r.earJwk)throw uE(cw);const a=await Ox(t,n,r,o,i);_F(a,Yg),function(e,t){e.set("ear_jwk",encodeURIComponent(t)),e.set("ear_jwe_crypto","eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}(a,r.earJwk);const s=new Map;YF(s,r.extraQueryParameters||{});return function(e,t,n){const r=e.createElement("form");return r.method="post",r.action=t,n.forEach(((t,n)=>{const o=e.createElement("input");o.hidden=!0,o.name=n,o.value=t,r.appendChild(o)})),e.body.appendChild(r),r}(e,Sx(n,s,t.auth.encodeExtraQueryParams,r.extraQueryParameters),a)}async function jx(e,t,n,r,o,i,a,s,u,c){if(!c)throw uE(Xw);const d=new gk(s,u),h=new Bx(r,o,d,s,a,r.system.navigationClient,n,u,c,t,i,e.correlationId),{userRequestState:f}=ox.parseRequestState(d,e.state);return yk(h.acquireToken.bind(h),Mb,s,u,e.correlationId)(l(l({},e),{},{state:f,prompt:void 0}))}async function Hx(e,t,n,r,o,i,a,s,u,c,d,h){if(nx.removeThrottle(a,o.auth.clientId,e),t.accountId)return yk(jx,dD,c,d,e.correlationId)(e,t.accountId,r,o,a,s,u,c,d,h);const f=l(l({},e),{},{code:t.code||"",codeVerifier:n}),p=new Ix(i,a,f,c,d);return await yk(p.handleCodeResponse.bind(p),lD,c,d,e.correlationId)(t,e)}async function Ux(e,t,n,r,o,i,a,s,u,l,c){if(nx.removeThrottle(i,r.auth.clientId,e),_x(t,e.state),!t.ear_jwe)throw uE(dw);if(!e.earJwk)throw uE(cw);const d=JSON.parse(await yk(RE,JD,u,l,e.correlationId)(e.earJwk,t.ear_jwe));if(d.accountId)return yk(jx,dD,u,l,e.correlationId)(e,d.accountId,n,r,i,a,s,u,l,c);const h=new ux(r.auth.clientId,i,new gk(u,l),u,null,null,l);h.validateTokenResponse(d);const f={code:"",state:e.state,nonce:e.nonce,client_info:d.client_info,cloud_graph_host_name:d.cloud_graph_host_name,cloud_instance_host_name:d.cloud_instance_host_name,cloud_instance_name:d.cloud_instance_name,msgraph_host:d.msgraph_host};return await yk(h.handleServerTokenResponse.bind(h),bD,u,l,e.correlationId)(d,o,Vv(),e,f,void 0,void 0,void 0,void 0)}async function qx(e,t,n){e.addQueueMeasurement(HD,n);const r=vk(Wx,UD,t,e,n)(e,t,n);return{verifier:r,challenge:await yk(Vx,qD,t,e,n)(r,e,t,n)}}function Wx(e,t,n){try{const r=new Uint8Array(32);vk(_E,VD,t,e,n)(r);return fE(r)}catch(r){throw uE(lw)}}async function Vx(e,t,n,r){t.addQueueMeasurement(qD,r);try{const o=await yk(SE,WD,n,t,r)(e,t,r);return fE(new Uint8Array(o))}catch(o){throw uE(lw)}}class Kx extends yx{constructor(e,t,n,r,o,i,a,s,u,l){super(e,t,n,r,o,i,a,u,l),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=s,this.eventHandler=o}acquireToken(e,t){try{var n;const r={popupName:this.generatePopupName(e.scopes||Pg,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:null!==(n=e.popupWindowParent)&&void 0!==n?n:window};return this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r,t)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(e,r,t))}catch(r){return Promise.reject(r)}}logout(e){try{var t;this.logger.verbose("logoutPopup called");const n=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(n),popupWindowAttributes:(null===e||void 0===e?void 0:e.popupWindowAttributes)||{},popupWindowParent:null!==(t=null===e||void 0===e?void 0:e.popupWindowParent)&&void 0!==t?t:window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(n,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(n,r,o,i))}catch(n){return Promise.reject(n)}}async acquireTokenPopupAsync(e,t,n){this.logger.verbose("acquireTokenPopupAsync called");const r=await yk(this.initializeAuthorizationRequest.bind(this),iD,this.logger,this.performanceClient,this.correlationId)(e,HC.Popup);t.popup&&tk(r.authority);const o=kx.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);return r.platformBroker=o,this.config.auth.protocolMode===jm?this.executeEarFlow(r,t):this.executeCodeFlow(r,t,n)}async executeCodeFlow(e,t,n){const r=e.correlationId,o=this.initializeServerTelemetryManager(RC),i=n||await yk(qx,HD,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),a=l(l({},e),{},{codeChallenge:i.challenge});try{const n=await yk(this.createAuthCodeClient.bind(this),rD,this.logger,this.performanceClient,r)({serverTelemetryManager:o,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account}),s=await yk(zx,aD,this.logger,this.performanceClient,r)(this.config,n.authority,a,this.logger,this.performanceClient),u=this.initiateAuthRequest(s,t);this.eventHandler.emitEvent(uF,HC.Popup,{popupWindow:u},null);const l=await this.monitorPopupForHash(u,t.popupWindowParent),c=vk(Fx,DD,this.logger,this.performanceClient,this.correlationId)(l,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await yk(Hx,hD,this.logger,this.performanceClient,r)(e,c,i.verifier,RC,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}catch(u){var s;throw null===(s=t.popup)||void 0===s||s.close(),u instanceof Vm&&(u.setCorrelationId(this.correlationId),o.cacheFailedRequest(u)),u}}async executeEarFlow(e,t){const n=e.correlationId,r=await yk(this.getDiscoveredAuthority.bind(this),Rb,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),o=await yk(NE,$D,this.logger,this.performanceClient,n)(),i=l(l({},e),{},{earJwk:o}),a=t.popup||this.openPopup("about:blank",t);(await Lx(a.document,this.config,r,i,this.logger,this.performanceClient)).submit();const s=await yk(this.monitorPopupForHash.bind(this),eD,this.logger,this.performanceClient,n)(a,t.popupWindowParent),u=vk(Fx,DD,this.logger,this.performanceClient,this.correlationId)(s,this.config.auth.OIDCOptions.serverResponseType,this.logger);return yk(Ux,cD,this.logger,this.performanceClient,n)(i,u,RC,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}async logoutPopupAsync(e,t,n,r){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(lF,HC.Popup,e);const o=this.initializeServerTelemetryManager(jC);try{await this.clearCacheOnLogout(e.account);const u=await yk(this.createAuthCodeClient.bind(this),rD,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:n,account:e.account||void 0});try{u.authority.endSessionEndpoint}catch(l){var i;if(null!==(i=e.account)&&void 0!==i&&i.homeAccountId&&e.postLogoutRedirectUri&&u.authority.protocolMode===Lm){var a,s;if(this.browserStorage.removeAccount(null===(a=e.account)||void 0===a?void 0:a.homeAccountId),this.eventHandler.emitEvent(cF,HC.Popup,e),r){const e={apiId:jC,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=$y.getAbsoluteUrl(r,ZE());await this.navigationClient.navigateInternal(t,e)}return void(null===(s=t.popup)||void 0===s||s.close())}}const c=u.getLogoutUri(e);this.eventHandler.emitEvent(cF,HC.Popup,e);const d=this.openPopup(c,t);if(this.eventHandler.emitEvent(uF,HC.Popup,{popupWindow:d},null),await this.monitorPopupForHash(d,t.popupWindowParent).catch((()=>{})),r){const e={apiId:jC,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=$y.getAbsoluteUrl(r,ZE());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii("Redirecting main window to: ".concat(t)),await this.navigationClient.navigateInternal(t,e)}else this.logger.verbose("No main window navigation requested")}catch(c){var u;throw null===(u=t.popup)||void 0===u||u.close(),c instanceof Vm&&(c.setCorrelationId(this.correlationId),o.cacheFailedRequest(c)),this.eventHandler.emitEvent(dF,HC.Popup,null,c),this.eventHandler.emitEvent(hF,HC.Popup),c}this.eventHandler.emitEvent(hF,HC.Popup)}initiateAuthRequest(e,t){if(e)return this.logger.infoPii("Navigate to: ".concat(e)),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),uE(fw)}monitorPopupForHash(e,t){return new Promise(((t,n)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const r=setInterval((()=>{if(e.closed)return this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(r),void n(uE(ww));let o="";try{o=e.location.href}catch(s){}if(!o||"about:blank"===o)return;clearInterval(r);let i="";const a=this.config.auth.OIDCOptions.serverResponseType;e&&(i=a===Zg?e.location.search:e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),t(i)}),this.config.system.pollIntervalMilliseconds)})).finally((()=>{this.cleanPopup(e,t)}))}openPopup(e,t){try{let n;if(t.popup?(n=t.popup,this.logger.verbosePii("Navigating popup window to: ".concat(e)),n.location.assign(e)):"undefined"===typeof t.popup&&(this.logger.verbosePii("Opening popup window to: ".concat(e)),n=this.openSizedPopup(e,t)),!n)throw uE(Cw);return n.focus&&n.focus(),this.currentWindow=n,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),n}catch(n){throw this.logger.error("error opening popup "+n.message),uE(Dw)}}openSizedPopup(e,t){var n,r,o,i;let{popupName:a,popupWindowAttributes:s,popupWindowParent:u}=t;const l=u.screenLeft?u.screenLeft:u.screenX,c=u.screenTop?u.screenTop:u.screenY,d=u.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,h=u.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let f=null===(n=s.popupSize)||void 0===n?void 0:n.width,p=null===(r=s.popupSize)||void 0===r?void 0:r.height,g=null===(o=s.popupPosition)||void 0===o?void 0:o.top,m=null===(i=s.popupPosition)||void 0===i?void 0:i.left;return(!f||f<0||f>d)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),f=oC),(!p||p<0||p>h)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),p=iC),(!g||g<0||g>h)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),g=Math.max(0,h/2-iC/2+c)),(!m||m<0||m>d)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),m=Math.max(0,d/2-oC/2+l)),u.open(e,a,"width=".concat(f,", height=").concat(p,", top=").concat(g,", left=").concat(m,", scrollbars=yes"))}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,t){return"".concat(aC,".").concat(this.config.auth.clientId,".").concat(e.join("-"),".").concat(t,".").concat(this.correlationId)}generateLogoutPopupName(e){const t=e.account&&e.account.homeAccountId;return"".concat(aC,".").concat(this.config.auth.clientId,".").concat(t,".").concat(this.correlationId)}}class Gx extends yx{constructor(e,t,n,r,o,i,a,s,u,l){super(e,t,n,r,o,i,a,u,l),this.nativeStorage=s}async acquireToken(e){const t=await yk(this.initializeAuthorizationRequest.bind(this),iD,this.logger,this.performanceClient,this.correlationId)(e,HC.Redirect);t.platformBroker=kx.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);const n=e=>{e.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(fF,HC.Redirect))},r=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii("Redirect start page: ".concat(r)),this.browserStorage.setTemporaryCache(EC,r,!0),window.addEventListener("pageshow",n);try{this.config.auth.protocolMode===jm?await this.executeEarFlow(t):await this.executeCodeFlow(t,e.onRedirectNavigate)}catch(o){throw o instanceof Vm&&o.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",n),o}}async executeCodeFlow(e,t){const n=e.correlationId,r=this.initializeServerTelemetryManager(NC),o=await yk(qx,HD,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),i=l(l({},e),{},{codeChallenge:o.challenge});this.browserStorage.cacheAuthorizeRequest(i,o.verifier);try{const n=await yk(this.createAuthCodeClient.bind(this),rD,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),o=await yk(zx,aD,this.logger,this.performanceClient,e.correlationId)(this.config,n.authority,i,this.logger,this.performanceClient);return await this.initiateAuthRequest(o,t)}catch(a){throw a instanceof Vm&&(a.setCorrelationId(this.correlationId),r.cacheFailedRequest(a)),a}}async executeEarFlow(e){const t=e.correlationId,n=await yk(this.getDiscoveredAuthority.bind(this),Rb,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),r=await yk(NE,$D,this.logger,this.performanceClient,t)(),o=l(l({},e),{},{earJwk:r});this.browserStorage.cacheAuthorizeRequest(o);(await Lx(document,this.config,n,o,this.logger,this.performanceClient)).submit()}async handleRedirectPromise(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const o=this.initializeServerTelemetryManager(BC);try{const[i,a]=this.getRedirectResponse(e||"");if(!i)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),"back_forward"!==function(){if("undefined"===typeof window||"undefined"===typeof window.performance||"function"!==typeof window.performance.getEntriesByType)return;const e=window.performance.getEntriesByType("navigation"),t=e.length?e[0]:void 0;return null===t||void 0===t?void 0:t.type}()?r.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const s=this.browserStorage.getTemporaryCache(EC,!0)||xg.EMPTY_STRING,u=$y.removeHashFromUrl(s);if(u===$y.removeHashFromUrl(window.location.href)&&this.config.auth.navigateToLoginRequestUrl){this.logger.verbose("Current page is loginRequestUrl, handling response"),s.indexOf("#")>-1&&function(e){const t=e.split("#");t.shift(),window.location.hash=t.length>0?t.join("#"):""}(s);return await this.handleResponse(i,t,n,o)}if(!this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(i,t,n,o);if(!YE()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(kC,a,!0);const e={apiId:BC,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let r=!0;if(s&&"null"!==s)this.logger.verbose("Navigating to loginRequestUrl: ".concat(s)),r=await this.navigationClient.navigateInternal(s,e);else{const t=function(){const e=new $y(window.location.href).getUrlComponents();return"".concat(e.Protocol,"//").concat(e.HostNameAndPort,"/")}();this.browserStorage.setTemporaryCache(EC,t,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),r=await this.navigationClient.navigateInternal(t,e)}if(!r)return await this.handleResponse(i,t,n,o)}return null}catch(i){throw i instanceof Vm&&(i.setCorrelationId(this.correlationId),o.cacheFailedRequest(i)),i}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(t=this.config.auth.OIDCOptions.serverResponseType===Zg?window.location.search:window.location.hash);let n=Qy(t);if(n){try{xx(n,this.browserCrypto,HC.Redirect)}catch(o){return o instanceof Vm&&this.logger.error("Interaction type validation failed due to ".concat(o.errorCode,": ").concat(o.errorMessage)),[null,""]}return GE(window),this.logger.verbose("Hash contains known properties, returning response hash"),[n,t]}const r=this.browserStorage.getTemporaryCache(kC,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(kC)),r&&(n=Qy(r),n)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[n,r]):[null,""]}async handleResponse(e,t,n,r){if(!e.state)throw uE(gw);if(e.ear_jwe){const n=await yk(this.getDiscoveredAuthority.bind(this),Rb,this.logger,this.performanceClient,t.correlationId)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return yk(Ux,cD,this.logger,this.performanceClient,t.correlationId)(t,e,NC,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}const o=await yk(this.createAuthCodeClient.bind(this),rD,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority});return yk(Hx,hD,this.logger,this.performanceClient,t.correlationId)(t,e,n,NC,this.config,o,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}async initiateAuthRequest(e,t){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii("RedirectHandler.initiateAuthRequest: Navigate to: ".concat(e));const n={apiId:NC,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},r=t||this.config.auth.onRedirectNavigate;if("function"===typeof r){this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback");return!1!==r(e)?(this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),void await this.navigationClient.navigateExternal(e,n)):void this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation")}return this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),void await this.navigationClient.navigateExternal(e,n)}throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),uE(fw)}async logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e),n=this.initializeServerTelemetryManager(LC);try{this.eventHandler.emitEvent(lF,HC.Redirect,e),await this.clearCacheOnLogout(t.account);const a={apiId:LC,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},s=await yk(this.createAuthCodeClient.bind(this),rD,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e&&e.authority,requestExtraQueryParameters:null===e||void 0===e?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(s.authority.protocolMode===Lm)try{s.authority.endSessionEndpoint}catch(i){var r,o;if(null!==(r=t.account)&&void 0!==r&&r.homeAccountId)return this.browserStorage.removeAccount(null===(o=t.account)||void 0===o?void 0:o.homeAccountId),void this.eventHandler.emitEvent(cF,HC.Redirect,t)}const u=s.getLogoutUri(t);if(this.eventHandler.emitEvent(cF,HC.Redirect,t),!e||"function"!==typeof e.onRedirectNavigate)return this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,wC),void await this.navigationClient.navigateExternal(u,a);if(!1!==e.onRedirectNavigate(u))return this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,wC),void await this.navigationClient.navigateExternal(u,a);this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}catch(a){throw a instanceof Vm&&(a.setCorrelationId(this.correlationId),n.cacheFailedRequest(a)),this.eventHandler.emitEvent(dF,HC.Redirect,null,a),this.eventHandler.emitEvent(hF,HC.Redirect),a}this.eventHandler.emitEvent(hF,HC.Redirect)}getRedirectStartPage(e){const t=e||window.location.href;return $y.getAbsoluteUrl(t,ZE())}}async function Yx(e,t,n,r,o){if(t.addQueueMeasurement(Jb,r),!e)throw n.info("Navigate url is empty"),uE(fw);return o?yk(Xx,tD,n,t,r)(e,o,t,r):vk($x,nD,n,t,r)(e)}async function Zx(e,t,n,r,o){const i=Jx();if(!i.contentDocument)throw"No document associated with iframe!";return(await Lx(i.contentDocument,e,t,n,r,o)).submit(),i}async function Qx(e,t,n,r,o,i,a){return r.addQueueMeasurement(eD,i),new Promise(((r,i)=>{t<nk&&o.warning("system.loadFrameTimeout or system.iframeHashTimeout set to lower (".concat(t,"ms) than the default (").concat(nk,"ms). This may result in timeouts."));const s=window.setTimeout((()=>{window.clearInterval(u),i(uE(kw))}),t),u=window.setInterval((()=>{let t="";const n=e.contentWindow;try{t=n?n.location.href:""}catch(i){}if(!t||"about:blank"===t)return;let o="";n&&(o=a===Zg?n.location.search:n.location.hash),window.clearTimeout(s),window.clearInterval(u),r(o)}),n)})).finally((()=>{vk(eA,MD,o,r,i)(e)}))}function Xx(e,t,n,r){return n.addQueueMeasurement(tD,r),new Promise(((n,r)=>{const o=Jx();window.setTimeout((()=>{o?(o.src=e,n(o)):r("Unable to load iframe")}),t)}))}function $x(e){const t=Jx();return t.src=e,t}function Jx(){const e=document.createElement("iframe");return e.className="msalSilentIframe",e.style.visibility="hidden",e.style.position="absolute",e.style.width=e.style.height="0",e.style.border="0",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(e),e}function eA(e){document.body===e.parentNode&&document.body.removeChild(e)}class tA extends yx{constructor(e,t,n,r,o,i,a,s,u,l,c){super(e,t,n,r,o,i,s,l,c),this.apiId=a,this.nativeStorage=u}async acquireToken(e){this.performanceClient.addQueueMeasurement(Ib,e.correlationId),e.loginHint||e.sid||e.account&&e.account.username||this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const t=l({},e);t.prompt?t.prompt!==Vg.NONE&&t.prompt!==Vg.NO_SESSION&&(this.logger.warning("SilentIframeClient. Replacing invalid prompt ".concat(t.prompt," with ").concat(Vg.NONE)),t.prompt=Vg.NONE):t.prompt=Vg.NONE;const n=await yk(this.initializeAuthorizationRequest.bind(this),iD,this.logger,this.performanceClient,e.correlationId)(t,HC.Silent);return n.platformBroker=kx.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,n.authenticationScheme),tk(n.authority),this.config.auth.protocolMode===jm?this.executeEarFlow(n):this.executeCodeFlow(n)}async executeCodeFlow(e){let t;const n=this.initializeServerTelemetryManager(this.apiId);try{return t=await yk(this.createAuthCodeClient.bind(this),rD,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:n,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),await yk(this.silentTokenHelper.bind(this),$b,this.logger,this.performanceClient,e.correlationId)(t,e)}catch(r){if(r instanceof Vm&&(r.setCorrelationId(this.correlationId),n.cacheFailedRequest(r)),!t||!(r instanceof Vm)||r.errorCode!==rC)throw r;return this.performanceClient.addFields({retryError:r.errorCode},this.correlationId),await yk(this.silentTokenHelper.bind(this),$b,this.logger,this.performanceClient,this.correlationId)(t,e)}}async executeEarFlow(e){const t=e.correlationId,n=await yk(this.getDiscoveredAuthority.bind(this),Rb,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),r=await yk(NE,$D,this.logger,this.performanceClient,t)(),o=l(l({},e),{},{earJwk:r}),i=await yk(Zx,Jb,this.logger,this.performanceClient,t)(this.config,n,o,this.logger,this.performanceClient),a=this.config.auth.OIDCOptions.serverResponseType,s=await yk(Qx,eD,this.logger,this.performanceClient,t)(i,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,t,a),u=vk(Fx,DD,this.logger,this.performanceClient,t)(s,a,this.logger);return yk(Ux,cD,this.logger,this.performanceClient,t)(o,u,this.apiId,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}logout(){return Promise.reject(uE(_w))}async silentTokenHelper(e,t){const n=t.correlationId;this.performanceClient.addQueueMeasurement($b,n);const r=await yk(qx,HD,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),o=l(l({},t),{},{codeChallenge:r.challenge}),i=await yk(zx,aD,this.logger,this.performanceClient,n)(this.config,e.authority,o,this.logger,this.performanceClient),a=await yk(Yx,Jb,this.logger,this.performanceClient,n)(i,this.performanceClient,this.logger,n,this.config.system.navigateFrameWait),s=this.config.auth.OIDCOptions.serverResponseType,u=await yk(Qx,eD,this.logger,this.performanceClient,n)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,n,s),c=vk(Fx,DD,this.logger,this.performanceClient,n)(u,s,this.logger);return yk(Hx,hD,this.logger,this.performanceClient,n)(t,c,r.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}}class nA extends rx{constructor(e,t){super(e,t)}async acquireToken(e){var t,n;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(jb,e.correlationId);const r=Vv(),o=await yk(this.executeTokenRequest.bind(this),Lb,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=null===(n=o.headers)||void 0===n?void 0:n[Og],a=new ux(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return a.validateTokenResponse(o.body),yk(a.handleServerTokenResponse.bind(a),bD,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,r,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){var t;if(!e)throw Ny(vy);if(null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Ub,e.correlationId),!e.account)throw Lv(vv);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await yk(this.acquireTokenWithCachedRefreshToken.bind(this),Hb,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(n){const t=n instanceof _k&&n.errorCode===wk,r=n instanceof tx&&n.errorCode===Dm&&n.subError===Cm;if(t||r)return yk(this.acquireTokenWithCachedRefreshToken.bind(this),Hb,this.logger,this.performanceClient,e.correlationId)(e,!1);throw n}return yk(this.acquireTokenWithCachedRefreshToken.bind(this),Hb,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Hb,e.correlationId);const r=vk(this.cacheManager.getRefreshToken.bind(this.cacheManager),OD,this.logger,this.performanceClient,e.correlationId)(e.account,t,void 0,this.performanceClient,e.correlationId);if(!r)throw Pk(wk);var o;if(r.expiresOn&&Yv(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw null===(o=this.performanceClient)||void 0===o||o.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),Pk(kk);const i=l(l({},e),{},{refreshToken:r.secret,authenticationScheme:e.authenticationScheme||gm.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:vF}});try{return await yk(this.acquireToken.bind(this),jb,this.logger,this.performanceClient,e.correlationId)(i)}catch(s){var a;if(s instanceof _k)if(null===(a=this.performanceClient)||void 0===a||a.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),s.subError===Fk){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const e=Zv(r);this.cacheManager.removeRefreshToken(e)}throw s}}async executeTokenRequest(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Lb,e.correlationId);const r=this.createTokenQueryParameters(e),o=$y.appendQueryString(t.tokenEndpoint,r),i=await yk(this.createTokenRequestBody.bind(this),qb,this.logger,this.performanceClient,e.correlationId)(e),a=this.createTokenRequestHeaders(e.ccsCredential),s=Tk(this.config.authOptions.clientId,e);return yk(this.executePostToTokenEndpoint.bind(this),Ob,this.logger,this.performanceClient,e.correlationId)(o,i,a,s,e.correlationId,Ob)}async createTokenRequestBody(e){var t,n,r;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(qb,e.correlationId);const o=new Map;if(PF(o,e.embeddedClientId||(null===(n=e.tokenBodyParameters)||void 0===n?void 0:n[bF])||this.config.authOptions.clientId),e.redirectUri&&TF(o,e.redirectUri),IF(o,e.scopes,!0,null===(r=this.config.authOptions.authority.options.OIDCOptions)||void 0===r?void 0:r.defaultScopes),VF(o,Jg),KF(o),LF(o,this.config.libraryInfo),jF(o,this.config.telemetry.application),$F(o),this.serverTelemetryManager&&!yb(this.config)&&XF(o,this.serverTelemetryManager),function(e,t){e.set("refresh_token",t)}(o,e.refreshToken),this.config.clientCredentials.clientSecret&&UF(o,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const t=this.config.clientCredentials.clientAssertion;qF(o,await dx(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),WF(o,t.assertionType)}if(e.authenticationScheme===gm.POP){const t=new ax(this.cryptoUtils,this.performanceClient);let n;if(e.popKid)n=this.cryptoUtils.encodeKid(e.popKid);else{n=(await yk(t.generateCnf.bind(t),vD,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}ZF(o,n)}else if(e.authenticationScheme===gm.SSH){if(!e.sshJwk)throw Ny(ky);QF(o,e.sshJwk)}if((!Ry.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&OF(o,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case vF:try{MF(o,Oy(e.ccsCredential.credential))}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case yF:RF(o,e.ccsCredential.credential)}return e.embeddedClientId&&JF(o,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&YF(o,e.tokenBodyParameters),SF(o,e.correlationId,this.performanceClient),Xy(o)}}class rA extends yx{async acquireToken(e){this.performanceClient.addQueueMeasurement(Tb,e.correlationId);const t=await yk(mx,Yb,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),n=l(l({},e),t);e.redirectUri&&(n.redirectUri=this.getRedirectUri(e.redirectUri));const r=this.initializeServerTelemetryManager(zC),o=await this.createRefreshTokenClient({serverTelemetryManager:r,authorityUrl:n.authority,azureCloudOptions:n.azureCloudOptions,account:n.account});return yk(o.acquireTokenByRefreshToken.bind(o),Ub,this.logger,this.performanceClient,e.correlationId)(n).catch((e=>{throw e.setCorrelationId(this.correlationId),r.cacheFailedRequest(e),e}))}logout(){return Promise.reject(uE(_w))}async createRefreshTokenClient(e){const t=await yk(this.getClientConfiguration.bind(this),oD,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new nA(t,this.performanceClient)}}class oA{constructor(e,t,n,r){this.isBrowserEnvironment="undefined"!==typeof window,this.config=e,this.storage=t,this.logger=n,this.cryptoObj=r}async loadExternalTokens(e,t,n){if(!this.isBrowserEnvironment)throw uE(Bw);const r=e.correlationId||PE(),o=t.id_token?qv(t.id_token,mE):void 0,i={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new Dk(Dk.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,i,this.logger,e.correlationId||PE()):void 0,s=await this.loadAccount(e,n.clientInfo||t.client_info||"",r,o,a),u=await this.loadIdToken(t,s.homeAccountId,s.environment,s.realm,r),l=await this.loadAccessToken(e,t,s.homeAccountId,s.environment,s.realm,n,r),c=await this.loadRefreshToken(t,s.homeAccountId,s.environment,r);return this.generateAuthenticationResult(e,{account:s,idToken:u,accessToken:l,refreshToken:c},o,a)}async loadAccount(e,t,n,r,o){if(this.logger.verbose("TokenCache - loading account"),e.account){const t=Yy.createFromAccountInfo(e.account);return await this.storage.setAccount(t,n),t}if(!o||!t&&!r)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),uE(Uw);const i=Yy.generateHomeAccountId(t,o.authorityType,this.logger,this.cryptoObj,r),a=null===r||void 0===r?void 0:r.tid,s=lx(this.storage,o,i,mE,r,t,o.hostnameAndPort,a,void 0,void 0,this.logger);return await this.storage.setAccount(s,n),s}async loadIdToken(e,t,n,r,o){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const i=Qv(t,n,e.id_token,this.config.auth.clientId,r);return await this.storage.setIdTokenCredential(i,o),i}async loadAccessToken(e,t,n,r,o,i,a){if(!t.access_token)return this.logger.verbose("TokenCache - no access token found in response"),null;if(!t.expires_in)return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null;this.logger.verbose("TokenCache - loading access token");const s=t.scope?My.fromString(t.scope):new My(e.scopes),u=i.expiresOn||t.expires_in+Vv(),l=i.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+Vv(),c=Xv(n,r,t.access_token,this.config.auth.clientId,o,s.printScopes(),u,l,mE);return await this.storage.setAccessTokenCredential(c,a),c}async loadRefreshToken(e,t,n,r){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const o=$v(t,n,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(o,r),o}generateAuthenticationResult(e,t,n,r){var o,i,a;let s,u="",l=[],c=null;null!==t&&void 0!==t&&t.accessToken&&(u=t.accessToken.secret,l=My.fromString(t.accessToken.target).asArray(),c=Gv(t.accessToken.expiresOn),s=Gv(t.accessToken.extendedExpiresOn));const d=t.account;return{authority:r?r.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:l,account:d.getAccountInfo(),idToken:(null===(o=t.idToken)||void 0===o?void 0:o.secret)||"",idTokenClaims:n||{},accessToken:u,fromCache:!0,expiresOn:c,correlationId:e.correlationId||"",requestId:"",extExpiresOn:s,familyId:(null===(i=t.refreshToken)||void 0===i?void 0:i.familyId)||"",tokenType:(null===t||void 0===t||null===(a=t.accessToken)||void 0===a?void 0:a.tokenType)||"",state:e.state||"",cloudGraphHostName:d.cloudGraphHostName||"",msGraphHost:d.msGraphHost||"",fromNativeBroker:!1}}}class iA extends hx{constructor(e){super(e),this.includeRedirectUri=!1}}class aA extends yx{constructor(e,t,n,r,o,i,a,s,u,l){super(e,t,n,r,o,i,s,u,l),this.apiId=a}async acquireToken(e){if(!e.code)throw uE(Ww);const t=await yk(this.initializeAuthorizationRequest.bind(this),iD,this.logger,this.performanceClient,e.correlationId)(e,HC.Silent),n=this.initializeServerTelemetryManager(this.apiId);try{const r=l(l({},t),{},{code:e.code}),o=await yk(this.getClientConfiguration.bind(this),oD,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:n,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),i=new iA(o);this.logger.verbose("Auth code client created");const a=new Ix(i,this.browserStorage,r,this.logger,this.performanceClient);return await yk(a.handleCodeResponseFromServer.bind(a),uD,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(r){throw r instanceof Vm&&(r.setCorrelationId(this.correlationId),n.cacheFailedRequest(r)),r}}logout(){return Promise.reject(uE(_w))}}function sA(e){const t=null===e||void 0===e?void 0:e.idTokenClaims;return null!==t&&void 0!==t&&t.tfp||null!==t&&void 0!==t&&t.acr?"B2C":null!==t&&void 0!==t&&t.tid?"9188040d-6c67-4c5b-b112-36a304b66dad"===(null===t||void 0===t?void 0:t.tid)?"MSA":"AAD":void 0}function uA(e,t){try{JE(e)}catch(n){throw t.end({success:!1},n),n}}class lA{constructor(e){var t,n,r,o;this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new gk(this.logger,this.performanceClient):jv,this.eventHandler=new mF(this.logger),this.browserStorage=this.isBrowserEnvironment?new pF(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,function(e){const t=e.cloudDiscoveryMetadata;let n;if(t)try{n=JSON.parse(t)}catch(r){throw Ny(Cy)}return{canonicalAuthority:e.authority?Ck(e.authority):void 0,knownAuthorities:e.knownAuthorities,cloudDiscoveryMetadata:n}}(this.config.auth)):(t=this.config.auth.clientId,n=this.logger,r=this.performanceClient,o=this.eventHandler,new pF(t,{cacheLocation:yC,temporaryCacheLocation:yC,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},jv,n,r,o));const i={cacheLocation:yC,temporaryCacheLocation:yC,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new pF(this.config.auth.clientId,i,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new oA(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,t){const n=new lA(e);return await n.initialize(t),n}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e,t){if(this.logger.trace("initialize called"),this.initialized)return void this.logger.info("initialize has already been called, exiting early.");if(!this.isBrowserEnvironment)return this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,void this.eventHandler.emitEvent(qk);const n=(null===e||void 0===e?void 0:e.correlationId)||this.getRequestCorrelationId(),r=this.config.system.allowPlatformBroker,o=this.performanceClient.startMeasurement(Qb,n);if(this.eventHandler.emitEvent(Uk),!t)try{this.logMultipleInstances(o)}catch(i){}if(await yk(this.browserStorage.initialize.bind(this.browserStorage),Xb,this.logger,this.performanceClient,n)(n),r)try{this.nativeExtensionProvider=await kx.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(a){this.logger.verbose(a)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),await yk(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),BD,this.logger,this.performanceClient,n)(this.performanceClient,n)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(n),this.initialized=!0,this.eventHandler.emitEvent(qk),o.end({allowPlatformBroker:r,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),$E(this.initialized),this.isBrowserEnvironment){const t=e||"";let n=this.redirectResponse.get(t);return"undefined"===typeof n?(n=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,n),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),n}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){var t;if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if((null===(t=this.browserStorage.getInteractionInProgress())||void 0===t?void 0:t.type)===wC)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const n=this.getAllAccounts(),r=this.browserStorage.getCachedNativeRequest(),o=r&&kx.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e;let i,a;this.eventHandler.emitEvent(aF,HC.Redirect);try{if(o&&this.nativeExtensionProvider){i=this.performanceClient.startMeasurement(xb,(null===r||void 0===r?void 0:r.correlationId)||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform");const e=new Bx(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,BC,this.performanceClient,this.nativeExtensionProvider,r.accountId,this.nativeInternalStorage,r.correlationId);a=yk(e.handleRedirectPromise.bind(e),ND,this.logger,this.performanceClient,i.event.correlationId)(this.performanceClient,i.event.correlationId)}else{const[t,n]=this.browserStorage.getCachedRequest(),r=t.correlationId;i=this.performanceClient.startMeasurement(xb,r),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const o=this.createRedirectClient(r);a=yk(o.handleRedirectPromise.bind(o),TD,this.logger,this.performanceClient,i.event.correlationId)(e,t,n,i)}}catch(s){throw this.browserStorage.resetRequestCache(),s}return a.then((e=>{if(e){this.browserStorage.resetRequestCache();n.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(Yk,HC.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Xk,HC.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),i.end({success:!0,accountType:sA(e.account)})}else i.event.errorCode?i.end({success:!1}):i.discard();return this.eventHandler.emitEvent(sF,HC.Redirect),e})).catch((e=>{this.browserStorage.resetRequestCache();const t=e;throw n.length>0?this.eventHandler.emitEvent($k,HC.Redirect,null,t):this.eventHandler.emitEvent(Zk,HC.Redirect,null,t),this.eventHandler.emitEvent(sF,HC.Redirect),i.end({success:!1},t),e}))}async acquireTokenRedirect(e){const t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);const n=this.performanceClient.startMeasurement(Fb,t);n.add({accountType:sA(e.account),scenarioId:e.scenarioId});const r=e.onRedirectNavigate;if(r)e.onRedirectNavigate=e=>{const t="function"===typeof r?r(e):void 0;return!1!==t?n.end({success:!0}):n.discard(),t};else{const e=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=t=>{const r="function"===typeof e?e(t):void 0;return!1!==r?n.end({success:!0}):n.discard(),r}}const o=this.getAllAccounts().length>0;try{let r;if(ek(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,CC),o?this.eventHandler.emitEvent(Qk,HC.Redirect,e):this.eventHandler.emitEvent(Gk,HC.Redirect,e),this.nativeExtensionProvider&&this.canUsePlatformBroker(e)){r=new Bx(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,NC,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,n).catch((n=>{if(n instanceof Cx&&wx(n)){this.nativeExtensionProvider=void 0;return this.createRedirectClient(t).acquireToken(e)}if(n instanceof _k){this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow");return this.createRedirectClient(t).acquireToken(e)}throw n}))}else{r=this.createRedirectClient(t).acquireToken(e)}return await r}catch(i){throw this.browserStorage.resetRequestCache(),n.end({success:!1},i),o?this.eventHandler.emitEvent($k,HC.Redirect,null,i):this.eventHandler.emitEvent(Zk,HC.Redirect,null,i),i}}acquireTokenPopup(e){const t=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(kb,t);n.add({scenarioId:e.scenarioId,accountType:sA(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),uA(this.initialized,n),this.browserStorage.setInteractionInProgress(!0,CC)}catch(a){return Promise.reject(a)}const r=this.getAllAccounts();let o;r.length>0?this.eventHandler.emitEvent(Qk,HC.Popup,e):this.eventHandler.emitEvent(Gk,HC.Popup,e);const i=this.getPreGeneratedPkceCodes(t);if(this.canUsePlatformBroker(e))o=this.acquireTokenNative(l(l({},e),{},{correlationId:t}),RC).then((e=>(n.end({success:!0,isNativeBroker:!0,accountType:sA(e.account)}),e))).catch((n=>{if(n instanceof Cx&&wx(n)){this.nativeExtensionProvider=void 0;return this.createPopupClient(t).acquireToken(e,i)}if(n instanceof _k){this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow");return this.createPopupClient(t).acquireToken(e,i)}throw n}));else{o=this.createPopupClient(t).acquireToken(e,i)}return o.then((e=>(r.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Yk,HC.Popup,e):this.eventHandler.emitEvent(Xk,HC.Popup,e),n.end({success:!0,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:sA(e.account)}),e))).catch((e=>(r.length>0?this.eventHandler.emitEvent($k,HC.Popup,null,e):this.eventHandler.emitEvent(Zk,HC.Popup,null,e),n.end({success:!1},e),Promise.reject(e)))).finally((async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(t)}))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var t,n;const r=this.getRequestCorrelationId(e),o=l(l({},e),{},{prompt:e.prompt,correlationId:r});let i;if(this.ssoSilentMeasurement=this.performanceClient.startMeasurement(Nb,r),null===(t=this.ssoSilentMeasurement)||void 0===t||t.add({scenarioId:e.scenarioId,accountType:sA(e.account)}),uA(this.initialized,this.ssoSilentMeasurement),null===(n=this.ssoSilentMeasurement)||void 0===n||n.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",r),this.eventHandler.emitEvent(eF,HC.Silent,o),this.canUsePlatformBroker(o))i=this.acquireTokenNative(o,MC).catch((e=>{if(e instanceof Cx&&wx(e)){this.nativeExtensionProvider=void 0;return this.createSilentIframeClient(o.correlationId).acquireToken(o)}throw e}));else{i=this.createSilentIframeClient(o.correlationId).acquireToken(o)}return i.then((e=>{var t;return this.eventHandler.emitEvent(tF,HC.Silent,e),null===(t=this.ssoSilentMeasurement)||void 0===t||t.end({success:!0,isNativeBroker:e.fromNativeBroker,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:sA(e.account)}),e})).catch((e=>{var t;throw this.eventHandler.emitEvent(nF,HC.Silent,null,e),null===(t=this.ssoSilentMeasurement)||void 0===t||t.end({success:!1},e),e})).finally((()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)}))}async acquireTokenByCode(e){const t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);const n=this.performanceClient.startMeasurement(Db,t);uA(this.initialized,n),this.eventHandler.emitEvent(rF,HC.Silent,e),n.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw uE(Kw);if(e.code){const r=e.code;let o=this.hybridAuthCodeResponses.get(r);return o?(this.logger.verbose("Existing acquireTokenByCode request found",t),n.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),o=this.acquireTokenByCodeAsync(l(l({},e),{},{correlationId:t})).then((e=>(this.eventHandler.emitEvent(oF,HC.Silent,e),this.hybridAuthCodeResponses.delete(r),n.end({success:!0,isNativeBroker:e.fromNativeBroker,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:sA(e.account)}),e))).catch((e=>{throw this.hybridAuthCodeResponses.delete(r),this.eventHandler.emitEvent(iF,HC.Silent,null,e),n.end({success:!1},e),e})),this.hybridAuthCodeResponses.set(r,o)),await o}if(e.nativeAccountId){if(this.canUsePlatformBroker(e,e.nativeAccountId)){const r=await this.acquireTokenNative(l(l({},e),{},{correlationId:t}),OC,e.nativeAccountId).catch((e=>{throw e instanceof Cx&&wx(e)&&(this.nativeExtensionProvider=void 0),e}));return n.end({accountType:sA(r.account),success:!0}),r}throw uE(Yw)}throw uE(Vw)}catch(r){throw this.eventHandler.emitEvent(iF,HC.Silent,null,r),n.end({success:!1},r),r}}async acquireTokenByCodeAsync(e){var t;this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(PD,e.correlationId),null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement);const n=this.createSilentAuthCodeClient(e.correlationId);return await n.acquireToken(e).then((e=>{var t;return null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.end({success:!0,fromCache:e.fromCache,isNativeBroker:e.fromNativeBroker}),e})).catch((e=>{var t;throw null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.end({success:!1},e),e})).finally((()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)}))}async acquireTokenFromCache(e,t){switch(this.performanceClient.addQueueMeasurement(Wb,e.correlationId),t){case JC:case ew:case tw:const t=this.createSilentCacheClient(e.correlationId);return yk(t.acquireToken.bind(t),_b,this.logger,this.performanceClient,e.correlationId)(e);default:throw Lv(Fv)}}async acquireTokenByRefreshToken(e,t){switch(this.performanceClient.addQueueMeasurement(Cb,e.correlationId),t){case JC:case tw:case nw:case rw:const t=this.createSilentRefreshClient(e.correlationId);return yk(t.acquireToken.bind(t),Tb,this.logger,this.performanceClient,e.correlationId)(e);default:throw Lv(Fv)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(Gb,e.correlationId);const t=this.createSilentIframeClient(e.correlationId);return yk(t.acquireToken.bind(t),Ib,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect(l({correlationId:t},e))}async logoutRedirect(e){const t=this.getRequestCorrelationId(e);ek(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,wC);return this.createRedirectClient(t).logout(e)}logoutPopup(e){try{const t=this.getRequestCorrelationId(e);JE(this.initialized),this.browserStorage.setInteractionInProgress(!0,wC);return this.createPopupClient(t).logout(e).finally((()=>{this.browserStorage.setInteractionInProgress(!1)}))}catch(t){return Promise.reject(t)}}async clearCache(e){if(!this.isBrowserEnvironment)return void this.logger.info("in non-browser environment, returning early.");const t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)}getAllAccounts(e){return function(e,t,n,r){return e.verbose("getAllAccounts called"),n?t.getAllAccounts(r):[]}(this.logger,this.browserStorage,this.isBrowserEnvironment,e)}getAccount(e){return function(e,t,n){if(t.trace("getAccount called"),0===Object.keys(e).length)return t.warning("getAccount: No accountFilter provided"),null;const r=n.getAccountInfoFilteredBy(e);return r?(t.verbose("getAccount: Account matching provided filter found, returning"),r):(t.verbose("getAccount: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByUsername(e){return function(e,t,n){if(t.trace("getAccountByUsername called"),!e)return t.warning("getAccountByUsername: No username provided"),null;const r=n.getAccountInfoFilteredBy({username:e});return r?(t.verbose("getAccountByUsername: Account matching username found, returning"),t.verbosePii("getAccountByUsername: Returning signed-in accounts matching username: ".concat(e)),r):(t.verbose("getAccountByUsername: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return function(e,t,n){if(t.trace("getAccountByHomeId called"),!e)return t.warning("getAccountByHomeId: No homeAccountId provided"),null;const r=n.getAccountInfoFilteredBy({homeAccountId:e});return r?(t.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),t.verbosePii("getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ".concat(e)),r):(t.verbose("getAccountByHomeId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return function(e,t,n){if(t.trace("getAccountByLocalId called"),!e)return t.warning("getAccountByLocalId: No localAccountId provided"),null;const r=n.getAccountInfoFilteredBy({localAccountId:e});return r?(t.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),t.verbosePii("getAccountByLocalId: Returning signed-in accounts matching localAccountId: ".concat(e)),r):(t.verbose("getAccountByLocalId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}setActiveAccount(e){!function(e,t){t.setActiveAccount(e)}(e,this.browserStorage)}getActiveAccount(){return this.browserStorage.getActiveAccount()}async hydrateCache(e,t){this.logger.verbose("hydrateCache called");const n=Yy.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(n,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)}async acquireTokenNative(e,t,n,r){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw uE(Xw);return new Bx(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.nativeExtensionProvider,n||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,r)}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!kx.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isPlatformBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case Vg.NONE:case Vg.CONSENT:case Vg.LOGIN:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace("canUsePlatformBroker: prompt = ".concat(e.prompt," is not compatible with platform broker flow, returning false")),!1}return!(!t&&!this.getNativeAccountId(e))||(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1)}getNativeAccountId(e){const t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new Kx(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new Gx(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new tA(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,MC,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new Nx(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new rA(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new aA(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,OC,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return XE(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){this.config.cache.cacheLocation===mC?this.eventHandler.subscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}disableAccountStorageEvents(){this.config.cache.cacheLocation===mC?this.eventHandler.unsubscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return null!==e&&void 0!==e&&e.correlationId?e.correlationId:this.isBrowserEnvironment?PE():xg.EMPTY_STRING}async loginRedirect(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect(l({correlationId:t},e||ZC))}loginPopup(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup(l({correlationId:t},e||ZC))}async acquireTokenSilent(e){const t=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(wb,t);n.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),uA(this.initialized,n),this.logger.verbose("acquireTokenSilent called",t);const r=e.account||this.getActiveAccount();if(!r)throw uE(Iw);return n.add({accountType:sA(r)}),this.acquireTokenSilentDeduped(e,r,t).then((r=>(n.end({success:!0,fromCache:r.fromCache,isNativeBroker:r.fromNativeBroker,accessTokenSize:r.accessToken.length,idTokenSize:r.idToken.length}),l(l({},r),{},{state:e.state,correlationId:t})))).catch((e=>{throw e instanceof Vm&&e.setCorrelationId(t),n.end({success:!1},e),e}))}async acquireTokenSilentDeduped(e,t,n){const r=Tk(this.config.auth.clientId,l(l({},e),{},{authority:e.authority||this.config.auth.authority,correlationId:n}),t.homeAccountId),o=JSON.stringify(r),i=this.activeSilentTokenRequests.get(o);if("undefined"===typeof i){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",n),this.performanceClient.addFields({deduped:!1},n);const r=yk(this.acquireTokenSilentAsync.bind(this),Eb,this.logger,this.performanceClient,n)(l(l({},e),{},{correlationId:n}),t);return this.activeSilentTokenRequests.set(o,r),r.finally((()=>{this.activeSilentTokenRequests.delete(o)}))}return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",n),this.performanceClient.addFields({deduped:!0},n),i}async acquireTokenSilentAsync(e,t){const n=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(Eb,e.correlationId),this.eventHandler.emitEvent(Qk,HC.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",n);const r=await yk(vx,Zb,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),o=e.cacheLookupPolicy||JC;return this.acquireTokenSilentNoIframe(r,o).catch((async e=>{const t=function(e,t){const n=!(e instanceof _k&&e.subError!==Fk),r=e.errorCode===rC||e.errorCode===Fv,o=n&&r||e.errorCode===wk||e.errorCode===kk,i=iw.includes(t);return o&&i}(e,o);if(t){if(this.activeIframeRequest){if(o!==ow){const[t,n]=this.activeIframeRequest;this.logger.verbose("Iframe request is already in progress, awaiting resolution for request with correlationId: ".concat(n),r.correlationId);const i=this.performanceClient.startMeasurement(Pb,r.correlationId);i.add({awaitIframeCorrelationId:n});const a=await t;if(i.end({success:a}),a)return this.logger.verbose("Parallel iframe request with correlationId: ".concat(n," succeeded. Retrying cache and/or RT redemption"),r.correlationId),this.acquireTokenSilentNoIframe(r,o);throw this.logger.info("Iframe request with correlationId: ".concat(n," failed. Interaction is required.")),e}return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",r.correlationId),yk(this.acquireTokenBySilentIframe.bind(this),Gb,this.logger,this.performanceClient,r.correlationId)(r)}{let e;return this.activeIframeRequest=[new Promise((t=>{e=t})),r.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",r.correlationId),yk(this.acquireTokenBySilentIframe.bind(this),Gb,this.logger,this.performanceClient,r.correlationId)(r).then((t=>(e(!0),t))).catch((t=>{throw e(!1),t})).finally((()=>{this.activeIframeRequest=void 0}))}}throw e})).then((t=>(this.eventHandler.emitEvent(Xk,HC.Silent,t),e.correlationId&&this.performanceClient.addFields({fromCache:t.fromCache,isNativeBroker:t.fromNativeBroker},e.correlationId),t))).catch((e=>{throw this.eventHandler.emitEvent($k,HC.Silent,null,e),e})).finally((()=>{document.removeEventListener("visibilitychange",n)}))}async acquireTokenSilentNoIframe(e,t){return kx.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,zC,e.account.nativeAccountId,t).catch((async e=>{if(e instanceof Cx&&wx(e))throw this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,Lv(Fv);throw e}))):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),t===ew&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),yk(this.acquireTokenFromCache.bind(this),Wb,this.logger,this.performanceClient,e.correlationId)(e,t).catch((n=>{if(t===ew)throw n;return this.eventHandler.emitEvent(Jk,HC.Silent,e),yk(this.acquireTokenByRefreshToken.bind(this),Cb,this.logger,this.performanceClient,e.correlationId)(e,t)})))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await yk(qx,HD,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const t=this.pkceCode?l({},this.pkceCode):void 0;return this.pkceCode=void 0,this.logger.verbose("".concat(t?"Found":"Did not find"," pre-generated PKCE codes")),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}logMultipleInstances(e){const t=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[];window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(t),function(e,t,n){var r;const o=(null===(r=window.msal)||void 0===r?void 0:r.clientIds)||[],i=o.length,a=o.filter((t=>t===e)).length;a>1&&n.warning("There is already an instance of MSAL.js in the window with the same client id."),t.add({msalInstanceCount:i,sameClientIdInstanceCount:a})}(t,e,this.logger)}}class cA{static async createPublicClientApplication(e){const t=await async function(e,t){const n=new ik(e);return await n.initialize(),lA.createController(n,t)}(e);return new cA(e,t)}constructor(e,t){this.isBroker=!1,this.controller=t||new lA(new ik(e))}async initialize(e){return this.controller.initialize(e,this.isBroker)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,t){return this.controller.hydrateCache(e,t)}clearCache(e){return this.controller.clearCache(e)}}const dA={instance:{initialize:()=>Promise.reject(KE(UE)),acquireTokenPopup:()=>Promise.reject(KE(UE)),acquireTokenRedirect:()=>Promise.reject(KE(UE)),acquireTokenSilent:()=>Promise.reject(KE(UE)),acquireTokenByCode:()=>Promise.reject(KE(UE)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(KE(UE)),loginPopup:()=>Promise.reject(KE(UE)),loginRedirect:()=>Promise.reject(KE(UE)),logout:()=>Promise.reject(KE(UE)),logoutRedirect:()=>Promise.reject(KE(UE)),logoutPopup:()=>Promise.reject(KE(UE)),ssoSilent:()=>Promise.reject(KE(UE)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw KE(UE)},getLogger:()=>{throw KE(UE)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw KE(UE)},hydrateCache:()=>Promise.reject(KE(UE)),clearCache:()=>Promise.reject(KE(UE))},inProgress:YC,accounts:[],logger:new Om({})},hA=r.createContext(dA);hA.Consumer;class fA{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case Gk:return qC;case eF:return KC;case Qk:if(e.interactionType===HC.Redirect||e.interactionType===HC.Popup)return VC;break;case aF:return GC;case lF:return WC;case tF:case nF:if(t&&t!==KC)break;return YC;case hF:if(t&&t!==WC)break;return YC;case sF:if(t&&t!==GC)break;return YC;case Yk:case Zk:case Xk:case $k:case fF:if(e.interactionType===HC.Redirect||e.interactionType===HC.Popup){if(t&&t!==qC&&t!==VC)break;return YC}}return null}}function pA(e,t){if(e.length!==t.length)return!1;const n=[...t];return e.every((e=>{const t=n.shift();return!(!e||!t)&&(e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username)}))}const gA="3.0.12",mA="UNBLOCK_INPROGRESS",vA="EVENT",yA=(e,t)=>{const{type:n,payload:r}=t;let o=e.inProgress;switch(n){case mA:e.inProgress===UC&&(o=YC,r.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case vA:const t=r.message,i=fA.getInteractionStatusFromEvent(t,e.inProgress);i&&(r.logger.info("MsalProvider - ".concat(t.eventType," results in setting inProgress from ").concat(e.inProgress," to ").concat(i)),o=i);break;default:throw new Error("Unknown action type: ".concat(n))}if(o===UC)return e;const i=r.instance.getAllAccounts();return o===e.inProgress||pA(i,e.accounts)?o!==e.inProgress?l(l({},e),{},{inProgress:o}):pA(i,e.accounts)?e:l(l({},e),{},{accounts:i}):l(l({},e),{},{inProgress:o,accounts:i})};function bA(e){let{instance:t,children:n}=e;(0,r.useEffect)((()=>{t.initializeWrapperLibrary(QC,gA)}),[t]);const o=(0,r.useMemo)((()=>t.getLogger().clone("@azure/msal-react",gA)),[t]),[i,a]=(0,r.useReducer)(yA,void 0,(()=>({inProgress:UC,accounts:[]})));(0,r.useEffect)((()=>{const e=t.addEventCallback((e=>{a({payload:{instance:t,logger:o,message:e},type:vA})}));return o.verbose("MsalProvider - Registered event callback with id: ".concat(e)),t.initialize().then((()=>{t.handleRedirectPromise().catch((()=>{})).finally((()=>{a({payload:{instance:t,logger:o},type:mA})}))})).catch((()=>{})),()=>{e&&(o.verbose("MsalProvider - Removing event callback ".concat(e)),t.removeEventCallback(e))}}),[t,o]);const s={instance:t,inProgress:i.inProgress,accounts:i.accounts,logger:o};return r.createElement(hA.Provider,{value:s},n)}const DA=()=>(0,r.useContext)(hA);function CA(e){const{accounts:t,inProgress:n}=DA(),o=(0,r.useMemo)((()=>n!==UC&&function(e,t){return t&&(t.username||t.homeAccountId||t.localAccountId)?!!function(e,t){return e.length>0&&(t.homeAccountId||t.localAccountId||t.username)&&e.filter((e=>(!t.username||t.username.toLowerCase()===e.username.toLowerCase())&&(!t.homeAccountId||t.homeAccountId.toLowerCase()===e.homeAccountId.toLowerCase())&&(!t.localAccountId||t.localAccountId.toLowerCase()===e.localAccountId.toLowerCase())))[0]||null}(e,t):e.length>0}(t,e)),[t,n,e]);return o}const wA=(0,r.createContext)();function EA(e){let{children:t}=e;const[n,o]=(0,r.useState)({open:!1,message:"",progressRoles:null,progressGraph:null,status:""}),i=(0,r.useCallback)((function(e){o({open:!0,message:e,status:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",progressRoles:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,progressGraph:arguments.length>3&&void 0!==arguments[3]?arguments[3]:null})}),[]),a=(0,r.useCallback)(((e,t)=>{o((n=>l(l({},n),{},{progressRoles:{current:e,total:t}})))}),[]),s=(0,r.useCallback)(((e,t)=>{o((n=>l(l({},n),{},{progressGraph:{current:e,total:t}})))}),[]),u=(0,r.useCallback)((()=>o((e=>l(l({},e),{},{open:!1})))),[]);return(0,d.jsxs)(wA.Provider,{value:{showToast:i,closeToast:u,updateToastProgressRoles:a,updateToastProgressGraph:s},children:[t,(0,d.jsx)(kA,{toast:n,closeToast:u})]})}function kA(e){let{toast:t,closeToast:n}=e;return t.open?(0,d.jsx)("div",{className:"fixed bottom-6 right-6 z-[100]",children:(0,d.jsxs)("div",{className:"flex flex-col gap-2 px-6 py-4 rounded-lg shadow-lg border\n          ".concat("success"===t.status?"bg-green-700/90 border-green-400":"error"===t.status?"bg-red-800/90 border-red-400":"bg-gray-800/90 border-blue-400","\n          min-w-[300px] max-w-xs animate-fade-in"),style:{transition:"all 0.3s"},children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:["success"===t.status&&(0,d.jsx)("svg",{className:"h-6 w-6 text-green-200",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"error"===t.status&&(0,d.jsx)("svg",{className:"h-6 w-6 text-red-200",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),"info"===t.status&&(0,d.jsxs)("svg",{className:"h-6 w-6 text-blue-200",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4m0 4h.01"})]}),(0,d.jsx)("span",{className:"font-semibold text-white",children:t.message})]}),t.progressRoles&&(0,d.jsxs)("div",{className:"w-full mt-1",children:[(0,d.jsxs)("div",{className:"flex justify-between text-xs text-gray-200 mb-1",children:[(0,d.jsx)("span",{children:"Entra roles"}),(0,d.jsxs)("span",{children:[t.progressRoles.current," / ",t.progressRoles.total]})]}),(0,d.jsx)("div",{className:"w-full bg-gray-700 rounded h-2 overflow-hidden",children:(0,d.jsx)("div",{className:"h-2 rounded transition-all duration-300 ".concat("error"===t.status?"bg-red-400":"success"===t.status?"bg-green-400":"bg-blue-400"),style:{width:t.progressRoles.total?"".concat(Math.round(t.progressRoles.current/t.progressRoles.total*100),"%"):"0%"}})})]}),t.progressGraph&&(0,d.jsxs)("div",{className:"w-full mt-1",children:[(0,d.jsxs)("div",{className:"flex justify-between text-xs text-gray-200 mb-1",children:[(0,d.jsx)("span",{children:"Graph API permissions"}),(0,d.jsxs)("span",{children:[t.progressGraph.current," / ",t.progressGraph.total||"?"]})]}),(0,d.jsx)("div",{className:"w-full bg-gray-700 rounded h-2 overflow-hidden",children:(0,d.jsx)("div",{className:"h-2 rounded transition-all duration-300 ".concat("error"===t.status?"bg-red-400":"success"===t.status?"bg-green-400":"bg-blue-400"),style:{width:t.progressGraph.total?"".concat(Math.round(t.progressGraph.current/t.progressGraph.total*100),"%"):"0%"}})})]}),(0,d.jsx)("button",{className:"absolute top-1 right-2 text-gray-300 hover:text-white text-xl",style:{background:"none",border:"none"},onClick:n,"aria-label":"Close",type:"button",children:"\xd7"})]})}):null}n(6159);function FA(e){let{onSave:t,defaultClientId:n,defaultTenantId:o}=e;const[i,a]=(0,r.useState)(n),[s,u]=(0,r.useState)(o),[l,c]=(0,r.useState)("");return(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 backdrop-blur-sm",children:(0,d.jsxs)("div",{className:"bg-gray-900 border border-white rounded-lg shadow-lg max-w-xl w-full p-8 relative",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold mb-4 text-center text-white",children:"Configure Microsoft Entra App Registration"}),(0,d.jsxs)("p",{className:"text-gray-300 mb-4 text-sm",children:["To use this tool, you need to provide your own ",(0,d.jsx)("b",{children:"Client ID"})," and ",(0,d.jsx)("b",{children:"Tenant ID"})," from an App Registration in your Microsoft Entra tenant."]}),(0,d.jsxs)("div",{className:"bg-gray-800 rounded p-4 mb-4 text-xs text-gray-200",children:[(0,d.jsx)("b",{children:"How to create an App Registration:"}),(0,d.jsxs)("ol",{className:"list-decimal ml-5 mt-2 space-y-1",children:[(0,d.jsxs)("li",{children:["Go to ",(0,d.jsx)("a",{href:"https://portal.azure.com/#view/Microsoft_AAD_RegisteredApps/ApplicationsListBlade",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 underline",children:"Azure Portal > Entra ID > App registrations"}),"."]}),(0,d.jsxs)("li",{children:["Click ",(0,d.jsx)("b",{children:"New registration"}),"."]}),(0,d.jsxs)("li",{children:["Give it a name, select ",(0,d.jsx)("b",{children:"Accounts in this organizational directory only"}),"."]}),(0,d.jsxs)("li",{children:["Set ",(0,d.jsx)("b",{children:"Redirect URI"})," to ",(0,d.jsx)("code",{children:window.location.origin})," (type: Single-page application)."]}),(0,d.jsxs)("li",{children:["After creation, copy the ",(0,d.jsx)("b",{children:"Application (client) ID"})," and ",(0,d.jsx)("b",{children:"Directory (tenant) ID"}),"."]}),(0,d.jsxs)("li",{children:["Go to ",(0,d.jsx)("b",{children:"API permissions"})," and add:",(0,d.jsx)("ul",{className:"list-disc ml-5",children:(0,d.jsxs)("li",{children:[(0,d.jsx)("b",{children:"Microsoft Graph"})," > ",(0,d.jsx)("b",{children:"Application permissions"}),":",(0,d.jsxs)("ul",{className:"list-disc ml-5",children:[(0,d.jsx)("li",{children:"Directory.Read.All"}),(0,d.jsx)("li",{children:"RoleManagement.Read.Directory"})]})]})})]}),(0,d.jsxs)("li",{children:["Click ",(0,d.jsx)("b",{children:"Grant admin consent"})," for your tenant."]})]})]}),(0,d.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i&&s?(c(""),t(i.trim(),s.trim())):c("Both Client ID and Tenant ID are required.")},className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-gray-200 mb-1 font-mono text-xs",children:"Client ID"}),(0,d.jsx)("input",{type:"text",value:i,onChange:e=>a(e.target.value),className:"w-full p-2 rounded bg-gray-800 border border-gray-600 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",autoFocus:!0})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-gray-200 mb-1 font-mono text-xs",children:"Tenant ID"}),(0,d.jsx)("input",{type:"text",value:s,onChange:e=>u(e.target.value),className:"w-full p-2 rounded bg-gray-800 border border-gray-600 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"})]}),l&&(0,d.jsx)("div",{className:"text-red-400 text-xs",children:l}),(0,d.jsx)("button",{type:"submit",className:"w-full mt-2 py-2 rounded bg-blue-600 text-white font-semibold hover:bg-blue-700 transition",children:"Save & Continue"})]}),(0,d.jsx)("div",{className:"mt-6 text-xs text-gray-400 text-center",children:"Your Client ID, Tenant ID and scan results are only stored in your browser and never sent anywhere else."})]})})}function xA(e){let{onShowConfigModal:t,pendingLogin:n,setPendingLogin:o,msalConfigReady:i,setConfig:a}=e;const[s,u]=(0,r.useState)(!1),[c,h]=(0,r.useState)(""),f=(0,r.useRef)(null),[p,g]=(0,r.useState)(!1),[m,v]=(0,r.useState)(""),y=(0,r.useRef)(null),[b,D]=(0,r.useState)(0),[C,w]=(0,r.useState)({}),[E,k]=(0,r.useState)({}),[F,x]=(0,r.useState)(Fg),[A,S]=(0,r.useState)({}),[_,I]=(0,r.useState)({}),[P,T]=(0,r.useState)(!1),{showToast:N,closeToast:R,updateToastProgressRoles:M,updateToastProgressGraph:B}=(0,r.useContext)(wA),[O,z]=(0,r.useState)({}),L={};Fg.nodes.forEach((e=>{if(e.data&&e.data.isEntraRole){const t=e.data.label.replace(/^\ud83d\udc51\s*/,"").trim();L[t.toLowerCase()]=e.id}}));const j={};function H(){var e,s;const{instance:u,accounts:c}=DA(),h=CA(),[f,p]=(0,r.useState)(!1),[g,m]=(0,r.useState)(""),[v,y]=(0,r.useState)(!1);(0,r.useEffect)((()=>{n&&u&&b()}),[n,u]);const b=()=>{p(!0),u.loginPopup({scopes:["Directory.Read.All","RoleManagement.Read.Directory"]}).finally((()=>p(!1)))};return i?h?(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsxs)("button",{className:"flex items-center gap-2 p-2 rounded-full border border-blue-300 bg-white hover:bg-gray-100 shadow transition",onClick:()=>y((e=>!e)),"aria-label":"Account menu",type:"button",children:[(0,d.jsxs)("svg",{className:"h-6 w-6 text-blue-700",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{cx:"12",cy:"8",r:"4"}),(0,d.jsx)("path",{d:"M4 20c0-2.21 3.58-4 8-4s8 1.79 8 4"})]}),(0,d.jsx)("span",{className:"font-medium text-blue-700 text-xs",children:null===(e=c[0])||void 0===e?void 0:e.username}),(0,d.jsx)("svg",{className:"h-4 w-4 text-blue-700 ml-1",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),v&&(0,d.jsxs)("div",{className:"absolute right-0 mt-2 w-72 bg-white border border-gray-200 rounded shadow-lg z-50",children:[(0,d.jsx)("div",{className:"px-4 py-2 text-xs text-gray-700 border-b",children:null===(s=c[0])||void 0===s?void 0:s.username}),(0,d.jsxs)("button",{className:"flex items-center w-full px-4 py-2 text-blue-700 hover:bg-blue-50 transition text-sm",onClick:()=>{y(!1),(async()=>{p(!0),m(""),N("Assessment started...","info");try{const t=c[0],n=(await u.acquireTokenSilent({account:t})).accessToken;N("Assessing Entra roles & Graph API permissions...","info",null,null);const r=(async()=>{const e=await fetch("https://graph.microsoft.com/v1.0/directoryRoles",{headers:{Authorization:"Bearer ".concat(n)}});if(!e.ok)throw new Error("Failed to fetch directory roles");const t={},r={},o=(await e.json()).value;let i=0;const a=o.length;for(const l of o){var s;const e=L[null===(s=l.displayName)||void 0===s?void 0:s.toLowerCase()];if(!e){i++,M(i,a);continue}const o=await fetch("https://graph.microsoft.com/v1.0/directoryRoles/".concat(l.id,"/members"),{headers:{Authorization:"Bearer ".concat(n),ConsistencyLevel:"eventual"}});let c={value:[]};o.ok&&(c=await o.json());let d=[],h=[];try{const e=await fetch("https://graph.microsoft.com/beta/roleManagement/directory/roleAssignments?$filter=roleDefinitionId eq '".concat(l.id,"'"),{headers:{Authorization:"Bearer ".concat(n)}});if(e.ok){const t=await e.json();d=await Promise.all((t.value||[]).map((async e=>{let t=e.principalDisplayName,r=e.principalUserPrincipalName,o=e.principalEmail;if(!t&&e.principalId)try{const i=await fetch("https://graph.microsoft.com/v1.0/directoryObjects/".concat(e.principalId),{headers:{Authorization:"Bearer ".concat(n)}});if(i.ok){const n=await i.json();t=n.displayName||n.userPrincipalName||n.mail||e.principalId,r=n.userPrincipalName||"",o=n.mail||""}}catch(i){}return{id:e.principalId,displayName:t||e.principalId,userPrincipalName:r,mail:o,type:e.principalType?"PIM Active (".concat(e.principalType,")"):"PIM Active"}})))}const t=await fetch("https://graph.microsoft.com/beta/roleManagement/directory/roleEligibilitySchedules?$filter=roleDefinitionId eq '".concat(l.id,"'"),{headers:{Authorization:"Bearer ".concat(n)}});t.ok&&(h=((await t.json()).value||[]).map((e=>({id:e.principalId,displayName:e.principalDisplayName||e.principalId,userPrincipalName:e.principalUserPrincipalName,mail:e.principalEmail,type:e.principalType?"PIM Eligible (".concat(e.principalType,")"):"PIM Eligible"}))))}catch(u){}const f=[...(c.value||[]).map((e=>({id:e.id,displayName:e.displayName||e.userPrincipalName||e.mail||"(unknown)",userPrincipalName:e.userPrincipalName,mail:e.mail}))),...d,...h];t[e]=f.length,r[e]=f,i++,M(i,a)}return{counts:t,membersMap:r}})(),o=(async()=>{let e=[],t="https://graph.microsoft.com/v1.0/servicePrincipals?$select=id,displayName,appId,appRoles,oauth2PermissionScopes,requiredResourceAccess";for(;t;){const r=await fetch(t,{headers:{Authorization:"Bearer ".concat(n)}});if(!r.ok)throw new Error("Failed to fetch service principals");const o=await r.json();e=e.concat(o.value||[]),t=o["@odata.nextLink"],B(e.length,0)}const r={},o={},i={};Fg.nodes.forEach((e=>{if(e.data&&e.data.isGraphPermission){const t=e.data.label.replace(/\s*\(\d+\)$/,"").trim();i[t]=e.id}}));const a={"Policy.ReadWrite.ConditionalAccess":"Policy.ReadWrite.ConditionalAccess","User.DeleteRestore.All":"User.DeleteRestore.All","User.EnableDisableAccount.All":"User.EnableDisableAccount.All","PrivilegedAccess.ReadWrite.AzureADGroup":"PrivilegedAccess.ReadWrite.AzureADGroup","PrivilegedAssignmentSchedule.ReadWrite.AzureADGroup":"PrivilegedAssignmentSchedule.ReadWrite.AzureADGroup","RoleAssignmentSchedule.ReadWrite.Directory":"RoleAssignmentSchedule.ReadWrite.Directory","RoleManagement.ReadWrite.Directory":"RoleManagement.ReadWrite.Directory","UserAuthenticationMethod.ReadWrite.All":"UserAuthenticationMethod.ReadWrite.All","Other Graph API permission":null};let s=0;const u=e.length;for(const n of e){let e=!1;const t=n.requiredResourceAccess||[];for(const s of t)if("00000003-0000-0000-c000-000000000000"===s.resourceAppId){for(const[t,u]of Object.entries(a))if(u&&s.resourceAccess&&s.resourceAccess.some((e=>e.value===u))){const a=i[t];if(!a)continue;r[a]||(r[a]=0),o[a]||(o[a]=[]),r[a]++,o[a].push({id:n.id,displayName:n.displayName,appId:n.appId}),e=!0}if(s.resourceAccess&&s.resourceAccess.some((e=>!Object.values(a).includes(e.value)))){const t=i["Other Graph API permission"];t&&(r[t]||(r[t]=0),o[t]||(o[t]=[]),r[t]++,o[t].push({id:n.id,displayName:n.displayName,appId:n.appId}),e=!0)}}for(const[s,u]of Object.entries(a))if(u){if(Array.isArray(n.appRoles)&&n.appRoles.some((e=>e.value===u))){const t=i[s];t&&(r[t]||(r[t]=0),o[t]||(o[t]=[]),r[t]++,o[t].push({id:n.id,displayName:n.displayName,appId:n.appId}),e=!0)}if(Array.isArray(n.oauth2PermissionScopes)&&n.oauth2PermissionScopes.some((e=>e.value===u))){const t=i[s];t&&(r[t]||(r[t]=0),o[t]||(o[t]=[]),r[t]++,o[t].push({id:n.id,displayName:n.displayName,appId:n.appId}),e=!0)}}if(!e&&(Array.isArray(n.appRoles)&&n.appRoles.length>0||Array.isArray(n.oauth2PermissionScopes)&&n.oauth2PermissionScopes.length>0)){const e=i["Other Graph API permission"];e&&(r[e]||(r[e]=0),o[e]||(o[e]=[]),r[e]++,o[e].push({id:n.id,displayName:n.displayName,appId:n.appId}))}s++,B(s,u)}return console.log("Graph API permission assessment results:",{graphCounts:r,graphApps:o}),{graphCounts:r,graphApps:o}})(),[{counts:i,membersMap:a},{graphCounts:s,graphApps:d}]=await Promise.all([r,o]);w(i),k(a),S(s),I(d);const h=Fg.nodes.filter((e=>{if(e.data&&e.data.isEntraRole){const t=e.data.label.replace(/^\ud83d\udc51\s*/,"").trim(),n=L[t.toLowerCase()],r=i[n];return"number"===typeof r&&r>0}if(e.data&&e.data.isGraphPermission){const t=e.data.label.replace(/\s*\(\d+\)$/,"").trim(),n=j[t.toLowerCase()],r=s[n];return"number"!==typeof r||r>0}return!0})).map((e=>{if(e.data&&e.data.isEntraRole){const t=e.data.label.replace(/^\ud83d\udc51\s*/,"").trim(),n=L[t.toLowerCase()],r=i[n];if("number"===typeof r){let t=e.data.label.replace(/\s*\(\d+\)$/,"");return l(l({},e),{},{data:l(l({},e.data),{},{label:"".concat(t," (").concat(r,")")})})}}if(e.data&&e.data.isGraphPermission){const t=e.data.label.replace(/\s*\(\d+\)$/,"").trim(),n=j[t.toLowerCase()],r=s[n];if("number"===typeof r){let t=e.data.label.replace(/\s*\(\d+\)$/,"");return l(l({},e),{},{data:l(l({},e.data),{},{label:"".concat(t," (").concat(r,")")})})}}return e})),f=new Set(h.map((e=>e.id))),p=Fg.edges.filter((e=>f.has(e.source)&&f.has(e.target))),g=l(l({},Fg),{},{nodes:h,edges:p});x(g),T(!0),N("Assessment finished!","success",null,null),setTimeout(R,3500);try{localStorage.setItem("entra-assessment-results",JSON.stringify({data:g,roleCounts:i,roleMembers:a,graphPermissionCounts:s,graphPermissionApps:d}))}catch(e){}}catch(t){m(t.message||"Error fetching role counts"),N("Assessment failed: "+(t.message||"Unknown error"),"error",null,null),setTimeout(R,5e3)}p(!1)})()},"aria-label":"Start assessment",type:"button",disabled:f,children:[(0,d.jsx)("svg",{className:"h-5 w-5 mr-2 text-blue-700",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("polygon",{points:"5,3 19,10 5,17"})}),f?"Loading...":"Start assessment"]}),f&&(0,d.jsx)("div",{className:"px-4 py-2 text-blue-700 text-xs animate-pulse",children:"Loading role counts..."}),(0,d.jsxs)("button",{className:"flex items-center w-full px-4 py-2 text-yellow-700 hover:bg-yellow-50 transition text-sm",onClick:()=>{y(!1),"function"===typeof a&&a(null),localStorage.removeItem("entra-msal-config"),localStorage.removeItem("entra-assessment-results"),window.location.reload()},"aria-label":"Clear Tenant/Client ID",type:"button",children:[(0,d.jsx)("svg",{className:"h-5 w-5 mr-2 text-yellow-700",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6M1 7h22M10 3h4a1 1 0 011 1v2H9V4a1 1 0 011-1z"})}),"Clear Tenant/Client ID"]}),(0,d.jsxs)("button",{className:"flex items-center w-full px-4 py-2 text-red-700 hover:bg-red-50 transition text-sm",onClick:()=>{y(!1),u.logoutPopup()},"aria-label":"Logout",type:"button",children:[(0,d.jsx)("svg",{className:"h-5 w-5 mr-2 text-red-700",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a2 2 0 01-2 2H7a2 2 0 01-2-2V7a2 2 0 012-2h4a2 2 0 012 2v1"})}),"Logout"]}),g&&(0,d.jsx)("div",{className:"px-4 py-2 text-xs text-red-700",children:g})]})]}):(0,d.jsxs)("button",{className:"p-2 rounded-full border border-blue-300 bg-white hover:bg-gray-100 shadow flex items-center transition",onClick:b,"aria-label":"Sign in with Microsoft",type:"button",children:[(0,d.jsxs)("svg",{className:"h-6 w-6 text-blue-700 mr-2",viewBox:"0 0 24 24",children:[(0,d.jsx)("rect",{fill:"#F35325",x:"2",y:"2",width:"9",height:"9"}),(0,d.jsx)("rect",{fill:"#81BC06",x:"13",y:"2",width:"9",height:"9"}),(0,d.jsx)("rect",{fill:"#05A6F0",x:"2",y:"13",width:"9",height:"9"}),(0,d.jsx)("rect",{fill:"#FFBA08",x:"13",y:"13",width:"9",height:"9"})]}),(0,d.jsx)("span",{className:"font-medium text-blue-700",children:f?"Signing in...":"Sign in"})]}):(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsxs)("button",{className:"p-2 rounded-full border border-blue-300 bg-white hover:bg-gray-100 shadow flex items-center transition",onClick:()=>y((e=>!e)),"aria-label":"Sign in with Microsoft",type:"button",children:[(0,d.jsxs)("svg",{className:"h-6 w-6 text-blue-700 mr-2",viewBox:"0 0 24 24",children:[(0,d.jsx)("rect",{fill:"#F35325",x:"2",y:"2",width:"9",height:"9"}),(0,d.jsx)("rect",{fill:"#81BC06",x:"13",y:"2",width:"9",height:"9"}),(0,d.jsx)("rect",{fill:"#05A6F0",x:"2",y:"13",width:"9",height:"9"}),(0,d.jsx)("rect",{fill:"#FFBA08",x:"13",y:"13",width:"9",height:"9"})]}),(0,d.jsx)("span",{className:"font-medium text-blue-700 text-xs",children:"Sign in"}),(0,d.jsx)("svg",{className:"h-4 w-4 text-blue-700 ml-1",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),v&&(0,d.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-white border border-gray-200 rounded shadow-lg z-50",children:[(0,d.jsxs)("button",{className:"flex items-center w-full px-4 py-2 text-blue-700 hover:bg-blue-50 transition text-sm",onClick:()=>{y(!1),o(!0),t()},"aria-label":"Sign in in this browser",type:"button",children:[(0,d.jsx)("svg",{className:"h-5 w-5 mr-2 text-blue-700",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("polygon",{points:"5,3 19,10 5,17"})}),"Sign in in this browser"]}),(0,d.jsxs)("button",{className:"flex items-center w-full px-4 py-2 text-green-700 hover:bg-green-50 transition text-sm",onClick:()=>{y(!1),K(!0)},"aria-label":"Host this website locally",type:"button",children:[(0,d.jsx)("svg",{className:"h-5 w-5 mr-2 text-green-700",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0h6"})}),"Host this website locally"]})]})]})}Fg.nodes.forEach((e=>{if(e.data&&e.data.isGraphPermission){const t=e.data.label.replace(/\s*\(\d+\)$/,"").trim();j[t.toLowerCase()]=e.id}})),(0,r.useEffect)((()=>{s&&fetch("".concat("/attack-paths","/help.md")).then((e=>e.text())).then(h).catch((()=>h("Help information not available.")))}),[s]),(0,r.useEffect)((()=>{p&&fetch("".concat("/attack-paths","/mitigations.md")).then((e=>e.text())).then(v).catch((()=>v("Mitigations information not available.")))}),[p]),(0,r.useEffect)((()=>{function e(e){s&&f.current&&!f.current.contains(e.target)&&u(!1),p&&y.current&&!y.current.contains(e.target)&&g(!1)}return(s||p)&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[s,p]),(0,r.useEffect)((()=>{try{const e=localStorage.getItem("entra-assessment-results");if(e){const t=JSON.parse(e);t&&t.data&&t.roleCounts&&t.roleMembers&&t.graphPermissionCounts&&t.graphPermissionApps&&(x(t.data),w(t.roleCounts),k(t.roleMembers),S(t.graphPermissionCounts),I(t.graphPermissionApps),T(!0),N("Loaded cached assessment results.","info",null,null),setTimeout(R,2500))}}catch(e){}}),[]);const[U,q]=(0,r.useState)({open:!1,nodeId:null,apps:[]}),W=(0,r.useRef)(null);(0,r.useEffect)((()=>{function e(e){U.open&&W.current&&!W.current.contains(e.target)&&q((e=>l(l({},e),{},{open:!1})))}return U.open&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[U.open]);const[V,K]=(0,r.useState)(!1),[G,Y]=(0,r.useState)(!1),Z=(0,r.useRef)(null);return(0,r.useEffect)((()=>{function e(e){V&&Z.current&&!Z.current.contains(e.target)&&K(!1)}return V&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[V]),(0,d.jsxs)("div",{className:"p min-h-screen bg-gray-900 relative",children:[(0,d.jsxs)("div",{className:"absolute top-5 right-5 z-40 flex gap-2",children:[(0,d.jsx)(H,{}),(0,d.jsx)("button",{className:"p-2 rounded-full border border-green-300 bg-white hover:bg-gray-100 shadow",onClick:()=>g(!0),"aria-label":"Mitigations",type:"button",children:(0,d.jsxs)("svg",{className:"h-6 w-6 text-green-700",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5l7 3v5.5c0 5.25-7 8-7 8s-7-2.75-7-8V7.5l7-3z"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4"})]})}),(0,d.jsx)("button",{className:"p-2 rounded-full border border-gray-300 bg-white hover:bg-gray-100 shadow",onClick:()=>u(!0),"aria-label":"Help",type:"button",children:(0,d.jsxs)("svg",{className:"h-6 w-6 text-gray-700",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 10a4 4 0 118 0c0 2-2 3-2 3m-2 4h.01M12 18h.01"}),(0,d.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"})]})})]}),s&&(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 overflow-y-auto backdrop-blur-sm",children:(0,d.jsxs)("div",{ref:f,className:"bg-gray-900 rounded-lg shadow-lg max-w-4xl w-full p-6 relative my-8 border border-white",style:{maxHeight:"90vh",overflowY:"auto"},children:[(0,d.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl",onClick:()=>u(!1),"aria-label":"Close",type:"button",children:"\xd7"}),(0,d.jsx)("div",{className:"prose prose-invert prose-a:text-white prose-headings:text-white max-w-none mb-4 text-white",children:(0,d.jsx)(bh,{remarkPlugins:[Dg],children:c})}),(0,d.jsxs)("div",{className:"flex gap-3 mt-8",children:[(0,d.jsxs)("a",{href:"https://www.linkedin.com/in/jasper-baes/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:[(0,d.jsx)("svg",{className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.761 0 5-2.239 5-5v-14c0-2.761-2.239-5-5-5zm-11 19h-3v-10h3v10zm-1.5-11.268c-.966 0-1.75-.784-1.75-1.75s.784-1.75 1.75-1.75 1.75.784 1.75 1.75-.784 1.75-1.75 1.75zm15.5 11.268h-3v-5.604c0-1.337-.026-3.063-1.867-3.063-1.868 0-2.154 1.459-2.154 2.967v5.7h-3v-10h2.881v1.367h.041c.401-.761 1.381-1.563 2.841-1.563 3.039 0 3.6 2.001 3.6 4.601v5.595z"})}),"Follow me on LinkedIn"]}),(0,d.jsxs)("a",{href:"https://jbaes.be/posts",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-2 rounded bg-gray-800 text-white hover:bg-gray-900",children:[(0,d.jsxs)("svg",{className:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2 12h20M12 2a15.3 15.3 0 010 20M12 2a15.3 15.3 0 000 20"})]}),"Visit my blog"]}),(0,d.jsxs)("a",{href:"https://buymeacoffee.com/jasperbaes",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-2 rounded bg-yellow-400 text-gray-900 hover:bg-yellow-300 font-semibold",children:[(0,d.jsx)("svg",{className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{d:"M18 8a1 1 0 011 1v2a5 5 0 01-5 5H8a5 5 0 01-5-5V9a1 1 0 011-1h14zm-1 7a7 7 0 01-14 0h14zm2-7h2a1 1 0 011 1v2a3 3 0 01-3 3v-6z"})}),"Buy Me a Coffee"]})]})]})}),p&&(0,d.jsx)(AA,{mitigationsPopupRef:y,mitigationsTab:b,setMitigationsTab:D,setMitigationsOpen:g,roleMembers:E,graphPermissionApps:_,initialData:Fg,mitigationsMarkdown:m,groupRMAUCache:O,setGroupRMAUCache:z,msalConfigReady:i}),(0,d.jsx)("h1",{className:"text-3xl font-bold pt-5 mb-0 text-center text-gray-100",children:"Entra ID Attack Paths"}),(0,d.jsx)("div",{className:"flex justify-center items-center mb-4",children:(0,d.jsxs)("span",{className:"text-sm text-gray-400 text-center",children:["made by"," ",(0,d.jsx)("b",{style:{background:"linear-gradient(90deg, #e92a67 0%, #2a8af6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textFillColor:"transparent"},children:(0,d.jsx)("a",{href:"https://linkedin.com/in/jasper-baes",target:"_blank",rel:"noopener noreferrer",children:"Jasper Baes"})})]})}),(0,d.jsx)(kg,{data:F,roleMembers:E,onGraphPermissionNodeClick:e=>{_[e]&&q({open:!0,nodeId:e,apps:_[e]||[]})},graphPermissionApps:_}),U.open&&(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 overflow-y-auto backdrop-blur-sm",children:(0,d.jsxs)("div",{ref:W,className:"bg-gray-900 rounded-lg shadow-lg max-w-2xl w-full p-6 relative my-8 border border-white",style:{maxHeight:"90vh",overflowY:"auto"},children:[(0,d.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl",onClick:()=>q((e=>l(l({},e),{},{open:!1}))),"aria-label":"Close",type:"button",children:"\xd7"}),(0,d.jsxs)("h2",{className:"text-xl font-bold mb-4 text-white",children:["Applications with\xa0",(0,d.jsx)("span",{className:"text-blue-300",children:(e=>{const t=F.nodes.find((e=>e.id===U.nodeId));return(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.label)||""})()}),"\xa0permission"]}),(0,d.jsxs)("div",{className:"mt-6",children:[(0,d.jsx)("div",{className:"font-bold text-lg mb-2 text-white",children:"Applications with this Graph API permission:"}),(0,d.jsxs)("ul",{className:"list-disc ml-6",children:[0===U.apps.length&&(0,d.jsx)("li",{className:"text-gray-400",children:"No applications found."}),U.apps.map((e=>(0,d.jsxs)("li",{className:"mb-1",children:[(0,d.jsx)("span",{className:"font-mono text-sm text-blue-200",children:e.displayName}),(0,d.jsxs)("span",{className:"ml-2 text-xs text-gray-400",children:["App ID: ",e.appId]})]},e.id)))]})]})]})}),V&&(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 overflow-y-auto backdrop-blur-sm",children:(0,d.jsxs)("div",{ref:Z,className:"bg-gray-900 rounded-lg shadow-lg max-w-xl w-full p-8 relative border border-white",style:{maxHeight:"90vh",overflowY:"auto"},children:[(0,d.jsx)("button",{className:"absolute top-0 right-2 text-gray-400 hover:text-gray-700 text-2xl",onClick:()=>K(!1),"aria-label":"Close",type:"button",children:"\xd7"}),(0,d.jsx)("h2",{className:"text-2xl font-bold mb-4 text-center text-white",children:"Host this website locally"}),(0,d.jsxs)("div",{className:"text-gray-300 mb-4 text-sm",children:[(0,d.jsx)("b",{children:(0,d.jsx)("u",{children:"Why?"})})," You might not be allowed to login with a privileged Microsoft account on a website.",(0,d.jsx)("br",{}),(0,d.jsx)("b",{children:(0,d.jsx)("u",{children:"How?"})})," Download all files and run a local server in this folder.",(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("b",{children:"Quick start (Python):"}),(0,d.jsx)("pre",{className:"bg-gray-800 text-white rounded p-2 mt-2 text-xs overflow-x-auto",children:"python -m http.server 8080"}),(0,d.jsx)("br",{}),"Then open ",(0,d.jsx)("span",{className:"text-blue-200",children:"http://localhost:8080/"})," in your browser.",(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("b",{children:(0,d.jsx)("u",{children:"Other options:"})})," You can use ",(0,d.jsx)("code",{children:"npx serve"}),", ",(0,d.jsx)("code",{children:"http-server"}),", or any static file server.",(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("b",{children:"Download:"})]}),(0,d.jsx)("button",{className:"w-full py-2 rounded bg-blue-600 text-white font-semibold hover:bg-blue-700 transition mb-2",onClick:()=>{const e="".concat("/attack-paths","/entra-id-attack-paths.zip"),t=document.createElement("a");t.href=e,t.download="entra-id-attack-paths.zip",document.body.appendChild(t),t.click(),setTimeout((()=>{document.body.removeChild(t)}),100)},type:"button",children:"Download all files as ZIP"}),(0,d.jsx)("div",{className:"mt-4 text-xs text-gray-400 text-center",children:"All files are downloaded as a pre-built ZIP archive."})]})})]})}function AA(e){let{mitigationsPopupRef:t,mitigationsTab:n,setMitigationsTab:o,setMitigationsOpen:i,roleMembers:a,graphPermissionApps:s,initialData:u,mitigationsMarkdown:c,groupRMAUCache:h,setGroupRMAUCache:f,msalConfigReady:p}=e;const g=DA(),m=g.instance,v=g.accounts,[y,b]=(0,r.useState)({}),[D,C]=(0,r.useState)({}),[w,E]=(0,r.useState)(null);return(0,r.useEffect)((()=>{if(!p||!m||!v[0])return;const e=new Set;Object.values(a).forEach((t=>{t.forEach((t=>{(t.type&&t.type.toLowerCase().includes("group")||!t.type&&t.id&&36===t.id.length)&&t.id&&void 0===y[t.id]&&void 0===h[t.id]&&e.add(t.id)}))})),e.forEach((e=>{(async e=>{if(!p||!m||!v[0])return!1;if(void 0!==y[e])return y[e];C((t=>l(l({},t),{},{[e]:!0})));try{const t=(await m.acquireTokenSilent({account:v[0]})).accessToken,n=await fetch("https://graph.microsoft.com/beta/groups/".concat(e,"?$select=isManagementRestricted,displayName"),{headers:{Authorization:"Bearer ".concat(t)}});if(!n.ok)throw new Error;const r=await n.json();return b((t=>l(l({},t),{},{[e]:!!r.isManagementRestricted}))),f((t=>l(l({},t),{},{[e]:!!r.isManagementRestricted}))),C((t=>l(l({},t),{},{[e]:!1}))),!!r.isManagementRestricted}catch(t){return b((t=>l(l({},t),{},{[e]:!1}))),C((t=>l(l({},t),{},{[e]:!1}))),!1}})(e)}))}),[a,p,m,v]),(0,d.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 overflow-y-auto backdrop-blur-sm",children:[w&&(0,d.jsx)("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-40 backdrop-blur-sm transition-all duration-200 pointer-events-none"}),(0,d.jsxs)("div",{ref:t,className:"bg-gray-900 rounded-lg shadow-lg max-w-4xl w-full p-6 relative my-8 border border-white",style:{maxHeight:"90vh",overflowY:"auto"},children:[(0,d.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl",onClick:()=>i(!1),"aria-label":"Close",type:"button",children:"\xd7"}),(0,d.jsxs)("div",{className:"flex mb-6 border-b border-gray-700",children:[(0,d.jsx)("button",{className:"px-4 py-2 font-semibold text-sm rounded-t ".concat(0===n?"bg-gray-800 text-white border-b-2 border-blue-400":"text-gray-400"),onClick:()=>o(0),type:"button",children:"Overview"}),(0,d.jsx)("button",{className:"ml-2 px-4 py-2 font-semibold text-sm rounded-t ".concat(1===n?"bg-gray-800 text-white border-b-2 border-blue-400":"text-gray-400"),onClick:()=>o(1),type:"button",children:"Mitigations"})]}),0===n?0===Object.keys(a).length&&0===Object.keys(s).length?(0,d.jsxs)("div",{className:"text-center text-gray-300 py-12",children:[(0,d.jsx)("div",{className:"text-lg font-semibold mb-2",children:"Assessment not run yet"}),(0,d.jsx)("div",{className:"mb-2",children:"Please sign in and run the assessment first to view Entra roles and Graph API permissions."}),(0,d.jsx)("div",{className:"text-xs text-gray-500",children:'Click the Sign in button and then "Start assessment" from the menu.'})]}):(0,d.jsxs)("div",{className:"overflow-y-auto max-h-[65vh]",children:[(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsx)("h3",{className:"text-lg font-bold mb-2 text-blue-200",children:"Entra Roles"}),(0,d.jsx)("ul",{className:"space-y-3",children:Object.entries(a).filter((e=>{let[t,n]=e;return Array.isArray(n)&&n.length>0})).map((e=>{let[t,n]=e;const r=u.nodes.find((e=>e.id===t));return r?(0,d.jsxs)("li",{className:"bg-gray-800 rounded p-3",children:[(0,d.jsx)("div",{className:"font-semibold text-white",children:r.data.label.replace(/\s*\(\d+\)$/,"")}),(0,d.jsx)("ul",{className:"ml-4 mt-1 text-sm text-gray-200",children:n.map((e=>{const t=e.type&&e.type.toLowerCase().includes("group")||!e.type&&e.id&&36===e.id.length;return(0,d.jsxs)("li",{className:"mb-1",children:[(0,d.jsx)("span",{className:"font-mono",children:e.displayName}),e.userPrincipalName&&(0,d.jsx)("span",{className:"ml-2 text-xs text-gray-400",children:e.userPrincipalName}),e.mail&&(0,d.jsx)("span",{className:"ml-2 text-xs text-gray-400",children:e.mail}),e.type&&(0,d.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:e.type.replace("microsoft.graph.","")}),t&&e.id&&(0,d.jsxs)("span",{className:"ml-2 text-xs relative group cursor-pointer",onMouseEnter:()=>E(e.id),onMouseLeave:()=>E(null),tabIndex:0,onFocus:()=>E(e.id),onBlur:()=>E(null),children:[D[e.id]?(0,d.jsx)("span",{className:"text-gray-400",children:"Checking RMAU..."}):(0,d.jsx)("span",{className:!0===h[e.id]||!0===y[e.id]?"text-green-400":"text-red-400",children:!0===h[e.id]||!0===y[e.id]?"RMAU":"Not RMAU"}),w===e.id&&(0,d.jsxs)("span",{className:"absolute left-1/2 z-50 -translate-x-1/2 mt-2 w-80 px-3 py-2 rounded bg-gray-800 text-white text-xs shadow-lg opacity-100 pointer-events-auto border border-gray-700 transition-all duration-200",children:[(0,d.jsx)("b",{children:"RMAU"})," = Restricted Management Administrative Unit.",(0,d.jsx)("br",{}),"Groups marked as RMAU are protected from privileged role assignments by non-authorized admins.",(0,d.jsx)("br",{}),(0,d.jsx)("span",{className:"text-blue-200",children:"Why important?"})," Only RMAU groups can be used to securely delegate privileged roles (like Global Admin) to reduce the risk of privilege escalation by attackers or misconfigured admins."]})]})]},e.id)}))})]},t):null}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-bold mb-2 text-blue-200",children:"Graph API Permissions"}),(0,d.jsx)("ul",{className:"space-y-3",children:Object.entries(s).filter((e=>{let[t,n]=e;return Array.isArray(n)&&n.length>0})).map((e=>{let[t,n]=e;const r=u.nodes.find((e=>e.id===t));return r?(0,d.jsxs)("li",{className:"bg-gray-800 rounded p-3",children:[(0,d.jsx)("div",{className:"font-semibold text-white",children:r.data.label.replace(/\s*\(\d+\)$/,"")}),(0,d.jsx)("ul",{className:"ml-4 mt-1 text-sm text-gray-200",children:n.map((e=>(0,d.jsxs)("li",{className:"mb-1",children:[(0,d.jsx)("span",{className:"font-mono",children:e.displayName}),(0,d.jsxs)("span",{className:"ml-2 text-xs text-gray-400",children:["App ID: ",e.appId]})]},e.id)))})]},t):null}))})]})]}):(0,d.jsx)("div",{className:"prose prose-invert prose-a:text-white prose-headings:text-white max-w-none mb-4 text-white",children:(0,d.jsx)(bh,{remarkPlugins:[Dg],children:c})})]})]})}const SA=function(){const[e,t]=(0,r.useState)((()=>{try{const e=localStorage.getItem("entra-msal-config");if(e)return JSON.parse(e)}catch(e){}return null})()),[n,o]=(0,r.useState)(!1),[i,a]=(0,r.useState)(!1),[s,u]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),h=(e,n)=>{const r={clientId:e,tenantId:n};t(r);try{localStorage.setItem("entra-msal-config",JSON.stringify(r))}catch(s){}o(!1),i&&setTimeout((()=>a(!1)),0)};return(0,r.useEffect)((()=>{let t=!0;if(c(null),e){const r={auth:{clientId:e.clientId,authority:"https://login.microsoftonline.com/".concat(e.tenantId),redirectUri:window.location.origin}};try{const e=new cA(r);e.initialize().then((()=>{t&&u(e)})).catch((e=>{t&&c(e)}))}catch(n){u(null),c(n)}}else u(null);return()=>{t=!1}}),[null===e||void 0===e?void 0:e.clientId,null===e||void 0===e?void 0:e.tenantId]),e&&s&&!l?(0,d.jsx)(bA,{instance:s,children:(0,d.jsxs)(EA,{children:[(0,d.jsx)(xA,{onShowConfigModal:()=>o(!0),pendingLogin:i,setPendingLogin:a,msalConfigReady:!0,setConfig:t}),n&&(0,d.jsx)(FA,{onSave:h,defaultClientId:(null===e||void 0===e?void 0:e.clientId)||"",defaultTenantId:(null===e||void 0===e?void 0:e.tenantId)||""})]})}):l?(0,d.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white",children:(0,d.jsxs)("div",{className:"bg-red-900 border border-red-400 rounded p-6 max-w-lg shadow-lg",children:[(0,d.jsx)("h2",{className:"text-xl font-bold mb-2 text-red-200",children:"Authentication Error"}),(0,d.jsxs)("div",{className:"mb-2 text-red-100",children:["There was a problem initializing Microsoft authentication.",(0,d.jsx)("br",{}),"Please check your Client ID and Tenant ID, or try again."]}),(0,d.jsx)("div",{className:"text-xs text-red-300 break-all mb-4",children:l.message}),(0,d.jsx)("button",{className:"px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{t(null),c(null),localStorage.removeItem("entra-msal-config")},children:"Reset & Try Again"})]})}):(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(EA,{children:[(0,d.jsx)(xA,{onShowConfigModal:()=>o(!0),pendingLogin:i,setPendingLogin:a,msalConfigReady:!1,setConfig:t}),n&&(0,d.jsx)(FA,{onSave:h,defaultClientId:(null===e||void 0===e?void 0:e.clientId)||"",defaultTenantId:(null===e||void 0===e?void 0:e.tenantId)||""})]})})},_A=e=>{e&&e instanceof Function&&n.e(6453).then(n.bind(n,6453)).then((t=>{let{getCLS:n,getFID:r,getFCP:o,getLCP:i,getTTFB:a}=t;n(e),r(e),o(e),i(e),a(e)}))};o.createRoot(document.getElementById("root")).render((0,d.jsx)(r.StrictMode,{children:(0,d.jsx)(SA,{})})),_A()})()})();
//# sourceMappingURL=main.5711488c.js.map