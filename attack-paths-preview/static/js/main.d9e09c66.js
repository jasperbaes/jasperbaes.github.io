/*! For license information please see main.d9e09c66.js.LICENSE.txt */
(()=>{var e={351:(e,t,n)=>{var o=n(4403);function r(e,t){var n,r=null;if(!e||"string"!==typeof e)return r;for(var i,a,s=o(e),u="function"===typeof t,l=0,c=s.length;l<c;l++)i=(n=s[l]).property,a=n.value,u?t(i,a,n):a&&(r||(r={}),r[i]=a);return r}e.exports=r,e.exports.default=r},579:(e,t,n)=>{"use strict";e.exports=n(1153)},1153:(e,t,n)=>{"use strict";var o=n(5043),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var o,i={},l=null,c=null;for(o in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,o)&&!u.hasOwnProperty(o)&&(i[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===i[o]&&(i[o]=t[o]);return{$$typeof:r,type:e,key:l,ref:c,props:i,_owner:s.current}}t.Fragment=i,t.jsx=l,t.jsxs=l},1497:(e,t,n)=>{"use strict";var o=n(3218);function r(){}function i(){}i.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,i,a){if(a!==o){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return n.PropTypes=n,n}},2330:(e,t,n)=>{"use strict";var o=n(5043);var r="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},i=o.useState,a=o.useEffect,s=o.useLayoutEffect,u=o.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(o){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),o=i({inst:{value:n,getSnapshot:t}}),r=o[0].inst,c=o[1];return s((function(){r.value=n,r.getSnapshot=t,l(r)&&c({inst:r})}),[e,n,t]),a((function(){return l(r)&&c({inst:r}),e((function(){l(r)&&c({inst:r})}))}),[e]),u(n),n};t.useSyncExternalStore=void 0!==o.useSyncExternalStore?o.useSyncExternalStore:c},2730:(e,t,n)=>{"use strict";var o=n(5043),r=n(8853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,o,r,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=o,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function D(e,t,n,o){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:o||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,o){if(null===t||"undefined"===typeof t||function(e,t,n,o){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!o&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,o))return!0;if(o)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,o)&&(n=null),o||null===r?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,o=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,o?e.setAttributeNS(o,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var C=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),A=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var B,O=Object.assign;function L(e){if(void 0===B)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var z=!1;function j(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var o=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){o=l}e.call(t.prototype)}else{try{throw Error()}catch(l){o=l}e()}}catch(l){if(l&&o&&"string"===typeof l.stack){for(var r=l.stack.split("\n"),i=o.stack.split("\n"),a=r.length-1,s=i.length-1;1<=a&&0<=s&&r[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(r[a]!==i[s]){if(1!==a||1!==s)do{if(a--,0>--s||r[a]!==i[s]){var u="\n"+r[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=a&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?L(e):""}function H(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case w:return"Portal";case k:return"Profiler";case F:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case x:return(e._context.displayName||"Context")+".Provider";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){o=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(e){o=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=V(e)?e.checked?"true":"false":e.value),(e=o)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,o=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:o,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&D(e,"checked",t,!1)}function $(e,t){X(e,t);var n=W(t.value),o=t.type;if(null!=n)"number"===o?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===o||"reset"===o)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!("submit"!==o&&"reset"!==o||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,o){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&o&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(o&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function oe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ie(e,t){var n=W(t.value),o=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=o&&(e.defaultValue=""+o)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,o){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var o=0===n.indexOf("--"),r=ge(n,t[n],o);"float"===n&&(n="cssFloat"),o?e.setProperty(n,r):e[n]=r}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function De(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ce=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ee=null,Fe=null;function ke(e){if(e=Cr(e)){if("function"!==typeof we)throw Error(i(280));var t=e.stateNode;t&&(t=wr(t),we(e.stateNode,e.type,t))}}function xe(e){Ee?Fe?Fe.push(e):Fe=[e]:Ee=e}function Ae(){if(Ee){var e=Ee,t=Fe;if(Fe=Ee=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Se(e,t){return e(t)}function Ie(){}var Pe=!1;function _e(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Se(e,t,n)}finally{Pe=!1,(null!==Ee||null!==Fe)&&(Ie(),Ae())}}function Te(e,t){var n=e.stateNode;if(null===n)return null;var o=wr(n);if(null===o)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(o=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!o;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Ne=!1;if(c)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ce){Ne=!1}function Re(e,t,n,o,r,i,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Be=!1,Oe=null,Le=!1,ze=null,je={onError:function(e){Be=!0,Oe=e}};function He(e,t,n,o,r,i,a,s,u){Be=!1,Oe=null,Re.apply(je,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(qe(e)!==e)throw Error(i(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,o=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(o=r.return)){n=o;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return We(r),e;if(a===o)return We(r),t;a=a.sibling}throw Error(i(188))}if(n.return!==o.return)n=r,o=a;else{for(var s=!1,u=r.child;u;){if(u===n){s=!0,n=r,o=a;break}if(u===o){s=!0,o=r,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,o=r;break}if(u===o){s=!0,o=a,n=r;break}u=u.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==o)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=r.unstable_scheduleCallback,Ye=r.unstable_cancelCallback,Qe=r.unstable_shouldYield,Ze=r.unstable_requestPaint,Xe=r.unstable_now,$e=r.unstable_getCurrentPriorityLevel,Je=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,ot=r.unstable_IdlePriority,rt=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var o=0,r=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~r;0!==s?o=dt(s):0!==(i&=a)&&(o=dt(i))}else 0!==(a=n&~r)?o=dt(a):0!==i&&(o=dt(i));if(0===o)return 0;if(0!==t&&t!==o&&0===(t&r)&&((r=o&-o)>=(i=t&-t)||16===r&&0!==(4194240&i)))return t;if(0!==(4&o)&&(o|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=o;0<t;)r=1<<(n=31-at(t)),o|=e[n],t&=~r;return o}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-at(n),r=1<<o;r&t|e[o]&t&&(e[o]|=t),n&=~r}}var Dt=0;function Ct(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,wt,Et,Ft,kt,xt=!1,At=[],St=null,It=null,Pt=null,_t=new Map,Tt=new Map,Nt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":St=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":_t.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function Bt(e,t,n,o,r,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:i,targetContainers:[r]},null!==t&&(null!==(t=Cr(t))&&wt(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ot(e){var t=Dr(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void kt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Cr(n))&&wt(t),e.blockedOn=n,!1;var o=new(n=e.nativeEvent).constructor(n.type,n);Ce=o,n.target.dispatchEvent(o),Ce=null,t.shift()}return!0}function zt(e,t,n){Lt(e)&&n.delete(t)}function jt(){xt=!1,null!==St&&Lt(St)&&(St=null),null!==It&&Lt(It)&&(It=null),null!==Pt&&Lt(Pt)&&(Pt=null),_t.forEach(zt),Tt.forEach(zt)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,xt||(xt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,jt)))}function qt(e){function t(t){return Ht(t,e)}if(0<At.length){Ht(At[0],e);for(var n=1;n<At.length;n++){var o=At[n];o.blockedOn===e&&(o.blockedOn=null)}}for(null!==St&&Ht(St,e),null!==It&&Ht(It,e),null!==Pt&&Ht(Pt,e),_t.forEach(t),Tt.forEach(t),n=0;n<Nt.length;n++)(o=Nt[n]).blockedOn===e&&(o.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Ot(n),null===n.blockedOn&&Nt.shift()}var Ut=C.ReactCurrentBatchConfig,Wt=!0;function Vt(e,t,n,o){var r=Dt,i=Ut.transition;Ut.transition=null;try{Dt=1,Gt(e,t,n,o)}finally{Dt=r,Ut.transition=i}}function Kt(e,t,n,o){var r=Dt,i=Ut.transition;Ut.transition=null;try{Dt=4,Gt(e,t,n,o)}finally{Dt=r,Ut.transition=i}}function Gt(e,t,n,o){if(Wt){var r=Qt(e,t,n,o);if(null===r)Vo(e,t,o,Yt,n),Rt(e,o);else if(function(e,t,n,o,r){switch(t){case"focusin":return St=Bt(St,e,t,n,o,r),!0;case"dragenter":return It=Bt(It,e,t,n,o,r),!0;case"mouseover":return Pt=Bt(Pt,e,t,n,o,r),!0;case"pointerover":var i=r.pointerId;return _t.set(i,Bt(_t.get(i)||null,e,t,n,o,r)),!0;case"gotpointercapture":return i=r.pointerId,Tt.set(i,Bt(Tt.get(i)||null,e,t,n,o,r)),!0}return!1}(r,e,t,n,o))o.stopPropagation();else if(Rt(e,o),4&t&&-1<Mt.indexOf(e)){for(;null!==r;){var i=Cr(r);if(null!==i&&bt(i),null===(i=Qt(e,t,n,o))&&Vo(e,t,o,Yt,n),i===r)break;r=i}null!==r&&o.stopPropagation()}else Vo(e,t,o,null,n)}}var Yt=null;function Qt(e,t,n,o){if(Yt=null,null!==(e=Dr(e=be(o))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case ot:return 536870912;default:return 16}default:return 16}}var Xt=null,$t=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=$t,o=n.length,r="value"in Xt?Xt.value:Xt.textContent,i=r.length;for(e=0;e<o&&n[e]===r[e];e++);var a=o-e;for(t=1;t<=a&&n[o-t]===r[i-t];t++);return Jt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function on(){return!1}function rn(e){function t(t,n,o,r,i){for(var a in this._reactName=t,this._targetInst=o,this.type=n,this.nativeEvent=r,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:on,this.isPropagationStopped=on,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=rn(ln),dn=O({},ln,{view:0,detail:0}),hn=rn(dn),fn=O({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(an=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=an=0,un=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=rn(fn),gn=rn(O({},fn,{dataTransfer:0})),mn=rn(O({},dn,{relatedTarget:0})),yn=rn(O({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=O({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dn=rn(vn),Cn=rn(O({},ln,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function kn(){return Fn}var xn=O({},dn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=rn(xn),Sn=rn(O({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=rn(O({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Pn=rn(O({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),_n=O({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tn=rn(_n),Nn=[9,13,27,32],Mn=c&&"CompositionEvent"in window,Rn=null;c&&"documentMode"in document&&(Rn=document.documentMode);var Bn=c&&"TextEvent"in window&&!Rn,On=c&&(!Mn||Rn&&8<Rn&&11>=Rn),Ln=String.fromCharCode(32),zn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Vn(e,t,n,o){xe(o),0<(t=Go(t,"onChange")).length&&(n=new cn("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Yn(e){zo(e,0)}function Qn(e){if(G(br(e)))return e}function Zn(e,t){if("change"===e)return t}var Xn=!1;if(c){var $n;if(c){var Jn="oninput"in document;if(!Jn){var eo=document.createElement("div");eo.setAttribute("oninput","return;"),Jn="function"===typeof eo.oninput}$n=Jn}else $n=!1;Xn=$n&&(!document.documentMode||9<document.documentMode)}function to(){Kn&&(Kn.detachEvent("onpropertychange",no),Gn=Kn=null)}function no(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];Vn(t,Gn,e,be(e)),_e(Yn,t)}}function oo(e,t,n){"focusin"===e?(to(),Gn=n,(Kn=t).attachEvent("onpropertychange",no)):"focusout"===e&&to()}function ro(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function io(e,t){if("click"===e)return Qn(t)}function ao(e,t){if("input"===e||"change"===e)return Qn(t)}var so="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function uo(e,t){if(so(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var r=n[o];if(!d.call(t,r)||!so(e[r],t[r]))return!1}return!0}function lo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function co(e,t){var n,o=lo(e);for(e=0;o;){if(3===o.nodeType){if(n=e+o.textContent.length,e<=t&&n>=t)return{node:o,offset:t-e};e=n}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=lo(o)}}function ho(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ho(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fo(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(o){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function po(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function go(e){var t=fo(),n=e.focusedElem,o=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ho(n.ownerDocument.documentElement,n)){if(null!==o&&po(n))if(t=o.start,void 0===(e=o.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,i=Math.min(o.start,r);o=void 0===o.end?i:Math.min(o.end,r),!e.extend&&i>o&&(r=o,o=i,i=r),r=co(n,i);var a=co(n,o);r&&a&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),i>o?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mo=c&&"documentMode"in document&&11>=document.documentMode,yo=null,vo=null,Do=null,Co=!1;function bo(e,t,n){var o=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Co||null==yo||yo!==Y(o)||("selectionStart"in(o=yo)&&po(o)?o={start:o.selectionStart,end:o.selectionEnd}:o={anchorNode:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset},Do&&uo(Do,o)||(Do=o,0<(o=Go(vo,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=yo)))}function wo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Eo={animationend:wo("Animation","AnimationEnd"),animationiteration:wo("Animation","AnimationIteration"),animationstart:wo("Animation","AnimationStart"),transitionend:wo("Transition","TransitionEnd")},Fo={},ko={};function xo(e){if(Fo[e])return Fo[e];if(!Eo[e])return e;var t,n=Eo[e];for(t in n)if(n.hasOwnProperty(t)&&t in ko)return Fo[e]=n[t];return e}c&&(ko=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);var Ao=xo("animationend"),So=xo("animationiteration"),Io=xo("animationstart"),Po=xo("transitionend"),_o=new Map,To="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function No(e,t){_o.set(e,t),u(t,[e])}for(var Mo=0;Mo<To.length;Mo++){var Ro=To[Mo];No(Ro.toLowerCase(),"on"+(Ro[0].toUpperCase()+Ro.slice(1)))}No(Ao,"onAnimationEnd"),No(So,"onAnimationIteration"),No(Io,"onAnimationStart"),No("dblclick","onDoubleClick"),No("focusin","onFocus"),No("focusout","onBlur"),No(Po,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oo=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bo));function Lo(e,t,n){var o=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,o,r,a,s,u,l){if(He.apply(this,arguments),Be){if(!Be)throw Error(i(198));var c=Oe;Be=!1,Oe=null,Le||(Le=!0,ze=c)}}(o,t,void 0,e),e.currentTarget=null}function zo(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var o=e[n],r=o.event;o=o.listeners;e:{var i=void 0;if(t)for(var a=o.length-1;0<=a;a--){var s=o[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==i&&r.isPropagationStopped())break e;Lo(r,s,l),i=u}else for(a=0;a<o.length;a++){if(u=(s=o[a]).instance,l=s.currentTarget,s=s.listener,u!==i&&r.isPropagationStopped())break e;Lo(r,s,l),i=u}}}if(Le)throw e=ze,Le=!1,ze=null,e}function jo(e,t){var n=t[mr];void 0===n&&(n=t[mr]=new Set);var o=e+"__bubble";n.has(o)||(Wo(t,e,2,!1),n.add(o))}function Ho(e,t,n){var o=0;t&&(o|=4),Wo(n,e,o,t)}var qo="_reactListening"+Math.random().toString(36).slice(2);function Uo(e){if(!e[qo]){e[qo]=!0,a.forEach((function(t){"selectionchange"!==t&&(Oo.has(t)||Ho(t,!1,e),Ho(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qo]||(t[qo]=!0,Ho("selectionchange",!1,t))}}function Wo(e,t,n,o){switch(Zt(t)){case 1:var r=Vt;break;case 4:r=Kt;break;default:r=Gt}n=r.bind(null,t,n,e),r=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),o?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Vo(e,t,n,o,r){var i=o;if(0===(1&t)&&0===(2&t)&&null!==o)e:for(;;){if(null===o)return;var a=o.tag;if(3===a||4===a){var s=o.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===a)for(a=o.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===r||8===u.nodeType&&u.parentNode===r))return;a=a.return}for(;null!==s;){if(null===(a=Dr(s)))return;if(5===(u=a.tag)||6===u){o=i=a;continue e}s=s.parentNode}}o=o.return}_e((function(){var o=i,r=be(n),a=[];e:{var s=_o.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=An;break;case"focusin":l="focus",u=mn;break;case"focusout":l="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=In;break;case Ao:case So:case Io:u=yn;break;case Po:u=Pn;break;case"scroll":u=hn;break;case"wheel":u=Tn;break;case"copy":case"cut":case"paste":u=Dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Sn}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=o;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=Te(p,h))&&c.push(Ko(p,g,f)))),d)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,r),a.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Ce||!(l=n.relatedTarget||n.fromElement)||!Dr(l)&&!l[gr])&&(u||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=o,null!==(l=(l=n.relatedTarget||n.toElement)?Dr(l):null)&&(l!==(d=qe(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=o),u!==l)){if(c=pn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Sn,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==u?s:br(u),f=null==l?s:br(l),(s=new c(g,p+"leave",u,n,r)).target=d,s.relatedTarget=f,g=null,Dr(r)===o&&((c=new c(h,p+"enter",l,n,r)).target=f,c.relatedTarget=d,g=c),d=g,u&&l)e:{for(h=l,p=0,f=c=u;f;f=Yo(f))p++;for(f=0,g=h;g;g=Yo(g))f++;for(;0<p-f;)c=Yo(c),p--;for(;0<f-p;)h=Yo(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Yo(c),h=Yo(h)}c=null}else c=null;null!==u&&Qo(a,s,u,c,!1),null!==l&&null!==d&&Qo(a,d,l,c,!0)}if("select"===(u=(s=o?br(o):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Zn;else if(Wn(s))if(Xn)m=ao;else{m=ro;var y=oo}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=io);switch(m&&(m=m(e,o))?Vn(a,m,n,r):(y&&y(e,s,o),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=o?br(o):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(yo=y,vo=o,Do=null);break;case"focusout":Do=vo=yo=null;break;case"mousedown":Co=!0;break;case"contextmenu":case"mouseup":case"dragend":Co=!1,bo(a,n,r);break;case"selectionchange":if(mo)break;case"keydown":case"keyup":bo(a,n,r)}var v;if(Mn)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else qn?jn(e,n)&&(D="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(D="onCompositionStart");D&&(On&&"ko"!==n.locale&&(qn||"onCompositionStart"!==D?"onCompositionEnd"===D&&qn&&(v=en()):($t="value"in(Xt=r)?Xt.value:Xt.textContent,qn=!0)),0<(y=Go(o,D)).length&&(D=new Cn(D,e,null,n,r),a.push({event:D,listeners:y}),v?D.data=v:null!==(v=Hn(n))&&(D.data=v))),(v=Bn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(zn=!0,Ln);case"textInput":return(e=t.data)===Ln&&zn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Mn&&jn(e,t)?(e=en(),Jt=$t=Xt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(o=Go(o,"onBeforeInput")).length&&(r=new Cn("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:o}),r.data=v))}zo(a,t)}))}function Ko(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Go(e,t){for(var n=t+"Capture",o=[];null!==e;){var r=e,i=r.stateNode;5===r.tag&&null!==i&&(r=i,null!=(i=Te(e,n))&&o.unshift(Ko(e,i,r)),null!=(i=Te(e,t))&&o.push(Ko(e,i,r))),e=e.return}return o}function Yo(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qo(e,t,n,o,r){for(var i=t._reactName,a=[];null!==n&&n!==o;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===o)break;5===s.tag&&null!==l&&(s=l,r?null!=(u=Te(n,i))&&a.unshift(Ko(n,u,s)):r||null!=(u=Te(n,i))&&a.push(Ko(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Zo=/\r\n?/g,Xo=/\u0000|\uFFFD/g;function $o(e){return("string"===typeof e?e:""+e).replace(Zo,"\n").replace(Xo,"")}function Jo(e,t,n){if(t=$o(t),$o(e)!==t&&n)throw Error(i(425))}function er(){}var tr=null,nr=null;function or(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rr="function"===typeof setTimeout?setTimeout:void 0,ir="function"===typeof clearTimeout?clearTimeout:void 0,ar="function"===typeof Promise?Promise:void 0,sr="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ar?function(e){return ar.resolve(null).then(e).catch(ur)}:rr;function ur(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,o=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===o)return e.removeChild(r),void qt(t);o--}else"$"!==n&&"$?"!==n&&"$!"!==n||o++;n=r}while(n);qt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function dr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hr=Math.random().toString(36).slice(2),fr="__reactFiber$"+hr,pr="__reactProps$"+hr,gr="__reactContainer$"+hr,mr="__reactEvents$"+hr,yr="__reactListeners$"+hr,vr="__reactHandles$"+hr;function Dr(e){var t=e[fr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gr]||n[fr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=dr(e);null!==e;){if(n=e[fr])return n;e=dr(e)}return t}n=(e=n).parentNode}return null}function Cr(e){return!(e=e[fr]||e[gr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function br(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function wr(e){return e[pr]||null}var Er=[],Fr=-1;function kr(e){return{current:e}}function xr(e){0>Fr||(e.current=Er[Fr],Er[Fr]=null,Fr--)}function Ar(e,t){Fr++,Er[Fr]=e.current,e.current=t}var Sr={},Ir=kr(Sr),Pr=kr(!1),_r=Sr;function Tr(e,t){var n=e.type.contextTypes;if(!n)return Sr;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var r,i={};for(r in n)i[r]=t[r];return o&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Nr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mr(){xr(Pr),xr(Ir)}function Rr(e,t,n){if(Ir.current!==Sr)throw Error(i(168));Ar(Ir,t),Ar(Pr,n)}function Br(e,t,n){var o=e.stateNode;if(t=t.childContextTypes,"function"!==typeof o.getChildContext)return n;for(var r in o=o.getChildContext())if(!(r in t))throw Error(i(108,U(e)||"Unknown",r));return O({},n,o)}function Or(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sr,_r=Ir.current,Ar(Ir,e),Ar(Pr,Pr.current),!0}function Lr(e,t,n){var o=e.stateNode;if(!o)throw Error(i(169));n?(e=Br(e,t,_r),o.__reactInternalMemoizedMergedChildContext=e,xr(Pr),xr(Ir),Ar(Ir,e)):xr(Pr),Ar(Pr,n)}var zr=null,jr=!1,Hr=!1;function qr(e){null===zr?zr=[e]:zr.push(e)}function Ur(){if(!Hr&&null!==zr){Hr=!0;var e=0,t=Dt;try{var n=zr;for(Dt=1;e<n.length;e++){var o=n[e];do{o=o(!0)}while(null!==o)}zr=null,jr=!1}catch(r){throw null!==zr&&(zr=zr.slice(e+1)),Ge(Je,Ur),r}finally{Dt=t,Hr=!1}}return null}var Wr=[],Vr=0,Kr=null,Gr=0,Yr=[],Qr=0,Zr=null,Xr=1,$r="";function Jr(e,t){Wr[Vr++]=Gr,Wr[Vr++]=Kr,Kr=e,Gr=t}function ei(e,t,n){Yr[Qr++]=Xr,Yr[Qr++]=$r,Yr[Qr++]=Zr,Zr=e;var o=Xr;e=$r;var r=32-at(o)-1;o&=~(1<<r),n+=1;var i=32-at(t)+r;if(30<i){var a=r-r%5;i=(o&(1<<a)-1).toString(32),o>>=a,r-=a,Xr=1<<32-at(t)+r|n<<r|o,$r=i+e}else Xr=1<<i|n<<r|o,$r=e}function ti(e){null!==e.return&&(Jr(e,1),ei(e,1,0))}function ni(e){for(;e===Kr;)Kr=Wr[--Vr],Wr[Vr]=null,Gr=Wr[--Vr],Wr[Vr]=null;for(;e===Zr;)Zr=Yr[--Qr],Yr[Qr]=null,$r=Yr[--Qr],Yr[Qr]=null,Xr=Yr[--Qr],Yr[Qr]=null}var oi=null,ri=null,ii=!1,ai=null;function si(e,t){var n=_l(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ui(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,oi=e,ri=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,oi=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zr?{id:Xr,overflow:$r}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=_l(18,null,null,0)).stateNode=t,n.return=e,e.child=n,oi=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(ii){var t=ri;if(t){var n=t;if(!ui(e,t)){if(li(e))throw Error(i(418));t=cr(n.nextSibling);var o=oi;t&&ui(e,t)?si(o,n):(e.flags=-4097&e.flags|2,ii=!1,oi=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,oi=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;oi=e}function hi(e){if(e!==oi)return!1;if(!ii)return di(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!or(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw fi(),Error(i(418));for(;t;)si(e,t),t=cr(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=oi?cr(e.stateNode.nextSibling):null;return!0}function fi(){for(var e=ri;e;)e=cr(e.nextSibling)}function pi(){ri=oi=null,ii=!1}function gi(e){null===ai?ai=[e]:ai.push(e)}var mi=C.ReactCurrentBatchConfig;function yi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var o=n.stateNode}if(!o)throw Error(i(147,e));var r=o,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function vi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Di(e){return(0,e._init)(e._payload)}function Ci(e){function t(t,n){if(e){var o=t.deletions;null===o?(t.deletions=[n],t.flags|=16):o.push(n)}}function n(n,o){if(!e)return null;for(;null!==o;)t(n,o),o=o.sibling;return null}function o(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Nl(e,t)).index=0,e.sibling=null,e}function a(t,n,o){return t.index=o,e?null!==(o=t.alternate)?(o=o.index)<n?(t.flags|=2,n):o:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,o){return null===t||6!==t.tag?((t=Ol(n,e.mode,o)).return=e,t):((t=r(t,n)).return=e,t)}function l(e,t,n,o){var i=n.type;return i===E?d(e,t,n.props.children,o,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===T&&Di(i)===t.type)?((o=r(t,n.props)).ref=yi(e,t,n),o.return=e,o):((o=Ml(n.type,n.key,n.props,null,e.mode,o)).ref=yi(e,t,n),o.return=e,o)}function c(e,t,n,o){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ll(n,e.mode,o)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,o,i){return null===t||7!==t.tag?((t=Rl(n,e.mode,o,i)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ol(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Ml(t.type,t.key,t.props,null,e.mode,n)).ref=yi(e,null,t),n.return=e,n;case w:return(t=Ll(t,e.mode,n)).return=e,t;case T:return h(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Rl(t,e.mode,n,null)).return=e,t;vi(e,t)}return null}function f(e,t,n,o){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:u(e,t,""+n,o);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===r?l(e,t,n,o):null;case w:return n.key===r?c(e,t,n,o):null;case T:return f(e,t,(r=n._init)(n._payload),o)}if(te(n)||R(n))return null!==r?null:d(e,t,n,o,null);vi(e,n)}return null}function p(e,t,n,o,r){if("string"===typeof o&&""!==o||"number"===typeof o)return u(t,e=e.get(n)||null,""+o,r);if("object"===typeof o&&null!==o){switch(o.$$typeof){case b:return l(t,e=e.get(null===o.key?n:o.key)||null,o,r);case w:return c(t,e=e.get(null===o.key?n:o.key)||null,o,r);case T:return p(e,t,n,(0,o._init)(o._payload),r)}if(te(o)||R(o))return d(t,e=e.get(n)||null,o,r,null);vi(t,o)}return null}function g(r,i,s,u){for(var l=null,c=null,d=i,g=i=0,m=null;null!==d&&g<s.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var y=f(r,d,s[g],u);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(r,d),i=a(y,i,g),null===c?l=y:c.sibling=y,c=y,d=m}if(g===s.length)return n(r,d),ii&&Jr(r,g),l;if(null===d){for(;g<s.length;g++)null!==(d=h(r,s[g],u))&&(i=a(d,i,g),null===c?l=d:c.sibling=d,c=d);return ii&&Jr(r,g),l}for(d=o(r,d);g<s.length;g++)null!==(m=p(d,r,g,s[g],u))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),i=a(m,i,g),null===c?l=m:c.sibling=m,c=m);return e&&d.forEach((function(e){return t(r,e)})),ii&&Jr(r,g),l}function m(r,s,u,l){var c=R(u);if("function"!==typeof c)throw Error(i(150));if(null==(u=c.call(u)))throw Error(i(151));for(var d=c=null,g=s,m=s=0,y=null,v=u.next();null!==g&&!v.done;m++,v=u.next()){g.index>m?(y=g,g=null):y=g.sibling;var D=f(r,g,v.value,l);if(null===D){null===g&&(g=y);break}e&&g&&null===D.alternate&&t(r,g),s=a(D,s,m),null===d?c=D:d.sibling=D,d=D,g=y}if(v.done)return n(r,g),ii&&Jr(r,m),c;if(null===g){for(;!v.done;m++,v=u.next())null!==(v=h(r,v.value,l))&&(s=a(v,s,m),null===d?c=v:d.sibling=v,d=v);return ii&&Jr(r,m),c}for(g=o(r,g);!v.done;m++,v=u.next())null!==(v=p(g,r,m,v.value,l))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),s=a(v,s,m),null===d?c=v:d.sibling=v,d=v);return e&&g.forEach((function(e){return t(r,e)})),ii&&Jr(r,m),c}return function e(o,i,a,u){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case b:e:{for(var l=a.key,c=i;null!==c;){if(c.key===l){if((l=a.type)===E){if(7===c.tag){n(o,c.sibling),(i=r(c,a.props.children)).return=o,o=i;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===T&&Di(l)===c.type){n(o,c.sibling),(i=r(c,a.props)).ref=yi(o,c,a),i.return=o,o=i;break e}n(o,c);break}t(o,c),c=c.sibling}a.type===E?((i=Rl(a.props.children,o.mode,u,a.key)).return=o,o=i):((u=Ml(a.type,a.key,a.props,null,o.mode,u)).ref=yi(o,i,a),u.return=o,o=u)}return s(o);case w:e:{for(c=a.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(o,i.sibling),(i=r(i,a.children||[])).return=o,o=i;break e}n(o,i);break}t(o,i),i=i.sibling}(i=Ll(a,o.mode,u)).return=o,o=i}return s(o);case T:return e(o,i,(c=a._init)(a._payload),u)}if(te(a))return g(o,i,a,u);if(R(a))return m(o,i,a,u);vi(o,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(o,i.sibling),(i=r(i,a)).return=o,o=i):(n(o,i),(i=Ol(a,o.mode,u)).return=o,o=i),s(o)):n(o,i)}}var bi=Ci(!0),wi=Ci(!1),Ei=kr(null),Fi=null,ki=null,xi=null;function Ai(){xi=ki=Fi=null}function Si(e){var t=Ei.current;xr(Ei),e._currentValue=t}function Ii(e,t,n){for(;null!==e;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==o&&(o.childLanes|=t)):null!==o&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function Pi(e,t){Fi=e,xi=ki=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ds=!0),e.firstContext=null)}function _i(e){var t=e._currentValue;if(xi!==e)if(e={context:e,memoizedValue:t,next:null},null===ki){if(null===Fi)throw Error(i(308));ki=e,Fi.dependencies={lanes:0,firstContext:e}}else ki=ki.next=e;return t}var Ti=null;function Ni(e){null===Ti?Ti=[e]:Ti.push(e)}function Mi(e,t,n,o){var r=t.interleaved;return null===r?(n.next=n,Ni(t)):(n.next=r.next,r.next=n),t.interleaved=n,Ri(e,o)}function Ri(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Bi=!1;function Oi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Li(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ji(e,t,n){var o=e.updateQueue;if(null===o)return null;if(o=o.shared,0!==(2&Su)){var r=o.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),o.pending=t,Ri(e,n)}return null===(r=o.interleaved)?(t.next=t,Ni(o)):(t.next=r.next,r.next=t),o.interleaved=t,Ri(e,n)}function Hi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var o=t.lanes;n|=o&=e.pendingLanes,t.lanes=n,vt(e,n)}}function qi(e,t){var n=e.updateQueue,o=e.alternate;if(null!==o&&n===(o=o.updateQueue)){var r=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?r=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?r=i=t:i=i.next=t}else r=i=t;return n={baseState:o.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:o.shared,effects:o.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ui(e,t,n,o){var r=e.updateQueue;Bi=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,s=r.shared.pending;if(null!==s){r.shared.pending=null;var u=s,l=u.next;u.next=null,null===a?i=l:a.next=l,a=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==i){var d=r.baseState;for(a=0,c=l=u=null,s=i;;){var h=s.lane,f=s.eventTime;if((o&h)===h){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,g=s;switch(h=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,d,h):p)||void 0===h)break e;d=O({},d,h);break e;case 2:Bi=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=f,u=d):c=c.next=f,a|=h;if(null===(s=s.next)){if(null===(s=r.shared.pending))break;s=(h=s).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===c&&(u=d),r.baseState=u,r.firstBaseUpdate=l,r.lastBaseUpdate=c,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===i&&(r.shared.lanes=0);Bu|=a,e.lanes=a,e.memoizedState=d}}function Wi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var o=e[t],r=o.callback;if(null!==r){if(o.callback=null,o=n,"function"!==typeof r)throw Error(i(191,r));r.call(o)}}}var Vi={},Ki=kr(Vi),Gi=kr(Vi),Yi=kr(Vi);function Qi(e){if(e===Vi)throw Error(i(174));return e}function Zi(e,t){switch(Ar(Yi,t),Ar(Gi,e),Ar(Ki,Vi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xr(Ki),Ar(Ki,t)}function Xi(){xr(Ki),xr(Gi),xr(Yi)}function $i(e){Qi(Yi.current);var t=Qi(Ki.current),n=ue(t,e.type);t!==n&&(Ar(Gi,e),Ar(Ki,n))}function Ji(e){Gi.current===e&&(xr(Ki),xr(Gi))}var ea=kr(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function oa(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ra=C.ReactCurrentDispatcher,ia=C.ReactCurrentBatchConfig,aa=0,sa=null,ua=null,la=null,ca=!1,da=!1,ha=0,fa=0;function pa(){throw Error(i(321))}function ga(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!so(e[n],t[n]))return!1;return!0}function ma(e,t,n,o,r,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Ja:es,e=n(o,r),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(i(301));a+=1,la=ua=null,t.updateQueue=null,ra.current=ts,e=n(o,r)}while(da)}if(ra.current=$a,t=null!==ua&&null!==ua.next,aa=0,la=ua=sa=null,ca=!1,t)throw Error(i(300));return e}function ya(){var e=0!==ha;return ha=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?sa.memoizedState=la=e:la=la.next=e,la}function Da(){if(null===ua){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=ua.next;var t=null===la?sa.memoizedState:la.next;if(null!==t)la=t,ua=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ua=e).memoizedState,baseState:ua.baseState,baseQueue:ua.baseQueue,queue:ua.queue,next:null},null===la?sa.memoizedState=la=e:la=la.next=e}return la}function Ca(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=Da(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var o=ua,r=o.baseQueue,a=n.pending;if(null!==a){if(null!==r){var s=r.next;r.next=a.next,a.next=s}o.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,o=o.baseState;var u=s=null,l=null,c=a;do{var d=c.lane;if((aa&d)===d)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),o=c.hasEagerState?c.eagerState:e(o,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=h,s=o):l=l.next=h,sa.lanes|=d,Bu|=d}c=c.next}while(null!==c&&c!==a);null===l?s=o:l.next=u,so(o,t.memoizedState)||(Ds=!0),t.memoizedState=o,t.baseState=s,t.baseQueue=l,n.lastRenderedState=o}if(null!==(e=n.interleaved)){r=e;do{a=r.lane,sa.lanes|=a,Bu|=a,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=Da(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var o=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{a=e(a,s.action),s=s.next}while(s!==r);so(a,t.memoizedState)||(Ds=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,o]}function Ea(){}function Fa(e,t){var n=sa,o=Da(),r=t(),a=!so(o.memoizedState,r);if(a&&(o.memoizedState=r,Ds=!0),o=o.queue,Ba(Aa.bind(null,n,o,e),[e]),o.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,_a(9,xa.bind(null,n,o,r,t),void 0,null),null===Iu)throw Error(i(349));0!==(30&aa)||ka(n,t,r)}return r}function ka(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function xa(e,t,n,o){t.value=n,t.getSnapshot=o,Sa(t)&&Ia(e)}function Aa(e,t,n){return n((function(){Sa(t)&&Ia(e)}))}function Sa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!so(e,n)}catch(o){return!0}}function Ia(e){var t=Ri(e,1);null!==t&&nl(t,e,1,-1)}function Pa(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:e},t.queue=e,e=e.dispatch=Ya.bind(null,sa,e),[t.memoizedState,e]}function _a(e,t,n,o){return e={tag:e,create:t,destroy:n,deps:o,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e),e}function Ta(){return Da().memoizedState}function Na(e,t,n,o){var r=va();sa.flags|=e,r.memoizedState=_a(1|t,n,void 0,void 0===o?null:o)}function Ma(e,t,n,o){var r=Da();o=void 0===o?null:o;var i=void 0;if(null!==ua){var a=ua.memoizedState;if(i=a.destroy,null!==o&&ga(o,a.deps))return void(r.memoizedState=_a(t,n,i,o))}sa.flags|=e,r.memoizedState=_a(1|t,n,i,o)}function Ra(e,t){return Na(8390656,8,e,t)}function Ba(e,t){return Ma(2048,8,e,t)}function Oa(e,t){return Ma(4,2,e,t)}function La(e,t){return Ma(4,4,e,t)}function za(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ja(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4,4,za.bind(null,t,e),n)}function Ha(){}function qa(e,t){var n=Da();t=void 0===t?null:t;var o=n.memoizedState;return null!==o&&null!==t&&ga(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function Ua(e,t){var n=Da();t=void 0===t?null:t;var o=n.memoizedState;return null!==o&&null!==t&&ga(t,o[1])?o[0]:(e=e(),n.memoizedState=[e,t],e)}function Wa(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,Ds=!0),e.memoizedState=n):(so(n,t)||(n=gt(),sa.lanes|=n,Bu|=n,e.baseState=!0),t)}function Va(e,t){var n=Dt;Dt=0!==n&&4>n?n:4,e(!0);var o=ia.transition;ia.transition={};try{e(!1),t()}finally{Dt=n,ia.transition=o}}function Ka(){return Da().memoizedState}function Ga(e,t,n){var o=tl(e);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))Za(t,n);else if(null!==(n=Mi(e,t,n,o))){nl(n,e,o,el()),Xa(n,t,o)}}function Ya(e,t,n){var o=tl(e),r={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))Za(t,r);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(r.hasEagerState=!0,r.eagerState=s,so(s,a)){var u=t.interleaved;return null===u?(r.next=r,Ni(t)):(r.next=u.next,u.next=r),void(t.interleaved=r)}}catch(l){}null!==(n=Mi(e,t,r,o))&&(nl(n,e,o,r=el()),Xa(n,t,o))}}function Qa(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Za(e,t){da=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xa(e,t,n){if(0!==(4194240&n)){var o=t.lanes;n|=o&=e.pendingLanes,t.lanes=n,vt(e,n)}}var $a={readContext:_i,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Ja={readContext:_i,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:_i,useEffect:Ra,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Na(4194308,4,za.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Na(4194308,4,e,t)},useInsertionEffect:function(e,t){return Na(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var o=va();return t=void 0!==n?n(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=Ga.bind(null,sa,e),[o.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Pa,useDebugValue:Ha,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Pa(!1),t=e[0];return e=Va.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var o=sa,r=va();if(ii){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Iu)throw Error(i(349));0!==(30&aa)||ka(o,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,Ra(Aa.bind(null,o,a,e),[e]),o.flags|=2048,_a(9,xa.bind(null,o,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Iu.identifierPrefix;if(ii){var n=$r;t=":"+t+"R"+(n=(Xr&~(1<<32-at(Xr)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:_i,useCallback:qa,useContext:_i,useEffect:Ba,useImperativeHandle:ja,useInsertionEffect:Oa,useLayoutEffect:La,useMemo:Ua,useReducer:ba,useRef:Ta,useState:function(){return ba(Ca)},useDebugValue:Ha,useDeferredValue:function(e){return Wa(Da(),ua.memoizedState,e)},useTransition:function(){return[ba(Ca)[0],Da().memoizedState]},useMutableSource:Ea,useSyncExternalStore:Fa,useId:Ka,unstable_isNewReconciler:!1},ts={readContext:_i,useCallback:qa,useContext:_i,useEffect:Ba,useImperativeHandle:ja,useInsertionEffect:Oa,useLayoutEffect:La,useMemo:Ua,useReducer:wa,useRef:Ta,useState:function(){return wa(Ca)},useDebugValue:Ha,useDeferredValue:function(e){var t=Da();return null===ua?t.memoizedState=e:Wa(t,ua.memoizedState,e)},useTransition:function(){return[wa(Ca)[0],Da().memoizedState]},useMutableSource:Ea,useSyncExternalStore:Fa,useId:Ka,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function os(e,t,n,o){n=null===(n=n(o,t=e.memoizedState))||void 0===n?t:O({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var rs={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var o=el(),r=tl(e),i=zi(o,r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ji(e,i,r))&&(nl(t,e,r,o),Hi(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=el(),r=tl(e),i=zi(o,r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ji(e,i,r))&&(nl(t,e,r,o),Hi(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),o=tl(e),r=zi(n,o);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ji(e,r,o))&&(nl(t,e,o,n),Hi(t,e,o))}};function is(e,t,n,o,r,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(o,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!uo(n,o)||!uo(r,i))}function as(e,t,n){var o=!1,r=Sr,i=t.contextType;return"object"===typeof i&&null!==i?i=_i(i):(r=Nr(t)?_r:Ir.current,i=(o=null!==(o=t.contextTypes)&&void 0!==o)?Tr(e,r):Sr),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=rs,e.stateNode=t,t._reactInternals=e,o&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=i),t}function ss(e,t,n,o){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,o),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&rs.enqueueReplaceState(t,t.state,null)}function us(e,t,n,o){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Oi(e);var i=t.contextType;"object"===typeof i&&null!==i?r.context=_i(i):(i=Nr(t)?_r:Ir.current,r.context=Tr(e,i)),r.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(os(e,t,i,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&rs.enqueueReplaceState(r,r.state,null),Ui(e,n,r,o),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function ls(e,t){try{var n="",o=t;do{n+=H(o),o=o.return}while(o);var r=n}catch(i){r="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:r,digest:null}}function cs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var hs="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=zi(-1,n)).tag=3,n.payload={element:null};var o=t.value;return n.callback=function(){Wu||(Wu=!0,Vu=o),ds(0,t)},n}function ps(e,t,n){(n=zi(-1,n)).tag=3;var o=e.type.getDerivedStateFromError;if("function"===typeof o){var r=t.value;n.payload=function(){return o(r)},n.callback=function(){ds(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof o&&(null===Ku?Ku=new Set([this]):Ku.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var o=e.pingCache;if(null===o){o=e.pingCache=new hs;var r=new Set;o.set(t,r)}else void 0===(r=o.get(t))&&(r=new Set,o.set(t,r));r.has(n)||(r.add(n),e=kl.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,o,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zi(-1,1)).tag=2,ji(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var vs=C.ReactCurrentOwner,Ds=!1;function Cs(e,t,n,o){t.child=null===e?wi(t,null,n,o):bi(t,e.child,n,o)}function bs(e,t,n,o,r){n=n.render;var i=t.ref;return Pi(t,r),o=ma(e,t,n,o,i,r),n=ya(),null===e||Ds?(ii&&n&&ti(t),t.flags|=1,Cs(e,t,o,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ws(e,t,r))}function ws(e,t,n,o,r){if(null===e){var i=n.type;return"function"!==typeof i||Tl(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ml(n.type,null,o,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Es(e,t,i,o,r))}if(i=e.child,0===(e.lanes&r)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:uo)(a,o)&&e.ref===t.ref)return Ws(e,t,r)}return t.flags|=1,(e=Nl(i,o)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,o,r){if(null!==e){var i=e.memoizedProps;if(uo(i,o)&&e.ref===t.ref){if(Ds=!1,t.pendingProps=o=i,0===(e.lanes&r))return t.lanes=e.lanes,Ws(e,t,r);0!==(131072&e.flags)&&(Ds=!0)}}return xs(e,t,n,o,r)}function Fs(e,t,n){var o=t.pendingProps,r=o.children,i=null!==e?e.memoizedState:null;if("hidden"===o.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ar(Nu,Tu),Tu|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ar(Nu,Tu),Tu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=null!==i?i.baseLanes:n,Ar(Nu,Tu),Tu|=o}else null!==i?(o=i.baseLanes|n,t.memoizedState=null):o=n,Ar(Nu,Tu),Tu|=o;return Cs(e,t,r,n),t.child}function ks(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xs(e,t,n,o,r){var i=Nr(n)?_r:Ir.current;return i=Tr(t,i),Pi(t,r),n=ma(e,t,n,o,i,r),o=ya(),null===e||Ds?(ii&&o&&ti(t),t.flags|=1,Cs(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ws(e,t,r))}function As(e,t,n,o,r){if(Nr(n)){var i=!0;Or(t)}else i=!1;if(Pi(t,r),null===t.stateNode)Us(e,t),as(t,n,o),us(t,n,o,r),o=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=_i(l):l=Tr(t,l=Nr(n)?_r:Ir.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==o||u!==l)&&ss(t,a,o,l),Bi=!1;var h=t.memoizedState;a.state=h,Ui(t,o,a,r),u=t.memoizedState,s!==o||h!==u||Pr.current||Bi?("function"===typeof c&&(os(t,n,c,o),u=t.memoizedState),(s=Bi||is(t,n,s,o,h,u,l))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=u),a.props=o,a.state=u,a.context=l,o=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),o=!1)}else{a=t.stateNode,Li(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:ns(t.type,s),a.props=l,d=t.pendingProps,h=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=_i(u):u=Tr(t,u=Nr(n)?_r:Ir.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==u)&&ss(t,a,o,u),Bi=!1,h=t.memoizedState,a.state=h,Ui(t,o,a,r);var p=t.memoizedState;s!==d||h!==p||Pr.current||Bi?("function"===typeof f&&(os(t,n,f,o),p=t.memoizedState),(l=Bi||is(t,n,l,o,h,p,u)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(o,p,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(o,p,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=p),a.props=o,a.state=p,a.context=u,o=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),o=!1)}return Ss(e,t,n,o,i,r)}function Ss(e,t,n,o,r,i){ks(e,t);var a=0!==(128&t.flags);if(!o&&!a)return r&&Lr(t,n,!1),Ws(e,t,i);o=t.stateNode,vs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:o.render();return t.flags|=1,null!==e&&a?(t.child=bi(t,e.child,null,i),t.child=bi(t,null,s,i)):Cs(e,t,s,i),t.memoizedState=o.state,r&&Lr(t,n,!0),t.child}function Is(e){var t=e.stateNode;t.pendingContext?Rr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Rr(0,t.context,!1),Zi(e,t.containerInfo)}function Ps(e,t,n,o,r){return pi(),gi(r),t.flags|=256,Cs(e,t,n,o),t.child}var _s,Ts,Ns,Ms,Rs={dehydrated:null,treeContext:null,retryLane:0};function Bs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Os(e,t,n){var o,r=t.pendingProps,a=ea.current,s=!1,u=0!==(128&t.flags);if((o=u)||(o=(null===e||null!==e.memoizedState)&&0!==(2&a)),o?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ar(ea,1&a),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=r.children,e=r.fallback,s?(r=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&r)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Bl(u,r,0,null),e=Rl(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Bs(n),t.memoizedState=Rs,e):Ls(t,u));if(null!==(a=e.memoizedState)&&null!==(o=a.dehydrated))return function(e,t,n,o,r,a,s){if(n)return 256&t.flags?(t.flags&=-257,zs(e,t,s,o=cs(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=o.fallback,r=t.mode,o=Bl({mode:"visible",children:o.children},r,0,null),(a=Rl(a,r,s,null)).flags|=2,o.return=t,a.return=t,o.sibling=a,t.child=o,0!==(1&t.mode)&&bi(t,e.child,null,s),t.child.memoizedState=Bs(s),t.memoizedState=Rs,a);if(0===(1&t.mode))return zs(e,t,s,null);if("$!"===r.data){if(o=r.nextSibling&&r.nextSibling.dataset)var u=o.dgst;return o=u,zs(e,t,s,o=cs(a=Error(i(419)),o,void 0))}if(u=0!==(s&e.childLanes),Ds||u){if(null!==(o=Iu)){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(o.suspendedLanes|s))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Ri(e,r),nl(o,e,r,-1))}return gl(),zs(e,t,s,o=cs(Error(i(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Al.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,ri=cr(r.nextSibling),oi=t,ii=!0,ai=null,null!==e&&(Yr[Qr++]=Xr,Yr[Qr++]=$r,Yr[Qr++]=Zr,Xr=e.id,$r=e.overflow,Zr=t),t=Ls(t,o.children),t.flags|=4096,t)}(e,t,u,r,o,a,n);if(s){s=r.fallback,u=t.mode,o=(a=e.child).sibling;var l={mode:"hidden",children:r.children};return 0===(1&u)&&t.child!==a?((r=t.child).childLanes=0,r.pendingProps=l,t.deletions=null):(r=Nl(a,l)).subtreeFlags=14680064&a.subtreeFlags,null!==o?s=Nl(o,s):(s=Rl(s,u,n,null)).flags|=2,s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,u=null===(u=e.child.memoizedState)?Bs(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Rs,r}return e=(s=e.child).sibling,r=Nl(s,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ls(e,t){return(t=Bl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zs(e,t,n,o){return null!==o&&gi(o),bi(t,e.child,null,n),(e=Ls(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function js(e,t,n){e.lanes|=t;var o=e.alternate;null!==o&&(o.lanes|=t),Ii(e.return,t,n)}function Hs(e,t,n,o,r){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:r}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=o,i.tail=n,i.tailMode=r)}function qs(e,t,n){var o=t.pendingProps,r=o.revealOrder,i=o.tail;if(Cs(e,t,o.children,n),0!==(2&(o=ea.current)))o=1&o|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&js(e,n,t);else if(19===e.tag)js(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(Ar(ea,o),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Hs(t,!1,r,n,i);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ta(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Hs(t,!0,n,null,i);break;case"together":Hs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Us(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Nl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vs(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;null!==n;)null!==n.alternate&&(o=n),n=n.sibling;null===o?t||null===e.tail?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,o=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,o|=14680064&r.subtreeFlags,o|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags,o|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function Gs(e,t,n){var o=t.pendingProps;switch(ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Nr(t.type)&&Mr(),Ks(t),null;case 3:return o=t.stateNode,Xi(),xr(Pr),xr(Ir),oa(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ai&&(al(ai),ai=null))),Ts(e,t),Ks(t),null;case 5:Ji(t);var r=Qi(Yi.current);if(n=t.type,null!==e&&null!=t.stateNode)Ns(e,t,n,o,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(null===t.stateNode)throw Error(i(166));return Ks(t),null}if(e=Qi(Ki.current),hi(t)){o=t.stateNode,n=t.type;var a=t.memoizedProps;switch(o[fr]=t,o[pr]=a,e=0!==(1&t.mode),n){case"dialog":jo("cancel",o),jo("close",o);break;case"iframe":case"object":case"embed":jo("load",o);break;case"video":case"audio":for(r=0;r<Bo.length;r++)jo(Bo[r],o);break;case"source":jo("error",o);break;case"img":case"image":case"link":jo("error",o),jo("load",o);break;case"details":jo("toggle",o);break;case"input":Z(o,a),jo("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!a.multiple},jo("invalid",o);break;case"textarea":re(o,a),jo("invalid",o)}for(var u in ve(n,a),r=null,a)if(a.hasOwnProperty(u)){var l=a[u];"children"===u?"string"===typeof l?o.textContent!==l&&(!0!==a.suppressHydrationWarning&&Jo(o.textContent,l,e),r=["children",l]):"number"===typeof l&&o.textContent!==""+l&&(!0!==a.suppressHydrationWarning&&Jo(o.textContent,l,e),r=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&jo("scroll",o)}switch(n){case"input":K(o),J(o,a,!0);break;case"textarea":K(o),ae(o);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(o.onclick=er)}o=r,t.updateQueue=o,null!==o&&(t.flags|=4)}else{u=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof o.is?e=u.createElement(n,{is:o.is}):(e=u.createElement(n),"select"===n&&(u=e,o.multiple?u.multiple=!0:o.size&&(u.size=o.size))):e=u.createElementNS(e,n),e[fr]=t,e[pr]=o,_s(e,t,!1,!1),t.stateNode=e;e:{switch(u=De(n,o),n){case"dialog":jo("cancel",e),jo("close",e),r=o;break;case"iframe":case"object":case"embed":jo("load",e),r=o;break;case"video":case"audio":for(r=0;r<Bo.length;r++)jo(Bo[r],e);r=o;break;case"source":jo("error",e),r=o;break;case"img":case"image":case"link":jo("error",e),jo("load",e),r=o;break;case"details":jo("toggle",e),r=o;break;case"input":Z(e,o),r=Q(e,o),jo("invalid",e);break;case"option":default:r=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},r=O({},o,{value:void 0}),jo("invalid",e);break;case"textarea":re(e,o),r=oe(e,o),jo("invalid",e)}for(a in ve(n,r),l=r)if(l.hasOwnProperty(a)){var c=l[a];"style"===a?me(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=c&&"onScroll"===a&&jo("scroll",e):null!=c&&D(e,a,c,u))}switch(n){case"input":K(e),J(e,o,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=o.value&&e.setAttribute("value",""+W(o.value));break;case"select":e.multiple=!!o.multiple,null!=(a=o.value)?ne(e,!!o.multiple,a,!1):null!=o.defaultValue&&ne(e,!!o.multiple,o.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=er)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Ms(e,t,e.memoizedProps,o);else{if("string"!==typeof o&&null===t.stateNode)throw Error(i(166));if(n=Qi(Yi.current),Qi(Ki.current),hi(t)){if(o=t.stateNode,n=t.memoizedProps,o[fr]=t,(a=o.nodeValue!==n)&&null!==(e=oi))switch(e.tag){case 3:Jo(o.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jo(o.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(o=(9===n.nodeType?n:n.ownerDocument).createTextNode(o))[fr]=t,t.stateNode=o}return Ks(t),null;case 13:if(xr(ea),o=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))fi(),pi(),t.flags|=98560,a=!1;else if(a=hi(t),null!==o&&null!==o.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[fr]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),a=!1}else null!==ai&&(al(ai),ai=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((o=null!==o)!==(null!==e&&null!==e.memoizedState)&&o&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Mu&&(Mu=3):gl())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return Xi(),Ts(e,t),null===e&&Uo(t.stateNode.containerInfo),Ks(t),null;case 10:return Si(t.type._context),Ks(t),null;case 19:if(xr(ea),null===(a=t.memoizedState))return Ks(t),null;if(o=0!==(128&t.flags),null===(u=a.rendering))if(o)Vs(a,!1);else{if(0!==Mu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=ta(e))){for(t.flags|=128,Vs(a,!1),null!==(o=u.updateQueue)&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=n,n=t.child;null!==n;)e=o,(a=n).flags&=14680066,null===(u=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ar(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>qu&&(t.flags|=128,o=!0,Vs(a,!1),t.lanes=4194304)}else{if(!o)if(null!==(e=ta(u))){if(t.flags|=128,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!u.alternate&&!ii)return Ks(t),null}else 2*Xe()-a.renderingStartTime>qu&&1073741824!==n&&(t.flags|=128,o=!0,Vs(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=a.last)?n.sibling=u:t.child=u,a.last=u)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=ea.current,Ar(ea,o?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return dl(),o=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==o&&(t.flags|=8192),o&&0!==(1&t.mode)?0!==(1073741824&Tu)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ys(e,t){switch(ni(t),t.tag){case 1:return Nr(t.type)&&Mr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xi(),xr(Pr),xr(Ir),oa(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ji(t),null;case 13:if(xr(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xr(ea),null;case 4:return Xi(),null;case 10:return Si(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}_s=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ts=function(){},Ns=function(e,t,n,o){var r=e.memoizedProps;if(r!==o){e=t.stateNode,Qi(Ki.current);var i,a=null;switch(n){case"input":r=Q(e,r),o=Q(e,o),a=[];break;case"select":r=O({},r,{value:void 0}),o=O({},o,{value:void 0}),a=[];break;case"textarea":r=oe(e,r),o=oe(e,o),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof o.onClick&&(e.onclick=er)}for(c in ve(n,o),n=null,r)if(!o.hasOwnProperty(c)&&r.hasOwnProperty(c)&&null!=r[c])if("style"===c){var u=r[c];for(i in u)u.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in o){var l=o[c];if(u=null!=r?r[c]:void 0,o.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(i in u)!u.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&u[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(a||(a=[]),a.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(a=a||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(a=a||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&jo("scroll",e),a||u===l||(a=[])):(a=a||[]).push(c,l))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Ms=function(e,t,n,o){n!==o&&(t.flags|=4)};var Qs=!1,Zs=!1,Xs="function"===typeof WeakSet?WeakSet:Set,$s=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(o){Fl(e,t,o)}else n.current=null}function eu(e,t,n){try{n()}catch(o){Fl(e,t,o)}}var tu=!1;function nu(e,t,n){var o=t.updateQueue;if(null!==(o=null!==o?o.lastEffect:null)){var r=o=o.next;do{if((r.tag&e)===e){var i=r.destroy;r.destroy=void 0,void 0!==i&&eu(t,n,i)}r=r.next}while(r!==o)}}function ou(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var o=n.create;n.destroy=o()}n=n.next}while(n!==t)}}function ru(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function iu(e){var t=e.alternate;null!==t&&(e.alternate=null,iu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fr],delete t[pr],delete t[mr],delete t[yr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function au(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||au(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var o=e.tag;if(5===o||6===o)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=er));else if(4!==o&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function lu(e,t,n){var o=e.tag;if(5===o||6===o)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==o&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var cu=null,du=!1;function hu(e,t,n){for(n=n.child;null!==n;)fu(e,t,n),n=n.sibling}function fu(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(rt,n)}catch(s){}switch(n.tag){case 5:Zs||Js(n,t);case 6:var o=cu,r=du;cu=null,hu(e,t,n),du=r,null!==(cu=o)&&(du?(e=cu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cu.removeChild(n.stateNode));break;case 18:null!==cu&&(du?(e=cu,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),qt(e)):lr(cu,n.stateNode));break;case 4:o=cu,r=du,cu=n.stateNode.containerInfo,du=!0,hu(e,t,n),cu=o,du=r;break;case 0:case 11:case 14:case 15:if(!Zs&&(null!==(o=n.updateQueue)&&null!==(o=o.lastEffect))){r=o=o.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&eu(n,t,a),r=r.next}while(r!==o)}hu(e,t,n);break;case 1:if(!Zs&&(Js(n,t),"function"===typeof(o=n.stateNode).componentWillUnmount))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(s){Fl(n,t,s)}hu(e,t,n);break;case 21:hu(e,t,n);break;case 22:1&n.mode?(Zs=(o=Zs)||null!==n.memoizedState,hu(e,t,n),Zs=o):hu(e,t,n);break;default:hu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach((function(t){var o=Sl.bind(null,e,t);n.has(t)||(n.add(t),t.then(o,o))}))}}function gu(e,t){var n=t.deletions;if(null!==n)for(var o=0;o<n.length;o++){var r=n[o];try{var a=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:cu=u.stateNode,du=!1;break e;case 3:case 4:cu=u.stateNode.containerInfo,du=!0;break e}u=u.return}if(null===cu)throw Error(i(160));fu(a,s,r),cu=null,du=!1;var l=r.alternate;null!==l&&(l.return=null),r.return=null}catch(c){Fl(r,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gu(t,e),yu(e),4&o){try{nu(3,e,e.return),ou(3,e)}catch(m){Fl(e,e.return,m)}try{nu(5,e,e.return)}catch(m){Fl(e,e.return,m)}}break;case 1:gu(t,e),yu(e),512&o&&null!==n&&Js(n,n.return);break;case 5:if(gu(t,e),yu(e),512&o&&null!==n&&Js(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(m){Fl(e,e.return,m)}}if(4&o&&null!=(r=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===a.type&&null!=a.name&&X(r,a),De(u,s);var c=De(u,a);for(s=0;s<l.length;s+=2){var d=l[s],h=l[s+1];"style"===d?me(r,h):"dangerouslySetInnerHTML"===d?de(r,h):"children"===d?he(r,h):D(r,d,h,c)}switch(u){case"input":$(r,a);break;case"textarea":ie(r,a);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(r,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(r,!!a.multiple,a.defaultValue,!0):ne(r,!!a.multiple,a.multiple?[]:"",!1))}r[pr]=a}catch(m){Fl(e,e.return,m)}}break;case 6:if(gu(t,e),yu(e),4&o){if(null===e.stateNode)throw Error(i(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(m){Fl(e,e.return,m)}}break;case 3:if(gu(t,e),yu(e),4&o&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(m){Fl(e,e.return,m)}break;case 4:default:gu(t,e),yu(e);break;case 13:gu(t,e),yu(e),8192&(r=e.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(Hu=Xe())),4&o&&pu(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Zs=(c=Zs)||d,gu(t,e),Zs=c):gu(t,e),yu(e),8192&o){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for($s=e,d=e.child;null!==d;){for(h=$s=d;null!==$s;){switch(p=(f=$s).child,f.tag){case 0:case 11:case 14:case 15:nu(4,f,f.return);break;case 1:Js(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){o=f,n=f.return;try{t=o,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Fl(o,n,m)}}break;case 5:Js(f,f.return);break;case 22:if(null!==f.memoizedState){bu(h);continue}}null!==p?(p.return=f,$s=p):bu(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{r=h.stateNode,c?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(u=h.stateNode,s=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=ge("display",s))}catch(m){Fl(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(m){Fl(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gu(t,e),yu(e),4&o&&pu(e);case 21:}}function yu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(au(n)){var o=n;break e}n=n.return}throw Error(i(160))}switch(o.tag){case 5:var r=o.stateNode;32&o.flags&&(he(r,""),o.flags&=-33),lu(e,su(e),r);break;case 3:case 4:var a=o.stateNode.containerInfo;uu(e,su(e),a);break;default:throw Error(i(161))}}catch(s){Fl(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vu(e,t,n){$s=e,Du(e,t,n)}function Du(e,t,n){for(var o=0!==(1&e.mode);null!==$s;){var r=$s,i=r.child;if(22===r.tag&&o){var a=null!==r.memoizedState||Qs;if(!a){var s=r.alternate,u=null!==s&&null!==s.memoizedState||Zs;s=Qs;var l=Zs;if(Qs=a,(Zs=u)&&!l)for($s=r;null!==$s;)u=(a=$s).child,22===a.tag&&null!==a.memoizedState?wu(r):null!==u?(u.return=a,$s=u):wu(r);for(;null!==i;)$s=i,Du(i,t,n),i=i.sibling;$s=r,Qs=s,Zs=l}Cu(e)}else 0!==(8772&r.subtreeFlags)&&null!==i?(i.return=r,$s=i):Cu(e)}}function Cu(e){for(;null!==$s;){var t=$s;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zs||ou(5,t);break;case 1:var o=t.stateNode;if(4&t.flags&&!Zs)if(null===n)o.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);o.componentDidUpdate(r,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Wi(t,a,o);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wi(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(i(163))}Zs||512&t.flags&&ru(t)}catch(f){Fl(t,t.return,f)}}if(t===e){$s=null;break}if(null!==(n=t.sibling)){n.return=t.return,$s=n;break}$s=t.return}}function bu(e){for(;null!==$s;){var t=$s;if(t===e){$s=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$s=n;break}$s=t.return}}function wu(e){for(;null!==$s;){var t=$s;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ou(4,t)}catch(u){Fl(t,n,u)}break;case 1:var o=t.stateNode;if("function"===typeof o.componentDidMount){var r=t.return;try{o.componentDidMount()}catch(u){Fl(t,r,u)}}var i=t.return;try{ru(t)}catch(u){Fl(t,i,u)}break;case 5:var a=t.return;try{ru(t)}catch(u){Fl(t,a,u)}}}catch(u){Fl(t,t.return,u)}if(t===e){$s=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$s=s;break}$s=t.return}}var Eu,Fu=Math.ceil,ku=C.ReactCurrentDispatcher,xu=C.ReactCurrentOwner,Au=C.ReactCurrentBatchConfig,Su=0,Iu=null,Pu=null,_u=0,Tu=0,Nu=kr(0),Mu=0,Ru=null,Bu=0,Ou=0,Lu=0,zu=null,ju=null,Hu=0,qu=1/0,Uu=null,Wu=!1,Vu=null,Ku=null,Gu=!1,Yu=null,Qu=0,Zu=0,Xu=null,$u=-1,Ju=0;function el(){return 0!==(6&Su)?Xe():-1!==$u?$u:$u=Xe()}function tl(e){return 0===(1&e.mode)?1:0!==(2&Su)&&0!==_u?_u&-_u:null!==mi.transition?(0===Ju&&(Ju=gt()),Ju):0!==(e=Dt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function nl(e,t,n,o){if(50<Zu)throw Zu=0,Xu=null,Error(i(185));yt(e,n,o),0!==(2&Su)&&e===Iu||(e===Iu&&(0===(2&Su)&&(Ou|=n),4===Mu&&sl(e,_u)),ol(e,o),1===n&&0===Su&&0===(1&t.mode)&&(qu=Xe()+500,jr&&Ur()))}function ol(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),s=1<<a,u=r[a];-1===u?0!==(s&n)&&0===(s&o)||(r[a]=ft(s,t)):u<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var o=ht(e,e===Iu?_u:0);if(0===o)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){jr=!0,qr(e)}(ul.bind(null,e)):qr(ul.bind(null,e)),sr((function(){0===(6&Su)&&Ur()})),n=null;else{switch(Ct(o)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=ot}n=Il(n,rl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rl(e,t){if($u=-1,Ju=0,0!==(6&Su))throw Error(i(327));var n=e.callbackNode;if(wl()&&e.callbackNode!==n)return null;var o=ht(e,e===Iu?_u:0);if(0===o)return null;if(0!==(30&o)||0!==(o&e.expiredLanes)||t)t=ml(e,o);else{t=o;var r=Su;Su|=2;var a=pl();for(Iu===e&&_u===t||(Uu=null,qu=Xe()+500,hl(e,t));;)try{vl();break}catch(u){fl(e,u)}Ai(),ku.current=a,Su=r,null!==Pu?t=0:(Iu=null,_u=0,t=Mu)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(o=r,t=il(e,r))),1===t)throw n=Ru,hl(e,0),sl(e,o),ol(e,Xe()),n;if(6===t)sl(e,o);else{if(r=e.current.alternate,0===(30&o)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var o=0;o<n.length;o++){var r=n[o],i=r.getSnapshot;r=r.value;try{if(!so(i(),r))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=ml(e,o))&&(0!==(a=pt(e))&&(o=a,t=il(e,a))),1===t))throw n=Ru,hl(e,0),sl(e,o),ol(e,Xe()),n;switch(e.finishedWork=r,e.finishedLanes=o,t){case 0:case 1:throw Error(i(345));case 2:case 5:bl(e,ju,Uu);break;case 3:if(sl(e,o),(130023424&o)===o&&10<(t=Hu+500-Xe())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&o)!==o){el(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=rr(bl.bind(null,e,ju,Uu),t);break}bl(e,ju,Uu);break;case 4:if(sl(e,o),(4194240&o)===o)break;for(t=e.eventTimes,r=-1;0<o;){var s=31-at(o);a=1<<s,(s=t[s])>r&&(r=s),o&=~a}if(o=r,10<(o=(120>(o=Xe()-o)?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Fu(o/1960))-o)){e.timeoutHandle=rr(bl.bind(null,e,ju,Uu),o);break}bl(e,ju,Uu);break;default:throw Error(i(329))}}}return ol(e,Xe()),e.callbackNode===n?rl.bind(null,e):null}function il(e,t){var n=zu;return e.current.memoizedState.isDehydrated&&(hl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=ju,ju=n,null!==t&&al(t)),e}function al(e){null===ju?ju=e:ju.push.apply(ju,e)}function sl(e,t){for(t&=~Lu,t&=~Ou,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),o=1<<n;e[n]=-1,t&=~o}}function ul(e){if(0!==(6&Su))throw Error(i(327));wl();var t=ht(e,0);if(0===(1&t))return ol(e,Xe()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var o=pt(e);0!==o&&(t=o,n=il(e,o))}if(1===n)throw n=Ru,hl(e,0),sl(e,t),ol(e,Xe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bl(e,ju,Uu),ol(e,Xe()),null}function ll(e,t){var n=Su;Su|=1;try{return e(t)}finally{0===(Su=n)&&(qu=Xe()+500,jr&&Ur())}}function cl(e){null!==Yu&&0===Yu.tag&&0===(6&Su)&&wl();var t=Su;Su|=1;var n=Au.transition,o=Dt;try{if(Au.transition=null,Dt=1,e)return e()}finally{Dt=o,Au.transition=n,0===(6&(Su=t))&&Ur()}}function dl(){Tu=Nu.current,xr(Nu)}function hl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ir(n)),null!==Pu)for(n=Pu.return;null!==n;){var o=n;switch(ni(o),o.tag){case 1:null!==(o=o.type.childContextTypes)&&void 0!==o&&Mr();break;case 3:Xi(),xr(Pr),xr(Ir),oa();break;case 5:Ji(o);break;case 4:Xi();break;case 13:case 19:xr(ea);break;case 10:Si(o.type._context);break;case 22:case 23:dl()}n=n.return}if(Iu=e,Pu=e=Nl(e.current,null),_u=Tu=t,Mu=0,Ru=null,Lu=Ou=Bu=0,ju=zu=null,null!==Ti){for(t=0;t<Ti.length;t++)if(null!==(o=(n=Ti[t]).interleaved)){n.interleaved=null;var r=o.next,i=n.pending;if(null!==i){var a=i.next;i.next=r,o.next=a}n.pending=o}Ti=null}return e}function fl(e,t){for(;;){var n=Pu;try{if(Ai(),ra.current=$a,ca){for(var o=sa.memoizedState;null!==o;){var r=o.queue;null!==r&&(r.pending=null),o=o.next}ca=!1}if(aa=0,la=ua=sa=null,da=!1,ha=0,xu.current=null,null===n||null===n.return){Mu=1,Ru=t,Pu=null;break}e:{var a=e,s=n.return,u=n,l=t;if(t=_u,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,d=u,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,ys(p,s,u,0,t),1&p.mode&&gs(a,c,t),l=c;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(l),t.updateQueue=m}else g.add(l);break e}if(0===(1&t)){gs(a,c,t),gl();break e}l=Error(i(426))}else if(ii&&1&u.mode){var y=ms(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ys(y,s,u,0,t),gi(ls(l,u));break e}}a=l=ls(l,u),4!==Mu&&(Mu=2),null===zu?zu=[a]:zu.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,qi(a,fs(0,l,t));break e;case 1:u=l;var v=a.type,D=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==D&&"function"===typeof D.componentDidCatch&&(null===Ku||!Ku.has(D)))){a.flags|=65536,t&=-t,a.lanes|=t,qi(a,ps(a,u,t));break e}}a=a.return}while(null!==a)}Cl(n)}catch(C){t=C,Pu===n&&null!==n&&(Pu=n=n.return);continue}break}}function pl(){var e=ku.current;return ku.current=$a,null===e?$a:e}function gl(){0!==Mu&&3!==Mu&&2!==Mu||(Mu=4),null===Iu||0===(268435455&Bu)&&0===(268435455&Ou)||sl(Iu,_u)}function ml(e,t){var n=Su;Su|=2;var o=pl();for(Iu===e&&_u===t||(Uu=null,hl(e,t));;)try{yl();break}catch(r){fl(e,r)}if(Ai(),Su=n,ku.current=o,null!==Pu)throw Error(i(261));return Iu=null,_u=0,Mu}function yl(){for(;null!==Pu;)Dl(Pu)}function vl(){for(;null!==Pu&&!Qe();)Dl(Pu)}function Dl(e){var t=Eu(e.alternate,e,Tu);e.memoizedProps=e.pendingProps,null===t?Cl(e):Pu=t,xu.current=null}function Cl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gs(n,t,Tu)))return void(Pu=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Pu=n);if(null===e)return Mu=6,void(Pu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pu=t);Pu=t=e}while(null!==t);0===Mu&&(Mu=5)}function bl(e,t,n){var o=Dt,r=Au.transition;try{Au.transition=null,Dt=1,function(e,t,n,o){do{wl()}while(null!==Yu);if(0!==(6&Su))throw Error(i(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-at(n),i=1<<r;t[r]=0,o[r]=-1,e[r]=-1,n&=~i}}(e,a),e===Iu&&(Pu=Iu=null,_u=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gu||(Gu=!0,Il(tt,(function(){return wl(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Au.transition,Au.transition=null;var s=Dt;Dt=1;var u=Su;Su|=4,xu.current=null,function(e,t){if(tr=Wt,po(e=fo())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var o=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(o&&0!==o.rangeCount){n=o.anchorNode;var r=o.anchorOffset,a=o.focusNode;o=o.focusOffset;try{n.nodeType,a.nodeType}catch(b){n=null;break e}var s=0,u=-1,l=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==r&&3!==h.nodeType||(u=s+r),h!==a||0!==o&&3!==h.nodeType||(l=s+o),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++c===r&&(u=s),f===a&&++d===o&&(l=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(nr={focusedElem:e,selectionRange:n},Wt=!1,$s=t;null!==$s;)if(e=(t=$s).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$s=e;else for(;null!==$s;){t=$s;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,D=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:ns(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var C=t.stateNode.containerInfo;1===C.nodeType?C.textContent="":9===C.nodeType&&C.documentElement&&C.removeChild(C.documentElement);break;default:throw Error(i(163))}}catch(b){Fl(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,$s=e;break}$s=t.return}g=tu,tu=!1}(e,n),mu(n,e),go(nr),Wt=!!tr,nr=tr=null,e.current=n,vu(n,e,r),Ze(),Su=u,Dt=s,Au.transition=a}else e.current=n;if(Gu&&(Gu=!1,Yu=e,Qu=r),a=e.pendingLanes,0===a&&(Ku=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ol(e,Xe()),null!==t)for(o=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],o(r.value,{componentStack:r.stack,digest:r.digest});if(Wu)throw Wu=!1,e=Vu,Vu=null,e;0!==(1&Qu)&&0!==e.tag&&wl(),a=e.pendingLanes,0!==(1&a)?e===Xu?Zu++:(Zu=0,Xu=e):Zu=0,Ur()}(e,t,n,o)}finally{Au.transition=r,Dt=o}return null}function wl(){if(null!==Yu){var e=Ct(Qu),t=Au.transition,n=Dt;try{if(Au.transition=null,Dt=16>e?16:e,null===Yu)var o=!1;else{if(e=Yu,Yu=null,Qu=0,0!==(6&Su))throw Error(i(331));var r=Su;for(Su|=4,$s=e.current;null!==$s;){var a=$s,s=a.child;if(0!==(16&$s.flags)){var u=a.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for($s=c;null!==$s;){var d=$s;switch(d.tag){case 0:case 11:case 15:nu(8,d,a)}var h=d.child;if(null!==h)h.return=d,$s=h;else for(;null!==$s;){var f=(d=$s).sibling,p=d.return;if(iu(d),d===c){$s=null;break}if(null!==f){f.return=p,$s=f;break}$s=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}$s=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,$s=s;else e:for(;null!==$s;){if(0!==(2048&(a=$s).flags))switch(a.tag){case 0:case 11:case 15:nu(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,$s=v;break e}$s=a.return}}var D=e.current;for($s=D;null!==$s;){var C=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==C)C.return=s,$s=C;else e:for(s=D;null!==$s;){if(0!==(2048&(u=$s).flags))try{switch(u.tag){case 0:case 11:case 15:ou(9,u)}}catch(w){Fl(u,u.return,w)}if(u===s){$s=null;break e}var b=u.sibling;if(null!==b){b.return=u.return,$s=b;break e}$s=u.return}}if(Su=r,Ur(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(rt,e)}catch(w){}o=!0}return o}finally{Dt=n,Au.transition=t}}return!1}function El(e,t,n){e=ji(e,t=fs(0,t=ls(n,t),1),1),t=el(),null!==e&&(yt(e,1,t),ol(e,t))}function Fl(e,t,n){if(3===e.tag)El(e,e,n);else for(;null!==t;){if(3===t.tag){El(t,e,n);break}if(1===t.tag){var o=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof o.componentDidCatch&&(null===Ku||!Ku.has(o))){t=ji(t,e=ps(t,e=ls(n,e),1),1),e=el(),null!==t&&(yt(t,1,e),ol(t,e));break}}t=t.return}}function kl(e,t,n){var o=e.pingCache;null!==o&&o.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Iu===e&&(_u&n)===n&&(4===Mu||3===Mu&&(130023424&_u)===_u&&500>Xe()-Hu?hl(e,0):Lu|=n),ol(e,t)}function xl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=el();null!==(e=Ri(e,t))&&(yt(e,t,n),ol(e,n))}function Al(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),xl(e,n)}function Sl(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(i(314))}null!==o&&o.delete(t),xl(e,n)}function Il(e,t){return Ge(e,t)}function Pl(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _l(e,t,n,o){return new Pl(e,t,n,o)}function Tl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nl(e,t){var n=e.alternate;return null===n?((n=_l(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ml(e,t,n,o,r,a){var s=2;if(o=e,"function"===typeof e)Tl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Rl(n.children,r,a,t);case F:s=8,r|=8;break;case k:return(e=_l(12,n,t,2|r)).elementType=k,e.lanes=a,e;case I:return(e=_l(13,n,t,r)).elementType=I,e.lanes=a,e;case P:return(e=_l(19,n,t,r)).elementType=P,e.lanes=a,e;case N:return Bl(n,r,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:s=10;break e;case A:s=9;break e;case S:s=11;break e;case _:s=14;break e;case T:s=16,o=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=_l(s,n,t,r)).elementType=e,t.type=o,t.lanes=a,t}function Rl(e,t,n,o){return(e=_l(7,e,o,t)).lanes=n,e}function Bl(e,t,n,o){return(e=_l(22,e,o,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Ol(e,t,n){return(e=_l(6,e,null,t)).lanes=n,e}function Ll(e,t,n){return(t=_l(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zl(e,t,n,o,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=o,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function jl(e,t,n,o,r,i,a,s,u){return e=new zl(e,t,n,s,u),1===t?(t=1,!0===i&&(t|=8)):t=0,i=_l(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oi(i),e}function Hl(e){if(!e)return Sr;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Nr(n))return Br(e,n,t)}return t}function ql(e,t,n,o,r,i,a,s,u){return(e=jl(n,o,!0,e,0,i,0,s,u)).context=Hl(null),n=e.current,(i=zi(o=el(),r=tl(n))).callback=void 0!==t&&null!==t?t:null,ji(n,i,r),e.current.lanes=r,yt(e,r,o),ol(e,o),e}function Ul(e,t,n,o){var r=t.current,i=el(),a=tl(r);return n=Hl(n),null===t.context?t.context=n:t.pendingContext=n,(t=zi(i,a)).payload={element:e},null!==(o=void 0===o?null:o)&&(t.callback=o),null!==(e=ji(r,t,a))&&(nl(e,r,a,i),Hi(e,r,a)),a}function Wl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kl(e,t){Vl(e,t),(e=e.alternate)&&Vl(e,t)}Eu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pr.current)Ds=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Ds=!1,function(e,t,n){switch(t.tag){case 3:Is(t),pi();break;case 5:$i(t);break;case 1:Nr(t.type)&&Or(t);break;case 4:Zi(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,r=t.memoizedProps.value;Ar(Ei,o._currentValue),o._currentValue=r;break;case 13:if(null!==(o=t.memoizedState))return null!==o.dehydrated?(Ar(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Os(e,t,n):(Ar(ea,1&ea.current),null!==(e=Ws(e,t,n))?e.sibling:null);Ar(ea,1&ea.current);break;case 19:if(o=0!==(n&t.childLanes),0!==(128&e.flags)){if(o)return qs(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ar(ea,ea.current),o)break;return null;case 22:case 23:return t.lanes=0,Fs(e,t,n)}return Ws(e,t,n)}(e,t,n);Ds=0!==(131072&e.flags)}else Ds=!1,ii&&0!==(1048576&t.flags)&&ei(t,Gr,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;Us(e,t),e=t.pendingProps;var r=Tr(t,Ir.current);Pi(t,n),r=ma(null,t,o,e,r,n);var a=ya();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nr(o)?(a=!0,Or(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Oi(t),r.updater=rs,t.stateNode=r,r._reactInternals=t,us(t,o,e,n),t=Ss(null,t,o,!0,a,n)):(t.tag=0,ii&&a&&ti(t),Cs(null,t,r,n),t=t.child),t;case 16:o=t.elementType;e:{switch(Us(e,t),e=t.pendingProps,o=(r=o._init)(o._payload),t.type=o,r=t.tag=function(e){if("function"===typeof e)return Tl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===S)return 11;if(e===_)return 14}return 2}(o),e=ns(o,e),r){case 0:t=xs(null,t,o,e,n);break e;case 1:t=As(null,t,o,e,n);break e;case 11:t=bs(null,t,o,e,n);break e;case 14:t=ws(null,t,o,ns(o.type,e),n);break e}throw Error(i(306,o,""))}return t;case 0:return o=t.type,r=t.pendingProps,xs(e,t,o,r=t.elementType===o?r:ns(o,r),n);case 1:return o=t.type,r=t.pendingProps,As(e,t,o,r=t.elementType===o?r:ns(o,r),n);case 3:e:{if(Is(t),null===e)throw Error(i(387));o=t.pendingProps,r=(a=t.memoizedState).element,Li(e,t),Ui(t,o,null,n);var s=t.memoizedState;if(o=s.element,a.isDehydrated){if(a={element:o,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ps(e,t,o,n,r=ls(Error(i(423)),t));break e}if(o!==r){t=Ps(e,t,o,n,r=ls(Error(i(424)),t));break e}for(ri=cr(t.stateNode.containerInfo.firstChild),oi=t,ii=!0,ai=null,n=wi(t,null,o,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),o===r){t=Ws(e,t,n);break e}Cs(e,t,o,n)}t=t.child}return t;case 5:return $i(t),null===e&&ci(t),o=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,s=r.children,or(o,r)?s=null:null!==a&&or(o,a)&&(t.flags|=32),ks(e,t),Cs(e,t,s,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Os(e,t,n);case 4:return Zi(t,t.stateNode.containerInfo),o=t.pendingProps,null===e?t.child=bi(t,null,o,n):Cs(e,t,o,n),t.child;case 11:return o=t.type,r=t.pendingProps,bs(e,t,o,r=t.elementType===o?r:ns(o,r),n);case 7:return Cs(e,t,t.pendingProps,n),t.child;case 8:case 12:return Cs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(o=t.type._context,r=t.pendingProps,a=t.memoizedProps,s=r.value,Ar(Ei,o._currentValue),o._currentValue=s,null!==a)if(so(a.value,s)){if(a.children===r.children&&!Pr.current){t=Ws(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var u=a.dependencies;if(null!==u){s=a.child;for(var l=u.firstContext;null!==l;){if(l.context===o){if(1===a.tag){(l=zi(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ii(a.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(i(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Ii(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}Cs(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,o=t.pendingProps.children,Pi(t,n),o=o(r=_i(r)),t.flags|=1,Cs(e,t,o,n),t.child;case 14:return r=ns(o=t.type,t.pendingProps),ws(e,t,o,r=ns(o.type,r),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return o=t.type,r=t.pendingProps,r=t.elementType===o?r:ns(o,r),Us(e,t),t.tag=1,Nr(o)?(e=!0,Or(t)):e=!1,Pi(t,n),as(t,o,r),us(t,o,r,n),Ss(null,t,o,!0,e,n);case 19:return qs(e,t,n);case 22:return Fs(e,t,n)}throw Error(i(156,t.tag))};var Gl="function"===typeof reportError?reportError:function(e){console.error(e)};function Yl(e){this._internalRoot=e}function Ql(e){this._internalRoot=e}function Zl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $l(){}function Jl(e,t,n,o,r){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof r){var s=r;r=function(){var e=Wl(a);s.call(e)}}Ul(t,a,e,r)}else a=function(e,t,n,o,r){if(r){if("function"===typeof o){var i=o;o=function(){var e=Wl(a);i.call(e)}}var a=ql(t,o,e,0,null,!1,0,"",$l);return e._reactRootContainer=a,e[gr]=a.current,Uo(8===e.nodeType?e.parentNode:e),cl(),a}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof o){var s=o;o=function(){var e=Wl(u);s.call(e)}}var u=jl(e,0,!1,null,0,!1,0,"",$l);return e._reactRootContainer=u,e[gr]=u.current,Uo(8===e.nodeType?e.parentNode:e),cl((function(){Ul(t,u,n,o)})),u}(n,t,e,r,o);return Wl(a)}Ql.prototype.render=Yl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Ul(e,t,null,null)},Ql.prototype.unmount=Yl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cl((function(){Ul(null,e,null,null)})),t[gr]=null}},Ql.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ft();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Ot(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),ol(t,Xe()),0===(6&Su)&&(qu=Xe()+500,Ur()))}break;case 13:cl((function(){var t=Ri(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Kl(e,1)}},wt=function(e){if(13===e.tag){var t=Ri(e,134217728);if(null!==t)nl(t,e,134217728,el());Kl(e,134217728)}},Et=function(e){if(13===e.tag){var t=tl(e),n=Ri(e,t);if(null!==n)nl(n,e,t,el());Kl(e,t)}},Ft=function(){return Dt},kt=function(e,t){var n=Dt;try{return Dt=e,t()}finally{Dt=n}},we=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var r=wr(o);if(!r)throw Error(i(90));G(o),$(o,r)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Se=ll,Ie=cl;var ec={usingClientEntryPoint:!1,Events:[Cr,br,wr,xe,Ae,ll]},tc={findFiberByHostInstance:Dr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oc.isDisabled&&oc.supportsFiber)try{rt=oc.inject(nc),it=oc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zl(t))throw Error(i(200));return function(e,t,n){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==o?null:""+o,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zl(e))throw Error(i(299));var n=!1,o="",r=Gl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(o=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=jl(e,1,!1,null,0,n,0,o,r),e[gr]=t.current,Uo(8===e.nodeType?e.parentNode:e),new Yl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return cl(e)},t.hydrate=function(e,t,n){if(!Xl(t))throw Error(i(200));return Jl(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zl(e))throw Error(i(405));var o=null!=n&&n.hydratedSources||null,r=!1,a="",s=Gl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=ql(t,null,e,1,null!=n?n:null,r,0,a,s),e[gr]=t.current,Uo(e),o)for(e=0;e<o.length;e++)r=(r=(n=o[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Ql(t)},t.render=function(e,t,n){if(!Xl(t))throw Error(i(200));return Jl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xl(e))throw Error(i(40));return!!e._reactRootContainer&&(cl((function(){Jl(null,null,e,!1,(function(){e._reactRootContainer=null,e[gr]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,o){if(!Xl(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Jl(e,t,n,!1,o)},t.version="18.3.1-next-f1338f8080-20240426"},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3240:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,o=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},a=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var o,r=t.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!i)return!1;for(o in e);return"undefined"===typeof o||t.call(e,o)},s=function(e,t){o&&"__proto__"===t.name?o(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},u=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(r)return r(e,n).value}return e[n]};e.exports=function e(){var t,n,o,r,l,c,d=arguments[0],h=1,f=arguments.length,p=!1;for("boolean"===typeof d&&(p=d,d=arguments[1]||{},h=2),(null==d||"object"!==typeof d&&"function"!==typeof d)&&(d={});h<f;++h)if(null!=(t=arguments[h]))for(n in t)o=u(d,n),d!==(r=u(t,n))&&(p&&r&&(a(r)||(l=i(r)))?(l?(l=!1,c=o&&i(o)?o:[]):c=o&&a(o)?o:{},s(d,{name:n,newValue:e(p,c,r)})):"undefined"!==typeof r&&s(d,{name:n,newValue:r}));return d}},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),o=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function D(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var C=D.prototype=new v;C.constructor=D,g(C,y.prototype),C.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,E={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,o){var r,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,r)&&!F.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=o;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:n,type:e,key:a,ref:s,props:i,_owner:E.current}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,r,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case o:u=!0}}if(u)return a=a(u=e),e=""===i?"."+S(u,0):i,b(a)?(r="",null!=e&&(r=e.replace(A,"$&/")+"/"),I(a,t,r,"",(function(e){return e}))):null!=a&&(x(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,r+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+e)),t.push(a)),1;if(u=0,i=""===i?".":i+":",b(e))for(var l=0;l<e.length;l++){var c=i+S(s=e[l],l);u+=I(s,t,r,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=I(s=s.value,t,r,c=i+S(s,l++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function P(e,t,n){if(null==e)return e;var o=[],r=0;return I(e,o,"","",(function(e){return t.call(n,e,r++)})),o}function _(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T={current:null},N={transition:null},M={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:N,ReactCurrentOwner:E};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=r,t.Profiler=a,t.PureComponent=D,t.StrictMode=i,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=R,t.cloneElement=function(e,t,o){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=E.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)w.call(t,l)&&!F.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=o;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];r.children=u}return{$$typeof:n,type:e.type,key:i,ref:a,props:r,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:_}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return T.current.useCallback(e,t)},t.useContext=function(e){return T.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return T.current.useDeferredValue(e)},t.useEffect=function(e,t){return T.current.useEffect(e,t)},t.useId=function(){return T.current.useId()},t.useImperativeHandle=function(e,t,n){return T.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return T.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.current.useMemo(e,t)},t.useReducer=function(e,t,n){return T.current.useReducer(e,t,n)},t.useRef=function(e){return T.current.useRef(e)},t.useState=function(e){return T.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return T.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return T.current.useTransition()},t.version="18.3.1"},4391:(e,t,n)=>{"use strict";var o=n(7950);t.createRoot=o.createRoot,t.hydrateRoot=o.hydrateRoot},4403:e=>{var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,o=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,u=/^\s+|\s+$/g,l="";function c(e){return e?e.replace(u,l):l}e.exports=function(e,u){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];u=u||{};var d=1,h=1;function f(e){var t=e.match(n);t&&(d+=t.length);var o=e.lastIndexOf("\n");h=~o?e.length-o:h+e.length}function p(){var e={line:d,column:h};return function(t){return t.position=new g(e),D(),t}}function g(e){this.start=e,this.end={line:d,column:h},this.source=u.source}g.prototype.content=e;var m=[];function y(t){var n=new Error(u.source+":"+d+":"+h+": "+t);if(n.reason=t,n.filename=u.source,n.line=d,n.column=h,n.source=e,!u.silent)throw n;m.push(n)}function v(t){var n=t.exec(e);if(n){var o=n[0];return f(o),e=e.slice(o.length),n}}function D(){v(o)}function C(e){var t;for(e=e||[];t=b();)!1!==t&&e.push(t);return e}function b(){var t=p();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;l!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,l===e.charAt(n-1))return y("End of comment missing");var o=e.slice(2,n-2);return h+=2,f(o),e=e.slice(n),h+=2,t({type:"comment",comment:o})}}function w(){var e=p(),n=v(r);if(n){if(b(),!v(i))return y("property missing ':'");var o=v(a),u=e({type:"declaration",property:c(n[0].replace(t,l)),value:o?c(o[0].replace(t,l)):l});return v(s),u}}return D(),function(){var e,t=[];for(C(t);e=w();)!1!==e&&(t.push(e),C(t));return t}()}},4589:(e,t,n)=>{"use strict";e.exports=n(6929)},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5173:(e,t,n)=>{e.exports=n(1497)()},5837:e=>{e.exports=function(e){return null!=e&&null!=e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},6283:(e,t,n)=>{var o={"./addSecretToApp.md":[6242,6242],"./appAdmin.md":[781,781],"./authAdmin.md":[4938,4938],"./azureDevOpsAdmin.md":[2434,2434],"./cloudAppAdmin.md":[1584,1584],"./compromisedSP.md":[1858,1858],"./conditionalAccessAdmin.md":[7742,7742],"./devOpsPipeline.md":[5720,5720],"./directGlobalAdminTakeover.md":[615,615],"./directoryWriters.md":[2490,2490],"./disableDefenderEDR.md":[3271,3271],"./domainNameAdmin.md":[3193,3193],"./exchangeAdmin.md":[2323,2323],"./externalIdpAdmin.md":[6598,6598],"./federatedDomainInjection.md":[5722,5722],"./globalAdmin.md":[4265,4265],"./graphAADGroup.md":[2970,2970],"./graphAuthMethod.md":[6568,6568],"./graphCAP.md":[4803,4803],"./graphDeleteUser.md":[995,995],"./graphDisableAccount.md":[4940,4940],"./graphOther.md":[9741,9741],"./graphPrivAADGroup.md":[7011,7011],"./graphRoleAssignment.md":[506,506],"./graphRoleManagement.md":[1752,1752],"./groupGraph.md":[3122,3122],"./groupsAdmin.md":[5224,5224],"./hasGraphPermission.md":[2404,2404],"./helpdeskAdmin.md":[2394,2394],"./hybridIdAdmin1.md":[8074,8074],"./hybridIdAdmin2.md":[9139,9139],"./identityGovernanceAdmin.md":[2350,2350],"./intuneAdmin.md":[3843,3843],"./knowledgeAdmin.md":[7348,7348],"./knowledgeManager.md":[4652,4652],"./lifecycleWorkflowsAdmin.md":[2414,2414],"./managedIdentity.md":[1672,1672],"./partnerTier1Support.md":[7199,7199],"./partnerTier1Support2.md":[1521,1521],"./partnerTier2Support.md":[8132,8132],"./passwordAdmin.md":[543,543],"./passwordResetSPOwner.md":[4129,4129],"./privilegedAuthAdmin.md":[9225,9225],"./privilegedAzureAccess.md":[1937,1937],"./privilegedRoleAdmin.md":[6887,6887],"./securityAdmin.md":[6126,6126],"./sharePointAdmin.md":[8417,8417],"./teamsAdmin.md":[7954,7954],"./tenantHijack.md":[5163,5163],"./tenantLockoutCAP.md":[3156,3156],"./tokenTheft.md":[1933,1933],"./user.md":[8940,8940],"./userAdmin1.md":[9522,9522],"./userAdmin2.md":[5131,5131],"./win365Admin.md":[1710,1710],"./yammerAdmin.md":[8325,8325]};function r(e){if(!n.o(o,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=o[e],r=t[0];return n.e(t[1]).then((()=>n.t(r,17)))}r.keys=()=>Object.keys(o),r.id=6283,e.exports=r},6929:(e,t)=>{"use strict";var n,o=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case i:case s:case a:case h:case f:return e;default:switch(e=e&&e.$$typeof){case c:case l:case d:case g:case p:case u:return e;default:return t}}case r:return t}}}n=Symbol.for("react.module.reference"),t.ContextConsumer=l,t.ContextProvider=u,t.Element=o,t.ForwardRef=d,t.Fragment=i,t.Lazy=g,t.Memo=p,t.Portal=r,t.Profiler=s,t.StrictMode=a,t.Suspense=h,t.SuspenseList=f,t.isAsyncMode=function(){return!1},t.isConcurrentMode=function(){return!1},t.isContextConsumer=function(e){return y(e)===l},t.isContextProvider=function(e){return y(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return y(e)===d},t.isFragment=function(e){return y(e)===i},t.isLazy=function(e){return y(e)===g},t.isMemo=function(e){return y(e)===p},t.isPortal=function(e){return y(e)===r},t.isProfiler=function(e){return y(e)===s},t.isStrictMode=function(e){return y(e)===a},t.isSuspense=function(e){return y(e)===h},t.isSuspenseList=function(e){return y(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===s||e===a||e===h||e===f||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===p||e.$$typeof===u||e.$$typeof===l||e.$$typeof===d||e.$$typeof===n||void 0!==e.getModuleId)},t.typeOf=y},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var o=n-1>>>1,r=e[o];if(!(0<i(r,t)))break e;e[o]=t,e[n]=r,n=o}}function o(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var o=0,r=e.length,a=r>>>1;o<a;){var s=2*(o+1)-1,u=e[s],l=s+1,c=e[l];if(0>i(u,n))l<r&&0>i(c,u)?(e[o]=c,e[l]=n,o=l):(e[o]=u,e[s]=n,o=s);else{if(!(l<r&&0>i(c,n)))break e;e[o]=c,e[l]=n,o=l}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,D="undefined"!==typeof setImmediate?setImmediate:null;function C(e){for(var t=o(c);null!==t;){if(null===t.callback)r(c);else{if(!(t.startTime<=e))break;r(c),t.sortIndex=t.expirationTime,n(l,t)}t=o(c)}}function b(e){if(m=!1,C(e),!g)if(null!==o(l))g=!0,N(w);else{var t=o(c);null!==t&&M(b,t.startTime-e)}}function w(e,n){g=!1,m&&(m=!1,v(x),x=-1),p=!0;var i=f;try{for(C(n),h=o(l);null!==h&&(!(h.expirationTime>n)||e&&!I());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===o(l)&&r(l),C(n)}else r(l);h=o(l)}if(null!==h)var u=!0;else{var d=o(c);null!==d&&M(b,d.startTime-n),u=!1}return u}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,F=!1,k=null,x=-1,A=5,S=-1;function I(){return!(t.unstable_now()-S<A)}function P(){if(null!==k){var e=t.unstable_now();S=e;var n=!0;try{n=k(!0,e)}finally{n?E():(F=!1,k=null)}}else F=!1}if("function"===typeof D)E=function(){D(P)};else if("undefined"!==typeof MessageChannel){var _=new MessageChannel,T=_.port2;_.port1.onmessage=P,E=function(){T.postMessage(null)}}else E=function(){y(P,0)};function N(e){k=e,F||(F=!0,E())}function M(e,n){x=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,N(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return o(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,n(c,e),null===o(l)&&e===o(c)&&(m?(v(x),x=-1):m=!0,M(b,i-a))):(e.sortIndex=s,n(l,e),g||p||(g=!0,N(w))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8443:(e,t,n)=>{"use strict";e.exports=n(9717)},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},9461:(e,t,n)=>{"use strict";e.exports=n(2330)},9717:(e,t,n)=>{"use strict";var o=n(5043),r=n(9461);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useSyncExternalStore,s=o.useRef,u=o.useEffect,l=o.useMemo,c=o.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,o,r){var d=s(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=l((function(){function e(e){if(!u){if(u=!0,a=e,e=o(e),void 0!==r&&h.hasValue){var t=h.value;if(r(t,e))return s=t}return s=e}if(t=s,i(a,e))return t;var n=o(e);return void 0!==r&&r(t,n)?(a=e,t):(a=e,s=n)}var a,s,u=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,o,r]);var f=a(e,d[0],d[1]);return u((function(){h.hasValue=!0,h.value=f}),[f]),c(f),f}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(o,r){if(1&r&&(o=this(o)),8&r)return o;if("object"===typeof o&&o){if(4&r&&o.__esModule)return o;if(16&r&&"function"===typeof o.then)return o}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&o;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>o[e]));return a.default=()=>o,n.d(i,a),i}})(),n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,o)=>(n.f[o](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{506:"04c00a3e",543:"712579f7",615:"7061ce74",781:"a20e8286",995:"5c5f6169",1521:"0fa87d75",1584:"4d2e6564",1672:"207171c4",1710:"7d5b1319",1752:"035533e0",1858:"3c960290",1933:"ca331e6d",1937:"fd2b35a6",2323:"960f5ad5",2350:"b741135c",2394:"c3aa78bb",2404:"5cb6edf0",2414:"21c4e794",2434:"8da0b0d8",2490:"32b35ad8",2970:"9ac4b12e",3122:"f1fd8058",3156:"95a0b996",3193:"2064027b",3271:"4cede943",3843:"c8a9d07b",4129:"ebf3db2d",4265:"012952bc",4652:"4193b4ce",4803:"6f7cb9e9",4938:"a1262530",4940:"f3f4d8df",5131:"b8695b22",5163:"163708ff",5224:"7e84c23b",5720:"a8b5e4cb",5722:"fc60e5fc",6126:"f2770b45",6242:"03f34b64",6453:"0aee604b",6568:"4940f003",6598:"f7000b2d",6887:"1d272979",7011:"3fd8101f",7199:"6886ffb2",7348:"b0160fe7",7742:"1671284a",7954:"b202fdf0",8074:"ce300a96",8132:"62608460",8325:"676d6932",8417:"7be7ca30",8940:"68531a7f",9139:"d0cab6d9",9225:"ec92c880",9522:"beb460c6",9741:"bd6f8de3"}[e]+".chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="entra-privileged-roles:";n.l=(o,r,i,a)=>{if(e[o])e[o].push(r);else{var s,u;if(void 0!==i)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=o),e[o]=[r];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(f);var r=e[o];if(delete e[o],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),u&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/attack-paths-preview/",(()=>{var e={8792:0};n.f.j=(t,o)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)o.push(r[2]);else{var i=new Promise(((n,o)=>r=e[t]=[n,o]));o.push(r[2]=i);var a=n.p+n.u(t),s=new Error;n.l(a,(o=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=o&&("load"===o.type?"missing":o.type),a=o&&o.target&&o.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,r[1](s)}}),"chunk-"+t,t)}};var t=(t,o)=>{var r,i,a=o[0],s=o[1],u=o[2],l=0;if(a.some((t=>0!==e[t]))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(u)u(n)}for(t&&t(o);l<a.length;l++)i=a[l],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},o=self.webpackChunkentra_privileged_roles=self.webpackChunkentra_privileged_roles||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{attentionMarkers:()=>Mc,contentInitial:()=>Sc,disable:()=>Rc,document:()=>Ac,flow:()=>Pc,flowInitial:()=>Ic,insideSpan:()=>Nc,string:()=>_c,text:()=>Tc});var t={};n.r(t),n.d(t,{boolean:()=>Id,booleanish:()=>Pd,commaOrSpaceSeparated:()=>Rd,commaSeparated:()=>Md,number:()=>Td,overloadedBoolean:()=>_d,spaceSeparated:()=>Nd});var o=n(5043),r=n(4391);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function s(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;n[o]=e[o]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var d=n(579);function h(e){if("string"===typeof e||"number"===typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,o=0;o<e.length;o++)""!==(n=h(e[o]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var f={value:()=>{}};function p(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new g(o)}function g(e){this._=e}function m(e,t){for(var n,o=0,r=e.length;o<r;++o)if((n=e[o]).name===t)return n.value}function y(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=f,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}g.prototype=p.prototype={constructor:g,on:function(e,t){var n,o,r=this._,i=(o=r,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!o.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),a=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=i[a]).type)r[n]=y(r[n],e.name,t);else if(null==t)for(n in r)r[n]=y(r[n],e.name,null);return this}for(;++a<s;)if((n=(e=i[a]).type)&&(n=m(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new g(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,r=new Array(n),i=0;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(o=this._[e]).length;i<n;++i)o[i].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};const v=p;function D(){}function C(e){return null==e?D:function(){return this.querySelector(e)}}function b(){return[]}function w(e){return null==e?b:function(){return this.querySelectorAll(e)}}function E(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function F(e){return function(){return this.matches(e)}}function k(e){return function(t){return t.matches(e)}}var x=Array.prototype.find;function A(){return this.firstElementChild}var S=Array.prototype.filter;function I(){return Array.from(this.children)}function P(e){return new Array(e.length)}function _(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function T(e,t,n,o,r,i){for(var a,s=0,u=t.length,l=i.length;s<l;++s)(a=t[s])?(a.__data__=i[s],o[s]=a):n[s]=new _(e,i[s]);for(;s<u;++s)(a=t[s])&&(r[s]=a)}function N(e,t,n,o,r,i,a){var s,u,l,c=new Map,d=t.length,h=i.length,f=new Array(d);for(s=0;s<d;++s)(u=t[s])&&(f[s]=l=a.call(u,u.__data__,s,t)+"",c.has(l)?r[s]=u:c.set(l,u));for(s=0;s<h;++s)l=a.call(e,i[s],s,i)+"",(u=c.get(l))?(o[s]=u,u.__data__=i[s],c.delete(l)):n[s]=new _(e,i[s]);for(s=0;s<d;++s)(u=t[s])&&c.get(f[s])===u&&(r[s]=u)}function M(e){return e.__data__}function R(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function B(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}_.prototype={constructor:_,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var O="http://www.w3.org/1999/xhtml";const L={svg:"http://www.w3.org/2000/svg",xhtml:O,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function z(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),L.hasOwnProperty(t)?{space:L[t],local:e}:e}function j(e){return function(){this.removeAttribute(e)}}function H(e){return function(){this.removeAttributeNS(e.space,e.local)}}function q(e,t){return function(){this.setAttribute(e,t)}}function U(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function W(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function V(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function K(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function G(e){return function(){this.style.removeProperty(e)}}function Y(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Q(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Z(e,t){return e.style.getPropertyValue(t)||K(e).getComputedStyle(e,null).getPropertyValue(t)}function X(e){return function(){delete this[e]}}function $(e,t){return function(){this[e]=t}}function J(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function ee(e){return e.trim().split(/^|\s+/)}function te(e){return e.classList||new ne(e)}function ne(e){this._node=e,this._names=ee(e.getAttribute("class")||"")}function oe(e,t){for(var n=te(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function re(e,t){for(var n=te(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function ie(e){return function(){oe(this,e)}}function ae(e){return function(){re(this,e)}}function se(e,t){return function(){(t.apply(this,arguments)?oe:re)(this,e)}}function ue(){this.textContent=""}function le(e){return function(){this.textContent=e}}function ce(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function de(){this.innerHTML=""}function he(e){return function(){this.innerHTML=e}}function fe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function pe(){this.nextSibling&&this.parentNode.appendChild(this)}function ge(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function me(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===O&&t.documentElement.namespaceURI===O?t.createElement(e):t.createElementNS(n,e)}}function ye(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ve(e){var t=z(e);return(t.local?ye:me)(t)}function De(){return null}function Ce(){var e=this.parentNode;e&&e.removeChild(this)}function be(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function we(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ee(e){return function(){var t=this.__on;if(t){for(var n,o=0,r=-1,i=t.length;o<i;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function Fe(e,t,n){return function(){var o,r=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(r)for(var a=0,s=r.length;a<s;++a)if((o=r[a]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),void(o.value=t);this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function ke(e,t,n){var o=K(e),r=o.CustomEvent;"function"===typeof r?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function xe(e,t){return function(){return ke(this,e,t)}}function Ae(e,t){return function(){return ke(this,e,t.apply(this,arguments))}}ne.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Se=[null];function Ie(e,t){this._groups=e,this._parents=t}function Pe(){return new Ie([[document.documentElement]],Se)}Ie.prototype=Pe.prototype={constructor:Ie,select:function(e){"function"!==typeof e&&(e=C(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a,s=t[r],u=s.length,l=o[r]=new Array(u),c=0;c<u;++c)(i=s[c])&&(a=e.call(i,i.__data__,c,s))&&("__data__"in i&&(a.__data__=i.__data__),l[c]=a);return new Ie(o,this._parents)},selectAll:function(e){e="function"===typeof e?E(e):w(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a,s=t[i],u=s.length,l=0;l<u;++l)(a=s[l])&&(o.push(e.call(a,a.__data__,l,s)),r.push(a));return new Ie(o,r)},selectChild:function(e){return this.select(null==e?A:function(e){return function(){return x.call(this.children,e)}}("function"===typeof e?e:k(e)))},selectChildren:function(e){return this.selectAll(null==e?I:function(e){return function(){return S.call(this.children,e)}}("function"===typeof e?e:k(e)))},filter:function(e){"function"!==typeof e&&(e=F(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a=t[r],s=a.length,u=o[r]=[],l=0;l<s;++l)(i=a[l])&&e.call(i,i.__data__,l,a)&&u.push(i);return new Ie(o,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,M);var n,o=t?N:T,r=this._parents,i=this._groups;"function"!==typeof e&&(n=e,e=function(){return n});for(var a=i.length,s=new Array(a),u=new Array(a),l=new Array(a),c=0;c<a;++c){var d=r[c],h=i[c],f=h.length,p=R(e.call(d,d&&d.__data__,c,r)),g=p.length,m=u[c]=new Array(g),y=s[c]=new Array(g);o(d,h,m,y,l[c]=new Array(f),p,t);for(var v,D,C=0,b=0;C<g;++C)if(v=m[C]){for(C>=b&&(b=C+1);!(D=y[b])&&++b<g;);v._next=D||null}}return(s=new Ie(s,r))._enter=u,s._exit=l,s},enter:function(){return new Ie(this._enter||this._groups.map(P),this._parents)},exit:function(){return new Ie(this._exit||this._groups.map(P),this._parents)},join:function(e,t,n){var o=this.enter(),r=this,i=this.exit();return"function"===typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==n?i.remove():n(i),o&&r?o.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),s=new Array(r),u=0;u<a;++u)for(var l,c=n[u],d=o[u],h=c.length,f=s[u]=new Array(h),p=0;p<h;++p)(l=c[p]||d[p])&&(f[p]=l);for(;u<r;++u)s[u]=n[u];return new Ie(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,r=e[t],i=r.length-1,a=r[i];--i>=0;)(o=r[i])&&(a&&4^o.compareDocumentPosition(a)&&a.parentNode.insertBefore(o,a),a=o);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=B);for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a,s=n[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(t)}return new Ie(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r,i=t[n],a=0,s=i.length;a<s;++a)(r=i[a])&&e.call(r,r.__data__,a,i);return this},attr:function(e,t){var n=z(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?H:j:"function"===typeof t?n.local?V:W:n.local?U:q)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?G:"function"===typeof t?Q:Y)(e,t,null==n?"":n)):Z(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?X:"function"===typeof t?J:$)(e,t)):this.node()[e]},classed:function(e,t){var n=ee(e+"");if(arguments.length<2){for(var o=te(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each(("function"===typeof t?se:t?ie:ae)(n,t))},text:function(e){return arguments.length?this.each(null==e?ue:("function"===typeof e?ce:le)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?de:("function"===typeof e?fe:he)(e)):this.node().innerHTML},raise:function(){return this.each(pe)},lower:function(){return this.each(ge)},append:function(e){var t="function"===typeof e?e:ve(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:ve(e),o=null==t?De:"function"===typeof t?t:C(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))},remove:function(){return this.each(Ce)},clone:function(e){return this.select(e?we:be)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var o,r,i=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=i.length;if(!(arguments.length<2)){for(s=t?Fe:Ee,o=0;o<a;++o)this.each(s(i[o],t,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(o=0,u=s[l];o<a;++o)if((r=i[o]).type===u.type&&r.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"===typeof t?Ae:xe)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o,r=e[t],i=0,a=r.length;i<a;++i)(o=r[i])&&(yield o)}};const _e=Pe;function Te(e){return"string"===typeof e?new Ie([[document.querySelector(e)]],[document.documentElement]):new Ie([[e]],Se)}function Ne(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(t.getScreenCTM().inverse())).x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const Me={passive:!1},Re={capture:!0,passive:!1};function Be(e){e.stopImmediatePropagation()}function Oe(e){e.preventDefault(),e.stopImmediatePropagation()}function Le(e){var t=e.document.documentElement,n=Te(e).on("dragstart.drag",Oe,Re);"onselectstart"in t?n.on("selectstart.drag",Oe,Re):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ze(e,t){var n=e.document.documentElement,o=Te(e).on("dragstart.drag",null);t&&(o.on("click.drag",Oe,Re),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const je=e=>()=>e;function He(e,t){let{sourceEvent:n,subject:o,target:r,identifier:i,active:a,x:s,y:u,dx:l,dy:c,dispatch:d}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:o,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}function qe(e){return!e.ctrlKey&&!e.button}function Ue(){return this.parentNode}function We(e,t){return null==t?{x:e.x,y:e.y}:t}function Ve(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ke(){var e,t,n,o,r=qe,i=Ue,a=We,s=Ve,u={},l=v("start","drag","end"),c=0,d=0;function h(e){e.on("mousedown.drag",f).filter(s).on("touchstart.drag",m).on("touchmove.drag",y,Me).on("touchend.drag touchcancel.drag",D).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(a,s){if(!o&&r.call(this,a,s)){var u=C(this,i.call(this,a,s),a,s,"mouse");u&&(Te(a.view).on("mousemove.drag",p,Re).on("mouseup.drag",g,Re),Le(a.view),Be(a),n=!1,e=a.clientX,t=a.clientY,u("start",a))}}function p(o){if(Oe(o),!n){var r=o.clientX-e,i=o.clientY-t;n=r*r+i*i>d}u.mouse("drag",o)}function g(e){Te(e.view).on("mousemove.drag mouseup.drag",null),ze(e.view,n),Oe(e),u.mouse("end",e)}function m(e,t){if(r.call(this,e,t)){var n,o,a=e.changedTouches,s=i.call(this,e,t),u=a.length;for(n=0;n<u;++n)(o=C(this,s,e,t,a[n].identifier,a[n]))&&(Be(e),o("start",e,a[n]))}}function y(e){var t,n,o=e.changedTouches,r=o.length;for(t=0;t<r;++t)(n=u[o[t].identifier])&&(Oe(e),n("drag",e,o[t]))}function D(e){var t,n,r=e.changedTouches,i=r.length;for(o&&clearTimeout(o),o=setTimeout((function(){o=null}),500),t=0;t<i;++t)(n=u[r[t].identifier])&&(Be(e),n("end",e,r[t]))}function C(e,t,n,o,r,i){var s,d,f,p=l.copy(),g=Ne(i||n,t);if(null!=(f=a.call(e,new He("beforestart",{sourceEvent:n,target:h,identifier:r,active:c,x:g[0],y:g[1],dx:0,dy:0,dispatch:p}),o)))return s=f.x-g[0]||0,d=f.y-g[1]||0,function n(i,a,l){var m,y=g;switch(i){case"start":u[r]=n,m=c++;break;case"end":delete u[r],--c;case"drag":g=Ne(l||a,t),m=c}p.call(i,e,new He(i,{sourceEvent:a,subject:f,target:h,identifier:r,active:m,x:g[0]+s,y:g[1]+d,dx:g[0]-y[0],dy:g[1]-y[1],dispatch:p}),o)}}return h.filter=function(e){return arguments.length?(r="function"===typeof e?e:je(!!e),h):r},h.container=function(e){return arguments.length?(i="function"===typeof e?e:je(e),h):i},h.subject=function(e){return arguments.length?(a="function"===typeof e?e:je(e),h):a},h.touchable=function(e){return arguments.length?(s="function"===typeof e?e:je(!!e),h):s},h.on=function(){var e=l.on.apply(l,arguments);return e===l?h:e},h.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,h):Math.sqrt(d)},h}He.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ge(e){return((e=Math.exp(e))+1/e)/2}const Ye=function e(t,n,o){function r(e,r){var i,a,s=e[0],u=e[1],l=e[2],c=r[0],d=r[1],h=r[2],f=c-s,p=d-u,g=f*f+p*p;if(g<1e-12)a=Math.log(h/l)/t,i=function(e){return[s+e*f,u+e*p,l*Math.exp(t*e*a)]};else{var m=Math.sqrt(g),y=(h*h-l*l+o*g)/(2*l*n*m),v=(h*h-l*l-o*g)/(2*h*n*m),D=Math.log(Math.sqrt(y*y+1)-y),C=Math.log(Math.sqrt(v*v+1)-v);a=(C-D)/t,i=function(e){var o,r=e*a,i=Ge(D),c=l/(n*m)*(i*(o=t*r+D,((o=Math.exp(2*o))-1)/(o+1))-function(e){return((e=Math.exp(e))-1/e)/2}(D));return[s+c*f,u+c*p,l*i/Ge(t*r+D)]}}return i.duration=1e3*a*t/Math.SQRT2,i}return r.rho=function(t){var n=Math.max(.001,+t),o=n*n;return e(n,o,o*o)},r}(Math.SQRT2,2,4);var Qe,Ze,Xe=0,$e=0,Je=0,et=0,tt=0,nt=0,ot="object"===typeof performance&&performance.now?performance:Date,rt="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function it(){return tt||(rt(at),tt=ot.now()+nt)}function at(){tt=0}function st(){this._call=this._time=this._next=null}function ut(e,t,n){var o=new st;return o.restart(e,t,n),o}function lt(){tt=(et=ot.now())+nt,Xe=$e=0;try{!function(){it(),++Xe;for(var e,t=Qe;t;)(e=tt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Xe}()}finally{Xe=0,function(){var e,t,n=Qe,o=1/0;for(;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Qe=t);Ze=e,dt(o)}(),tt=0}}function ct(){var e=ot.now(),t=e-et;t>1e3&&(nt-=t,et=e)}function dt(e){Xe||($e&&($e=clearTimeout($e)),e-tt>24?(e<1/0&&($e=setTimeout(lt,e-ot.now()-nt)),Je&&(Je=clearInterval(Je))):(Je||(et=ot.now(),Je=setInterval(ct,1e3)),Xe=1,rt(lt)))}function ht(e,t,n){var o=new st;return t=null==t?0:+t,o.restart((n=>{o.stop(),e(n+t)}),t,n),o}st.prototype=ut.prototype={constructor:st,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?it():+n)+(null==t?0:+t),this._next||Ze===this||(Ze?Ze._next=this:Qe=this,Ze=this),this._call=e,this._time=n,dt()},stop:function(){this._call&&(this._call=null,this._time=1/0,dt())}};var ft=v("start","end","cancel","interrupt"),pt=[];function gt(e,t,n,o,r,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var o,r=e.__transition;function i(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(i){var l,c,d,h;if(1!==n.state)return u();for(l in r)if((h=r[l]).name===n.name){if(3===h.state)return ht(a);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[l]):+l<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[l])}if(ht((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(i))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,o=new Array(d=n.tween.length),l=0,c=-1;l<d;++l)(h=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(o[++c]=h);o.length=c+1}}function s(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=5,1),i=-1,a=o.length;++i<a;)o[i].call(e,r);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var o in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=ut(i,0,n.time)}(e,n,{name:t,index:o,group:r,on:ft,tween:pt,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})}function mt(e,t){var n=vt(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function yt(e,t){var n=vt(e,t);if(n.state>3)throw new Error("too late; already running");return n}function vt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Dt(e,t){var n,o,r,i=e.__transition,a=!0;if(i){for(r in t=null==t?null:t+"",i)(n=i[r]).name===t?(o=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[r]):a=!1;a&&delete e.__transition}}function Ct(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var bt,wt=180/Math.PI,Et={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ft(e,t,n,o,r,i){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,u/=s),e*o<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*wt,skewX:Math.atan(u)*wt,scaleX:a,scaleY:s}}function kt(e,t,n,o){function r(e){return e.length?e.pop()+" ":""}return function(i,a){var s=[],u=[];return i=e(i),a=e(a),function(e,o,r,i,a,s){if(e!==r||o!==i){var u=a.push("translate(",null,t,null,n);s.push({i:u-4,x:Ct(e,r)},{i:u-2,x:Ct(o,i)})}else(r||i)&&a.push("translate("+r+t+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,s,u),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(r(n)+"rotate(",null,o)-2,x:Ct(e,t)})):t&&n.push(r(n)+"rotate("+t+o)}(i.rotate,a.rotate,s,u),function(e,t,n,i){e!==t?i.push({i:n.push(r(n)+"skewX(",null,o)-2,x:Ct(e,t)}):t&&n.push(r(n)+"skewX("+t+o)}(i.skewX,a.skewX,s,u),function(e,t,n,o,i,a){if(e!==n||t!==o){var s=i.push(r(i)+"scale(",null,",",null,")");a.push({i:s-4,x:Ct(e,n)},{i:s-2,x:Ct(t,o)})}else 1===n&&1===o||i.push(r(i)+"scale("+n+","+o+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,s,u),i=a=null,function(e){for(var t,n=-1,o=u.length;++n<o;)s[(t=u[n]).i]=t.x(e);return s.join("")}}}var xt=kt((function(e){const t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Et:Ft(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),At=kt((function(e){return null==e?Et:(bt||(bt=document.createElementNS("http://www.w3.org/2000/svg","g")),bt.setAttribute("transform",e),(e=bt.transform.baseVal.consolidate())?Ft((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Et)}),", ",")",")");function St(e,t){var n,o;return function(){var r=yt(this,e),i=r.tween;if(i!==n)for(var a=0,s=(o=n=i).length;a<s;++a)if(o[a].name===t){(o=o.slice()).splice(a,1);break}r.tween=o}}function It(e,t,n){var o,r;if("function"!==typeof n)throw new Error;return function(){var i=yt(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var s={name:t,value:n},u=0,l=r.length;u<l;++u)if(r[u].name===t){r[u]=s;break}u===l&&r.push(s)}i.tween=r}}function Pt(e,t,n){var o=e._id;return e.each((function(){var e=yt(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return vt(e,o).value[t]}}function _t(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Tt(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Nt(){}var Mt=.7,Rt=1/Mt,Bt="\\s*([+-]?\\d+)\\s*",Ot="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Lt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zt=/^#([0-9a-f]{3,8})$/,jt=new RegExp("^rgb\\(".concat(Bt,",").concat(Bt,",").concat(Bt,"\\)$")),Ht=new RegExp("^rgb\\(".concat(Lt,",").concat(Lt,",").concat(Lt,"\\)$")),qt=new RegExp("^rgba\\(".concat(Bt,",").concat(Bt,",").concat(Bt,",").concat(Ot,"\\)$")),Ut=new RegExp("^rgba\\(".concat(Lt,",").concat(Lt,",").concat(Lt,",").concat(Ot,"\\)$")),Wt=new RegExp("^hsl\\(".concat(Ot,",").concat(Lt,",").concat(Lt,"\\)$")),Vt=new RegExp("^hsla\\(".concat(Ot,",").concat(Lt,",").concat(Lt,",").concat(Ot,"\\)$")),Kt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Gt(){return this.rgb().formatHex()}function Yt(){return this.rgb().formatRgb()}function Qt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=zt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Zt(t):3===n?new Jt(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Xt(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Xt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=jt.exec(e))?new Jt(t[1],t[2],t[3],1):(t=Ht.exec(e))?new Jt(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=qt.exec(e))?Xt(t[1],t[2],t[3],t[4]):(t=Ut.exec(e))?Xt(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Wt.exec(e))?an(t[1],t[2]/100,t[3]/100,1):(t=Vt.exec(e))?an(t[1],t[2]/100,t[3]/100,t[4]):Kt.hasOwnProperty(e)?Zt(Kt[e]):"transparent"===e?new Jt(NaN,NaN,NaN,0):null}function Zt(e){return new Jt(e>>16&255,e>>8&255,255&e,1)}function Xt(e,t,n,o){return o<=0&&(e=t=n=NaN),new Jt(e,t,n,o)}function $t(e,t,n,o){return 1===arguments.length?((r=e)instanceof Nt||(r=Qt(r)),r?new Jt((r=r.rgb()).r,r.g,r.b,r.opacity):new Jt):new Jt(e,t,n,null==o?1:o);var r}function Jt(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function en(){return"#".concat(rn(this.r)).concat(rn(this.g)).concat(rn(this.b))}function tn(){const e=nn(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(on(this.r),", ").concat(on(this.g),", ").concat(on(this.b)).concat(1===e?")":", ".concat(e,")"))}function nn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function on(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function rn(e){return((e=on(e))<16?"0":"")+e.toString(16)}function an(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new un(e,t,n,o)}function sn(e){if(e instanceof un)return new un(e.h,e.s,e.l,e.opacity);if(e instanceof Nt||(e=Qt(e)),!e)return new un;if(e instanceof un)return e;var t=(e=e.rgb()).r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,s=i-r,u=(i+r)/2;return s?(a=t===i?(n-o)/s+6*(n<o):n===i?(o-t)/s+2:(t-n)/s+4,s/=u<.5?i+r:2-i-r,a*=60):s=u>0&&u<1?0:a,new un(a,s,u,e.opacity)}function un(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function ln(e){return(e=(e||0)%360)<0?e+360:e}function cn(e){return Math.max(0,Math.min(1,e||0))}function dn(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function hn(e,t,n,o,r){var i=e*e,a=i*e;return((1-3*e+3*i-a)*t+(4-6*i+3*a)*n+(1+3*e+3*i-3*a)*o+a*r)/6}_t(Nt,Qt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Gt,formatHex:Gt,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return sn(this).formatHsl()},formatRgb:Yt,toString:Yt}),_t(Jt,$t,Tt(Nt,{brighter(e){return e=null==e?Rt:Math.pow(Rt,e),new Jt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Mt:Math.pow(Mt,e),new Jt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Jt(on(this.r),on(this.g),on(this.b),nn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:en,formatHex:en,formatHex8:function(){return"#".concat(rn(this.r)).concat(rn(this.g)).concat(rn(this.b)).concat(rn(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:tn,toString:tn})),_t(un,(function(e,t,n,o){return 1===arguments.length?sn(e):new un(e,t,n,null==o?1:o)}),Tt(Nt,{brighter(e){return e=null==e?Rt:Math.pow(Rt,e),new un(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Mt:Math.pow(Mt,e),new un(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new Jt(dn(e>=240?e-240:e+120,r,o),dn(e,r,o),dn(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new un(ln(this.h),cn(this.s),cn(this.l),nn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=nn(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(ln(this.h),", ").concat(100*cn(this.s),"%, ").concat(100*cn(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const fn=e=>()=>e;function pn(e,t){return function(n){return e+n*t}}function gn(e){return 1===(e=+e)?mn:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}(t,n,e):fn(isNaN(t)?n:t)}}function mn(e,t){var n=t-e;return n?pn(e,n):fn(isNaN(e)?t:e)}const yn=function e(t){var n=gn(t);function o(e,t){var o=n((e=$t(e)).r,(t=$t(t)).r),r=n(e.g,t.g),i=n(e.b,t.b),a=mn(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=r(t),e.b=i(t),e.opacity=a(t),e+""}}return o.gamma=e,o}(1);function vn(e){return function(t){var n,o,r=t.length,i=new Array(r),a=new Array(r),s=new Array(r);for(n=0;n<r;++n)o=$t(t[n]),i[n]=o.r||0,a[n]=o.g||0,s[n]=o.b||0;return i=e(i),a=e(a),s=e(s),o.opacity=1,function(e){return o.r=i(e),o.g=a(e),o.b=s(e),o+""}}}vn((function(e){var t=e.length-1;return function(n){var o=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[o],i=e[o+1],a=o>0?e[o-1]:2*r-i,s=o<t-1?e[o+2]:2*i-r;return hn((n-o/t)*t,a,r,i,s)}})),vn((function(e){var t=e.length;return function(n){var o=Math.floor(((n%=1)<0?++n:n)*t),r=e[(o+t-1)%t],i=e[o%t],a=e[(o+1)%t],s=e[(o+2)%t];return hn((n-o/t)*t,r,i,a,s)}}));var Dn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cn=new RegExp(Dn.source,"g");function bn(e,t){var n,o,r,i=Dn.lastIndex=Cn.lastIndex=0,a=-1,s=[],u=[];for(e+="",t+="";(n=Dn.exec(e))&&(o=Cn.exec(t));)(r=o.index)>i&&(r=t.slice(i,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(o=o[0])?s[a]?s[a]+=o:s[++a]=o:(s[++a]=null,u.push({i:a,x:Ct(n,o)})),i=Cn.lastIndex;return i<t.length&&(r=t.slice(i),s[a]?s[a]+=r:s[++a]=r),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,o=0;o<t;++o)s[(n=u[o]).i]=n.x(e);return s.join("")})}function wn(e,t){var n;return("number"===typeof t?Ct:t instanceof Qt?yn:(n=Qt(t))?(t=n,yn):bn)(e,t)}function En(e){return function(){this.removeAttribute(e)}}function Fn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kn(e,t,n){var o,r,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===o?r:r=t(o=a,n)}}function xn(e,t,n){var o,r,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===o?r:r=t(o=a,n)}}function An(e,t,n){var o,r,i;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(e))===(s=u+"")?null:a===o&&s===r?i:(r=s,i=t(o=a,u));this.removeAttribute(e)}}function Sn(e,t,n){var o,r,i;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(e.space,e.local))===(s=u+"")?null:a===o&&s===r?i:(r=s,i=t(o=a,u));this.removeAttributeNS(e.space,e.local)}}function In(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,r)),n}return r._value=t,r}function Pn(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,r)),n}return r._value=t,r}function _n(e,t){return function(){mt(this,e).delay=+t.apply(this,arguments)}}function Tn(e,t){return t=+t,function(){mt(this,e).delay=t}}function Nn(e,t){return function(){yt(this,e).duration=+t.apply(this,arguments)}}function Mn(e,t){return t=+t,function(){yt(this,e).duration=t}}var Rn=_e.prototype.constructor;function Bn(e){return function(){this.style.removeProperty(e)}}var On=0;function Ln(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function zn(){return++On}var jn=_e.prototype;Ln.prototype=function(e){return _e().transition(e)}.prototype={constructor:Ln,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=C(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var s,u,l=o[a],c=l.length,d=i[a]=new Array(c),h=0;h<c;++h)(s=l[h])&&(u=e.call(s,s.__data__,h,l))&&("__data__"in s&&(u.__data__=s.__data__),d[h]=u,gt(d[h],t,n,h,d,vt(s,n)));return new Ln(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=w(e));for(var o=this._groups,r=o.length,i=[],a=[],s=0;s<r;++s)for(var u,l=o[s],c=l.length,d=0;d<c;++d)if(u=l[d]){for(var h,f=e.call(u,u.__data__,d,l),p=vt(u,n),g=0,m=f.length;g<m;++g)(h=f[g])&&gt(h,t,n,g,f,p);i.push(f),a.push(u)}return new Ln(i,a,t,n)},selectChild:jn.selectChild,selectChildren:jn.selectChildren,filter:function(e){"function"!==typeof e&&(e=F(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a=t[r],s=a.length,u=o[r]=[],l=0;l<s;++l)(i=a[l])&&e.call(i,i.__data__,l,a)&&u.push(i);return new Ln(o,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),s=0;s<i;++s)for(var u,l=t[s],c=n[s],d=l.length,h=a[s]=new Array(d),f=0;f<d;++f)(u=l[f]||c[f])&&(h[f]=u);for(;s<o;++s)a[s]=t[s];return new Ln(a,this._parents,this._name,this._id)},selection:function(){return new Rn(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=zn(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a,s=o[i],u=s.length,l=0;l<u;++l)if(a=s[l]){var c=vt(a,t);gt(a,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ln(o,this._parents,e,n)},call:jn.call,nodes:jn.nodes,node:jn.node,size:jn.size,empty:jn.empty,each:jn.each,on:function(e,t){var n=this._id;return arguments.length<2?vt(this.node(),n).on.on(e):this.each(function(e,t,n){var o,r,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?mt:yt;return function(){var a=i(this,e),s=a.on;s!==o&&(r=(o=s).copy()).on(t,n),a.on=r}}(n,e,t))},attr:function(e,t){var n=z(e),o="transform"===n?At:wn;return this.attrTween(e,"function"===typeof t?(n.local?Sn:An)(n,o,Pt(this,"attr."+e,t)):null==t?(n.local?Fn:En)(n):(n.local?xn:kn)(n,o,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var o=z(e);return this.tween(n,(o.local?In:Pn)(o,t))},style:function(e,t,n){var o="transform"===(e+="")?xt:wn;return null==t?this.styleTween(e,function(e,t){var n,o,r;return function(){var i=Z(this,e),a=(this.style.removeProperty(e),Z(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}(e,o)).on("end.style."+e,Bn(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var o,r,i;return function(){var a=Z(this,e),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(e),u=s=Z(this,e)),a===u?null:a===o&&u===r?i:(r=u,i=t(o=a,s))}}(e,o,Pt(this,"style."+e,t))).each(function(e,t){var n,o,r,i,a="style."+t,s="end."+a;return function(){var u=yt(this,e),l=u.on,c=null==u.value[a]?i||(i=Bn(t)):void 0;l===n&&r===c||(o=(n=l).copy()).on(s,r=c),u.on=o}}(this._id,e)):this.styleTween(e,function(e,t,n){var o,r,i=n+"";return function(){var a=Z(this,e);return a===i?null:a===o?r:r=t(o=a,n)}}(e,o,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!==typeof t)throw new Error;return this.tween(o,function(e,t,n){var o,r;function i(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&function(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}(e,i,n)),o}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Pt(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,function(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&function(e){return function(t){this.textContent=e.call(this,t)}}(o)),t}return o._value=e,o}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,r=vt(this.node(),n).tween,i=0,a=r.length;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((null==t?St:It)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?_n:Tn)(t,e)):vt(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Nn:Mn)(t,e)):vt(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!==typeof t)throw new Error;return function(){yt(this,e).ease=t}}(t,e)):vt(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;yt(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,o=n._id,r=n.size();return new Promise((function(i,a){var s={value:a},u={value:function(){0===--r&&i()}};n.each((function(){var n=yt(this,o),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),n.on=t})),0===r&&i()}))},[Symbol.iterator]:jn[Symbol.iterator]};var Hn={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function qn(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}_e.prototype.interrupt=function(e){return this.each((function(){Dt(this,e)}))},_e.prototype.transition=function(e){var t,n;e instanceof Ln?(t=e._id,e=e._name):(t=zn(),(n=Hn).time=it(),e=null==e?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a,s=o[i],u=s.length,l=0;l<u;++l)(a=s[l])&&gt(a,e,t,l,s,n||qn(a,t));return new Ln(o,this._parents,e,t)};const Un=e=>()=>e;function Wn(e,t){let{sourceEvent:n,target:o,transform:r,dispatch:i}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Vn(e,t,n){this.k=e,this.x=t,this.y=n}Vn.prototype={constructor:Vn,scale:function(e){return 1===e?this:new Vn(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Vn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Kn=new Vn(1,0,0);function Gn(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Kn;return e.__zoom}function Yn(e){e.stopImmediatePropagation()}function Qn(e){e.preventDefault(),e.stopImmediatePropagation()}function Zn(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function Xn(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function $n(){return this.__zoom||Kn}function Jn(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function eo(){return navigator.maxTouchPoints||"ontouchstart"in this}function to(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function no(){var e,t,n,o=Zn,r=Xn,i=to,a=Jn,s=eo,u=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,d=Ye,h=v("start","zoom","end"),f=0,p=10;function g(e){e.property("__zoom",$n).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",k).filter(s).on("touchstart.zoom",x).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",S).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(e,t){return(t=Math.max(u[0],Math.min(u[1],t)))===e.k?e:new Vn(t,e.x,e.y)}function y(e,t,n){var o=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return o===e.x&&r===e.y?e:new Vn(e.k,o,r)}function D(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function C(e,t,n,o){e.on("start.zoom",(function(){b(this,arguments).event(o).start()})).on("interrupt.zoom end.zoom",(function(){b(this,arguments).event(o).end()})).tween("zoom",(function(){var e=this,i=arguments,a=b(e,i).event(o),s=r.apply(e,i),u=null==n?D(s):"function"===typeof n?n.apply(e,i):n,l=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),c=e.__zoom,h="function"===typeof t?t.apply(e,i):t,f=d(c.invert(u).concat(l/c.k),h.invert(u).concat(l/h.k));return function(e){if(1===e)e=h;else{var t=f(e),n=l/t[2];e=new Vn(n,u[0]-t[0]*n,u[1]-t[1]*n)}a.zoom(null,e)}}))}function b(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=r.apply(e,t),this.taps=0}function E(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(o.apply(this,arguments)){var s=b(this,n).event(e),c=this.__zoom,d=Math.max(u[0],Math.min(u[1],c.k*Math.pow(2,a.apply(this,arguments)))),h=Ne(e);if(s.wheel)s.mouse[0][0]===h[0]&&s.mouse[0][1]===h[1]||(s.mouse[1]=c.invert(s.mouse[0]=h)),clearTimeout(s.wheel);else{if(c.k===d)return;s.mouse=[h,c.invert(h)],Dt(this),s.start()}Qn(e),s.wheel=setTimeout((function(){s.wheel=null,s.end()}),150),s.zoom("mouse",i(y(m(c,d),s.mouse[0],s.mouse[1]),s.extent,l))}}function F(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];if(!n&&o.apply(this,arguments)){var s=e.currentTarget,u=b(this,r,!0).event(e),c=Te(e.view).on("mousemove.zoom",(function(e){if(Qn(e),!u.moved){var t=e.clientX-h,n=e.clientY-p;u.moved=t*t+n*n>f}u.event(e).zoom("mouse",i(y(u.that.__zoom,u.mouse[0]=Ne(e,s),u.mouse[1]),u.extent,l))}),!0).on("mouseup.zoom",(function(e){c.on("mousemove.zoom mouseup.zoom",null),ze(e.view,u.moved),Qn(e),u.event(e).end()}),!0),d=Ne(e,s),h=e.clientX,p=e.clientY;Le(e.view),Yn(e),u.mouse=[d,this.__zoom.invert(d)],Dt(this),u.start()}}function k(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(o.apply(this,arguments)){var s=this.__zoom,u=Ne(e.changedTouches?e.changedTouches[0]:e,this),d=s.invert(u),h=s.k*(e.shiftKey?.5:2),f=i(y(m(s,h),u,d),r.apply(this,n),l);Qn(e),c>0?Te(this).transition().duration(c).call(C,f,u,e):Te(this).call(g.transform,f,u,e)}}function x(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];if(o.apply(this,arguments)){var s,u,l,c,d=n.touches,h=d.length,f=b(this,i,n.changedTouches.length===h).event(n);for(Yn(n),u=0;u<h;++u)c=[c=Ne(l=d[u],this),this.__zoom.invert(c),l.identifier],f.touch0?f.touch1||f.touch0[2]===c[2]||(f.touch1=c,f.taps=0):(f.touch0=c,s=!0,f.taps=1+!!e);e&&(e=clearTimeout(e)),s&&(f.taps<2&&(t=c[0],e=setTimeout((function(){e=null}),500)),Dt(this),f.start())}}function A(e){if(this.__zooming){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var r,a,s,u,c=b(this,n).event(e),d=e.changedTouches,h=d.length;for(Qn(e),r=0;r<h;++r)s=Ne(a=d[r],this),c.touch0&&c.touch0[2]===a.identifier?c.touch0[0]=s:c.touch1&&c.touch1[2]===a.identifier&&(c.touch1[0]=s);if(a=c.that.__zoom,c.touch1){var f=c.touch0[0],p=c.touch0[1],g=c.touch1[0],v=c.touch1[1],D=(D=g[0]-f[0])*D+(D=g[1]-f[1])*D,C=(C=v[0]-p[0])*C+(C=v[1]-p[1])*C;a=m(a,Math.sqrt(D/C)),s=[(f[0]+g[0])/2,(f[1]+g[1])/2],u=[(p[0]+v[0])/2,(p[1]+v[1])/2]}else{if(!c.touch0)return;s=c.touch0[0],u=c.touch0[1]}c.zoom("touch",i(y(a,s,u),c.extent,l))}}function S(e){for(var o=arguments.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];if(this.__zooming){var a,s,u=b(this,r).event(e),l=e.changedTouches,c=l.length;for(Yn(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),a=0;a<c;++a)s=l[a],u.touch0&&u.touch0[2]===s.identifier?delete u.touch0:u.touch1&&u.touch1[2]===s.identifier&&delete u.touch1;if(u.touch1&&!u.touch0&&(u.touch0=u.touch1,delete u.touch1),u.touch0)u.touch0[1]=this.__zoom.invert(u.touch0[0]);else if(u.end(),2===u.taps&&(s=Ne(s,this),Math.hypot(t[0]-s[0],t[1]-s[1])<p)){var d=Te(this).on("dblclick.zoom");d&&d.apply(this,arguments)}}}return g.transform=function(e,t,n,o){var r=e.selection?e.selection():e;r.property("__zoom",$n),e!==r?C(e,t,n,o):r.interrupt().each((function(){b(this,arguments).event(o).start().zoom(null,"function"===typeof t?t.apply(this,arguments):t).end()}))},g.scaleBy=function(e,t,n,o){g.scaleTo(e,(function(){return this.__zoom.k*("function"===typeof t?t.apply(this,arguments):t)}),n,o)},g.scaleTo=function(e,t,n,o){g.transform(e,(function(){var e=r.apply(this,arguments),o=this.__zoom,a=null==n?D(e):"function"===typeof n?n.apply(this,arguments):n,s=o.invert(a),u="function"===typeof t?t.apply(this,arguments):t;return i(y(m(o,u),a,s),e,l)}),n,o)},g.translateBy=function(e,t,n,o){g.transform(e,(function(){return i(this.__zoom.translate("function"===typeof t?t.apply(this,arguments):t,"function"===typeof n?n.apply(this,arguments):n),r.apply(this,arguments),l)}),null,o)},g.translateTo=function(e,t,n,o,a){g.transform(e,(function(){var e=r.apply(this,arguments),a=this.__zoom,s=null==o?D(e):"function"===typeof o?o.apply(this,arguments):o;return i(Kn.translate(s[0],s[1]).scale(a.k).translate("function"===typeof t?-t.apply(this,arguments):-t,"function"===typeof n?-n.apply(this,arguments):-n),e,l)}),o,a)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Te(this.that).datum();h.call(e,this.that,new Wn(e,{sourceEvent:this.sourceEvent,target:g,type:e,transform:this.that.__zoom,dispatch:h}),t)}},g.wheelDelta=function(e){return arguments.length?(a="function"===typeof e?e:Un(+e),g):a},g.filter=function(e){return arguments.length?(o="function"===typeof e?e:Un(!!e),g):o},g.touchable=function(e){return arguments.length?(s="function"===typeof e?e:Un(!!e),g):s},g.extent=function(e){return arguments.length?(r="function"===typeof e?e:Un([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),g):r},g.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],g):[u[0],u[1]]},g.translateExtent=function(e){return arguments.length?(l[0][0]=+e[0][0],l[1][0]=+e[1][0],l[0][1]=+e[0][1],l[1][1]=+e[1][1],g):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},g.constrain=function(e){return arguments.length?(i=e,g):i},g.duration=function(e){return arguments.length?(c=+e,g):c},g.interpolate=function(e){return arguments.length?(d=e,g):d},g.on=function(){var e=h.on.apply(h,arguments);return e===h?g:e},g.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,g):Math.sqrt(f)},g.tapDistance=function(e){return arguments.length?(p=+e,g):p},g}Gn.prototype=Vn.prototype;const oo=["inProgress"],ro=()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",io=e=>'Node type "'.concat(e,'" not found. Using fallback type "default".'),ao=()=>"The React Flow parent container needs a width and a height to render the graph.",so=()=>"Only child nodes can use a parent extent.",uo=()=>"Can't create edge. An edge needs a source and a target.",lo=e=>'Marker type "'.concat(e,"\" doesn't exist."),co=(e,t)=>{let{id:n,sourceHandle:o,targetHandle:r}=t;return"Couldn't create edge for ".concat(e,' handle id: "').concat("source"===e?o:r,'", edge id: ').concat(n,".")},ho=()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",fo=e=>'Edge type "'.concat(e,'" not found. Using fallback type "default".'),po=e=>'Node with id "'.concat(e,'" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.'),go=()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",mo=()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs.",yo=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],vo=["Enter"," ","Escape"];var Do,Co,bo;!function(e){e.Strict="strict",e.Loose="loose"}(Do||(Do={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(Co||(Co={})),function(e){e.Partial="partial",e.Full="full"}(bo||(bo={}));const wo={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Eo,Fo,ko;!function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(Eo||(Eo={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(Fo||(Fo={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(ko||(ko={}));const xo={[ko.Left]:ko.Right,[ko.Right]:ko.Left,[ko.Top]:ko.Bottom,[ko.Bottom]:ko.Top};function Ao(e){return null===e?null:e?"valid":"invalid"}const So=e=>"id"in e&&"source"in e&&"target"in e,Io=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Po=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];const{width:o,height:r}=ir(e),i=null!==(t=e.origin)&&void 0!==t?t:n,a=o*i[0],s=r*i[1];return{x:e.position.x-a,y:e.position.y-s}},_o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{nodeOrigin:[0,0]};if(0===e.length)return{x:0,y:0,width:0,height:0};const n=e.reduce(((e,n)=>{const o="string"===typeof n;let r=t.nodeLookup||o?void 0:n;t.nodeLookup&&(r=o?t.nodeLookup.get(n):Io(n)?n:t.nodeLookup.get(n.id));const i=r?Ko(r,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return qo(e,i)}),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Wo(n)},To=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===e.size)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach((e=>{if(void 0===t.filter||t.filter(e)){const t=Ko(e);n=qo(n,t)}})),Wo(n)},No=function(e,t){let[n,o,r]=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=l(l({},Jo(t,[n,o,r])),{},{width:t.width/r,height:t.height/r}),u=[];for(const l of e.values()){var c,d,h,f,p,g;const{measured:e,selectable:t=!0,hidden:n=!1}=l;if(a&&!t||n)continue;const o=null!==(c=null!==(d=null!==(h=e.width)&&void 0!==h?h:l.width)&&void 0!==d?d:l.initialWidth)&&void 0!==c?c:null,r=null!==(f=null!==(p=null!==(g=e.height)&&void 0!==g?g:l.height)&&void 0!==p?p:l.initialHeight)&&void 0!==f?f:null,m=Yo(s,Vo(l)),y=(null!==o&&void 0!==o?o:0)*(null!==r&&void 0!==r?r:0),v=i&&m>0;(!l.internals.handleBounds||v||m>=y||l.dragging)&&u.push(l)}return u};async function Mo(e,t){var n,o,r;let{nodes:i,width:a,height:s,panZoom:u,minZoom:l,maxZoom:c}=e;if(0===i.size)return Promise.resolve(!0);const d=function(e,t){const n=new Map,o=null!==t&&void 0!==t&&t.nodes?new Set(t.nodes.map((e=>e.id))):null;return e.forEach((e=>{!e.measured.width||!e.measured.height||!(null===t||void 0===t?void 0:t.includeHiddenNodes)&&e.hidden||o&&!o.has(e.id)||n.set(e.id,e)})),n}(i,t),h=To(d),f=nr(h,a,s,null!==(n=null===t||void 0===t?void 0:t.minZoom)&&void 0!==n?n:l,null!==(o=null===t||void 0===t?void 0:t.maxZoom)&&void 0!==o?o:c,null!==(r=null===t||void 0===t?void 0:t.padding)&&void 0!==r?r:.1);return await u.setViewport(f,{duration:null===t||void 0===t?void 0:t.duration}),Promise.resolve(!0)}function Ro(e){var t,n,o;let{nodeId:r,nextPosition:i,nodeLookup:a,nodeOrigin:s=[0,0],nodeExtent:u,onError:l}=e;const c=a.get(r),d=c.parentId?a.get(c.parentId):void 0,{x:h,y:f}=d?d.internals.positionAbsolute:{x:0,y:0},p=null!==(t=c.origin)&&void 0!==t?t:s;let g=u;if("parent"!==c.extent||c.expandParent)d&&rr(c.extent)&&(g=[[c.extent[0][0]+h,c.extent[0][1]+f],[c.extent[1][0]+h,c.extent[1][1]+f]]);else if(d){const e=d.measured.width,t=d.measured.height;e&&t&&(g=[[h,f],[h+e,f+t]])}else null===l||void 0===l||l("005",so());const m=rr(g)?Lo(i,g,c.measured):i;return void 0!==c.measured.width&&void 0!==c.measured.height||null===l||void 0===l||l("015",mo()),{position:{x:m.x-h+(null!==(n=c.measured.width)&&void 0!==n?n:0)*p[0],y:m.y-f+(null!==(o=c.measured.height)&&void 0!==o?o:0)*p[1]},positionAbsolute:m}}async function Bo(e){let{nodesToRemove:t=[],edgesToRemove:n=[],nodes:o,edges:r,onBeforeDelete:i}=e;const a=new Set(t.map((e=>e.id))),s=[];for(const f of o){if(!1===f.deletable)continue;const e=a.has(f.id),t=!e&&f.parentId&&s.find((e=>e.id===f.parentId));(e||t)&&s.push(f)}const u=new Set(n.map((e=>e.id))),l=r.filter((e=>!1!==e.deletable)),c=((e,t)=>{const n=new Set;return e.forEach((e=>{n.add(e.id)})),t.filter((e=>n.has(e.source)||n.has(e.target)))})(s,l),d=c;for(const f of l){u.has(f.id)&&!d.find((e=>e.id===f.id))&&d.push(f)}if(!i)return{edges:d,nodes:s};const h=await i({nodes:s,edges:d});return"boolean"===typeof h?h?{edges:d,nodes:s}:{edges:[],nodes:[]}:h}const Oo=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)},Lo=function(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},o=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return{x:Oo(n.x,o[0][0],o[1][0]-(null!==(e=null===r||void 0===r?void 0:r.width)&&void 0!==e?e:0)),y:Oo(n.y,o[0][1],o[1][1]-(null!==(t=null===r||void 0===r?void 0:r.height)&&void 0!==t?t:0))}};function zo(e,t,n){const{width:o,height:r}=ir(n),{x:i,y:a}=n.internals.positionAbsolute;return Lo(e,[[i,a],[i+o,a+r]],t)}const jo=(e,t,n)=>e<t?Oo(Math.abs(e-t),1,t)/t:e>n?-Oo(Math.abs(e-n),1,t)/t:0,Ho=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40;return[jo(e.x,o,t.width-o)*n,jo(e.y,o,t.height-o)*n]},qo=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Uo=e=>{let{x:t,y:n,width:o,height:r}=e;return{x:t,y:n,x2:t+o,y2:n+r}},Wo=e=>{let{x:t,y:n,x2:o,y2:r}=e;return{x:t,y:n,width:o-t,height:r-n}},Vo=function(e){var t,n,o,r,i,a,s,u;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];const{x:c,y:d}=Io(e)?e.internals.positionAbsolute:Po(e,l);return{x:c,y:d,width:null!==(t=null!==(n=null!==(o=null===(r=e.measured)||void 0===r?void 0:r.width)&&void 0!==o?o:e.width)&&void 0!==n?n:e.initialWidth)&&void 0!==t?t:0,height:null!==(i=null!==(a=null!==(s=null===(u=e.measured)||void 0===u?void 0:u.height)&&void 0!==s?s:e.height)&&void 0!==a?a:e.initialHeight)&&void 0!==i?i:0}},Ko=function(e){var t,n,o,r,i,a,s,u;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];const{x:c,y:d}=Io(e)?e.internals.positionAbsolute:Po(e,l);return{x:c,y:d,x2:c+(null!==(t=null!==(n=null!==(o=null===(r=e.measured)||void 0===r?void 0:r.width)&&void 0!==o?o:e.width)&&void 0!==n?n:e.initialWidth)&&void 0!==t?t:0),y2:d+(null!==(i=null!==(a=null!==(s=null===(u=e.measured)||void 0===u?void 0:u.height)&&void 0!==s?s:e.height)&&void 0!==a?a:e.initialHeight)&&void 0!==i?i:0)}},Go=(e,t)=>Wo(qo(Uo(e),Uo(t))),Yo=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},Qo=e=>Zo(e.width)&&Zo(e.height)&&Zo(e.x)&&Zo(e.y),Zo=e=>!isNaN(e)&&isFinite(e),Xo=(e,t)=>{0},$o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1];return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}},Jo=function(e,t){let{x:n,y:o}=e,[r,i,a]=t;const s={x:(n-r)/a,y:(o-i)/a};return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?$o(s,arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1]):s},er=(e,t)=>{let{x:n,y:o}=e,[r,i,a]=t;return{x:n*a+r,y:o*a+i}};function tr(e,t){if("number"===typeof e)return Math.floor(.5*(t-t/(1+e)));if("string"===typeof e&&e.endsWith("px")){const t=parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"===typeof e&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error('[React Flow] The padding value "'.concat(e,'" is invalid. Please provide a number or a string with a valid unit (px or %).')),0}const nr=(e,t,n,o,r,i)=>{const a=function(e,t,n){if("string"===typeof e||"number"===typeof e){const o=tr(e,n),r=tr(e,t);return{top:o,right:r,bottom:o,left:r,x:2*r,y:2*o}}if("object"===typeof e){var o,r,i,a,s,u,l,c;const d=tr(null!==(o=null!==(r=e.top)&&void 0!==r?r:e.y)&&void 0!==o?o:0,n),h=tr(null!==(i=null!==(a=e.bottom)&&void 0!==a?a:e.y)&&void 0!==i?i:0,n),f=tr(null!==(s=null!==(u=e.left)&&void 0!==u?u:e.x)&&void 0!==s?s:0,t),p=tr(null!==(l=null!==(c=e.right)&&void 0!==c?c:e.x)&&void 0!==l?l:0,t);return{top:d,right:p,bottom:h,left:f,x:f+p,y:d+h}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(i,t,n),s=(t-a.x)/e.width,u=(n-a.y)/e.height,l=Math.min(s,u),c=Oo(l,o,r),d=t/2-(e.x+e.width/2)*c,h=n/2-(e.y+e.height/2)*c,f=function(e,t,n,o,r,i){const{x:a,y:s}=er(e,[t,n,o]),{x:u,y:l}=er({x:e.x+e.width,y:e.y+e.height},[t,n,o]),c=r-u,d=i-l;return{left:Math.floor(a),top:Math.floor(s),right:Math.floor(c),bottom:Math.floor(d)}}(e,d,h,c,t,n),p=Math.min(f.left-a.left,0),g=Math.min(f.top-a.top,0);return{x:d-p+Math.min(f.right-a.right,0),y:h-g+Math.min(f.bottom-a.bottom,0),zoom:c}},or=()=>{var e;return"undefined"!==typeof navigator&&(null===(e=navigator)||void 0===e||null===(e=e.userAgent)||void 0===e?void 0:e.indexOf("Mac"))>=0};function rr(e){return void 0!==e&&"parent"!==e}function ir(e){var t,n,o,r,i,a,s,u;return{width:null!==(t=null!==(n=null!==(o=null===(r=e.measured)||void 0===r?void 0:r.width)&&void 0!==o?o:e.width)&&void 0!==n?n:e.initialWidth)&&void 0!==t?t:0,height:null!==(i=null!==(a=null!==(s=null===(u=e.measured)||void 0===u?void 0:u.height)&&void 0!==s?s:e.height)&&void 0!==a?a:e.initialHeight)&&void 0!==i?i:0}}function ar(e){var t,n,o,r,i,a;return void 0!==(null!==(t=null!==(n=null===(o=e.measured)||void 0===o?void 0:o.width)&&void 0!==n?n:e.width)&&void 0!==t?t:e.initialWidth)&&void 0!==(null!==(r=null!==(i=null===(a=e.measured)||void 0===a?void 0:a.height)&&void 0!==i?i:e.height)&&void 0!==r?r:e.initialHeight)}function sr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:0,height:0},n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;const i=l({},e),a=o.get(n);if(a){var s,u;const e=a.origin||r;i.x+=a.internals.positionAbsolute.x-(null!==(s=t.width)&&void 0!==s?s:0)*e[0],i.y+=a.internals.positionAbsolute.y-(null!==(u=t.height)&&void 0!==u?u:0)*e[1]}return i}function ur(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function lr(e,t){var n,o;let{snapGrid:r=[0,0],snapToGrid:i=!1,transform:a,containerBounds:s}=t;const{x:u,y:c}=gr(e),d=Jo({x:u-(null!==(n=null===s||void 0===s?void 0:s.left)&&void 0!==n?n:0),y:c-(null!==(o=null===s||void 0===s?void 0:s.top)&&void 0!==o?o:0)},a),{x:h,y:f}=i?$o(d,r):d;return l({xSnapped:h,ySnapped:f},d)}const cr=e=>({width:e.offsetWidth,height:e.offsetHeight}),dr=e=>{var t,n;return(null===e||void 0===e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e))||(null===(n=window)||void 0===n?void 0:n.document)},hr=["INPUT","SELECT","TEXTAREA"];function fr(e){var t;const n=(null===(t=e.composedPath)||void 0===t||null===(t=t.call(e))||void 0===t?void 0:t[0])||e.target;if(1!==(null===n||void 0===n?void 0:n.nodeType))return!1;return hr.includes(n.nodeName)||n.hasAttribute("contenteditable")||!!n.closest(".nokey")}const pr=e=>"clientX"in e,gr=(e,t)=>{var n,o,r,i;const a=pr(e),s=a?e.clientX:null===(n=e.touches)||void 0===n?void 0:n[0].clientX,u=a?e.clientY:null===(o=e.touches)||void 0===o?void 0:o[0].clientY;return{x:s-(null!==(r=null===t||void 0===t?void 0:t.left)&&void 0!==r?r:0),y:u-(null!==(i=null===t||void 0===t?void 0:t.top)&&void 0!==i?i:0)}},mr=(e,t,n,o,r)=>{const i=t.querySelectorAll(".".concat(e));return i&&i.length?Array.from(i).map((t=>{const i=t.getBoundingClientRect();return l({id:t.getAttribute("data-handleid"),type:e,nodeId:r,position:t.getAttribute("data-handlepos"),x:(i.left-n.left)/o,y:(i.top-n.top)/o},cr(t))})):null};function yr(e){let{sourceX:t,sourceY:n,targetX:o,targetY:r,sourceControlX:i,sourceControlY:a,targetControlX:s,targetControlY:u}=e;const l=.125*t+.375*i+.375*s+.125*o,c=.125*n+.375*a+.375*u+.125*r;return[l,c,Math.abs(l-t),Math.abs(c-n)]}function vr(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function Dr(e){let{pos:t,x1:n,y1:o,x2:r,y2:i,c:a}=e;switch(t){case ko.Left:return[n-vr(n-r,a),o];case ko.Right:return[n+vr(r-n,a),o];case ko.Top:return[n,o-vr(o-i,a)];case ko.Bottom:return[n,o+vr(i-o,a)]}}function Cr(e){let{sourceX:t,sourceY:n,sourcePosition:o=ko.Bottom,targetX:r,targetY:i,targetPosition:a=ko.Top,curvature:s=.25}=e;const[u,l]=Dr({pos:o,x1:t,y1:n,x2:r,y2:i,c:s}),[c,d]=Dr({pos:a,x1:r,y1:i,x2:t,y2:n,c:s}),[h,f,p,g]=yr({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:u,sourceControlY:l,targetControlX:c,targetControlY:d});return["M".concat(t,",").concat(n," C").concat(u,",").concat(l," ").concat(c,",").concat(d," ").concat(r,",").concat(i),h,f,p,g]}function br(e){let{sourceX:t,sourceY:n,targetX:o,targetY:r}=e;const i=Math.abs(o-t)/2,a=o<t?o+i:o-i,s=Math.abs(r-n)/2;return[a,r<n?r+s:r-s,i,s]}function wr(e){let{sourceNode:t,targetNode:n,width:o,height:r,transform:i}=e;const a=qo(Ko(t),Ko(n));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const s={x:-i[0]/i[2],y:-i[1]/i[2],width:o/i[2],height:r/i[2]};return Yo(s,Wo(a))>0}const Er=e=>{let{source:t,sourceHandle:n,target:o,targetHandle:r}=e;return"xy-edge__".concat(t).concat(n||"","-").concat(o).concat(r||"")};function Fr(e){let{sourceX:t,sourceY:n,targetX:o,targetY:r}=e;const[i,a,s,u]=br({sourceX:t,sourceY:n,targetX:o,targetY:r});return["M ".concat(t,",").concat(n,"L ").concat(o,",").concat(r),i,a,s,u]}const kr={[ko.Left]:{x:-1,y:0},[ko.Right]:{x:1,y:0},[ko.Top]:{x:0,y:-1},[ko.Bottom]:{x:0,y:1}},xr=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Ar(e){let{source:t,sourcePosition:n=ko.Bottom,target:o,targetPosition:r=ko.Top,center:i,offset:a}=e;const s=kr[n],u=kr[r],l={x:t.x+s.x*a,y:t.y+s.y*a},c={x:o.x+u.x*a,y:o.y+u.y*a},d=(e=>{let{source:t,sourcePosition:n=ko.Bottom,target:o}=e;return n===ko.Left||n===ko.Right?t.x<o.x?{x:1,y:0}:{x:-1,y:0}:t.y<o.y?{x:0,y:1}:{x:0,y:-1}})({source:l,sourcePosition:n,target:c}),h=0!==d.x?"x":"y",f=d[h];let p,g,m=[];const y={x:0,y:0},v={x:0,y:0},[D,C,b,w]=br({sourceX:t.x,sourceY:t.y,targetX:o.x,targetY:o.y});if(s[h]*u[h]===-1){var E,F;p=null!==(E=i.x)&&void 0!==E?E:D,g=null!==(F=i.y)&&void 0!==F?F:C;const e=[{x:p,y:l.y},{x:p,y:c.y}],t=[{x:l.x,y:g},{x:c.x,y:g}];m=s[h]===f?"x"===h?e:t:"x"===h?t:e}else{const e=[{x:l.x,y:c.y}],i=[{x:c.x,y:l.y}];if(m="x"===h?s.x===f?i:e:s.y===f?e:i,n===r){const e=Math.abs(t[h]-o[h]);if(e<=a){const n=Math.min(a-1,a-e);s[h]===f?y[h]=(l[h]>t[h]?-1:1)*n:v[h]=(c[h]>o[h]?-1:1)*n}}if(n!==r){const t="x"===h?"y":"x",n=s[h]===u[t],o=l[t]>c[t],r=l[t]<c[t];(1===s[h]&&(!n&&o||n&&r)||1!==s[h]&&(!n&&r||n&&o))&&(m="x"===h?e:i)}const d={x:l.x+y.x,y:l.y+y.y},D={x:c.x+v.x,y:c.y+v.y};Math.max(Math.abs(d.x-m[0].x),Math.abs(D.x-m[0].x))>=Math.max(Math.abs(d.y-m[0].y),Math.abs(D.y-m[0].y))?(p=(d.x+D.x)/2,g=m[0].y):(p=m[0].x,g=(d.y+D.y)/2)}return[[t,{x:l.x+y.x,y:l.y+y.y},...m,{x:c.x+v.x,y:c.y+v.y},o],p,g,b,w]}function Sr(e){let{sourceX:t,sourceY:n,sourcePosition:o=ko.Bottom,targetX:r,targetY:i,targetPosition:a=ko.Top,borderRadius:s=5,centerX:u,centerY:l,offset:c=20}=e;const[d,h,f,p,g]=Ar({source:{x:t,y:n},sourcePosition:o,target:{x:r,y:i},targetPosition:a,center:{x:u,y:l},offset:c}),m=d.reduce(((e,t,n)=>{let o="";return o=n>0&&n<d.length-1?function(e,t,n,o){const r=Math.min(xr(e,t)/2,xr(t,n)/2,o),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return"L".concat(i," ").concat(a);if(e.y===a){const t=e.x<n.x?-1:1,o=e.y<n.y?1:-1;return"L ".concat(i+r*t,",").concat(a,"Q ").concat(i,",").concat(a," ").concat(i,",").concat(a+r*o)}const s=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return"L ".concat(i,",").concat(a+r*u,"Q ").concat(i,",").concat(a," ").concat(i+r*s,",").concat(a)}(d[n-1],t,d[n+1],s):"".concat(0===n?"M":"L").concat(t.x," ").concat(t.y),e+=o}),"");return[m,h,f,p,g]}function Ir(e){var t;return e&&!!(e.internals.handleBounds||null!==(t=e.handles)&&void 0!==t&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Pr(e){if(!e)return null;const t=[],n=[];for(const i of e){var o,r;i.width=null!==(o=i.width)&&void 0!==o?o:1,i.height=null!==(r=i.height)&&void 0!==r?r:1,"source"===i.type?t.push(i):"target"===i.type&&n.push(i)}return{source:t,target:n}}function _r(e,t){var n,o,r;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ko.Left,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=(null!==(n=null===t||void 0===t?void 0:t.x)&&void 0!==n?n:0)+e.internals.positionAbsolute.x,u=(null!==(o=null===t||void 0===t?void 0:t.y)&&void 0!==o?o:0)+e.internals.positionAbsolute.y,{width:l,height:c}=null!==t&&void 0!==t?t:ir(e);if(a)return{x:s+l/2,y:u+c/2};switch(null!==(r=null===t||void 0===t?void 0:t.position)&&void 0!==r?r:i){case ko.Top:return{x:s+l/2,y:u};case ko.Right:return{x:s+l,y:u+c/2};case ko.Bottom:return{x:s+l/2,y:u+c};case ko.Left:return{x:s,y:u+c/2}}}function Tr(e,t){return e&&(t?e.find((e=>e.id===t)):e[0])||null}function Nr(e,t){if(!e)return"";if("string"===typeof e)return e;const n=t?"".concat(t,"__"):"";return"".concat(n).concat(Object.keys(e).sort().map((t=>"".concat(t,"=").concat(e[t]))).join("&"))}const Mr={nodeOrigin:[0,0],nodeExtent:yo,elevateNodesOnSelect:!0,defaults:{}},Rr=l(l({},Mr),{},{checkEquality:!0});function Br(e,t){const n=l({},e);for(const o in t)void 0!==t[o]&&(n[o]=t[o]);return n}function Or(e,t,n,o){const r=Br(Rr,o);let i=e.length>0;const a=new Map(t),s=null!==r&&void 0!==r&&r.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const f of e){var u;let e=a.get(f.id);if(r.checkEquality&&f===(null===(u=e)||void 0===u?void 0:u.internals.userNode))t.set(f.id,e);else{var c,d,h;const n=Po(f,r.nodeOrigin),o=rr(f.extent)?f.extent:r.nodeExtent,i=Lo(n,o,ir(f));e=l(l(l({},r.defaults),f),{},{measured:{width:null===(c=f.measured)||void 0===c?void 0:c.width,height:null===(d=f.measured)||void 0===d?void 0:d.height},internals:{positionAbsolute:i,handleBounds:f.measured?null===(h=e)||void 0===h?void 0:h.internals.handleBounds:void 0,z:zr(f,s),userNode:f}}),t.set(f.id,e)}void 0!==e.measured&&void 0!==e.measured.width&&void 0!==e.measured.height||e.hidden||(i=!1),f.parentId&&Lr(e,t,n,o)}return i}function Lr(e,t,n,o){const{elevateNodesOnSelect:r,nodeOrigin:i,nodeExtent:a}=Br(Mr,o),s=e.parentId,u=t.get(s);if(!u)return void console.warn("Parent node ".concat(s," not found. Please make sure that parent nodes are in front of their child nodes in the nodes array."));!function(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n);const c=r?1e3:0,{x:d,y:h,z:f}=function(e,t,n,o,r){var i;const{x:a,y:s}=t.internals.positionAbsolute,u=ir(e),l=Po(e,n),c=rr(e.extent)?Lo(l,e.extent,u):l;let d=Lo({x:a+c.x,y:s+c.y},o,u);"parent"===e.extent&&(d=zo(d,u,t));const h=zr(e,r),f=null!==(i=t.internals.z)&&void 0!==i?i:0;return{x:d.x,y:d.y,z:f>h?f:h}}(e,u,i,a,c),{positionAbsolute:p}=e.internals,g=d!==p.x||h!==p.y;(g||f!==e.internals.z)&&t.set(e.id,l(l({},e),{},{internals:l(l({},e.internals),{},{positionAbsolute:g?{x:d,y:h}:p,z:f})}))}function zr(e,t){return(Zo(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function jr(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0];const r=[],i=new Map;for(const u of e){var a,s;const e=t.get(u.parentId);if(!e)continue;const n=null!==(a=null===(s=i.get(u.parentId))||void 0===s?void 0:s.expandedRect)&&void 0!==a?a:Vo(e),o=Go(n,u.rect);i.set(u.parentId,{expandedRect:o,parent:e})}return i.size>0&&i.forEach(((t,i)=>{var a;let{expandedRect:s,parent:u}=t;const l=u.internals.positionAbsolute,c=ir(u),d=null!==(a=u.origin)&&void 0!==a?a:o,h=s.x<l.x?Math.round(Math.abs(l.x-s.x)):0,f=s.y<l.y?Math.round(Math.abs(l.y-s.y)):0,p=Math.max(c.width,Math.round(s.width)),g=Math.max(c.height,Math.round(s.height)),m=(p-c.width)*d[0],y=(g-c.height)*d[1];var v;(h>0||f>0||m||y)&&(r.push({id:i,type:"position",position:{x:u.position.x-h+m,y:u.position.y-f+y}}),null===(v=n.get(i))||void 0===v||v.forEach((t=>{e.some((e=>e.id===t.id))||r.push({id:t.id,type:"position",position:{x:t.position.x+h,y:t.position.y+f}})})));(c.width<s.width||c.height<s.height||h||f)&&r.push({id:i,type:"dimensions",setAttributes:!0,dimensions:{width:p+(h?d[0]*h-m:0),height:g+(f?d[1]*f-y:0)}})})),r}function Hr(e,t,n,o,r,i){let a=r;const s=o.get(a)||new Map;o.set(a,s.set(n,t)),a="".concat(r,"-").concat(e);const u=o.get(a)||new Map;if(o.set(a,u.set(n,t)),i){a="".concat(r,"-").concat(e,"-").concat(i);const s=o.get(a)||new Map;o.set(a,s.set(n,t))}}function qr(e,t,n){e.clear(),t.clear();for(const o of n){const{source:n,target:r,sourceHandle:i=null,targetHandle:a=null}=o,s={edgeId:o.id,source:n,target:r,sourceHandle:i,targetHandle:a},u="".concat(n,"-").concat(i,"--").concat(r,"-").concat(a);Hr("source",s,"".concat(r,"-").concat(a,"--").concat(n,"-").concat(i),e,n,i),Hr("target",s,u,e,r,a),t.set(o.id,o)}}function Ur(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return!!n&&(!!n.selected||Ur(n,t))}function Wr(e,t,n){let o=e;do{var r,i,a;if(null!==(r=o)&&void 0!==r&&null!==(i=r.matches)&&void 0!==i&&i.call(r,t))return!0;if(o===n)return!1;o=null===(a=o)||void 0===a?void 0:a.parentElement}while(o);return!1}function Vr(e){var t,n;let{nodeId:o,dragItems:r,nodeLookup:i,dragging:a=!0}=e;const s=[];for(const[d,h]of r){var u;const e=null===(u=i.get(d))||void 0===u?void 0:u.internals.userNode;e&&s.push(l(l({},e),{},{position:h.position,dragging:a}))}if(!o)return[s[0],s];const c=null===(t=i.get(o))||void 0===t?void 0:t.internals.userNode;return[c?l(l({},c),{},{position:(null===(n=r.get(o))||void 0===n?void 0:n.position)||c.position,dragging:a}):s[0],s]}function Kr(e){let{onNodeMouseDown:t,getStoreItems:n,onDragStart:o,onDrag:r,onDragStop:i}=e,a={x:null,y:null},s=0,u=new Map,l=!1,c={x:0,y:0},d=null,h=!1,f=null,p=!1;return{update:function(e){let{noDragClassName:g,handleSelector:m,domNode:y,isSelectable:v,nodeId:D,nodeClickDistance:C=0}=e;function b(e,t){let{x:o,y:i}=e;const{nodeLookup:s,nodeExtent:l,snapGrid:c,snapToGrid:d,nodeOrigin:h,onNodeDrag:f,onSelectionDrag:p,onError:g,updateNodePositions:m}=n();a={x:o,y:i};let y=!1,v={x:0,y:0,x2:0,y2:0};if(u.size>1&&l){const e=To(u);v=Uo(e)}for(const[n,r]of u){if(!s.has(n))continue;let e={x:o-r.distance.x,y:i-r.distance.y};d&&(e=$o(e,c));let t=[[l[0][0],l[0][1]],[l[1][0],l[1][1]]];if(u.size>1&&l&&!r.extent){const{positionAbsolute:e}=r.internals,n=e.x-v.x+l[0][0],o=e.x+r.measured.width-v.x2+l[1][0];t=[[n,e.y-v.y+l[0][1]],[o,e.y+r.measured.height-v.y2+l[1][1]]]}const{position:a,positionAbsolute:f}=Ro({nodeId:n,nextPosition:e,nodeLookup:s,nodeExtent:t,nodeOrigin:h,onError:g});y=y||r.position.x!==a.x||r.position.y!==a.y,r.position=a,r.internals.positionAbsolute=f}if(y&&(m(u,!0),t&&(r||f||!D&&p))){const[e,n]=Vr({nodeId:D,dragItems:u,nodeLookup:s});null===r||void 0===r||r(t,u,e,n),null===f||void 0===f||f(t,e,n),D||null===p||void 0===p||p(t,n)}}async function w(){if(!d)return;const{transform:e,panBy:t,autoPanSpeed:o,autoPanOnNodeDrag:r}=n();if(!r)return l=!1,void cancelAnimationFrame(s);const[i,u]=Ho(c,d,o);var h,f;0===i&&0===u||(a.x=(null!==(h=a.x)&&void 0!==h?h:0)-i/e[2],a.y=(null!==(f=a.y)&&void 0!==f?f:0)-u/e[2],await t({x:i,y:u})&&b(a,null));s=requestAnimationFrame(w)}function E(e){const{nodeLookup:r,multiSelectionActive:i,nodesDraggable:s,transform:l,snapGrid:c,snapToGrid:f,selectNodesOnDrag:p,onNodeDragStart:g,onSelectionDragStart:m,unselectNodesAndEdges:y}=n();var C;(h=!0,p&&v||i||!D)||(null!==(C=r.get(D))&&void 0!==C&&C.selected||y());v&&p&&D&&(null===t||void 0===t||t(D));const b=lr(e.sourceEvent,{transform:l,snapGrid:c,snapToGrid:f,containerBounds:d});if(a=b,u=function(e,t,n,o){const r=new Map;for(const[s,u]of e)if((u.selected||u.id===o)&&(!u.parentId||!Ur(u,e))&&(u.draggable||t&&"undefined"===typeof u.draggable)){const t=e.get(s);var i,a;t&&r.set(s,{id:s,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:null!==(i=t.measured.width)&&void 0!==i?i:0,height:null!==(a=t.measured.height)&&void 0!==a?a:0}})}return r}(r,s,b,D),u.size>0&&(o||g||!D&&m)){const[t,n]=Vr({nodeId:D,dragItems:u,nodeLookup:r});null===o||void 0===o||o(e.sourceEvent,u,t,n),null===g||void 0===g||g(e.sourceEvent,t,n),D||null===m||void 0===m||m(e.sourceEvent,n)}}f=Te(y);const F=Ke().clickDistance(C).on("start",(e=>{const{domNode:t,nodeDragThreshold:o,transform:r,snapGrid:i,snapToGrid:s}=n();d=(null===t||void 0===t?void 0:t.getBoundingClientRect())||null,p=!1,0===o&&E(e);const u=lr(e.sourceEvent,{transform:r,snapGrid:i,snapToGrid:s,containerBounds:d});a=u,c=gr(e.sourceEvent,d)})).on("drag",(e=>{const{autoPanOnNodeDrag:t,transform:o,snapGrid:r,snapToGrid:i,nodeDragThreshold:s,nodeLookup:f}=n(),g=lr(e.sourceEvent,{transform:o,snapGrid:r,snapToGrid:i,containerBounds:d});if(("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||D&&!f.has(D))&&(p=!0),!p){if(!l&&t&&h&&(l=!0,w()),!h){var m,y;const t=g.xSnapped-(null!==(m=a.x)&&void 0!==m?m:0),n=g.ySnapped-(null!==(y=a.y)&&void 0!==y?y:0);Math.sqrt(t*t+n*n)>s&&E(e)}(a.x!==g.xSnapped||a.y!==g.ySnapped)&&u&&h&&(c=gr(e.sourceEvent,d),b(g,e.sourceEvent))}})).on("end",(e=>{if(h&&!p&&(l=!1,h=!1,cancelAnimationFrame(s),u.size>0)){const{nodeLookup:t,updateNodePositions:o,onNodeDragStop:r,onSelectionDragStop:a}=n();if(o(u,!1),i||r||!D&&a){const[n,o]=Vr({nodeId:D,dragItems:u,nodeLookup:t,dragging:!1});null===i||void 0===i||i(e.sourceEvent,u,n,o),null===r||void 0===r||r(e.sourceEvent,n,o),D||null===a||void 0===a||a(e.sourceEvent,o)}}})).filter((e=>{const t=e.target;return!e.button&&(!g||!Wr(t,".".concat(g),y))&&(!m||Wr(t,m,y))}));f.call(F)},destroy:function(){var e;null===(e=f)||void 0===e||e.on(".drag",null)}}}function Gr(e,t,n,o){let r=[],i=1/0;const a=function(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(const i of t.values())Yo(r,Vo(i))>0&&o.push(i);return o}(e,n,t+250);for(const f of a){var s,u,c,d;const n=[...null!==(s=null===(u=f.internals.handleBounds)||void 0===u?void 0:u.source)&&void 0!==s?s:[],...null!==(c=null===(d=f.internals.handleBounds)||void 0===d?void 0:d.target)&&void 0!==c?c:[]];for(const a of n){if(o.nodeId===a.nodeId&&o.type===a.type&&o.id===a.id)continue;const{x:n,y:s}=_r(f,a,a.position,!0),u=Math.sqrt(Math.pow(n-e.x,2)+Math.pow(s-e.y,2));u>t||(u<i?(r=[l(l({},a),{},{x:n,y:s})],i=u):u===i&&r.push(l(l({},a),{},{x:n,y:s})))}}if(!r.length)return null;if(r.length>1){var h;const e="source"===o.type?"target":"source";return null!==(h=r.find((t=>t.type===e)))&&void 0!==h?h:r[0]}return r[0]}function Yr(e,t,n,o,r){var i,a,s,u,c,d;let h=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const f=o.get(e);if(!f)return null;const p="strict"===r?null===(i=f.internals.handleBounds)||void 0===i?void 0:i[t]:[...null!==(a=null===(s=f.internals.handleBounds)||void 0===s?void 0:s.source)&&void 0!==a?a:[],...null!==(u=null===(c=f.internals.handleBounds)||void 0===c?void 0:c.target)&&void 0!==u?u:[]],g=null!==(d=n?null===p||void 0===p?void 0:p.find((e=>e.id===n)):null===p||void 0===p?void 0:p[0])&&void 0!==d?d:null;return g&&h?l(l({},g),_r(f,g,g.position,!0)):g}function Qr(e,t){return e||(null!==t&&void 0!==t&&t.classList.contains("target")?"target":null!==t&&void 0!==t&&t.classList.contains("source")?"source":null)}const Zr=()=>!0;function Xr(e,t){let{handle:n,connectionMode:o,fromNodeId:r,fromHandleId:i,fromType:a,doc:s,lib:u,flowId:l,isValidConnection:c=Zr,nodeLookup:d}=t;const h="target"===a,f=n?s.querySelector(".".concat(u,'-flow__handle[data-id="').concat(l,"-").concat(null===n||void 0===n?void 0:n.nodeId,"-").concat(null===n||void 0===n?void 0:n.id,"-").concat(null===n||void 0===n?void 0:n.type,'"]')):null,{x:p,y:g}=gr(e),m=s.elementFromPoint(p,g),y=null!==m&&void 0!==m&&m.classList.contains("".concat(u,"-flow__handle"))?m:f,v={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){const e=Qr(void 0,y),t=y.getAttribute("data-nodeid"),n=y.getAttribute("data-handleid"),a=y.classList.contains("connectable"),s=y.classList.contains("connectableend");if(!t||!e)return v;const u={source:h?t:r,sourceHandle:h?n:i,target:h?r:t,targetHandle:h?i:n};v.connection=u;const l=a&&s&&(o===Do.Strict?h&&"source"===e||!h&&"target"===e:t!==r||n!==i);v.isValid=l&&c(u),v.toHandle=Yr(t,e,n,d,o,!0)}return v}const $r={onPointerDown:function(e,t){let{connectionMode:n,connectionRadius:o,handleId:r,nodeId:i,edgeUpdaterType:a,isTarget:s,domNode:u,nodeLookup:d,lib:h,autoPanOnConnect:f,flowId:p,panBy:g,cancelConnection:m,onConnectStart:y,onConnect:v,onConnectEnd:D,isValidConnection:C=Zr,onReconnectEnd:b,updateConnection:w,getTransform:E,getFromHandle:F,autoPanSpeed:k}=t;const x=dr(e.target);let A,S=0;const{x:I,y:P}=gr(e),_=null===x||void 0===x?void 0:x.elementFromPoint(I,P),T=Qr(a,_),N=null===u||void 0===u?void 0:u.getBoundingClientRect();if(!N||!T)return;const M=Yr(i,T,r,d,n);if(!M)return;let R=gr(e,N),B=!1,O=null,L=!1,z=null;function j(){if(!f||!N)return;const[e,t]=Ho(R,N,k);g({x:e,y:t}),S=requestAnimationFrame(j)}const H=l(l({},M),{},{nodeId:i,type:T,position:M.position}),q=d.get(i),U={inProgress:!0,isValid:null,from:_r(q,H,ko.Left,!0),fromHandle:H,fromPosition:H.position,fromNode:q,to:R,toHandle:null,toPosition:xo[H.position],toNode:null};w(U);let W=U;function V(e){if(!F()||!H)return void K(e);const t=E();R=gr(e,N),A=Gr(Jo(R,t,!1,[1,1]),o,d,H),B||(j(),B=!0);const a=Xr(e,{handle:A,connectionMode:n,fromNodeId:i,fromHandleId:r,fromType:s?"target":"source",isValidConnection:C,doc:x,lib:h,flowId:p,nodeLookup:d});z=a.handleDomNode,O=a.connection,L=function(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}(!!A,a.isValid);const u=l(l({},W),{},{isValid:L,to:a.toHandle&&L?er({x:a.toHandle.x,y:a.toHandle.y},t):R,toHandle:a.toHandle,toPosition:L&&a.toHandle?a.toHandle.position:xo[H.position],toNode:a.toHandle?d.get(a.toHandle.nodeId):null});L&&A&&W.toHandle&&u.toHandle&&W.toHandle.type===u.toHandle.type&&W.toHandle.nodeId===u.toHandle.nodeId&&W.toHandle.id===u.toHandle.id&&W.to.x===u.to.x&&W.to.y===u.to.y||(w(u),W=u)}function K(e){(A||z)&&O&&L&&(null===v||void 0===v||v(O));const{inProgress:t}=W,n=l(l({},c(W,oo)),{},{toPosition:W.toHandle?W.toPosition:null});null===D||void 0===D||D(e,n),a&&(null===b||void 0===b||b(e,n)),m(),cancelAnimationFrame(S),B=!1,L=!1,O=null,z=null,x.removeEventListener("mousemove",V),x.removeEventListener("mouseup",K),x.removeEventListener("touchmove",V),x.removeEventListener("touchend",K)}null===y||void 0===y||y(e,{nodeId:i,handleId:r,handleType:T}),x.addEventListener("mousemove",V),x.addEventListener("mouseup",K),x.addEventListener("touchmove",V),x.addEventListener("touchend",K)},isValid:Xr};const Jr=e=>({x:e.x,y:e.y,zoom:e.k}),ei=e=>{let{x:t,y:n,zoom:o}=e;return Kn.translate(t,n).scale(o)},ti=(e,t)=>e.target.closest(".".concat(t)),ni=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),oi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const o="number"===typeof t&&t>0;return o||n(),o?e.transition().duration(t).on("end",n):e},ri=e=>{const t=e.ctrlKey&&or()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function ii(e){let{domNode:t,minZoom:n,maxZoom:o,paneClickDistance:r,translateExtent:i,viewport:a,onPanZoom:s,onPanZoomStart:u,onPanZoomEnd:l,onDraggingChange:c}=e;const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=t.getBoundingClientRect(),f=no().clickDistance(!Zo(r)||r<0?0:r).scaleExtent([n,o]).translateExtent(i),p=Te(t).call(f);D({x:a.x,y:a.y,zoom:Oo(a.zoom,n,o)},[[0,0],[h.width,h.height]],i);const g=p.on("wheel.zoom"),m=p.on("dblclick.zoom");function y(e,t){return p?new Promise((n=>{null===f||void 0===f||f.transform(oi(p,null===t||void 0===t?void 0:t.duration,(()=>n(!0))),e)})):Promise.resolve(!1)}function v(){f.on("zoom",null)}async function D(e,t,n){const o=ei(e),r=null===f||void 0===f?void 0:f.constrain()(o,t,n);return r&&await y(r),new Promise((e=>e(r)))}return f.wheelDelta(ri),{update:function(e){let{noWheelClassName:t,noPanClassName:n,onPaneContextMenu:o,userSelectionActive:r,panOnScroll:i,panOnDrag:a,panOnScrollMode:h,panOnScrollSpeed:y,preventScrolling:D,zoomOnPinch:C,zoomOnScroll:b,zoomOnDoubleClick:w,zoomActivationKeyPressed:E,lib:F,onTransformChange:k}=e;r&&!d.isZoomingOrPanning&&v();const x=i&&!E&&!r?function(e){let{zoomPanValues:t,noWheelClassName:n,d3Selection:o,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:a,zoomOnPinch:s,onPanZoomStart:u,onPanZoom:l,onPanZoomEnd:c}=e;return e=>{if(ti(e,n))return!1;e.preventDefault(),e.stopImmediatePropagation();const d=o.property("__zoom").k||1;if(e.ctrlKey&&s){const t=Ne(e),n=ri(e),i=d*Math.pow(2,n);return void r.scaleTo(o,i,t,e)}const h=1===e.deltaMode?20:1;let f=i===Co.Vertical?0:e.deltaX*h,p=i===Co.Horizontal?0:e.deltaY*h;!or()&&e.shiftKey&&i!==Co.Vertical&&(f=e.deltaY*h,p=0),r.translateBy(o,-f/d*a,-p/d*a,{internal:!0});const g=Jr(o.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,null===u||void 0===u||u(e,g)),t.isPanScrolling&&(null===l||void 0===l||l(e,g),t.panScrollTimeout=setTimeout((()=>{null===c||void 0===c||c(e,g),t.isPanScrolling=!1}),150))}}({zoomPanValues:d,noWheelClassName:t,d3Selection:p,d3Zoom:f,panOnScrollMode:h,panOnScrollSpeed:y,zoomOnPinch:C,onPanZoomStart:u,onPanZoom:s,onPanZoomEnd:l}):function(e){let{noWheelClassName:t,preventScrolling:n,d3ZoomHandler:o}=e;return function(e,r){const i="wheel"===e.type,a=!n&&i&&!e.ctrlKey,s=ti(e,t);if(e.ctrlKey&&i&&s&&e.preventDefault(),a||s)return null;e.preventDefault(),o.call(this,e,r)}}({noWheelClassName:t,preventScrolling:D,d3ZoomHandler:g});if(p.on("wheel.zoom",x,{passive:!1}),!r){const e=function(e){let{zoomPanValues:t,onDraggingChange:n,onPanZoomStart:o}=e;return e=>{var r,i,a;if(null!==(r=e.sourceEvent)&&void 0!==r&&r.internal)return;const s=Jr(e.transform);t.mouseButton=(null===(i=e.sourceEvent)||void 0===i?void 0:i.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=s,"mousedown"===(null===(a=e.sourceEvent)||void 0===a?void 0:a.type)&&n(!0),o&&(null===o||void 0===o||o(e.sourceEvent,s))}}({zoomPanValues:d,onDraggingChange:c,onPanZoomStart:u});f.on("start",e);const t=function(e){let{zoomPanValues:t,panOnDrag:n,onPaneContextMenu:o,onTransformChange:r,onPanZoom:i}=e;return e=>{var a,s,u;t.usedRightMouseButton=!(!o||!ni(n,null!==(a=t.mouseButton)&&void 0!==a?a:0)),null!==(s=e.sourceEvent)&&void 0!==s&&s.sync||r([e.transform.x,e.transform.y,e.transform.k]),!i||null!==(u=e.sourceEvent)&&void 0!==u&&u.internal||null===i||void 0===i||i(e.sourceEvent,Jr(e.transform))}}({zoomPanValues:d,panOnDrag:a,onPaneContextMenu:!!o,onPanZoom:s,onTransformChange:k});f.on("zoom",t);const n=function(e){let{zoomPanValues:t,panOnDrag:n,panOnScroll:o,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:a}=e;return e=>{var s,u,l,c;if((null===(s=e.sourceEvent)||void 0===s||!s.internal)&&(t.isZoomingOrPanning=!1,a&&ni(n,null!==(u=t.mouseButton)&&void 0!==u?u:0)&&!t.usedRightMouseButton&&e.sourceEvent&&a(e.sourceEvent),t.usedRightMouseButton=!1,r(!1),i&&(l=t.prevViewport,c=e.transform,l.x!==c.x||l.y!==c.y||l.zoom!==c.k))){const n=Jr(e.transform);t.prevViewport=n,clearTimeout(t.timerId),t.timerId=setTimeout((()=>{null===i||void 0===i||i(e.sourceEvent,n)}),o?150:0)}}}({zoomPanValues:d,panOnDrag:a,panOnScroll:i,onPaneContextMenu:o,onPanZoomEnd:l,onDraggingChange:c});f.on("end",n)}const A=function(e){let{zoomActivationKeyPressed:t,zoomOnScroll:n,zoomOnPinch:o,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:a,userSelectionActive:s,noWheelClassName:u,noPanClassName:l,lib:c}=e;return e=>{var d;const h=t||n,f=o&&e.ctrlKey;if(1===e.button&&"mousedown"===e.type&&(ti(e,"".concat(c,"-flow__node"))||ti(e,"".concat(c,"-flow__edge"))))return!0;if(!r&&!h&&!i&&!a&&!o)return!1;if(s)return!1;if(ti(e,u)&&"wheel"===e.type)return!1;if(ti(e,l)&&("wheel"!==e.type||i&&"wheel"===e.type&&!t))return!1;if(!o&&e.ctrlKey&&"wheel"===e.type)return!1;if(!o&&"touchstart"===e.type&&(null===(d=e.touches)||void 0===d?void 0:d.length)>1)return e.preventDefault(),!1;if(!h&&!i&&!f&&"wheel"===e.type)return!1;if(!r&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(Array.isArray(r)&&!r.includes(e.button)&&"mousedown"===e.type)return!1;const p=Array.isArray(r)&&r.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&p}}({zoomActivationKeyPressed:E,panOnDrag:a,zoomOnScroll:b,panOnScroll:i,zoomOnDoubleClick:w,zoomOnPinch:C,userSelectionActive:r,noPanClassName:n,noWheelClassName:t,lib:F});f.filter(A),w?p.on("dblclick.zoom",m):p.on("dblclick.zoom",null)},destroy:v,setViewport:async function(e,t){const n=ei(e);return await y(n,t),new Promise((e=>e(n)))},setViewportConstrained:D,getViewport:function(){const e=p?Gn(p.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return p?new Promise((n=>{null===f||void 0===f||f.scaleTo(oi(p,null===t||void 0===t?void 0:t.duration,(()=>n(!0))),e)})):Promise.resolve(!1)},scaleBy:function(e,t){return p?new Promise((n=>{null===f||void 0===f||f.scaleBy(oi(p,null===t||void 0===t?void 0:t.duration,(()=>n(!0))),e)})):Promise.resolve(!1)},setScaleExtent:function(e){null===f||void 0===f||f.scaleExtent(e)},setTranslateExtent:function(e){null===f||void 0===f||f.translateExtent(e)},syncViewport:function(e){if(p){const t=ei(e),n=p.property("__zoom");n.k===e.zoom&&n.x===e.x&&n.y===e.y||null===f||void 0===f||f.transform(p,t,null,{sync:!0})}},setClickDistance:function(e){const t=!Zo(e)||e<0?0:e;null===f||void 0===f||f.clickDistance(t)}}}var ai;!function(e){e.Line="line",e.Handle="handle"}(ai||(ai={}));function si(e,t){return Math.max(0,t-e)}function ui(e,t){return Math.max(0,e-t)}function li(e,t,n){return Math.max(0,t-e,e-n)}function ci(e,t){return e?!t:t}const di={width:0,height:0,x:0,y:0},hi=l(l({},di),{},{pointerX:0,pointerY:0,aspectRatio:1});function fi(e,t,n){var o,r;const i=t.position.x+e.position.x,a=t.position.y+e.position.y,s=null!==(o=e.measured.width)&&void 0!==o?o:0,u=null!==(r=e.measured.height)&&void 0!==r?r:0,l=n[0]*s,c=n[1]*u;return[[i-l,a-c],[i+s-l,a+u-c]]}function pi(e){let{domNode:t,nodeId:n,getStoreItems:o,onChange:r,onEnd:i}=e;const a=Te(t);return{update:function(e){let{controlPosition:t,boundaries:s,keepAspectRatio:u,resizeDirection:c,onResizeStart:d,onResize:h,onResizeEnd:f,shouldResize:p}=e,g=l({},di),m=l({},hi);const y=function(e){return{isHorizontal:e.includes("right")||e.includes("left"),isVertical:e.includes("bottom")||e.includes("top"),affectsX:e.includes("left"),affectsY:e.includes("top")}}(t);let v,D,C,b,w=null,E=[];const F=Ke().on("start",(e=>{var t,r,i,a,s;const{nodeLookup:u,transform:c,snapGrid:h,snapToGrid:f,nodeOrigin:p,paneDomNode:y}=o();if(v=u.get(n),!v)return;w=null!==(t=null===y||void 0===y?void 0:y.getBoundingClientRect())&&void 0!==t?t:null;const{xSnapped:F,ySnapped:k}=lr(e.sourceEvent,{transform:c,snapGrid:h,snapToGrid:f,containerBounds:w});g={width:null!==(r=v.measured.width)&&void 0!==r?r:0,height:null!==(i=v.measured.height)&&void 0!==i?i:0,x:null!==(a=v.position.x)&&void 0!==a?a:0,y:null!==(s=v.position.y)&&void 0!==s?s:0},m=l(l({},g),{},{pointerX:F,pointerY:k,aspectRatio:g.width/g.height}),D=void 0,v.parentId&&("parent"===v.extent||v.expandParent)&&(D=u.get(v.parentId),C=D&&"parent"===v.extent?function(e){return[[0,0],[e.measured.width,e.measured.height]]}(D):void 0),E=[],b=void 0;for(const[o,d]of u)if(d.parentId===n&&(E.push({id:o,position:l({},d.position),extent:d.extent}),"parent"===d.extent||d.expandParent)){var x;const e=fi(d,v,null!==(x=d.origin)&&void 0!==x?x:p);b=b?[[Math.min(e[0][0],b[0][0]),Math.min(e[0][1],b[0][1])],[Math.max(e[1][0],b[1][0]),Math.max(e[1][1],b[1][1])]]:e}null===d||void 0===d||d(e,l({},g))})).on("drag",(e=>{var t;const{transform:n,snapGrid:i,snapToGrid:a,nodeOrigin:d}=o(),f=lr(e.sourceEvent,{transform:n,snapGrid:i,snapToGrid:a,containerBounds:w}),F=[];if(!v)return;const{x:k,y:x,width:A,height:S}=g,I={},P=null!==(t=v.origin)&&void 0!==t?t:d,{width:_,height:T,x:N,y:M}=function(e,t,n,o,r,i,a,s){let{affectsX:u,affectsY:l}=t;const{isHorizontal:c,isVertical:d}=t,h=c&&d,{xSnapped:f,ySnapped:p}=n,{minWidth:g,maxWidth:m,minHeight:y,maxHeight:v}=o,{x:D,y:C,width:b,height:w,aspectRatio:E}=e;let F=Math.floor(c?f-e.pointerX:0),k=Math.floor(d?p-e.pointerY:0);const x=b+(u?-F:F),A=w+(l?-k:k),S=-i[0]*b,I=-i[1]*w;let P=li(x,g,m),_=li(A,y,v);if(a){let e=0,t=0;u&&F<0?e=si(D+F+S,a[0][0]):!u&&F>0&&(e=ui(D+x+S,a[1][0])),l&&k<0?t=si(C+k+I,a[0][1]):!l&&k>0&&(t=ui(C+A+I,a[1][1])),P=Math.max(P,e),_=Math.max(_,t)}if(s){let e=0,t=0;u&&F>0?e=ui(D+F,s[0][0]):!u&&F<0&&(e=si(D+x,s[1][0])),l&&k>0?t=ui(C+k,s[0][1]):!l&&k<0&&(t=si(C+A,s[1][1])),P=Math.max(P,e),_=Math.max(_,t)}if(r){if(c){const e=li(x/E,y,v)*E;if(P=Math.max(P,e),a){let e=0;e=!u&&!l||u&&!l&&h?ui(C+I+x/E,a[1][1])*E:si(C+I+(u?F:-F)/E,a[0][1])*E,P=Math.max(P,e)}if(s){let e=0;e=!u&&!l||u&&!l&&h?si(C+x/E,s[1][1])*E:ui(C+(u?F:-F)/E,s[0][1])*E,P=Math.max(P,e)}}if(d){const e=li(A*E,g,m)/E;if(_=Math.max(_,e),a){let e=0;e=!u&&!l||l&&!u&&h?ui(D+A*E+S,a[1][0])/E:si(D+(l?k:-k)*E+S,a[0][0])/E,_=Math.max(_,e)}if(s){let e=0;e=!u&&!l||l&&!u&&h?si(D+A*E,s[1][0])/E:ui(D+(l?k:-k)*E,s[0][0])/E,_=Math.max(_,e)}}}k+=k<0?_:-_,F+=F<0?P:-P,r&&(h?x>A*E?k=(ci(u,l)?-F:F)/E:F=(ci(u,l)?-k:k)*E:c?(k=F/E,l=u):(F=k*E,u=l));const T=u?D+F:D,N=l?C+k:C;return{width:b+(u?-F:F),height:w+(l?-k:k),x:i[0]*F*(u?-1:1)+T,y:i[1]*k*(l?-1:1)+N}}(m,y,f,s,u,P,C,b),R=_!==A,B=T!==S,O=N!==k&&R,L=M!==x&&B;if(!O&&!L&&!R&&!B)return;if((O||L||1===P[0]||1===P[1])&&(I.x=O?N:g.x,I.y=L?M:g.y,g.x=I.x,g.y=I.y,E.length>0)){const e=N-k,t=M-x;for(const n of E)n.position={x:n.position.x-e+P[0]*(_-A),y:n.position.y-t+P[1]*(T-S)},F.push(n)}if((R||B)&&(I.width=!R||c&&"horizontal"!==c?g.width:_,I.height=!B||c&&"vertical"!==c?g.height:T,g.width=I.width,g.height=I.height),D&&v.expandParent){var z,j;const e=P[0]*(null!==(z=I.width)&&void 0!==z?z:0);I.x&&I.x<e&&(g.x=e,m.x=m.x-(I.x-e));const t=P[1]*(null!==(j=I.height)&&void 0!==j?j:0);I.y&&I.y<t&&(g.y=t,m.y=m.y-(I.y-t))}const H=function(e){let{width:t,prevWidth:n,height:o,prevHeight:r,affectsX:i,affectsY:a}=e;const s=t-n,u=o-r,l=[s>0?1:s<0?-1:0,u>0?1:u<0?-1:0];return s&&i&&(l[0]=-1*l[0]),u&&a&&(l[1]=-1*l[1]),l}({width:g.width,prevWidth:A,height:g.height,prevHeight:S,affectsX:y.affectsX,affectsY:y.affectsY}),q=l(l({},g),{},{direction:H});!1!==(null===p||void 0===p?void 0:p(e,q))&&(null===h||void 0===h||h(e,q),r(I,F))})).on("end",(e=>{null===f||void 0===f||f(e,l({},g)),null===i||void 0===i||i(l({},g))}));a.call(F)},destroy:function(){a.on(".drag",null)}}}var gi=n(8443);const mi=e=>{let t;const n=new Set,o=(e,o)=>{const r="function"===typeof e?e(t):e;if(!Object.is(r,t)){const e=t;t=(null!=o?o:"object"!==typeof r||null===r)?r:Object.assign({},t,r),n.forEach((n=>n(t,e)))}},r=()=>t,i={setState:o,getState:r,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(o,r,i);return i},yi=e=>e?mi(e):mi;const{useDebugValue:vi}=o,{useSyncExternalStoreWithSelector:Di}=gi,Ci=e=>e;function bi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ci,n=arguments.length>2?arguments[2]:void 0;const o=Di(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return vi(o),o}const wi=(e,t)=>{const n=yi(e),o=function(e){return bi(n,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:t)};return Object.assign(o,n),o};function Ei(e,t){if(Object.is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,o]of e)if(!Object.is(o,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}n(7950);const Fi=["position","children","className","style"],ki=["type","position","isValidConnection","isConnectable","isConnectableStart","isConnectableEnd","id","onConnect","children","className","onMouseDown","onTouchStart"],xi=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"],Ai=["path","labelX","labelY","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","interactionWidth"],Si=["id"],Ii=["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","onSelectionStart","onSelectionEnd","onBeforeDelete","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","selectionOnDrag","selectionMode","panActivationKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","nodesFocusable","nodeOrigin","edgesFocusable","edgesReconnectable","elementsSelectable","defaultViewport","minZoom","maxZoom","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneMouseEnter","onPaneMouseMove","onPaneMouseLeave","onPaneScroll","onPaneContextMenu","paneClickDistance","nodeClickDistance","children","onReconnect","onReconnectStart","onReconnectEnd","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","reconnectRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","disableKeyboardA11y","autoPanOnConnect","autoPanOnNodeDrag","autoPanSpeed","connectionRadius","isValidConnection","onError","style","id","nodeDragThreshold","viewport","onViewportChange","width","height","colorMode","debug","onScroll"],Pi=["children","className"],_i=(0,o.createContext)(null),Ti=_i.Provider,Ni=ro();function Mi(e,t){const n=(0,o.useContext)(_i);if(null===n)throw new Error(Ni);return bi(n,e,t)}function Ri(){const e=(0,o.useContext)(_i);if(null===e)throw new Error(Ni);return(0,o.useMemo)((()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe})),[e])}const Bi={display:"none"},Oi={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Li="react-flow__node-desc",zi="react-flow__edge-desc",ji=e=>e.ariaLiveMessage;function Hi(e){let{rfId:t}=e;const n=Mi(ji);return(0,d.jsx)("div",{id:"".concat("react-flow__aria-live","-").concat(t),"aria-live":"assertive","aria-atomic":"true",style:Oi,children:n})}function qi(e){let{rfId:t,disableKeyboardA11y:n}=e;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{id:"".concat(Li,"-").concat(t),style:Bi,children:["Press enter or space to select a node.",!n&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),(0,d.jsx)("div",{id:"".concat(zi,"-").concat(t),style:Bi,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!n&&(0,d.jsx)(Hi,{rfId:t})]})}const Ui=e=>e.userSelectionActive?"none":"all",Wi=(0,o.forwardRef)(((e,t)=>{let{position:n="top-left",children:o,className:r,style:i}=e,a=c(e,Fi);const s=Mi(Ui),u="".concat(n).split("-");return(0,d.jsx)("div",l(l({className:h(["react-flow__panel",r,...u]),style:l(l({},i),{},{pointerEvents:s}),ref:t},a),{},{children:o}))}));function Vi(e){let{proOptions:t,position:n="bottom-right"}=e;return null!==t&&void 0!==t&&t.hideAttribution?null:(0,d.jsx)(Wi,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,d.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}Wi.displayName="Panel";const Ki=e=>{const t=[],n=[];for(const[,o]of e.nodeLookup)o.selected&&t.push(o.internals.userNode);for(const[,o]of e.edgeLookup)o.selected&&n.push(o);return{selectedNodes:t,selectedEdges:n}},Gi=e=>e.id;function Yi(e,t){return Ei(e.selectedNodes.map(Gi),t.selectedNodes.map(Gi))&&Ei(e.selectedEdges.map(Gi),t.selectedEdges.map(Gi))}function Qi(e){let{onSelectionChange:t}=e;const n=Ri(),{selectedNodes:r,selectedEdges:i}=Mi(Ki,Yi);return(0,o.useEffect)((()=>{const e={nodes:r,edges:i};null===t||void 0===t||t(e),n.getState().onSelectionChangeHandlers.forEach((t=>t(e)))}),[r,i,t]),null}const Zi=e=>!!e.onSelectionChangeHandlers;function Xi(e){let{onSelectionChange:t}=e;const n=Mi(Zi);return t||n?(0,d.jsx)(Qi,{onSelectionChange:t}):null}const $i=[0,0],Ji={x:0,y:0,zoom:1},ea=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","rfId"],ta=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),na={translateExtent:yo,nodeOrigin:$i,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function oa(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:a,setNodeExtent:s,reset:u,setDefaultNodesAndEdges:l,setPaneClickDistance:c}=Mi(ta,Ei),d=Ri();(0,o.useEffect)((()=>(l(e.defaultNodes,e.defaultEdges),()=>{h.current=na,u()})),[]);const h=(0,o.useRef)(na);return(0,o.useEffect)((()=>{for(const o of ea){const u=e[o];u!==h.current[o]&&("undefined"!==typeof e[o]&&("nodes"===o?t(u):"edges"===o?n(u):"minZoom"===o?r(u):"maxZoom"===o?i(u):"translateExtent"===o?a(u):"nodeExtent"===o?s(u):"paneClickDistance"===o?c(u):"fitView"===o?d.setState({fitViewQueued:u}):"fitViewOptions"===o?d.setState({fitViewOptions:u}):d.setState({[o]:u})))}h.current=e}),ea.map((t=>e[t]))),null}function ra(){return"undefined"!==typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}const ia="undefined"!==typeof document?document:null;function aa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{target:ia,actInsideInputWithModifier:!0};const[n,r]=(0,o.useState)(!1),i=(0,o.useRef)(!1),a=(0,o.useRef)(new Set([])),[s,u]=(0,o.useMemo)((()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter((e=>"string"===typeof e)).map((e=>e.replace("+","\n").replace("\n\n","\n+").split("\n"))),n=t.reduce(((e,t)=>e.concat(...t)),[]);return[t,n]}return[[],[]]}),[e]);return(0,o.useEffect)((()=>{var n,o;const l=null!==(n=null===t||void 0===t?void 0:t.target)&&void 0!==n?n:ia,c=null===(o=null===t||void 0===t?void 0:t.actInsideInputWithModifier)||void 0===o||o;if(null!==e){const e=e=>{i.current=e.ctrlKey||e.metaKey||e.shiftKey||e.altKey;if((!i.current||i.current&&!c)&&fr(e))return!1;const n=ua(e.code,u);if(a.current.add(e[n]),sa(s,a.current,!1)){var o;const n=(null===(o=e.composedPath)||void 0===o||null===(o=o.call(e))||void 0===o?void 0:o[0])||e.target,a="BUTTON"===(null===n||void 0===n?void 0:n.nodeName)||"A"===(null===n||void 0===n?void 0:n.nodeName);!1===t.preventDefault||!i.current&&a||e.preventDefault(),r(!0)}},n=e=>{const t=ua(e.code,u);sa(s,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(e[t]),"Meta"===e.key&&a.current.clear(),i.current=!1},o=()=>{a.current.clear(),r(!1)};return null===l||void 0===l||l.addEventListener("keydown",e),null===l||void 0===l||l.addEventListener("keyup",n),window.addEventListener("blur",o),window.addEventListener("contextmenu",o),()=>{null===l||void 0===l||l.removeEventListener("keydown",e),null===l||void 0===l||l.removeEventListener("keyup",n),window.removeEventListener("blur",o),window.removeEventListener("contextmenu",o)}}}),[e,r]),n}function sa(e,t,n){return e.filter((e=>n||e.length===t.size)).some((e=>e.every((e=>t.has(e)))))}function ua(e,t){return t.includes(e)?"code":"key"}function la(e,t){const n=[],o=new Map,r=[];for(const i of e)if("add"!==i.type)if("remove"===i.type||"replace"===i.type)o.set(i.id,[i]);else{const e=o.get(i.id);e?e.push(i):o.set(i.id,[i])}else r.push(i);for(const i of t){const e=o.get(i.id);if(!e){n.push(i);continue}if("remove"===e[0].type)continue;if("replace"===e[0].type){n.push(l({},e[0].item));continue}const t=l({},i);for(const n of e)ca(n,t);n.push(t)}return r.length&&r.forEach((e=>{void 0!==e.index?n.splice(e.index,0,l({},e.item)):n.push(l({},e.item))})),n}function ca(e,t){switch(e.type){case"select":t.selected=e.selected;break;case"position":"undefined"!==typeof e.position&&(t.position=e.position),"undefined"!==typeof e.dragging&&(t.dragging=e.dragging);break;case"dimensions":var n;if("undefined"!==typeof e.dimensions)null!==(n=t.measured)&&void 0!==n||(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(!0!==e.setAttributes&&"width"!==e.setAttributes||(t.width=e.dimensions.width),!0!==e.setAttributes&&"height"!==e.setAttributes||(t.height=e.dimensions.height));"boolean"===typeof e.resizing&&(t.resizing=e.resizing)}}function da(e,t){return la(e,t)}function ha(e,t){return la(e,t)}function fa(e,t){return{id:e,type:"select",selected:t}}function pa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=[];for(const[r,i]of e){const e=t.has(r);void 0===i.selected&&!e||i.selected===e||(n&&(i.selected=e),o.push(fa(i.id,e)))}return o}function ga(e){let{items:t=[],lookup:n}=e;const o=[],r=new Map(t.map((e=>[e.id,e])));for(const[s,u]of t.entries()){var i,a;const e=n.get(u.id),t=null!==(i=null===e||void 0===e||null===(a=e.internals)||void 0===a?void 0:a.userNode)&&void 0!==i?i:e;void 0!==t&&t!==u&&o.push({id:u.id,item:u,type:"replace"}),void 0===t&&o.push({item:u,type:"add",index:s})}for(const[s]of n){void 0===r.get(s)&&o.push({id:s,type:"remove"})}return o}function ma(e){return{id:e.id,type:"remove"}}const ya=e=>(e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e))(e);function va(e){return(0,o.forwardRef)(e)}const Da="undefined"!==typeof window?o.useLayoutEffect:o.useEffect;function Ca(e){const[t,n]=(0,o.useState)(BigInt(0)),[r]=(0,o.useState)((()=>function(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}((()=>n((e=>e+BigInt(1)))))));return Da((()=>{const t=r.get();t.length&&(e(t),r.reset())}),[t]),r}const ba=(0,o.createContext)(null);function wa(e){let{children:t}=e;const n=Ri(),r=(0,o.useCallback)((e=>{const{nodes:t=[],setNodes:o,hasDefaultNodes:r,onNodesChange:i,nodeLookup:a,fitViewQueued:s}=n.getState();let u=t;for(const n of e)u="function"===typeof n?n(u):n;const l=ga({items:u,lookup:a});r&&o(u),l.length>0?null===i||void 0===i||i(l):s&&window.requestAnimationFrame((()=>{const{fitViewQueued:e,nodes:t,setNodes:o}=n.getState();e&&o(t)}))}),[]),i=Ca(r),a=Ca((0,o.useCallback)((e=>{const{edges:t=[],setEdges:o,hasDefaultEdges:r,onEdgesChange:i,edgeLookup:a}=n.getState();let s=t;for(const n of e)s="function"===typeof n?n(s):n;r?o(s):i&&i(ga({items:s,lookup:a}))}),[])),s=(0,o.useMemo)((()=>({nodeQueue:i,edgeQueue:a})),[]);return(0,d.jsx)(ba.Provider,{value:s,children:t})}const Ea=e=>!!e.panZoom;function Fa(){const e=(()=>{const e=Ri();return(0,o.useMemo)((()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:null===t||void 0===t?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:null===t||void 0===t?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:null===n||void 0===n?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{var o,r,i;const{transform:[a,s,u],panZoom:l}=e.getState();return l?(await l.setViewport({x:null!==(o=t.x)&&void 0!==o?o:a,y:null!==(r=t.y)&&void 0!==r?r:s,zoom:null!==(i=t.zoom)&&void 0!==i?i:u},{duration:null===n||void 0===n?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},setCenter:async(t,n,o)=>{const{width:r,height:i,maxZoom:a,panZoom:s}=e.getState(),u="undefined"!==typeof(null===o||void 0===o?void 0:o.zoom)?o.zoom:a,l=r/2-t*u,c=i/2-n*u;return s?(await s.setViewport({x:l,y:c,zoom:u},{duration:null===o||void 0===o?void 0:o.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{var o;const{width:r,height:i,minZoom:a,maxZoom:s,panZoom:u}=e.getState(),l=nr(t,r,i,a,s,null!==(o=null===n||void 0===n?void 0:n.padding)&&void 0!==o?o:.1);return u?(await u.setViewport(l,{duration:null===n||void 0===n?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:function(t){var n,o;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:i,snapGrid:a,snapToGrid:s,domNode:u}=e.getState();if(!u)return t;const{x:l,y:c}=u.getBoundingClientRect(),d={x:t.x-l,y:t.y-c},h=null!==(n=r.snapGrid)&&void 0!==n?n:a,f=null!==(o=r.snapToGrid)&&void 0!==o?o:s;return Jo(d,i,f,h)},flowToScreenPosition:t=>{const{transform:n,domNode:o}=e.getState();if(!o)return t;const{x:r,y:i}=o.getBoundingClientRect(),a=er(t,n);return{x:a.x+r,y:a.y+i}}})),[])})(),t=Ri(),n=function(){const e=(0,o.useContext)(ba);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}(),r=Mi(Ea),i=(0,o.useMemo)((()=>{const e=e=>t.getState().nodeLookup.get(e),o=e=>{n.nodeQueue.push(e)},r=e=>{n.edgeQueue.push(e)},i=e=>{var n,o,r,i;const{nodeLookup:a,nodeOrigin:s}=t.getState(),u=ya(e)?e:a.get(e.id),c=u.parentId?sr(u.position,u.measured,u.parentId,a,s):u.position,d=l(l({},u),{},{position:c,width:null!==(n=null===(o=u.measured)||void 0===o?void 0:o.width)&&void 0!==n?n:u.width,height:null!==(r=null===(i=u.measured)||void 0===i?void 0:i.height)&&void 0!==r?r:u.height});return Vo(d)},a=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};o((o=>o.map((o=>{if(o.id===e){const e="function"===typeof t?t(o):t;return n.replace&&ya(e)?e:l(l({},o),e)}return o}))))},s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};r((o=>o.map((o=>{if(o.id===e){const e="function"===typeof t?t(o):t;return n.replace&&So(e)?e:l(l({},o),e)}return o}))))};return{getNodes:()=>t.getState().nodes.map((e=>l({},e))),getNode:t=>{var n;return null===(n=e(t))||void 0===n?void 0:n.internals.userNode},getInternalNode:e,getEdges:()=>{const{edges:e=[]}=t.getState();return e.map((e=>l({},e)))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:o,setEdges:r,addNodes:e=>{const t=Array.isArray(e)?e:[e];n.nodeQueue.push((e=>[...e,...t]))},addEdges:e=>{const t=Array.isArray(e)?e:[e];n.edgeQueue.push((e=>[...e,...t]))},toObject:()=>{const{nodes:e=[],edges:n=[],transform:o}=t.getState(),[r,i,a]=o;return{nodes:e.map((e=>l({},e))),edges:n.map((e=>l({},e))),viewport:{x:r,y:i,zoom:a}}},deleteElements:async e=>{let{nodes:n=[],edges:o=[]}=e;const{nodes:r,edges:i,onNodesDelete:a,onEdgesDelete:s,triggerNodeChanges:u,triggerEdgeChanges:l,onDelete:c,onBeforeDelete:d}=t.getState(),{nodes:h,edges:f}=await Bo({nodesToRemove:n,edgesToRemove:o,nodes:r,edges:i,onBeforeDelete:d}),p=f.length>0,g=h.length>0;if(p){const e=f.map(ma);null===s||void 0===s||s(f),l(e)}if(g){const e=h.map(ma);null===a||void 0===a||a(h),u(e)}return(g||p)&&(null===c||void 0===c||c({nodes:h,edges:f})),{deletedNodes:h,deletedEdges:f}},getIntersectingNodes:function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2?arguments[2]:void 0;const r=Qo(e),a=r?e:i(e),s=void 0!==o;return a?(o||t.getState().nodes).filter((o=>{const i=t.getState().nodeLookup.get(o.id);if(i&&!r&&(o.id===e.id||!i.internals.positionAbsolute))return!1;const u=Vo(s?o:i),l=Yo(u,a);return n&&l>0||l>=a.width*a.height})):[]},isNodeIntersecting:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const o=Qo(e)?e:i(e);if(!o)return!1;const r=Yo(o,t);return n&&r>0||r>=o.width*o.height},updateNode:a,updateNodeData:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};a(e,(e=>{const o="function"===typeof t?t(e):t;return n.replace?l(l({},e),{},{data:o}):l(l({},e),{},{data:l(l({},e.data),o)})}),n)},updateEdge:s,updateEdgeData:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{replace:!1};s(e,(e=>{const o="function"===typeof t?t(e):t;return n.replace?l(l({},e),{},{data:o}):l(l({},e),{},{data:l(l({},e.data),o)})}),n)},getNodesBounds:e=>{const{nodeLookup:n,nodeOrigin:o}=t.getState();return _o(e,{nodeLookup:n,nodeOrigin:o})},getHandleConnections:e=>{var n,o;let{type:r,id:i,nodeId:a}=e;return Array.from(null!==(n=null===(o=t.getState().connectionLookup.get("".concat(a,"-").concat(r).concat(i?"-".concat(i):"")))||void 0===o?void 0:o.values())&&void 0!==n?n:[])},getNodeConnections:e=>{var n,o;let{type:r,handleId:i,nodeId:a}=e;return Array.from(null!==(n=null===(o=t.getState().connectionLookup.get("".concat(a).concat(r?i?"-".concat(r,"-").concat(i):"-".concat(r):"")))||void 0===o?void 0:o.values())&&void 0!==n?n:[])},fitView:async e=>{var o;const r=null!==(o=t.getState().fitViewResolver)&&void 0!==o?o:function(){let e,t;return{promise:new Promise(((n,o)=>{e=n,t=o})),resolve:e,reject:t}}();return t.setState({fitViewQueued:!0,fitViewOptions:e,fitViewResolver:r}),n.nodeQueue.push((e=>[...e])),r.promise}}}),[]);return(0,o.useMemo)((()=>l(l(l({},i),e),{},{viewportInitialized:r})),[r])}const ka=e=>e.selected,xa="undefined"!==typeof window?window:void 0;const Aa={position:"absolute",width:"100%",height:"100%",top:0,left:0},Sa=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function Ia(e){let{onPaneContextMenu:t,zoomOnScroll:n=!0,zoomOnPinch:r=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:s=Co.Free,zoomOnDoubleClick:u=!0,panOnDrag:l=!0,defaultViewport:c,translateExtent:h,minZoom:f,maxZoom:p,zoomActivationKeyCode:g,preventScrolling:m=!0,children:y,noWheelClassName:v,noPanClassName:D,onViewportChange:C,isControlledViewport:b,paneClickDistance:w}=e;const E=Ri(),F=(0,o.useRef)(null),{userSelectionActive:k,lib:x}=Mi(Sa,Ei),A=aa(g),S=(0,o.useRef)();!function(e){const t=Ri();(0,o.useEffect)((()=>{const n=()=>{if(!e.current)return!1;const n=cr(e.current);var o,r;0!==n.height&&0!==n.width||null===(o=(r=t.getState()).onError)||void 0===o||o.call(r,"004",ao()),t.setState({width:n.width||500,height:n.height||500})};if(e.current){n(),window.addEventListener("resize",n);const t=new ResizeObserver((()=>n()));return t.observe(e.current),()=>{window.removeEventListener("resize",n),t&&e.current&&t.unobserve(e.current)}}}),[])}(F);const I=(0,o.useCallback)((e=>{null===C||void 0===C||C({x:e[0],y:e[1],zoom:e[2]}),b||E.setState({transform:e})}),[C,b]);return(0,o.useEffect)((()=>{if(F.current){S.current=ii({domNode:F.current,minZoom:f,maxZoom:p,translateExtent:h,viewport:c,paneClickDistance:w,onDraggingChange:e=>E.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{const{onViewportChangeStart:n,onMoveStart:o}=E.getState();null===o||void 0===o||o(e,t),null===n||void 0===n||n(t)},onPanZoom:(e,t)=>{const{onViewportChange:n,onMove:o}=E.getState();null===o||void 0===o||o(e,t),null===n||void 0===n||n(t)},onPanZoomEnd:(e,t)=>{const{onViewportChangeEnd:n,onMoveEnd:o}=E.getState();null===o||void 0===o||o(e,t),null===n||void 0===n||n(t)}});const{x:e,y:t,zoom:n}=S.current.getViewport();return E.setState({panZoom:S.current,transform:[e,t,n],domNode:F.current.closest(".react-flow")}),()=>{var e;null===(e=S.current)||void 0===e||e.destroy()}}}),[]),(0,o.useEffect)((()=>{var e;null===(e=S.current)||void 0===e||e.update({onPaneContextMenu:t,zoomOnScroll:n,zoomOnPinch:r,panOnScroll:i,panOnScrollSpeed:a,panOnScrollMode:s,zoomOnDoubleClick:u,panOnDrag:l,zoomActivationKeyPressed:A,preventScrolling:m,noPanClassName:D,userSelectionActive:k,noWheelClassName:v,lib:x,onTransformChange:I})}),[t,n,r,i,a,s,u,l,A,m,D,k,v,x,I]),(0,d.jsx)("div",{className:"react-flow__renderer",ref:F,style:Aa,children:y})}const Pa=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function _a(){const{userSelectionActive:e,userSelectionRect:t}=Mi(Pa,Ei);return e&&t?(0,d.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:"translate(".concat(t.x,"px, ").concat(t.y,"px)")}}):null}const Ta=(e,t)=>n=>{n.target===t.current&&(null===e||void 0===e||e(n))},Na=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Ma(e){let{isSelecting:t,selectionKeyPressed:n,selectionMode:r=bo.Full,panOnDrag:i,selectionOnDrag:a,onSelectionStart:s,onSelectionEnd:u,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:f,onPaneMouseEnter:p,onPaneMouseMove:g,onPaneMouseLeave:m,children:y}=e;const v=Ri(),{userSelectionActive:D,elementsSelectable:C,dragging:b,connectionInProgress:w}=Mi(Na,Ei),E=C&&(t||D),F=(0,o.useRef)(null),k=(0,o.useRef)(),x=(0,o.useRef)(new Set),A=(0,o.useRef)(new Set),S=(0,o.useRef)(!1),I=(0,o.useRef)(!1),P=e=>{S.current||w?S.current=!1:(null===l||void 0===l||l(e),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1}))},_=f?e=>f(e):void 0,T=!0===i||Array.isArray(i)&&i.includes(0);return(0,d.jsxs)("div",{className:h(["react-flow__pane",{draggable:T,dragging:b,selection:t}]),onClick:E?void 0:Ta(P,F),onContextMenu:Ta((e=>{Array.isArray(i)&&null!==i&&void 0!==i&&i.includes(2)?e.preventDefault():null===c||void 0===c||c(e)}),F),onWheel:Ta(_,F),onPointerEnter:E?void 0:p,onPointerDown:E?e=>{var n,o;const{resetSelectedElements:r,domNode:i}=v.getState();if(k.current=null===i||void 0===i?void 0:i.getBoundingClientRect(),!C||!t||0!==e.button||e.target!==F.current||!k.current)return;null===(n=e.target)||void 0===n||null===(o=n.setPointerCapture)||void 0===o||o.call(n,e.pointerId),I.current=!0,S.current=!1;const{x:a,y:u}=gr(e.nativeEvent,k.current);r(),v.setState({userSelectionRect:{width:0,height:0,startX:a,startY:u,x:a,y:u}}),null===s||void 0===s||s(e)}:g,onPointerMove:E?e=>{var t;const{userSelectionRect:n,transform:o,nodeLookup:i,edgeLookup:a,connectionLookup:s,triggerNodeChanges:u,triggerEdgeChanges:l,defaultEdgeOptions:c}=v.getState();if(!k.current||!n)return;S.current=!0;const{x:d,y:h}=gr(e.nativeEvent,k.current),{startX:f,startY:p}=n,g={startX:f,startY:p,x:d<f?d:f,y:h<p?h:p,width:Math.abs(d-f),height:Math.abs(h-p)},m=x.current,y=A.current;x.current=new Set(No(i,g,o,r===bo.Partial,!0).map((e=>e.id))),A.current=new Set;const D=null===(t=null===c||void 0===c?void 0:c.selectable)||void 0===t||t;for(const r of x.current){const e=s.get(r);if(e)for(const{edgeId:t}of e.values()){var C;const e=a.get(t);e&&(null!==(C=e.selectable)&&void 0!==C?C:D)&&A.current.add(t)}}if(!ur(m,x.current)){u(pa(i,x.current,!0))}if(!ur(y,A.current)){l(pa(a,A.current))}v.setState({userSelectionRect:g,userSelectionActive:!0,nodesSelectionActive:!1})}:g,onPointerUp:E?e=>{var t,o;if(0!==e.button||!I.current)return;null===(t=e.target)||void 0===t||null===(o=t.releasePointerCapture)||void 0===o||o.call(t,e.pointerId);const{userSelectionRect:r}=v.getState();!D&&r&&e.target===F.current&&(null===P||void 0===P||P(e)),v.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:x.current.size>0}),null===u||void 0===u||u(e),(n||a)&&(S.current=!1),I.current=!1}:void 0,onPointerLeave:m,ref:F,style:Aa,children:[y,(0,d.jsx)(_a,{})]})}function Ra(e){let{id:t,store:n,unselect:o=!1,nodeRef:r}=e;const{addSelectedNodes:i,unselectNodesAndEdges:a,multiSelectionActive:s,nodeLookup:u,onError:l}=n.getState(),c=u.get(t);c?(n.setState({nodesSelectionActive:!1}),c.selected?(o||c.selected&&s)&&(a({nodes:[c],edges:[]}),requestAnimationFrame((()=>{var e;return null===r||void 0===r||null===(e=r.current)||void 0===e?void 0:e.blur()}))):i([t])):null===l||void 0===l||l("012",po(t))}function Ba(e){let{nodeRef:t,disabled:n=!1,noDragClassName:r,handleSelector:i,nodeId:a,isSelectable:s,nodeClickDistance:u}=e;const l=Ri(),[c,d]=(0,o.useState)(!1),h=(0,o.useRef)();return(0,o.useEffect)((()=>{h.current=Kr({getStoreItems:()=>l.getState(),onNodeMouseDown:e=>{Ra({id:e,store:l,nodeRef:t})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})}),[]),(0,o.useEffect)((()=>{var e;if(n)null===(e=h.current)||void 0===e||e.destroy();else if(t.current){var o;return null===(o=h.current)||void 0===o||o.update({noDragClassName:r,handleSelector:i,domNode:t.current,isSelectable:s,nodeId:a,nodeClickDistance:u}),()=>{var e;null===(e=h.current)||void 0===e||e.destroy()}}}),[r,i,n,s,t,a]),c}function Oa(){const e=Ri(),t=(0,o.useCallback)((t=>{const{nodeExtent:n,snapToGrid:o,snapGrid:r,nodesDraggable:i,onError:a,updateNodePositions:s,nodeLookup:u,nodeOrigin:l}=e.getState(),c=new Map,d=(e=>t=>t.selected&&(t.draggable||e&&"undefined"===typeof t.draggable))(i),h=o?r[0]:5,f=o?r[1]:5,p=t.direction.x*h*t.factor,g=t.direction.y*f*t.factor;for(const[,e]of u){if(!d(e))continue;let t={x:e.internals.positionAbsolute.x+p,y:e.internals.positionAbsolute.y+g};o&&(t=$o(t,r));const{position:i,positionAbsolute:s}=Ro({nodeId:e.id,nextPosition:t,nodeLookup:u,nodeExtent:n,nodeOrigin:l,onError:a});e.position=i,e.internals.positionAbsolute=s,c.set(e.id,e)}s(c)}),[]);return t}const La=(0,o.createContext)(null),za=La.Provider;La.Consumer;const ja=()=>(0,o.useContext)(La),Ha=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId});const qa=(0,o.memo)(va((function(e,t){let{type:n="source",position:o=ko.Top,isValidConnection:r,isConnectable:i=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:u,onConnect:f,children:p,className:g,onMouseDown:m,onTouchStart:y}=e,v=c(e,ki);const D=u||null,C="target"===n,b=Ri(),w=ja(),{connectOnClick:E,noPanClassName:F,rfId:k}=Mi(Ha,Ei),{connectingFrom:x,connectingTo:A,clickConnecting:S,isPossibleEndHandle:I,connectionInProcess:P,clickConnectionInProcess:_,valid:T}=Mi(((e,t,n)=>o=>{const{connectionClickStartHandle:r,connectionMode:i,connection:a}=o,{fromHandle:s,toHandle:u,isValid:l}=a,c=(null===u||void 0===u?void 0:u.nodeId)===e&&(null===u||void 0===u?void 0:u.id)===t&&(null===u||void 0===u?void 0:u.type)===n;return{connectingFrom:(null===s||void 0===s?void 0:s.nodeId)===e&&(null===s||void 0===s?void 0:s.id)===t&&(null===s||void 0===s?void 0:s.type)===n,connectingTo:c,clickConnecting:(null===r||void 0===r?void 0:r.nodeId)===e&&(null===r||void 0===r?void 0:r.id)===t&&(null===r||void 0===r?void 0:r.type)===n,isPossibleEndHandle:i===Do.Strict?(null===s||void 0===s?void 0:s.type)!==n:e!==(null===s||void 0===s?void 0:s.nodeId)||t!==(null===s||void 0===s?void 0:s.id),connectionInProcess:!!s,clickConnectionInProcess:!!r,valid:c&&l}})(w,D,n),Ei);var N,M;w||null===(N=(M=b.getState()).onError)||void 0===N||N.call(M,"010",ho());const R=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:o}=b.getState(),r=l(l({},t),e);if(o){const{edges:e,setEdges:t}=b.getState();t(((e,t)=>{if(!e.source||!e.target)return Xo(0,uo()),t;let n;return n=So(e)?l({},e):l(l({},e),{},{id:Er(e)}),((e,t)=>t.some((t=>t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle))))(n,t)?t:(null===n.sourceHandle&&delete n.sourceHandle,null===n.targetHandle&&delete n.targetHandle,t.concat(n))})(r,e))}null===n||void 0===n||n(r),null===f||void 0===f||f(r)},B=e=>{if(!w)return;const t=pr(e.nativeEvent);if(a&&(t&&0===e.button||!t)){const t=b.getState();$r.onPointerDown(e.nativeEvent,{autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:C,handleId:D,nodeId:w,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:R,isValidConnection:r||t.isValidConnection,getTransform:()=>b.getState().transform,getFromHandle:()=>b.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed})}t?null===m||void 0===m||m(e):null===y||void 0===y||y(e)};return(0,d.jsx)("div",l(l({"data-handleid":D,"data-nodeid":w,"data-handlepos":o,"data-id":"".concat(k,"-").concat(w,"-").concat(D,"-").concat(n),className:h(["react-flow__handle","react-flow__handle-".concat(o),"nodrag",F,g,{source:!C,target:C,connectable:i,connectablestart:a,connectableend:s,clickconnecting:S,connectingfrom:x,connectingto:A,valid:T,connectionindicator:i&&(!P||I)&&(P||_?s:a)}]),onMouseDown:B,onTouchStart:B,onClick:E?e=>{const{onClickConnectStart:t,onClickConnectEnd:o,connectionClickStartHandle:i,connectionMode:s,isValidConnection:u,lib:l,rfId:c,nodeLookup:d,connection:h}=b.getState();if(!w||!i&&!a)return;if(!i)return null===t||void 0===t||t(e.nativeEvent,{nodeId:w,handleId:D,handleType:n}),void b.setState({connectionClickStartHandle:{nodeId:w,type:n,id:D}});const f=dr(e.target),p=r||u,{connection:g,isValid:m}=$r.isValid(e.nativeEvent,{handle:{nodeId:w,id:D,type:n},connectionMode:s,fromNodeId:i.nodeId,fromHandleId:i.id||null,fromType:i.type,isValidConnection:p,flowId:c,doc:f,lib:l,nodeLookup:d});m&&g&&R(g);const y=structuredClone(h);delete y.inProgress,y.toPosition=y.toHandle?y.toHandle.position:null,null===o||void 0===o||o(e,y),b.setState({connectionClickStartHandle:null})}:void 0,ref:t},v),{},{children:p}))})));const Ua={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Wa={input:function(e){let{data:t,isConnectable:n,sourcePosition:o=ko.Bottom}=e;return(0,d.jsxs)(d.Fragment,{children:[null===t||void 0===t?void 0:t.label,(0,d.jsx)(qa,{type:"source",position:o,isConnectable:n})]})},default:function(e){let{data:t,isConnectable:n,targetPosition:o=ko.Top,sourcePosition:r=ko.Bottom}=e;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(qa,{type:"target",position:o,isConnectable:n}),null===t||void 0===t?void 0:t.label,(0,d.jsx)(qa,{type:"source",position:r,isConnectable:n})]})},output:function(e){let{data:t,isConnectable:n,targetPosition:o=ko.Top}=e;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(qa,{type:"target",position:o,isConnectable:n}),null===t||void 0===t?void 0:t.label]})},group:function(){return null}};const Va=e=>{const{width:t,height:n,x:o,y:r}=To(e.nodeLookup,{filter:e=>!!e.selected});return{width:Zo(t)?t:null,height:Zo(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],") translate(").concat(o,"px,").concat(r,"px)")}};function Ka(e){let{onSelectionContextMenu:t,noPanClassName:n,disableKeyboardA11y:r}=e;const i=Ri(),{width:a,height:s,transformString:u,userSelectionActive:l}=Mi(Va,Ei),c=Oa(),f=(0,o.useRef)(null);if((0,o.useEffect)((()=>{var e;r||(null===(e=f.current)||void 0===e||e.focus({preventScroll:!0}))}),[r]),Ba({nodeRef:f}),l||!a||!s)return null;const p=t?e=>{const n=i.getState().nodes.filter((e=>e.selected));t(e,n)}:void 0;return(0,d.jsx)("div",{className:h(["react-flow__nodesselection","react-flow__container",n]),style:{transform:u},children:(0,d.jsx)("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:r?void 0:-1,onKeyDown:r?void 0:e=>{Object.prototype.hasOwnProperty.call(Ua,e.key)&&(e.preventDefault(),c({direction:Ua[e.key],factor:e.shiftKey?4:1}))},style:{width:a,height:s}})})}const Ga="undefined"!==typeof window?window:void 0,Ya=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Qa(e){let{children:t,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:u,paneClickDistance:l,deleteKeyCode:c,selectionKeyCode:h,selectionOnDrag:f,selectionMode:p,onSelectionStart:g,onSelectionEnd:m,multiSelectionKeyCode:y,panActivationKeyCode:v,zoomActivationKeyCode:D,elementsSelectable:C,zoomOnScroll:b,zoomOnPinch:w,panOnScroll:E,panOnScrollSpeed:F,panOnScrollMode:k,zoomOnDoubleClick:x,panOnDrag:A,defaultViewport:S,translateExtent:I,minZoom:P,maxZoom:_,preventScrolling:T,onSelectionContextMenu:N,noWheelClassName:M,noPanClassName:R,disableKeyboardA11y:B,onViewportChange:O,isControlledViewport:L}=e;const{nodesSelectionActive:z,userSelectionActive:j}=Mi(Ya),H=aa(h,{target:Ga}),q=aa(v,{target:Ga}),U=q||A,W=q||E,V=f&&!0!==U,K=H||j||V;return function(e){let{deleteKeyCode:t,multiSelectionKeyCode:n}=e;const r=Ri(),{deleteElements:i}=Fa(),a=aa(t,{actInsideInputWithModifier:!1}),s=aa(n,{target:xa});(0,o.useEffect)((()=>{if(a){const{edges:e,nodes:t}=r.getState();i({nodes:t.filter(ka),edges:e.filter(ka)}),r.setState({nodesSelectionActive:!1})}}),[a]),(0,o.useEffect)((()=>{r.setState({multiSelectionActive:s})}),[s])}({deleteKeyCode:c,multiSelectionKeyCode:y}),(0,d.jsx)(Ia,{onPaneContextMenu:s,elementsSelectable:C,zoomOnScroll:b,zoomOnPinch:w,panOnScroll:W,panOnScrollSpeed:F,panOnScrollMode:k,zoomOnDoubleClick:x,panOnDrag:!H&&U,defaultViewport:S,translateExtent:I,minZoom:P,maxZoom:_,zoomActivationKeyCode:D,preventScrolling:T,noWheelClassName:M,noPanClassName:R,onViewportChange:O,isControlledViewport:L,paneClickDistance:l,children:(0,d.jsxs)(Ma,{onSelectionStart:g,onSelectionEnd:m,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:u,panOnDrag:U,isSelecting:!!K,selectionMode:p,selectionKeyPressed:H,selectionOnDrag:V,children:[t,z&&(0,d.jsx)(Ka,{onSelectionContextMenu:N,noPanClassName:R,disableKeyboardA11y:B})]})})}Qa.displayName="FlowRenderer";const Za=(0,o.memo)(Qa);function Xa(e){const t=Mi((0,o.useCallback)((e=>t=>e?No(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map((e=>e.id)):Array.from(t.nodeLookup.keys()))(e),[e]),Ei);return t}const $a=e=>e.updateNodeInternals;function Ja(e){var t,n;let{id:r,onClick:i,onMouseEnter:a,onMouseMove:s,onMouseLeave:u,onContextMenu:c,onDoubleClick:f,nodesDraggable:p,elementsSelectable:g,nodesConnectable:m,nodesFocusable:y,resizeObserver:v,noDragClassName:D,noPanClassName:C,disableKeyboardA11y:b,rfId:w,nodeTypes:E,nodeClickDistance:F,onError:k}=e;const{node:x,internals:A,isParent:S}=Mi((e=>{const t=e.nodeLookup.get(r),n=e.parentLookup.has(r);return{node:t,internals:t.internals,isParent:n}}),Ei);let I=x.type||"default",P=(null===E||void 0===E?void 0:E[I])||Wa[I];void 0===P&&(null===k||void 0===k||k("003",io(I)),I="default",P=Wa.default);const _=!!(x.draggable||p&&"undefined"===typeof x.draggable),T=!!(x.selectable||g&&"undefined"===typeof x.selectable),N=!!(x.connectable||m&&"undefined"===typeof x.connectable),M=!!(x.focusable||y&&"undefined"===typeof x.focusable),R=Ri(),B=ar(x),O=function(e){let{node:t,nodeType:n,hasDimensions:r,resizeObserver:i}=e;const a=Ri(),s=(0,o.useRef)(null),u=(0,o.useRef)(null),l=(0,o.useRef)(t.sourcePosition),c=(0,o.useRef)(t.targetPosition),d=(0,o.useRef)(n),h=r&&!!t.internals.handleBounds;return(0,o.useEffect)((()=>{!s.current||t.hidden||h&&u.current===s.current||(u.current&&(null===i||void 0===i||i.unobserve(u.current)),null===i||void 0===i||i.observe(s.current),u.current=s.current)}),[h,t.hidden]),(0,o.useEffect)((()=>()=>{u.current&&(null===i||void 0===i||i.unobserve(u.current),u.current=null)}),[]),(0,o.useEffect)((()=>{if(s.current){const e=d.current!==n,o=l.current!==t.sourcePosition,r=c.current!==t.targetPosition;(e||o||r)&&(d.current=n,l.current=t.sourcePosition,c.current=t.targetPosition,a.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:s.current,force:!0}]])))}}),[t.id,n,t.sourcePosition,t.targetPosition]),s}({node:x,nodeType:I,hasDimensions:B,resizeObserver:v}),L=Ba({nodeRef:O,disabled:x.hidden||!_,noDragClassName:D,handleSelector:x.dragHandle,nodeId:r,isSelectable:T,nodeClickDistance:F}),z=Oa();if(x.hidden)return null;const j=ir(x),H=function(e){var t,n,o,r,i,a,s,u,l,c;return void 0===e.internals.handleBounds?{width:null!==(i=null!==(a=e.width)&&void 0!==a?a:e.initialWidth)&&void 0!==i?i:null===(s=e.style)||void 0===s?void 0:s.width,height:null!==(u=null!==(l=e.height)&&void 0!==l?l:e.initialHeight)&&void 0!==u?u:null===(c=e.style)||void 0===c?void 0:c.height}:{width:null!==(t=e.width)&&void 0!==t?t:null===(n=e.style)||void 0===n?void 0:n.width,height:null!==(o=e.height)&&void 0!==o?o:null===(r=e.style)||void 0===r?void 0:r.height}}(x),q=T||_||i||a||s||u,U=a?e=>a(e,l({},A.userNode)):void 0,W=s?e=>s(e,l({},A.userNode)):void 0,V=u?e=>u(e,l({},A.userNode)):void 0,K=c?e=>c(e,l({},A.userNode)):void 0,G=f?e=>f(e,l({},A.userNode)):void 0;return(0,d.jsx)("div",{className:h(["react-flow__node","react-flow__node-".concat(I),{[C]:_},x.className,{selected:x.selected,selectable:T,parent:S,draggable:_,dragging:L}]),ref:O,style:l(l({zIndex:A.z,transform:"translate(".concat(A.positionAbsolute.x,"px,").concat(A.positionAbsolute.y,"px)"),pointerEvents:q?"all":"none",visibility:B?"visible":"hidden"},x.style),H),"data-id":r,"data-testid":"rf__node-".concat(r),onMouseEnter:U,onMouseMove:W,onMouseLeave:V,onContextMenu:K,onClick:e=>{const{selectNodesOnDrag:t,nodeDragThreshold:n}=R.getState();T&&(!t||!_||n>0)&&Ra({id:r,store:R,nodeRef:O}),i&&i(e,l({},A.userNode))},onDoubleClick:G,onKeyDown:M?e=>{if(!fr(e.nativeEvent)&&!b)if(vo.includes(e.key)&&T){const t="Escape"===e.key;Ra({id:r,store:R,unselect:t,nodeRef:O})}else _&&x.selected&&Object.prototype.hasOwnProperty.call(Ua,e.key)&&(e.preventDefault(),R.setState({ariaLiveMessage:"Moved selected node ".concat(e.key.replace("Arrow","").toLowerCase(),". New position, x: ").concat(~~A.positionAbsolute.x,", y: ").concat(~~A.positionAbsolute.y)}),z({direction:Ua[e.key],factor:e.shiftKey?4:1}))}:void 0,tabIndex:M?0:void 0,role:M?"button":void 0,"aria-describedby":b?void 0:"".concat(Li,"-").concat(w),"aria-label":x.ariaLabel,children:(0,d.jsx)(za,{value:r,children:(0,d.jsx)(P,l({id:r,data:x.data,type:I,positionAbsoluteX:A.positionAbsolute.x,positionAbsoluteY:A.positionAbsolute.y,selected:null!==(t=x.selected)&&void 0!==t&&t,selectable:T,draggable:_,deletable:null===(n=x.deletable)||void 0===n||n,isConnectable:N,sourcePosition:x.sourcePosition,targetPosition:x.targetPosition,dragging:L,dragHandle:x.dragHandle,zIndex:A.z,parentId:x.parentId},j))})})}const es=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function ts(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:a}=Mi(es,Ei),s=Xa(e.onlyRenderVisibleElements),u=function(){const e=Mi($a),[t]=(0,o.useState)((()=>"undefined"===typeof ResizeObserver?null:new ResizeObserver((t=>{const n=new Map;t.forEach((e=>{const t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})})),e(n)}))));return(0,o.useEffect)((()=>()=>{null===t||void 0===t||t.disconnect()}),[t]),t}();return(0,d.jsx)("div",{className:"react-flow__nodes",style:Aa,children:s.map((o=>(0,d.jsx)(Ja,{id:o,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:u,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:a},o)))})}ts.displayName="NodeRenderer";const ns=(0,o.memo)(ts);const os={[Fo.Arrow]:e=>{let{color:t="none",strokeWidth:n=1}=e;return(0,d.jsx)("polyline",{style:{stroke:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"})},[Fo.ArrowClosed]:e=>{let{color:t="none",strokeWidth:n=1}=e;return(0,d.jsx)("polyline",{style:{stroke:t,fill:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}};const rs=e=>{let{id:t,type:n,color:r,width:i=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:u,orient:l="auto-start-reverse"}=e;const c=function(e){const t=Ri();return(0,o.useMemo)((()=>{var n,o;return Object.prototype.hasOwnProperty.call(os,e)?os[e]:(null===(n=(o=t.getState()).onError)||void 0===n||n.call(o,"009",lo(e)),null)}),[e])}(n);return c?(0,d.jsx)("marker",{className:"react-flow__arrowhead",id:t,markerWidth:"".concat(i),markerHeight:"".concat(a),viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:(0,d.jsx)(c,{color:r,strokeWidth:u})}):null},is=e=>{let{defaultColor:t,rfId:n}=e;const r=Mi((e=>e.edges)),i=Mi((e=>e.defaultEdgeOptions)),a=(0,o.useMemo)((()=>{const e=function(e,t){let{id:n,defaultColor:o,defaultMarkerStart:r,defaultMarkerEnd:i}=t;const a=new Set;return e.reduce(((e,t)=>([t.markerStart||r,t.markerEnd||i].forEach((t=>{if(t&&"object"===typeof t){const r=Nr(t,n);a.has(r)||(e.push(l({id:r,color:t.color||o},t)),a.add(r))}})),e)),[]).sort(((e,t)=>e.id.localeCompare(t.id)))}(r,{id:n,defaultColor:t,defaultMarkerStart:null===i||void 0===i?void 0:i.markerStart,defaultMarkerEnd:null===i||void 0===i?void 0:i.markerEnd});return e}),[r,i,n,t]);return a.length?(0,d.jsx)("svg",{className:"react-flow__marker","aria-hidden":"true",children:(0,d.jsx)("defs",{children:a.map((e=>(0,d.jsx)(rs,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id)))})}):null};is.displayName="MarkerDefinitions";var as=(0,o.memo)(is);function ss(e){let{x:t,y:n,label:r,labelStyle:i,labelShowBg:a=!0,labelBgStyle:s,labelBgPadding:u=[2,4],labelBgBorderRadius:f=2,children:p,className:g}=e,m=c(e,xi);const[y,v]=(0,o.useState)({x:1,y:0,width:0,height:0}),D=h(["react-flow__edge-textwrapper",g]),C=(0,o.useRef)(null);return(0,o.useEffect)((()=>{if(C.current){const e=C.current.getBBox();v({x:e.x,y:e.y,width:e.width,height:e.height})}}),[r]),r?(0,d.jsxs)("g",l(l({transform:"translate(".concat(t-y.width/2," ").concat(n-y.height/2,")"),className:D,visibility:y.width?"visible":"hidden"},m),{},{children:[a&&(0,d.jsx)("rect",{width:y.width+2*u[0],x:-u[0],y:-u[1],height:y.height+2*u[1],className:"react-flow__edge-textbg",style:s,rx:f,ry:f}),(0,d.jsx)("text",{className:"react-flow__edge-text",y:y.height/2,dy:"0.3em",ref:C,style:i,children:r}),p]})):null}ss.displayName="EdgeText";const us=(0,o.memo)(ss);function ls(e){let{path:t,labelX:n,labelY:o,label:r,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:f,interactionWidth:p=20}=e,g=c(e,Ai);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",l(l({},g),{},{d:t,fill:"none",className:h(["react-flow__edge-path",g.className])})),p&&(0,d.jsx)("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),r&&Zo(n)&&Zo(o)?(0,d.jsx)(us,{x:n,y:o,label:r,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:f}):null]})}function cs(e){let{pos:t,x1:n,y1:o,x2:r,y2:i}=e;return t===ko.Left||t===ko.Right?[.5*(n+r),o]:[n,.5*(o+i)]}function ds(e){let{sourceX:t,sourceY:n,sourcePosition:o=ko.Bottom,targetX:r,targetY:i,targetPosition:a=ko.Top}=e;const[s,u]=cs({pos:o,x1:t,y1:n,x2:r,y2:i}),[l,c]=cs({pos:a,x1:r,y1:i,x2:t,y2:n}),[d,h,f,p]=yr({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:s,sourceControlY:u,targetControlX:l,targetControlY:c});return["M".concat(t,",").concat(n," C").concat(s,",").concat(u," ").concat(l,",").concat(c," ").concat(r,",").concat(i),d,h,f,p]}function hs(e){return(0,o.memo)((t=>{let{id:n,sourceX:o,sourceY:r,targetX:i,targetY:a,sourcePosition:s,targetPosition:u,label:l,labelStyle:c,labelShowBg:h,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:y,markerStart:v,interactionWidth:D}=t;const[C,b,w]=ds({sourceX:o,sourceY:r,sourcePosition:s,targetX:i,targetY:a,targetPosition:u}),E=e.isInternal?void 0:n;return(0,d.jsx)(ls,{id:E,path:C,labelX:b,labelY:w,label:l,labelStyle:c,labelShowBg:h,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:y,markerStart:v,interactionWidth:D})}))}const fs=hs({isInternal:!1}),ps=hs({isInternal:!0});function gs(e){return(0,o.memo)((t=>{let{id:n,sourceX:o,sourceY:r,targetX:i,targetY:a,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:h,labelBgBorderRadius:f,style:p,sourcePosition:g=ko.Bottom,targetPosition:m=ko.Top,markerEnd:y,markerStart:v,pathOptions:D,interactionWidth:C}=t;const[b,w,E]=Sr({sourceX:o,sourceY:r,sourcePosition:g,targetX:i,targetY:a,targetPosition:m,borderRadius:null===D||void 0===D?void 0:D.borderRadius,offset:null===D||void 0===D?void 0:D.offset}),F=e.isInternal?void 0:n;return(0,d.jsx)(ls,{id:F,path:b,labelX:w,labelY:E,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:y,markerStart:v,interactionWidth:C})}))}fs.displayName="SimpleBezierEdge",ps.displayName="SimpleBezierEdgeInternal";const ms=gs({isInternal:!1}),ys=gs({isInternal:!0});function vs(e){return(0,o.memo)((t=>{var n;let{id:r}=t,i=c(t,Si);const a=e.isInternal?void 0:r;return(0,d.jsx)(ms,l(l({},i),{},{id:a,pathOptions:(0,o.useMemo)((()=>{var e;return{borderRadius:0,offset:null===(e=i.pathOptions)||void 0===e?void 0:e.offset}}),[null===(n=i.pathOptions)||void 0===n?void 0:n.offset])}))}))}ms.displayName="SmoothStepEdge",ys.displayName="SmoothStepEdgeInternal";const Ds=vs({isInternal:!1}),Cs=vs({isInternal:!0});function bs(e){return(0,o.memo)((t=>{let{id:n,sourceX:o,sourceY:r,targetX:i,targetY:a,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:m,interactionWidth:y}=t;const[v,D,C]=Fr({sourceX:o,sourceY:r,targetX:i,targetY:a}),b=e.isInternal?void 0:n;return(0,d.jsx)(ls,{id:b,path:v,labelX:D,labelY:C,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:m,interactionWidth:y})}))}Ds.displayName="StepEdge",Cs.displayName="StepEdgeInternal";const ws=bs({isInternal:!1}),Es=bs({isInternal:!0});function Fs(e){return(0,o.memo)((t=>{let{id:n,sourceX:o,sourceY:r,targetX:i,targetY:a,sourcePosition:s=ko.Bottom,targetPosition:u=ko.Top,label:l,labelStyle:c,labelShowBg:h,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:y,markerStart:v,pathOptions:D,interactionWidth:C}=t;const[b,w,E]=Cr({sourceX:o,sourceY:r,sourcePosition:s,targetX:i,targetY:a,targetPosition:u,curvature:null===D||void 0===D?void 0:D.curvature}),F=e.isInternal?void 0:n;return(0,d.jsx)(ls,{id:F,path:b,labelX:w,labelY:E,label:l,labelStyle:c,labelShowBg:h,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:y,markerStart:v,interactionWidth:C})}))}ws.displayName="StraightEdge",Es.displayName="StraightEdgeInternal";const ks=Fs({isInternal:!1}),xs=Fs({isInternal:!0});ks.displayName="BezierEdge",xs.displayName="BezierEdgeInternal";const As={default:xs,straight:Es,step:Cs,smoothstep:ys,simplebezier:ps},Ss={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Is=(e,t,n)=>n===ko.Left?e-t:n===ko.Right?e+t:e,Ps=(e,t,n)=>n===ko.Top?e-t:n===ko.Bottom?e+t:e,_s="react-flow__edgeupdater";function Ts(e){let{position:t,centerX:n,centerY:o,radius:r=10,onMouseDown:i,onMouseEnter:a,onMouseOut:s,type:u}=e;return(0,d.jsx)("circle",{onMouseDown:i,onMouseEnter:a,onMouseOut:s,className:h([_s,"".concat(_s,"-").concat(u)]),cx:Is(n,r,t),cy:Ps(o,r,t),r:r,stroke:"transparent",fill:"transparent"})}function Ns(e){let{isReconnectable:t,reconnectRadius:n,edge:o,sourceX:r,sourceY:i,targetX:a,targetY:s,sourcePosition:u,targetPosition:l,onReconnect:c,onReconnectStart:h,onReconnectEnd:f,setReconnecting:p,setUpdateHover:g}=e;const m=Ri(),y=(e,t)=>{if(0!==e.button)return;const{autoPanOnConnect:n,domNode:r,isValidConnection:i,connectionMode:a,connectionRadius:s,lib:u,onConnectStart:l,onConnectEnd:d,cancelConnection:g,nodeLookup:y,rfId:v,panBy:D,updateConnection:C}=m.getState(),b="target"===t.type;p(!0),null===h||void 0===h||h(e,o,t.type);$r.onPointerDown(e.nativeEvent,{autoPanOnConnect:n,connectionMode:a,connectionRadius:s,domNode:r,handleId:t.id,nodeId:t.nodeId,nodeLookup:y,isTarget:b,edgeUpdaterType:t.type,lib:u,flowId:v,cancelConnection:g,panBy:D,isValidConnection:i,onConnect:e=>null===c||void 0===c?void 0:c(o,e),onConnectStart:l,onConnectEnd:d,onReconnectEnd:(e,n)=>{p(!1),null===f||void 0===f||f(e,o,t.type,n)},updateConnection:C,getTransform:()=>m.getState().transform,getFromHandle:()=>m.getState().connection.fromHandle})},v=()=>g(!0),D=()=>g(!1);return(0,d.jsxs)(d.Fragment,{children:[(!0===t||"source"===t)&&(0,d.jsx)(Ts,{position:u,centerX:r,centerY:i,radius:n,onMouseDown:e=>{var t;return y(e,{nodeId:o.target,id:null!==(t=o.targetHandle)&&void 0!==t?t:null,type:"target"})},onMouseEnter:v,onMouseOut:D,type:"source"}),(!0===t||"target"===t)&&(0,d.jsx)(Ts,{position:l,centerX:a,centerY:s,radius:n,onMouseDown:e=>{var t;return y(e,{nodeId:o.source,id:null!==(t=o.sourceHandle)&&void 0!==t?t:null,type:"source"})},onMouseEnter:v,onMouseOut:D,type:"target"})]})}function Ms(e){var t;let{id:n,edgesFocusable:r,edgesReconnectable:i,elementsSelectable:a,onClick:s,onDoubleClick:u,onContextMenu:c,onMouseEnter:f,onMouseMove:p,onMouseLeave:g,reconnectRadius:m,onReconnect:y,onReconnectStart:v,onReconnectEnd:D,rfId:C,edgeTypes:b,noPanClassName:w,onError:E,disableKeyboardA11y:F}=e,k=Mi((e=>e.edgeLookup.get(n)));const x=Mi((e=>e.defaultEdgeOptions));k=x?l(l({},x),k):k;let A=k.type||"default",S=(null===b||void 0===b?void 0:b[A])||As[A];void 0===S&&(null===E||void 0===E||E("011",fo(A)),A="default",S=As.default);const I=!!(k.focusable||r&&"undefined"===typeof k.focusable),P="undefined"!==typeof y&&(k.reconnectable||i&&"undefined"===typeof k.reconnectable),_=!!(k.selectable||a&&"undefined"===typeof k.selectable),T=(0,o.useRef)(null),[N,M]=(0,o.useState)(!1),[R,B]=(0,o.useState)(!1),O=Ri(),{zIndex:L,sourceX:z,sourceY:j,targetX:H,targetY:q,sourcePosition:U,targetPosition:W}=Mi((0,o.useCallback)((e=>{const t=e.nodeLookup.get(k.source),o=e.nodeLookup.get(k.target);if(!t||!o)return l({zIndex:k.zIndex},Ss);const r=function(e){var t,n,o,r;const{sourceNode:i,targetNode:a}=e;if(!Ir(i)||!Ir(a))return null;const s=i.internals.handleBounds||Pr(i.handles),u=a.internals.handleBounds||Pr(a.handles),l=Tr(null!==(t=null===s||void 0===s?void 0:s.source)&&void 0!==t?t:[],e.sourceHandle),c=Tr(e.connectionMode===Do.Strict?null!==(n=null===u||void 0===u?void 0:u.target)&&void 0!==n?n:[]:(null!==(o=null===u||void 0===u?void 0:u.target)&&void 0!==o?o:[]).concat(null!==(r=null===u||void 0===u?void 0:u.source)&&void 0!==r?r:[]),e.targetHandle);var d;if(!l||!c)return null===(d=e.onError)||void 0===d||d.call(e,"008",co(l?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const h=(null===l||void 0===l?void 0:l.position)||ko.Bottom,f=(null===c||void 0===c?void 0:c.position)||ko.Top,p=_r(i,l,h),g=_r(a,c,f);return{sourceX:p.x,sourceY:p.y,targetX:g.x,targetY:g.y,sourcePosition:h,targetPosition:f}}({id:n,sourceNode:t,targetNode:o,sourceHandle:k.sourceHandle||null,targetHandle:k.targetHandle||null,connectionMode:e.connectionMode,onError:E}),i=function(e){let{sourceNode:t,targetNode:n,selected:o=!1,zIndex:r=0,elevateOnSelect:i=!1}=e;if(!i)return r;const a=o||n.selected||t.selected,s=Math.max(t.internals.z||0,n.internals.z||0,1e3);return r+(a?s:0)}({selected:k.selected,zIndex:k.zIndex,sourceNode:t,targetNode:o,elevateOnSelect:e.elevateEdgesOnSelect});return l({zIndex:i},r||Ss)}),[k.source,k.target,k.sourceHandle,k.targetHandle,k.selected,k.zIndex]),Ei),V=(0,o.useMemo)((()=>k.markerStart?"url('#".concat(Nr(k.markerStart,C),"')"):void 0),[k.markerStart,C]),K=(0,o.useMemo)((()=>k.markerEnd?"url('#".concat(Nr(k.markerEnd,C),"')"):void 0),[k.markerEnd,C]);if(k.hidden||null===z||null===j||null===H||null===q)return null;const G=u?e=>{u(e,l({},k))}:void 0,Y=c?e=>{c(e,l({},k))}:void 0,Q=f?e=>{f(e,l({},k))}:void 0,Z=p?e=>{p(e,l({},k))}:void 0,X=g?e=>{g(e,l({},k))}:void 0;return(0,d.jsx)("svg",{style:{zIndex:L},children:(0,d.jsxs)("g",{className:h(["react-flow__edge","react-flow__edge-".concat(A),k.className,w,{selected:k.selected,animated:k.animated,inactive:!_&&!s,updating:N,selectable:_}]),onClick:e=>{const{addSelectedEdges:t,unselectNodesAndEdges:o,multiSelectionActive:r}=O.getState();var i;_&&(O.setState({nodesSelectionActive:!1}),k.selected&&r?(o({nodes:[],edges:[k]}),null===(i=T.current)||void 0===i||i.blur()):t([n]));s&&s(e,k)},onDoubleClick:G,onContextMenu:Y,onMouseEnter:Q,onMouseMove:Z,onMouseLeave:X,onKeyDown:I?e=>{if(!F&&vo.includes(e.key)&&_){const{unselectNodesAndEdges:o,addSelectedEdges:r}=O.getState();var t;if("Escape"===e.key)null===(t=T.current)||void 0===t||t.blur(),o({edges:[k]});else r([n])}}:void 0,tabIndex:I?0:void 0,role:I?"button":"img","data-id":n,"data-testid":"rf__edge-".concat(n),"aria-label":null===k.ariaLabel?void 0:k.ariaLabel||"Edge from ".concat(k.source," to ").concat(k.target),"aria-describedby":I?"".concat(zi,"-").concat(C):void 0,ref:T,children:[!R&&(0,d.jsx)(S,{id:n,source:k.source,target:k.target,type:k.type,selected:k.selected,animated:k.animated,selectable:_,deletable:null===(t=k.deletable)||void 0===t||t,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,sourceX:z,sourceY:j,targetX:H,targetY:q,sourcePosition:U,targetPosition:W,data:k.data,style:k.style,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerStart:V,markerEnd:K,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth}),P&&(0,d.jsx)(Ns,{edge:k,isReconnectable:P,reconnectRadius:m,onReconnect:y,onReconnectStart:v,onReconnectEnd:D,sourceX:z,sourceY:j,targetX:H,targetY:q,sourcePosition:U,targetPosition:W,setUpdateHover:M,setReconnecting:B})]})})}const Rs=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Bs(e){let{defaultMarkerColor:t,onlyRenderVisibleElements:n,rfId:r,edgeTypes:i,noPanClassName:a,onReconnect:s,onEdgeContextMenu:u,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:h,onEdgeClick:f,reconnectRadius:p,onEdgeDoubleClick:g,onReconnectStart:m,onReconnectEnd:y,disableKeyboardA11y:v}=e;const{edgesFocusable:D,edgesReconnectable:C,elementsSelectable:b,onError:w}=Mi(Rs,Ei),E=(F=n,Mi((0,o.useCallback)((e=>{if(!F)return e.edges.map((e=>e.id));const t=[];if(e.width&&e.height)for(const n of e.edges){const o=e.nodeLookup.get(n.source),r=e.nodeLookup.get(n.target);o&&r&&wr({sourceNode:o,targetNode:r,width:e.width,height:e.height,transform:e.transform})&&t.push(n.id)}return t}),[F]),Ei));var F;return(0,d.jsxs)("div",{className:"react-flow__edges",children:[(0,d.jsx)(as,{defaultColor:t,rfId:r}),E.map((e=>(0,d.jsx)(Ms,{id:e,edgesFocusable:D,edgesReconnectable:C,elementsSelectable:b,noPanClassName:a,onReconnect:s,onContextMenu:u,onMouseEnter:l,onMouseMove:c,onMouseLeave:h,onClick:f,reconnectRadius:p,onDoubleClick:g,onReconnectStart:m,onReconnectEnd:y,rfId:r,onError:w,edgeTypes:i,disableKeyboardA11y:v},e)))]})}Bs.displayName="EdgeRenderer";const Os=(0,o.memo)(Bs),Ls=e=>"translate(".concat(e.transform[0],"px,").concat(e.transform[1],"px) scale(").concat(e.transform[2],")");function zs(e){let{children:t}=e;const n=Mi(Ls);return(0,d.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:n},children:t})}const js=e=>{var t;return null===(t=e.panZoom)||void 0===t?void 0:t.syncViewport};function Hs(e){return e.connection.inProgress?l(l({},e.connection),{},{to:Jo(e.connection.to,e.transform)}):l({},e.connection)}function qs(e){const t=function(e){if(e)return t=>{const n=Hs(t);return e(n)};return Hs}(e);return Mi(t,Ei)}const Us=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Ws(e){let{containerStyle:t,style:n,type:o,component:r}=e;const{nodesConnectable:i,width:a,height:s,isValid:u,inProgress:l}=Mi(Us,Ei);return!!(a&&i&&l)?(0,d.jsx)("svg",{style:t,width:a,height:s,className:"react-flow__connectionline react-flow__container",children:(0,d.jsx)("g",{className:h(["react-flow__connection",Ao(u)]),children:(0,d.jsx)(Vs,{style:n,type:o,CustomComponent:r,isValid:u})})}):null}const Vs=e=>{let{style:t,type:n=Eo.Bezier,CustomComponent:o,isValid:r}=e;const{inProgress:i,from:a,fromNode:s,fromHandle:u,fromPosition:c,to:h,toNode:f,toHandle:p,toPosition:g}=qs();if(!i)return;if(o)return(0,d.jsx)(o,{connectionLineType:n,connectionLineStyle:t,fromNode:s,fromHandle:u,fromX:a.x,fromY:a.y,toX:h.x,toY:h.y,fromPosition:c,toPosition:g,connectionStatus:Ao(r),toNode:f,toHandle:p});let m="";const y={sourceX:a.x,sourceY:a.y,sourcePosition:c,targetX:h.x,targetY:h.y,targetPosition:g};switch(n){case Eo.Bezier:[m]=Cr(y);break;case Eo.SimpleBezier:[m]=ds(y);break;case Eo.Step:[m]=Sr(l(l({},y),{},{borderRadius:0}));break;case Eo.SmoothStep:[m]=Sr(y);break;default:[m]=Fr(y)}return(0,d.jsx)("path",{d:m,fill:"none",className:"react-flow__connection-path",style:t})};Vs.displayName="ConnectionLine";const Ks={};function Gs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ks;(0,o.useRef)(e),Ri();(0,o.useEffect)((()=>{}),[e])}function Ys(e){let{nodeTypes:t,edgeTypes:n,onInit:r,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:s,onEdgeDoubleClick:u,onNodeMouseEnter:l,onNodeMouseMove:c,onNodeMouseLeave:h,onNodeContextMenu:f,onSelectionContextMenu:p,onSelectionStart:g,onSelectionEnd:m,connectionLineType:y,connectionLineStyle:v,connectionLineComponent:D,connectionLineContainerStyle:C,selectionKeyCode:b,selectionOnDrag:w,selectionMode:E,multiSelectionKeyCode:F,panActivationKeyCode:k,zoomActivationKeyCode:x,deleteKeyCode:A,onlyRenderVisibleElements:S,elementsSelectable:I,defaultViewport:P,translateExtent:_,minZoom:T,maxZoom:N,preventScrolling:M,defaultMarkerColor:R,zoomOnScroll:B,zoomOnPinch:O,panOnScroll:L,panOnScrollSpeed:z,panOnScrollMode:j,zoomOnDoubleClick:H,panOnDrag:q,onPaneClick:U,onPaneMouseEnter:W,onPaneMouseMove:V,onPaneMouseLeave:K,onPaneScroll:G,onPaneContextMenu:Y,paneClickDistance:Q,nodeClickDistance:Z,onEdgeContextMenu:X,onEdgeMouseEnter:$,onEdgeMouseMove:J,onEdgeMouseLeave:ee,reconnectRadius:te,onReconnect:ne,onReconnectStart:oe,onReconnectEnd:re,noDragClassName:ie,noWheelClassName:ae,noPanClassName:se,disableKeyboardA11y:ue,nodeExtent:le,rfId:ce,viewport:de,onViewportChange:he}=e;return Gs(t),Gs(n),Ri(),(0,o.useRef)(!1),(0,o.useEffect)((()=>{}),[]),function(e){const t=Fa(),n=(0,o.useRef)(!1);(0,o.useEffect)((()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout((()=>e(t)),1),n.current=!0)}),[e,t.viewportInitialized])}(r),function(e){const t=Mi(js),n=Ri();(0,o.useEffect)((()=>{e&&(null===t||void 0===t||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))}),[e,t])}(de),(0,d.jsx)(Za,{onPaneClick:U,onPaneMouseEnter:W,onPaneMouseMove:V,onPaneMouseLeave:K,onPaneContextMenu:Y,onPaneScroll:G,paneClickDistance:Q,deleteKeyCode:A,selectionKeyCode:b,selectionOnDrag:w,selectionMode:E,onSelectionStart:g,onSelectionEnd:m,multiSelectionKeyCode:F,panActivationKeyCode:k,zoomActivationKeyCode:x,elementsSelectable:I,zoomOnScroll:B,zoomOnPinch:O,zoomOnDoubleClick:H,panOnScroll:L,panOnScrollSpeed:z,panOnScrollMode:j,panOnDrag:q,defaultViewport:P,translateExtent:_,minZoom:T,maxZoom:N,onSelectionContextMenu:p,preventScrolling:M,noDragClassName:ie,noWheelClassName:ae,noPanClassName:se,disableKeyboardA11y:ue,onViewportChange:he,isControlledViewport:!!de,children:(0,d.jsxs)(zs,{children:[(0,d.jsx)(Os,{edgeTypes:n,onEdgeClick:a,onEdgeDoubleClick:u,onReconnect:ne,onReconnectStart:oe,onReconnectEnd:re,onlyRenderVisibleElements:S,onEdgeContextMenu:X,onEdgeMouseEnter:$,onEdgeMouseMove:J,onEdgeMouseLeave:ee,reconnectRadius:te,defaultMarkerColor:R,noPanClassName:se,disableKeyboardA11y:ue,rfId:ce}),(0,d.jsx)(Ws,{style:v,type:y,component:D,containerStyle:C}),(0,d.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,d.jsx)(ns,{nodeTypes:t,onNodeClick:i,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:c,onNodeMouseLeave:h,onNodeContextMenu:f,nodeClickDistance:Z,onlyRenderVisibleElements:S,noPanClassName:se,noDragClassName:ie,disableKeyboardA11y:ue,nodeExtent:le,rfId:ce}),(0,d.jsx)("div",{className:"react-flow__viewport-portal"})]})})}Ys.displayName="GraphView";const Qs=(0,o.memo)(Ys),Zs=function(){var e,t;let{nodes:n,edges:o,defaultNodes:r,defaultEdges:i,width:a,height:s,fitView:u,fitViewOptions:c,minZoom:d=.5,maxZoom:h=2,nodeOrigin:f,nodeExtent:p}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const g=new Map,m=new Map,y=new Map,v=new Map,D=null!==(e=null!==i&&void 0!==i?i:o)&&void 0!==e?e:[],C=null!==(t=null!==r&&void 0!==r?r:n)&&void 0!==t?t:[],b=null!==f&&void 0!==f?f:[0,0],w=null!==p&&void 0!==p?p:yo;qr(y,v,D);const E=Or(C,g,m,{nodeOrigin:b,nodeExtent:w,elevateNodesOnSelect:!1});let F=[0,0,1];if(u&&a&&s){var k;const e=To(g,{filter:e=>!(!e.width&&!e.initialWidth||!e.height&&!e.initialHeight)}),{x:t,y:n,zoom:o}=nr(e,a,s,d,h,null!==(k=null===c||void 0===c?void 0:c.padding)&&void 0!==k?k:.1);F=[t,n,o]}return{rfId:"1",width:0,height:0,transform:F,nodes:C,nodesInitialized:E,nodeLookup:g,parentLookup:m,edges:D,edgeLookup:v,connectionLookup:y,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==r,hasDefaultEdges:void 0!==i,panZoom:null,minZoom:d,maxZoom:h,translateExtent:yo,nodeExtent:w,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Do.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:b,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:null!==u&&void 0!==u&&u,fitViewOptions:c,fitViewResolver:null,connection:l({},wo),connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:Xo,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},Xs=e=>{let{nodes:t,edges:n,defaultNodes:o,defaultEdges:r,width:i,height:a,fitView:s,fitViewOptions:u,minZoom:c,maxZoom:d,nodeOrigin:h,nodeExtent:f}=e;return((e,t)=>e?wi(e,t):wi)(((e,p)=>{async function g(){const{nodeLookup:t,panZoom:n,fitViewOptions:o,fitViewResolver:r,width:i,height:a,minZoom:s,maxZoom:u}=p();n&&(await Mo({nodes:t,width:i,height:a,panZoom:n,minZoom:s,maxZoom:u},o),null===r||void 0===r||r.resolve(!0),e({fitViewResolver:null}))}return l(l({},Zs({nodes:t,edges:n,width:i,height:a,fitView:s,fitViewOptions:u,minZoom:c,maxZoom:d,nodeOrigin:h,nodeExtent:f,defaultNodes:o,defaultEdges:r})),{},{setNodes:t=>{const{nodeLookup:n,parentLookup:o,nodeOrigin:r,elevateNodesOnSelect:i,fitViewQueued:a}=p(),s=Or(t,n,o,{nodeOrigin:r,nodeExtent:f,elevateNodesOnSelect:i,checkEquality:!0});a&&s?(g(),e({nodes:t,nodesInitialized:s,fitViewQueued:!1,fitViewOptions:void 0})):e({nodes:t,nodesInitialized:s})},setEdges:t=>{const{connectionLookup:n,edgeLookup:o}=p();qr(n,o,t),e({edges:t})},setDefaultNodesAndEdges:(t,n)=>{if(t){const{setNodes:n}=p();n(t),e({hasDefaultNodes:!0})}if(n){const{setEdges:t}=p();t(n),e({hasDefaultEdges:!0})}},updateNodeInternals:t=>{const{triggerNodeChanges:n,nodeLookup:o,parentLookup:r,domNode:i,nodeOrigin:a,nodeExtent:s,debug:u,fitViewQueued:c}=p(),{changes:d,updatedInternals:h}=function(e,t,n,o,r,i){const a=null===o||void 0===o?void 0:o.querySelector(".xyflow__viewport");let s=!1;if(!a)return{changes:[],updatedInternals:s};const u=[],c=window.getComputedStyle(a),{m22:d}=new window.DOMMatrixReadOnly(c.transform),h=[];for(const f of e.values()){const e=t.get(f.id);if(!e)continue;if(e.hidden){t.set(e.id,l(l({},e),{},{internals:l(l({},e.internals),{},{handleBounds:void 0})})),s=!0;continue}const o=cr(f.nodeElement),a=e.measured.width!==o.width||e.measured.height!==o.height;if(o.width&&o.height&&(a||!e.internals.handleBounds||f.force)){const c=f.nodeElement.getBoundingClientRect(),p=rr(e.extent)?e.extent:i;let{positionAbsolute:g}=e.internals;e.parentId&&"parent"===e.extent?g=zo(g,o,t.get(e.parentId)):p&&(g=Lo(g,p,o));const m=l(l({},e),{},{measured:o,internals:l(l({},e.internals),{},{positionAbsolute:g,handleBounds:{source:mr("source",f.nodeElement,c,d,e.id),target:mr("target",f.nodeElement,c,d,e.id)}})});t.set(e.id,m),e.parentId&&Lr(m,t,n,{nodeOrigin:r}),s=!0,a&&(u.push({id:e.id,type:"dimensions",dimensions:o}),e.expandParent&&e.parentId&&h.push({id:e.id,parentId:e.parentId,rect:Vo(m,r)}))}}if(h.length>0){const e=jr(h,t,n,r);u.push(...e)}return{changes:u,updatedInternals:s}}(t,o,r,i,a,s);h&&(!function(e,t,n){const o=Br(Mr,n);for(const r of e.values())if(r.parentId)Lr(r,e,t,o);else{const e=Po(r,o.nodeOrigin),t=rr(r.extent)?r.extent:o.nodeExtent,n=Lo(e,t,ir(r));r.internals.positionAbsolute=n}}(o,r,{nodeOrigin:a,nodeExtent:s}),c?(g(),e({fitViewQueued:!1,fitViewOptions:void 0})):e({}),(null===d||void 0===d?void 0:d.length)>0&&(u&&console.log("React Flow: trigger node changes",d),null===n||void 0===n||n(d)))},updateNodePositions:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=[],o=[],{nodeLookup:r,triggerNodeChanges:i}=p();for(const[u,c]of e){const e=r.get(u),i=!!(null!==e&&void 0!==e&&e.expandParent&&null!==e&&void 0!==e&&e.parentId&&null!==c&&void 0!==c&&c.position),d={id:u,type:"position",position:i?{x:Math.max(0,c.position.x),y:Math.max(0,c.position.y)}:c.position,dragging:t};var a,s;if(i&&e.parentId)n.push({id:u,parentId:e.parentId,rect:l(l({},c.internals.positionAbsolute),{},{width:null!==(a=c.measured.width)&&void 0!==a?a:0,height:null!==(s=c.measured.height)&&void 0!==s?s:0})});o.push(d)}if(n.length>0){const{parentLookup:e,nodeOrigin:t}=p(),i=jr(n,r,e,t);o.push(...i)}i(o)},triggerNodeChanges:e=>{const{onNodesChange:t,setNodes:n,nodes:o,hasDefaultNodes:r,debug:i}=p();if(null!==e&&void 0!==e&&e.length){if(r){n(da(e,o))}i&&console.log("React Flow: trigger node changes",e),null===t||void 0===t||t(e)}},triggerEdgeChanges:e=>{const{onEdgesChange:t,setEdges:n,edges:o,hasDefaultEdges:r,debug:i}=p();if(null!==e&&void 0!==e&&e.length){if(r){n(ha(e,o))}i&&console.log("React Flow: trigger edge changes",e),null===t||void 0===t||t(e)}},addSelectedNodes:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:o,triggerNodeChanges:r,triggerEdgeChanges:i}=p();if(t){r(e.map((e=>fa(e,!0))))}else r(pa(o,new Set([...e]),!0)),i(pa(n))},addSelectedEdges:e=>{const{multiSelectionActive:t,edgeLookup:n,nodeLookup:o,triggerNodeChanges:r,triggerEdgeChanges:i}=p();if(t){i(e.map((e=>fa(e,!0))))}else i(pa(n,new Set([...e]))),r(pa(o,new Set,!0))},unselectNodesAndEdges:function(){let{nodes:e,edges:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{edges:n,nodes:o,nodeLookup:r,triggerNodeChanges:i,triggerEdgeChanges:a}=p(),s=t||n,u=(e||o).map((e=>{const t=r.get(e.id);return t&&(t.selected=!1),fa(e.id,!1)})),l=s.map((e=>fa(e.id,!1)));i(u),a(l)},setMinZoom:t=>{const{panZoom:n,maxZoom:o}=p();null===n||void 0===n||n.setScaleExtent([t,o]),e({minZoom:t})},setMaxZoom:t=>{const{panZoom:n,minZoom:o}=p();null===n||void 0===n||n.setScaleExtent([o,t]),e({maxZoom:t})},setTranslateExtent:t=>{var n;null===(n=p().panZoom)||void 0===n||n.setTranslateExtent(t),e({translateExtent:t})},setPaneClickDistance:e=>{var t;null===(t=p().panZoom)||void 0===t||t.setClickDistance(e)},resetSelectedElements:()=>{const{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:o,elementsSelectable:r}=p();if(!r)return;const i=t.reduce(((e,t)=>t.selected?[...e,fa(t.id,!1)]:e),[]),a=e.reduce(((e,t)=>t.selected?[...e,fa(t.id,!1)]:e),[]);n(i),o(a)},setNodeExtent:t=>{const{nodes:n,nodeLookup:o,parentLookup:r,nodeOrigin:i,elevateNodesOnSelect:a,nodeExtent:s}=p();t[0][0]===s[0][0]&&t[0][1]===s[0][1]&&t[1][0]===s[1][0]&&t[1][1]===s[1][1]||(Or(n,o,r,{nodeOrigin:i,nodeExtent:t,elevateNodesOnSelect:a,checkEquality:!1}),e({nodeExtent:t}))},panBy:e=>{const{transform:t,width:n,height:o,panZoom:r,translateExtent:i}=p();return async function(e){let{delta:t,panZoom:n,transform:o,translateExtent:r,width:i,height:a}=e;if(!n||!t.x&&!t.y)return Promise.resolve(!1);const s=await n.setViewportConstrained({x:o[0]+t.x,y:o[1]+t.y,zoom:o[2]},[[0,0],[i,a]],r),u=!!s&&(s.x!==o[0]||s.y!==o[1]||s.k!==o[2]);return Promise.resolve(u)}({delta:e,panZoom:r,transform:t,translateExtent:i,width:n,height:o})},cancelConnection:()=>{e({connection:l({},wo)})},updateConnection:t=>{e({connection:t})},reset:()=>e(l({},Zs()))})}),Object.is)};function $s(e){let{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:a,initialHeight:s,initialMinZoom:u,initialMaxZoom:l,initialFitViewOptions:c,fitView:h,nodeOrigin:f,nodeExtent:p,children:g}=e;const[m]=(0,o.useState)((()=>Xs({nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:a,height:s,fitView:h,minZoom:u,maxZoom:l,fitViewOptions:c,nodeOrigin:f,nodeExtent:p})));return(0,d.jsx)(Ti,{value:m,children:(0,d.jsx)(wa,{children:g})})}function Js(e){let{children:t,nodes:n,edges:r,defaultNodes:i,defaultEdges:a,width:s,height:u,fitView:l,fitViewOptions:c,minZoom:h,maxZoom:f,nodeOrigin:p,nodeExtent:g}=e;return(0,o.useContext)(_i)?(0,d.jsx)(d.Fragment,{children:t}):(0,d.jsx)($s,{initialNodes:n,initialEdges:r,defaultNodes:i,defaultEdges:a,initialWidth:s,initialHeight:u,fitView:l,initialFitViewOptions:c,initialMinZoom:h,initialMaxZoom:f,nodeOrigin:p,nodeExtent:g,children:t})}const eu={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var tu=va((function(e,t){let{nodes:n,edges:r,defaultNodes:i,defaultEdges:a,className:s,nodeTypes:u,edgeTypes:f,onNodeClick:p,onEdgeClick:g,onInit:m,onMove:y,onMoveStart:v,onMoveEnd:D,onConnect:C,onConnectStart:b,onConnectEnd:w,onClickConnectStart:E,onClickConnectEnd:F,onNodeMouseEnter:k,onNodeMouseMove:x,onNodeMouseLeave:A,onNodeContextMenu:S,onNodeDoubleClick:I,onNodeDragStart:P,onNodeDrag:_,onNodeDragStop:T,onNodesDelete:N,onEdgesDelete:M,onDelete:R,onSelectionChange:B,onSelectionDragStart:O,onSelectionDrag:L,onSelectionDragStop:z,onSelectionContextMenu:j,onSelectionStart:H,onSelectionEnd:q,onBeforeDelete:U,connectionMode:W,connectionLineType:V=Eo.Bezier,connectionLineStyle:K,connectionLineComponent:G,connectionLineContainerStyle:Y,deleteKeyCode:Q="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:X=!1,selectionMode:$=bo.Full,panActivationKeyCode:J="Space",multiSelectionKeyCode:ee=(or()?"Meta":"Control"),zoomActivationKeyCode:te=(or()?"Meta":"Control"),snapToGrid:ne,snapGrid:oe,onlyRenderVisibleElements:re=!1,selectNodesOnDrag:ie,nodesDraggable:ae,nodesConnectable:se,nodesFocusable:ue,nodeOrigin:le=$i,edgesFocusable:ce,edgesReconnectable:de,elementsSelectable:he=!0,defaultViewport:fe=Ji,minZoom:pe=.5,maxZoom:ge=2,translateExtent:me=yo,preventScrolling:ye=!0,nodeExtent:ve,defaultMarkerColor:De="#b1b1b7",zoomOnScroll:Ce=!0,zoomOnPinch:be=!0,panOnScroll:we=!1,panOnScrollSpeed:Ee=.5,panOnScrollMode:Fe=Co.Free,zoomOnDoubleClick:ke=!0,panOnDrag:xe=!0,onPaneClick:Ae,onPaneMouseEnter:Se,onPaneMouseMove:Ie,onPaneMouseLeave:Pe,onPaneScroll:_e,onPaneContextMenu:Te,paneClickDistance:Ne=0,nodeClickDistance:Me=0,children:Re,onReconnect:Be,onReconnectStart:Oe,onReconnectEnd:Le,onEdgeContextMenu:ze,onEdgeDoubleClick:je,onEdgeMouseEnter:He,onEdgeMouseMove:qe,onEdgeMouseLeave:Ue,reconnectRadius:We=10,onNodesChange:Ve,onEdgesChange:Ke,noDragClassName:Ge="nodrag",noWheelClassName:Ye="nowheel",noPanClassName:Qe="nopan",fitView:Ze,fitViewOptions:Xe,connectOnClick:$e,attributionPosition:Je,proOptions:et,defaultEdgeOptions:tt,elevateNodesOnSelect:nt,elevateEdgesOnSelect:ot,disableKeyboardA11y:rt=!1,autoPanOnConnect:it,autoPanOnNodeDrag:at,autoPanSpeed:st,connectionRadius:ut,isValidConnection:lt,onError:ct,style:dt,id:ht,nodeDragThreshold:ft,viewport:pt,onViewportChange:gt,width:mt,height:yt,colorMode:vt="light",debug:Dt,onScroll:Ct}=e,bt=c(e,Ii);const wt=ht||"1",Et=function(e){var t;const[n,r]=(0,o.useState)("system"===e?null:e);return(0,o.useEffect)((()=>{if("system"!==e)return void r(e);const t=ra(),n=()=>r(null!==t&&void 0!==t&&t.matches?"dark":"light");return n(),null===t||void 0===t||t.addEventListener("change",n),()=>{null===t||void 0===t||t.removeEventListener("change",n)}}),[e]),null!==n?n:null!==(t=ra())&&void 0!==t&&t.matches?"dark":"light"}(vt),Ft=(0,o.useCallback)((e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),null===Ct||void 0===Ct||Ct(e)}),[Ct]);return(0,d.jsx)("div",l(l({"data-testid":"rf__wrapper"},bt),{},{onScroll:Ft,style:l(l({},dt),eu),ref:t,className:h(["react-flow",s,Et]),id:ht,children:(0,d.jsxs)(Js,{nodes:n,edges:r,width:mt,height:yt,fitView:Ze,fitViewOptions:Xe,minZoom:pe,maxZoom:ge,nodeOrigin:le,nodeExtent:ve,children:[(0,d.jsx)(Qs,{onInit:m,onNodeClick:p,onEdgeClick:g,onNodeMouseEnter:k,onNodeMouseMove:x,onNodeMouseLeave:A,onNodeContextMenu:S,onNodeDoubleClick:I,nodeTypes:u,edgeTypes:f,connectionLineType:V,connectionLineStyle:K,connectionLineComponent:G,connectionLineContainerStyle:Y,selectionKeyCode:Z,selectionOnDrag:X,selectionMode:$,deleteKeyCode:Q,multiSelectionKeyCode:ee,panActivationKeyCode:J,zoomActivationKeyCode:te,onlyRenderVisibleElements:re,defaultViewport:fe,translateExtent:me,minZoom:pe,maxZoom:ge,preventScrolling:ye,zoomOnScroll:Ce,zoomOnPinch:be,zoomOnDoubleClick:ke,panOnScroll:we,panOnScrollSpeed:Ee,panOnScrollMode:Fe,panOnDrag:xe,onPaneClick:Ae,onPaneMouseEnter:Se,onPaneMouseMove:Ie,onPaneMouseLeave:Pe,onPaneScroll:_e,onPaneContextMenu:Te,paneClickDistance:Ne,nodeClickDistance:Me,onSelectionContextMenu:j,onSelectionStart:H,onSelectionEnd:q,onReconnect:Be,onReconnectStart:Oe,onReconnectEnd:Le,onEdgeContextMenu:ze,onEdgeDoubleClick:je,onEdgeMouseEnter:He,onEdgeMouseMove:qe,onEdgeMouseLeave:Ue,reconnectRadius:We,defaultMarkerColor:De,noDragClassName:Ge,noWheelClassName:Ye,noPanClassName:Qe,rfId:wt,disableKeyboardA11y:rt,nodeExtent:ve,viewport:pt,onViewportChange:gt}),(0,d.jsx)(oa,{nodes:n,edges:r,defaultNodes:i,defaultEdges:a,onConnect:C,onConnectStart:b,onConnectEnd:w,onClickConnectStart:E,onClickConnectEnd:F,nodesDraggable:ae,nodesConnectable:se,nodesFocusable:ue,edgesFocusable:ce,edgesReconnectable:de,elementsSelectable:he,elevateNodesOnSelect:nt,elevateEdgesOnSelect:ot,minZoom:pe,maxZoom:ge,nodeExtent:ve,onNodesChange:Ve,onEdgesChange:Ke,snapToGrid:ne,snapGrid:oe,connectionMode:W,translateExtent:me,connectOnClick:$e,defaultEdgeOptions:tt,fitView:Ze,fitViewOptions:Xe,onNodesDelete:N,onEdgesDelete:M,onDelete:R,onNodeDragStart:P,onNodeDrag:_,onNodeDragStop:T,onSelectionDrag:L,onSelectionDragStart:O,onSelectionDragStop:z,onMove:y,onMoveStart:v,onMoveEnd:D,noPanClassName:Qe,nodeOrigin:le,rfId:wt,autoPanOnConnect:it,autoPanOnNodeDrag:at,autoPanSpeed:st,onError:ct,connectionRadius:ut,isValidConnection:lt,selectNodesOnDrag:ie,nodeDragThreshold:ft,onBeforeDelete:U,paneClickDistance:Ne,debug:Dt}),(0,d.jsx)(Xi,{onSelectionChange:B}),Re,(0,d.jsx)(Vi,{proOptions:et,position:Je}),(0,d.jsx)(qi,{rfId:wt,disableKeyboardA11y:rt})]})}))}));go();function nu(e){let{dimensions:t,lineWidth:n,variant:o,className:r}=e;return(0,d.jsx)("path",{strokeWidth:n,d:"M".concat(t[0]/2," 0 V").concat(t[1]," M0 ").concat(t[1]/2," H").concat(t[0]),className:h(["react-flow__background-pattern",o,r])})}function ou(e){let{radius:t,className:n}=e;return(0,d.jsx)("circle",{cx:t,cy:t,r:t,className:h(["react-flow__background-pattern","dots",n])})}var ru;!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(ru||(ru={}));const iu={[ru.Dots]:1,[ru.Lines]:1,[ru.Cross]:6},au=e=>({transform:e.transform,patternId:"pattern-".concat(e.rfId)});function su(e){let{id:t,variant:n=ru.Dots,gap:r=20,size:i,lineWidth:a=1,offset:s=0,color:u,bgColor:c,style:f,className:p,patternClassName:g}=e;const m=(0,o.useRef)(null),{transform:y,patternId:v}=Mi(au,Ei),D=i||iu[n],C=n===ru.Dots,b=n===ru.Cross,w=Array.isArray(r)?r:[r,r],E=[w[0]*y[2]||1,w[1]*y[2]||1],F=D*y[2],k=Array.isArray(s)?s:[s,s],x=b?[F,F]:E,A=[k[0]*y[2]||1+x[0]/2,k[1]*y[2]||1+x[1]/2],S="".concat(v).concat(t||"");return(0,d.jsxs)("svg",{className:h(["react-flow__background",p]),style:l(l(l({},f),Aa),{},{"--xy-background-color-props":c,"--xy-background-pattern-color-props":u}),ref:m,"data-testid":"rf__background",children:[(0,d.jsx)("pattern",{id:S,x:y[0]%E[0],y:y[1]%E[1],width:E[0],height:E[1],patternUnits:"userSpaceOnUse",patternTransform:"translate(-".concat(A[0],",-").concat(A[1],")"),children:C?(0,d.jsx)(ou,{radius:F/2,className:g}):(0,d.jsx)(nu,{dimensions:x,lineWidth:a,variant:n,className:g})}),(0,d.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(S,")")})]})}su.displayName="Background";const uu=(0,o.memo)(su);function lu(){return(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,d.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function cu(){return(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,d.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function du(){return(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,d.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function hu(){return(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,d.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function fu(){return(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,d.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function pu(e){let{children:t,className:n}=e,o=c(e,Pi);return(0,d.jsx)("button",l(l({type:"button",className:h(["react-flow__controls-button",n])},o),{},{children:t}))}const gu=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function mu(e){let{style:t,showZoom:n=!0,showFitView:o=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:a,onZoomOut:s,onFitView:u,onInteractiveChange:l,className:c,children:f,position:p="bottom-left",orientation:g="vertical","aria-label":m="React Flow controls"}=e;const y=Ri(),{isInteractive:v,minZoomReached:D,maxZoomReached:C}=Mi(gu,Ei),{zoomIn:b,zoomOut:w,fitView:E}=Fa(),F="horizontal"===g?"horizontal":"vertical";return(0,d.jsxs)(Wi,{className:h(["react-flow__controls",F,c]),position:p,style:t,"data-testid":"rf__controls","aria-label":m,children:[n&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(pu,{onClick:()=>{b(),null===a||void 0===a||a()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:C,children:(0,d.jsx)(lu,{})}),(0,d.jsx)(pu,{onClick:()=>{w(),null===s||void 0===s||s()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:D,children:(0,d.jsx)(cu,{})})]}),o&&(0,d.jsx)(pu,{className:"react-flow__controls-fitview",onClick:()=>{E(i),null===u||void 0===u||u()},title:"fit view","aria-label":"fit view",children:(0,d.jsx)(du,{})}),r&&(0,d.jsx)(pu,{className:"react-flow__controls-interactive",onClick:()=>{y.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),null===l||void 0===l||l(!v)},title:"toggle interactivity","aria-label":"toggle interactivity",children:v?(0,d.jsx)(fu,{}):(0,d.jsx)(hu,{})}),f]})}mu.displayName="Controls";const yu=(0,o.memo)(mu);const vu=(0,o.memo)((function(e){let{id:t,x:n,y:o,width:r,height:i,style:a,color:s,strokeColor:u,strokeWidth:l,className:c,borderRadius:f,shapeRendering:p,selected:g,onClick:m}=e;const{background:y,backgroundColor:v}=a||{},D=s||y||v;return(0,d.jsx)("rect",{className:h(["react-flow__minimap-node",{selected:g},c]),x:n,y:o,rx:f,ry:f,width:r,height:i,style:{fill:D,stroke:u,strokeWidth:l},shapeRendering:p,onClick:m?e=>m(e,t):void 0})})),Du=e=>e.nodes.map((e=>e.id)),Cu=e=>e instanceof Function?e:()=>e;const bu=(0,o.memo)((function(e){let{id:t,nodeColorFunc:n,nodeStrokeColorFunc:o,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:a,shapeRendering:s,NodeComponent:u,onClick:l}=e;const{node:c,x:h,y:f,width:p,height:g}=Mi((e=>{const{internals:n}=e.nodeLookup.get(t),o=n.userNode,{x:r,y:i}=n.positionAbsolute,{width:a,height:s}=ir(o);return{node:o,x:r,y:i,width:a,height:s}}),Ei);return c&&!c.hidden&&ar(c)?(0,d.jsx)(u,{x:h,y:f,width:p,height:g,style:c.style,selected:!!c.selected,className:r(c),color:n(c),borderRadius:i,strokeColor:o(c),strokeWidth:a,shapeRendering:s,onClick:l,id:c.id}):null}));var wu=(0,o.memo)((function(e){let{nodeStrokeColor:t,nodeColor:n,nodeClassName:o="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:a=vu,onClick:s}=e;const u=Mi(Du,Ei),l=Cu(n),c=Cu(t),h=Cu(o),f="undefined"===typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,d.jsx)(d.Fragment,{children:u.map((e=>(0,d.jsx)(bu,{id:e,nodeColorFunc:l,nodeStrokeColorFunc:c,nodeClassNameFunc:h,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:a,onClick:s,shapeRendering:f},e)))})}));const Eu=e=>!e.hidden,Fu=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Go(To(e.nodeLookup,{filter:Eu}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}};function ku(e){var t,n;let{style:r,className:i,nodeStrokeColor:a,nodeColor:s,nodeClassName:u="",nodeBorderRadius:c=5,nodeStrokeWidth:f,nodeComponent:p,bgColor:g,maskColor:m,maskStrokeColor:y,maskStrokeWidth:v,position:D="bottom-right",onClick:C,onNodeClick:b,pannable:w=!1,zoomable:E=!1,ariaLabel:F="React Flow mini map",inversePan:k,zoomStep:x=10,offsetScale:A=5}=e;const S=Ri(),I=(0,o.useRef)(null),{boundingRect:P,viewBB:_,rfId:T,panZoom:N,translateExtent:M,flowWidth:R,flowHeight:B}=Mi(Fu,Ei),O=null!==(t=null===r||void 0===r?void 0:r.width)&&void 0!==t?t:200,L=null!==(n=null===r||void 0===r?void 0:r.height)&&void 0!==n?n:150,z=P.width/O,j=P.height/L,H=Math.max(z,j),q=H*O,U=H*L,W=A*H,V=P.x-(q-P.width)/2-W,K=P.y-(U-P.height)/2-W,G=q+2*W,Y=U+2*W,Q="".concat("react-flow__minimap-desc","-").concat(T),Z=(0,o.useRef)(0),X=(0,o.useRef)();Z.current=H,(0,o.useEffect)((()=>{if(I.current&&N)return X.current=function(e){let{domNode:t,panZoom:n,getTransform:o,getViewScale:r}=e;const i=Te(t);return{update:function(e){let{translateExtent:t,width:a,height:s,zoomStep:u=10,pannable:l=!0,zoomable:c=!0,inversePan:d=!1}=e,h=[0,0];const f=no().on("start",(e=>{var t,n;"mousedown"!==e.sourceEvent.type&&"touchstart"!==e.sourceEvent.type||(h=[null!==(t=e.sourceEvent.clientX)&&void 0!==t?t:e.sourceEvent.touches[0].clientX,null!==(n=e.sourceEvent.clientY)&&void 0!==n?n:e.sourceEvent.touches[0].clientY])})).on("zoom",l?e=>{var i,u;const l=o();if("mousemove"!==e.sourceEvent.type&&"touchmove"!==e.sourceEvent.type||!n)return;const c=[null!==(i=e.sourceEvent.clientX)&&void 0!==i?i:e.sourceEvent.touches[0].clientX,null!==(u=e.sourceEvent.clientY)&&void 0!==u?u:e.sourceEvent.touches[0].clientY],f=[c[0]-h[0],c[1]-h[1]];h=c;const p=r()*Math.max(l[2],Math.log(l[2]))*(d?-1:1),g={x:l[0]-f[0]*p,y:l[1]-f[1]*p},m=[[0,0],[a,s]];n.setViewportConstrained({x:g.x,y:g.y,zoom:l[2]},m,t)}:null).on("zoom.wheel",c?e=>{const t=o();if("wheel"!==e.sourceEvent.type||!n)return;const r=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*u,i=t[2]*Math.pow(2,r);n.scaleTo(i)}:null);i.call(f,{})},destroy:function(){i.on("zoom",null)},pointer:Ne}}({domNode:I.current,panZoom:N,getTransform:()=>S.getState().transform,getViewScale:()=>Z.current}),()=>{var e;null===(e=X.current)||void 0===e||e.destroy()}}),[N]),(0,o.useEffect)((()=>{var e;null===(e=X.current)||void 0===e||e.update({translateExtent:M,width:R,height:B,inversePan:k,pannable:w,zoomStep:x,zoomable:E})}),[w,E,k,x,M,R,B]);const $=C?e=>{var t;const[n,o]=(null===(t=X.current)||void 0===t?void 0:t.pointer(e))||[0,0];C(e,{x:n,y:o})}:void 0,J=b?(0,o.useCallback)(((e,t)=>{const n=S.getState().nodeLookup.get(t).internals.userNode;b(e,n)}),[]):void 0;return(0,d.jsx)(Wi,{position:D,style:l(l({},r),{},{"--xy-minimap-background-color-props":"string"===typeof g?g:void 0,"--xy-minimap-mask-background-color-props":"string"===typeof m?m:void 0,"--xy-minimap-mask-stroke-color-props":"string"===typeof y?y:void 0,"--xy-minimap-mask-stroke-width-props":"number"===typeof v?v*H:void 0,"--xy-minimap-node-background-color-props":"string"===typeof s?s:void 0,"--xy-minimap-node-stroke-color-props":"string"===typeof a?a:void 0,"--xy-minimap-node-stroke-width-props":"number"===typeof f?f:void 0}),className:h(["react-flow__minimap",i]),"data-testid":"rf__minimap",children:(0,d.jsxs)("svg",{width:O,height:L,viewBox:"".concat(V," ").concat(K," ").concat(G," ").concat(Y),className:"react-flow__minimap-svg",role:"img","aria-labelledby":Q,ref:I,onClick:$,children:[F&&(0,d.jsx)("title",{id:Q,children:F}),(0,d.jsx)(wu,{onClick:J,nodeColor:s,nodeStrokeColor:a,nodeBorderRadius:c,nodeClassName:u,nodeStrokeWidth:f,nodeComponent:p}),(0,d.jsx)("path",{className:"react-flow__minimap-mask",d:"M".concat(V-W,",").concat(K-W,"h").concat(G+2*W,"v").concat(Y+2*W,"h").concat(-G-2*W,"z\n        M").concat(_.x,",").concat(_.y,"h").concat(_.width,"v").concat(_.height,"h").concat(-_.width,"z"),fillRule:"evenodd",pointerEvents:"none"})]})})}ku.displayName="MiniMap";(0,o.memo)(ku);(0,o.memo)((function(e){let{nodeId:t,position:n,variant:r=ai.Handle,className:i,style:a={},children:s,color:u,minWidth:c=10,minHeight:f=10,maxWidth:p=Number.MAX_VALUE,maxHeight:g=Number.MAX_VALUE,keepAspectRatio:m=!1,resizeDirection:y,shouldResize:v,onResizeStart:D,onResize:C,onResizeEnd:b}=e;const w=ja(),E="string"===typeof t?t:w,F=Ri(),k=(0,o.useRef)(null),x=r===ai.Line?"right":"bottom-right",A=null!==n&&void 0!==n?n:x,S=(0,o.useRef)(null);(0,o.useEffect)((()=>{if(k.current&&E)return S.current||(S.current=pi({domNode:k.current,nodeId:E,getStoreItems:()=>{const{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:r,domNode:i}=F.getState();return{nodeLookup:e,transform:t,snapGrid:n,snapToGrid:o,nodeOrigin:r,paneDomNode:i}},onChange:(e,t)=>{const{triggerNodeChanges:n,nodeLookup:o,parentLookup:r,nodeOrigin:i}=F.getState(),a=[],s={x:e.x,y:e.y},u=o.get(E);if(u&&u.expandParent&&u.parentId){var c,d,h,f,p,g,m;const t=null!==(c=u.origin)&&void 0!==c?c:i,n=null!==(d=null!==(h=e.width)&&void 0!==h?h:u.measured.width)&&void 0!==d?d:0,y=null!==(f=null!==(p=e.height)&&void 0!==p?p:u.measured.height)&&void 0!==f?f:0,v=jr([{id:u.id,parentId:u.parentId,rect:l({width:n,height:y},sr({x:null!==(g=e.x)&&void 0!==g?g:u.position.x,y:null!==(m=e.y)&&void 0!==m?m:u.position.y},{width:n,height:y},u.parentId,o,t))}],o,r,i);a.push(...v),s.x=e.x?Math.max(t[0]*n,e.x):void 0,s.y=e.y?Math.max(t[1]*y,e.y):void 0}if(void 0!==s.x&&void 0!==s.y){const e={id:E,type:"position",position:l({},s)};a.push(e)}if(void 0!==e.width&&void 0!==e.height){const t={id:E,type:"dimensions",resizing:!0,setAttributes:!y||("horizontal"===y?"width":"height"),dimensions:{width:e.width,height:e.height}};a.push(t)}for(const y of t){const e=l(l({},y),{},{type:"position"});a.push(e)}n(a)},onEnd:e=>{let{width:t,height:n}=e;const o={id:E,type:"dimensions",resizing:!1,dimensions:{width:t,height:n}};F.getState().triggerNodeChanges([o])}})),S.current.update({controlPosition:A,boundaries:{minWidth:c,minHeight:f,maxWidth:p,maxHeight:g},keepAspectRatio:m,resizeDirection:y,onResizeStart:D,onResize:C,onResizeEnd:b,shouldResize:v}),()=>{var e;null===(e=S.current)||void 0===e||e.destroy()}}),[A,c,f,p,g,m,D,C,b,v]);const I=A.split("-"),P=r===ai.Line?"borderColor":"backgroundColor",_=u?l(l({},a),{},{[P]:u}):a;return(0,d.jsx)("div",{className:h(["react-flow__resize-control","nodrag",...I,r,i]),ref:k,style:_,children:s})}));var xu=n(5837);function Au(e){return e&&"object"===typeof e?"position"in e||"type"in e?Iu(e.position):"start"in e||"end"in e?Iu(e):"line"in e||"column"in e?Su(e):"":""}function Su(e){return Pu(e&&e.line)+":"+Pu(e&&e.column)}function Iu(e){return Su(e&&e.start)+"-"+Su(e&&e.end)}function Pu(e){return e&&"number"===typeof e?e:1}class _u extends Error{constructor(e,t,n){const o=[null,null];let r={start:{line:null,column:null},end:{line:null,column:null}};if(super(),"string"===typeof t&&(n=t,t=void 0),"string"===typeof n){const e=n.indexOf(":");-1===e?o[1]=n:(o[0]=n.slice(0,e),o[1]=n.slice(e+1))}t&&("type"in t||"position"in t?t.position&&(r=t.position):"start"in t||"end"in t?r=t:("line"in t||"column"in t)&&(r.start=t)),this.name=Au(t)||"1:1",this.message="object"===typeof e?e.message:e,this.stack="","object"===typeof e&&e.stack&&(this.stack=e.stack),this.reason=this.message,this.fatal,this.line=r.start.line,this.column=r.start.column,this.position=r,this.source=o[0],this.ruleId=o[1],this.file,this.actual,this.expected,this.url,this.note}}_u.prototype.file="",_u.prototype.name="",_u.prototype.reason="",_u.prototype.message="",_u.prototype.stack="",_u.prototype.fatal=null,_u.prototype.column=null,_u.prototype.line=null,_u.prototype.source=null,_u.prototype.ruleId=null,_u.prototype.position=null;const Tu={basename:function(e,t){if(void 0!==t&&"string"!==typeof t)throw new TypeError('"ext" argument must be a string');Nu(e);let n,o=0,r=-1,i=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;i--;)if(47===e.charCodeAt(i)){if(n){o=i+1;break}}else r<0&&(n=!0,r=i+1);return r<0?"":e.slice(o,r)}if(t===e)return"";let a=-1,s=t.length-1;for(;i--;)if(47===e.charCodeAt(i)){if(n){o=i+1;break}}else a<0&&(n=!0,a=i+1),s>-1&&(e.charCodeAt(i)===t.charCodeAt(s--)?s<0&&(r=i):(s=-1,r=a));o===r?r=a:r<0&&(r=e.length);return e.slice(o,r)},dirname:function(e){if(Nu(e),0===e.length)return".";let t,n=-1,o=e.length;for(;--o;)if(47===e.charCodeAt(o)){if(t){n=o;break}}else t||(t=!0);return n<0?47===e.charCodeAt(0)?"/":".":1===n&&47===e.charCodeAt(0)?"//":e.slice(0,n)},extname:function(e){Nu(e);let t,n=e.length,o=-1,r=0,i=-1,a=0;for(;n--;){const s=e.charCodeAt(n);if(47!==s)o<0&&(t=!0,o=n+1),46===s?i<0?i=n:1!==a&&(a=1):i>-1&&(a=-1);else if(t){r=n+1;break}}if(i<0||o<0||0===a||1===a&&i===o-1&&i===r+1)return"";return e.slice(i,o)},join:function(){let e,t=-1;for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];for(;++t<o.length;)Nu(o[t]),o[t]&&(e=void 0===e?o[t]:e+"/"+o[t]);return void 0===e?".":function(e){Nu(e);const t=47===e.charCodeAt(0);let n=function(e,t){let n,o,r="",i=0,a=-1,s=0,u=-1;for(;++u<=e.length;){if(u<e.length)n=e.charCodeAt(u);else{if(47===n)break;n=47}if(47===n){if(a===u-1||1===s);else if(a!==u-1&&2===s){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){if(o=r.lastIndexOf("/"),o!==r.length-1){o<0?(r="",i=0):(r=r.slice(0,o),i=r.length-1-r.lastIndexOf("/")),a=u,s=0;continue}}else if(r.length>0){r="",i=0,a=u,s=0;continue}t&&(r=r.length>0?r+"/..":"..",i=2)}else r.length>0?r+="/"+e.slice(a+1,u):r=e.slice(a+1,u),i=u-a-1;a=u,s=0}else 46===n&&s>-1?s++:s=-1}return r}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.charCodeAt(e.length-1)&&(n+="/");return t?"/"+n:n}(e)},sep:"/"};function Nu(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Mu={cwd:function(){return"/"}};function Ru(e){return null!==e&&"object"===typeof e&&e.href&&e.origin}function Bu(e){if("string"===typeof e)e=new URL(e);else if(!Ru(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.charCodeAt(n)&&50===t.charCodeAt(n+1)){const e=t.charCodeAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const Ou=["history","path","basename","stem","extname","dirname"];class Lu{constructor(e){let t;t=e?"string"===typeof e||function(e){return xu(e)}(e)?{value:e}:Ru(e)?{path:e}:e:{},this.data={},this.messages=[],this.history=[],this.cwd=Mu.cwd(),this.value,this.stored,this.result,this.map;let n,o=-1;for(;++o<Ou.length;){const e=Ou[o];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)Ou.includes(n)||(this[n]=t[n])}get path(){return this.history[this.history.length-1]}set path(e){Ru(e)&&(e=Bu(e)),ju(e,"path"),this.path!==e&&this.history.push(e)}get dirname(){return"string"===typeof this.path?Tu.dirname(this.path):void 0}set dirname(e){Hu(this.basename,"dirname"),this.path=Tu.join(e||"",this.basename)}get basename(){return"string"===typeof this.path?Tu.basename(this.path):void 0}set basename(e){ju(e,"basename"),zu(e,"basename"),this.path=Tu.join(this.dirname||"",e)}get extname(){return"string"===typeof this.path?Tu.extname(this.path):void 0}set extname(e){if(zu(e,"extname"),Hu(this.dirname,"extname"),e){if(46!==e.charCodeAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Tu.join(this.dirname,this.stem+(e||""))}get stem(){return"string"===typeof this.path?Tu.basename(this.path,this.extname):void 0}set stem(e){ju(e,"stem"),zu(e,"stem"),this.path=Tu.join(this.dirname||"",e+(this.extname||""))}toString(e){return(this.value||"").toString(e||void 0)}message(e,t,n){const o=new _u(e,t,n);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}info(e,t,n){const o=this.message(e,t,n);return o.fatal=null,o}fail(e,t,n){const o=this.message(e,t,n);throw o.fatal=!0,o}}function zu(e,t){if(e&&e.includes(Tu.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Tu.sep+"`")}function ju(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Hu(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function qu(e){if(e)throw e}var Uu=n(3240);function Wu(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Vu(){const e=[],t={run:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];let r=-1;const i=n.pop();if("function"!==typeof i)throw new TypeError("Expected function as last argument, not "+i);!function t(o){const a=e[++r];let s=-1;if(o)i(o);else{for(var u=arguments.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=arguments[c];for(;++s<n.length;)null!==l[s]&&void 0!==l[s]||(l[s]=n[s]);n=l,a?function(e,t){let n;return r;function r(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];const u=e.length>r.length;let l;u&&r.push(i);try{l=e.apply(this,r)}catch(o){if(u&&n)throw o;return i(o)}u||(l&&l.then&&"function"===typeof l.then?l.then(a,i):l instanceof Error?i(l):a(l))}function i(e){if(!n){n=!0;for(var o=arguments.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];t(e,...r)}}function a(e){i(null,e)}}(a,t)(...l):i(null,...l)}}(null,...n)},use:function(n){if("function"!==typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const Ku=function e(){const t=Vu(),n=[];let o,r={},i=-1;return a.data=s,a.Parser=void 0,a.Compiler=void 0,a.freeze=function(){if(o)return a;for(;++i<n.length;){const[e,...o]=n[i];if(!1===o[0])continue;!0===o[0]&&(o[0]=void 0);const r=e.call(a,...o);"function"===typeof r&&t.use(r)}return o=!0,i=Number.POSITIVE_INFINITY,a},a.attachers=n,a.use=u,a.parse=function(e){a.freeze();const t=el(e),n=a.Parser;if(Qu("parse",n),Yu(n,"parse"))return new n(String(t),t).parse();return n(String(t),t)},a.stringify=function(e,t){a.freeze();const n=el(t),o=a.Compiler;if(Zu("stringify",o),$u(e),Yu(o,"compile"))return new o(e,n).compile();return o(e,n)},a.run=function(e,n,o){$u(e),a.freeze(),o||"function"!==typeof n||(o=n,n=void 0);if(!o)return new Promise(r);function r(r,i){function a(t,n,a){n=n||e,t?i(t):r?r(n):o(null,n,a)}t.run(e,el(n),a)}r(null,o)},a.runSync=function(e,t){let n,o;return a.run(e,t,r),Ju("runSync","run",o),n;function r(e,t){qu(e),n=t,o=!0}},a.process=function(e,t){if(a.freeze(),Qu("process",a.Parser),Zu("process",a.Compiler),!t)return new Promise(n);function n(n,o){const r=el(e);function i(e,r){e||!r?o(e):n?n(r):t(null,r)}a.run(a.parse(r),r,((e,t,n)=>{if(!e&&t&&n){const r=a.stringify(t,n);void 0===r||null===r||("string"===typeof(o=r)||xu(o)?n.value=r:n.result=r),i(e,n)}else i(e);var o}))}n(null,t)},a.processSync=function(e){let t;a.freeze(),Qu("processSync",a.Parser),Zu("processSync",a.Compiler);const n=el(e);return a.process(n,o),Ju("processSync","process",t),n;function o(e){t=!0,qu(e)}},a;function a(){const t=e();let o=-1;for(;++o<n.length;)t.use(...n[o]);return t.data(Uu(!0,{},r)),t}function s(e,t){return"string"===typeof e?2===arguments.length?(Xu("data",o),r[e]=t,a):Gu.call(r,e)&&r[e]||null:e?(Xu("data",o),r=e,a):r}function u(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];let u;if(Xu("use",o),null===e||void 0===e);else if("function"===typeof e)h(e,...i);else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?d(e):c(e)}return u&&(r.settings=Object.assign(r.settings||{},u)),a;function l(e){if("function"===typeof e)h(e);else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;h(t,...n)}else c(e)}}function c(e){d(e.plugins),e.settings&&(u=Object.assign(u||{},e.settings))}function d(e){let t=-1;if(null===e||void 0===e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){l(e[t])}}}function h(e,t){let o,r=-1;for(;++r<n.length;)if(n[r][0]===e){o=n[r];break}o?(Wu(o[1])&&Wu(t)&&(t=Uu(!0,o[1],t)),o[1]=t):n.push([...arguments])}}}().freeze(),Gu={}.hasOwnProperty;function Yu(e,t){return"function"===typeof e&&e.prototype&&(function(e){let t;for(t in e)if(Gu.call(e,t))return!0;return!1}(e.prototype)||t in e.prototype)}function Qu(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `Parser`")}function Zu(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `Compiler`")}function Xu(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function $u(e){if(!Wu(e)||"string"!==typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function Ju(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function el(e){return function(e){return Boolean(e&&"object"===typeof e&&"message"in e&&"messages"in e)}(e)?e:new Lu(e)}const tl={};function nl(e,t,n){if(function(e){return Boolean(e&&"object"===typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return ol(e.children,t,n)}return Array.isArray(e)?ol(e,t,n):""}function ol(e,t,n){const o=[];let r=-1;for(;++r<e.length;)o[r]=nl(e[r],t,n);return o.join("")}function rl(e,t,n,o){const r=e.length;let i,a=0;if(t=t<0?-t>r?0:r+t:t>r?r:t,n=n>0?n:0,o.length<1e4)i=Array.from(o),i.unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);a<o.length;)i=o.slice(a,a+1e4),i.unshift(t,0),e.splice(...i),a+=1e4,t+=1e4}function il(e,t){return e.length>0?(rl(e,e.length,0,t),e):t}const al={}.hasOwnProperty;function sl(e,t){let n;for(n in t){const o=(al.call(e,n)?e[n]:void 0)||(e[n]={}),r=t[n];let i;if(r)for(i in r){al.call(o,i)||(o[i]=[]);const e=r[i];ul(o[i],Array.isArray(e)?e:e?[e]:[])}}}function ul(e,t){let n=-1;const o=[];for(;++n<t.length;)("after"===t[n].add?e:o).push(t[n]);rl(e,0,0,o)}const ll=bl(/[A-Za-z]/),cl=bl(/[\dA-Za-z]/),dl=bl(/[#-'*+\--9=?A-Z^-~]/);function hl(e){return null!==e&&(e<32||127===e)}const fl=bl(/\d/),pl=bl(/[\dA-Fa-f]/),gl=bl(/[!-/:-@[-`{-~]/);function ml(e){return null!==e&&e<-2}function yl(e){return null!==e&&(e<0||32===e)}function vl(e){return-2===e||-1===e||32===e}const Dl=bl(/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/),Cl=bl(/\s/);function bl(e){return function(t){return null!==t&&e.test(String.fromCharCode(t))}}function wl(e,t,n,o){const r=o?o-1:Number.POSITIVE_INFINITY;let i=0;return function(o){if(vl(o))return e.enter(n),a(o);return t(o)};function a(o){return vl(o)&&i++<r?(e.consume(o),a):(e.exit(n),t(o))}}const El={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,(function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),wl(e,t,"linePrefix")}),(function(t){return e.enter("paragraph"),o(t)}));let n;return t;function o(t){const o=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=o),n=o,r(t)}function r(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):ml(t)?(e.consume(t),e.exit("chunkText"),o):(e.consume(t),r)}}};const Fl={tokenize:function(e){const t=this,n=[];let o,r,i,a=0;return s;function s(o){if(a<n.length){const r=n[a];return t.containerState=r[1],e.attempt(r[0].continuation,u,l)(o)}return l(o)}function u(e){if(a++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,o&&v();const n=t.events.length;let r,i=n;for(;i--;)if("exit"===t.events[i][0]&&"chunkFlow"===t.events[i][1].type){r=t.events[i][1].end;break}y(a);let s=n;for(;s<t.events.length;)t.events[s][1].end=Object.assign({},r),s++;return rl(t.events,i+1,0,t.events.slice(n)),t.events.length=s,l(e)}return s(e)}function l(r){if(a===n.length){if(!o)return h(r);if(o.currentConstruct&&o.currentConstruct.concrete)return p(r);t.interrupt=Boolean(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(kl,c,d)(r)}function c(e){return o&&v(),y(a),h(e)}function d(e){return t.parser.lazy[t.now().line]=a!==n.length,i=t.now().offset,p(e)}function h(n){return t.containerState={},e.attempt(kl,f,p)(n)}function f(e){return a++,n.push([t.currentConstruct,t.containerState]),h(e)}function p(n){return null===n?(o&&v(),y(0),void e.consume(n)):(o=o||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:r,_tokenizer:o}),g(n))}function g(n){return null===n?(m(e.exit("chunkFlow"),!0),y(0),void e.consume(n)):ml(n)?(e.consume(n),m(e.exit("chunkFlow")),a=0,t.interrupt=void 0,s):(e.consume(n),g)}function m(e,n){const s=t.sliceStream(e);if(n&&s.push(null),e.previous=r,r&&(r.next=e),r=e,o.defineSkip(e.start),o.write(s),t.parser.lazy[e.start.line]){let e=o.events.length;for(;e--;)if(o.events[e][1].start.offset<i&&(!o.events[e][1].end||o.events[e][1].end.offset>i))return;const n=t.events.length;let r,s,u=n;for(;u--;)if("exit"===t.events[u][0]&&"chunkFlow"===t.events[u][1].type){if(r){s=t.events[u][1].end;break}r=!0}for(y(a),e=n;e<t.events.length;)t.events[e][1].end=Object.assign({},s),e++;rl(t.events,u+1,0,t.events.slice(n)),t.events.length=e}}function y(o){let r=n.length;for(;r-- >o;){const o=n[r];t.containerState=o[1],o[0].exit.call(t,e)}n.length=o}function v(){o.write([null]),r=void 0,o=void 0,t.containerState._closeFlow=void 0}}},kl={tokenize:function(e,t,n){return wl(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};const xl={tokenize:function(e,t,n){return function(t){return vl(t)?wl(e,o,"linePrefix")(t):o(t)};function o(e){return null===e||ml(e)?t(e):n(e)}},partial:!0};function Al(e){const t={};let n,o,r,i,a,s,u,l=-1;for(;++l<e.length;){for(;l in t;)l=t[l];if(n=e[l],l&&"chunkFlow"===n[1].type&&"listItemPrefix"===e[l-1][1].type&&(s=n[1]._tokenizer.events,r=0,r<s.length&&"lineEndingBlank"===s[r][1].type&&(r+=2),r<s.length&&"content"===s[r][1].type))for(;++r<s.length&&"content"!==s[r][1].type;)"chunkText"===s[r][1].type&&(s[r][1]._isInFirstContentOfListItem=!0,r++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,Sl(e,l)),l=t[l],u=!0);else if(n[1]._container){for(r=l,o=void 0;r--&&(i=e[r],"lineEnding"===i[1].type||"lineEndingBlank"===i[1].type);)"enter"===i[0]&&(o&&(e[o][1].type="lineEndingBlank"),i[1].type="lineEnding",o=r);o&&(n[1].end=Object.assign({},e[o][1].start),a=e.slice(o,l),a.unshift(n),rl(e,o,l-o+1,a))}}return!u}function Sl(e,t){const n=e[t][1],o=e[t][2];let r=t-1;const i=[],a=n._tokenizer||o.parser[n.contentType](n.start),s=a.events,u=[],l={};let c,d,h=-1,f=n,p=0,g=0;const m=[g];for(;f;){for(;e[++r][1]!==f;);i.push(r),f._tokenizer||(c=o.sliceStream(f),f.next||c.push(null),d&&a.defineSkip(f.start),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(c),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=n;++h<s.length;)"exit"===s[h][0]&&"enter"===s[h-1][0]&&s[h][1].type===s[h-1][1].type&&s[h][1].start.line!==s[h][1].end.line&&(g=h+1,m.push(g),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(a.events=[],f?(f._tokenizer=void 0,f.previous=void 0):m.pop(),h=m.length;h--;){const t=s.slice(m[h],m[h+1]),n=i.pop();u.unshift([n,n+t.length-1]),rl(e,n,2,t)}for(h=-1;++h<u.length;)l[p+u[h][0]]=p+u[h][1],p+=u[h][1]-u[h][0]-1;return l}const Il={tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),o(t)};function o(t){return null===t?r(t):ml(t)?e.check(Pl,i,r)(t):(e.consume(t),o)}function r(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function i(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,o}},resolve:function(e){return Al(e),e}},Pl={tokenize:function(e,t,n){const o=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),wl(e,r,"linePrefix")};function r(r){if(null===r||ml(r))return n(r);const i=o.events[o.events.length-1];return!o.parser.constructs.disable.null.includes("codeIndented")&&i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?t(r):e.interrupt(o.parser.constructs.flow,n,t)(r)}},partial:!0};const _l={tokenize:function(e){const t=this,n=e.attempt(xl,(function(o){if(null===o)return void e.consume(o);return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}),e.attempt(this.parser.constructs.flowInitial,o,wl(e,e.attempt(this.parser.constructs.flow,o,e.attempt(Il,o)),"linePrefix")));return n;function o(o){if(null!==o)return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(o)}}};const Tl={resolveAll:Bl()},Nl=Rl("string"),Ml=Rl("text");function Rl(e){return{tokenize:function(t){const n=this,o=this.parser.constructs[e],r=t.attempt(o,i,a);return i;function i(e){return u(e)?r(e):a(e)}function a(e){if(null!==e)return t.enter("data"),t.consume(e),s;t.consume(e)}function s(e){return u(e)?(t.exit("data"),r(e)):(t.consume(e),s)}function u(e){if(null===e)return!0;const t=o[e];let r=-1;if(t)for(;++r<t.length;){const e=t[r];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}},resolveAll:Bl("text"===e?Ol:void 0)}}function Bl(e){return function(t,n){let o,r=-1;for(;++r<=t.length;)void 0===o?t[r]&&"data"===t[r][1].type&&(o=r,r++):t[r]&&"data"===t[r][1].type||(r!==o+2&&(t[o][1].end=t[r-1][1].end,t.splice(o+2,r-o-2),r=o+2),o=void 0);return e?e(t,n):t}}function Ol(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const o=e[n-1][1],r=t.sliceStream(o);let i,a=r.length,s=-1,u=0;for(;a--;){const e=r[a];if("string"===typeof e){for(s=e.length;32===e.charCodeAt(s-1);)u++,s--;if(s)break;s=-1}else if(-2===e)i=!0,u++;else if(-1!==e){a++;break}}if(u){const r={type:n===e.length||i||u<2?"lineSuffix":"hardBreakTrailing",start:{line:o.end.line,column:o.end.column-u,offset:o.end.offset-u,_index:o.start._index+a,_bufferIndex:a?s:o.start._bufferIndex+s},end:Object.assign({},o.end)};o.end=Object.assign({},r.start),o.start.offset===o.end.offset?Object.assign(o,r):(e.splice(n,0,["enter",r,t],["exit",r,t]),n+=2)}n++}return e}function Ll(e,t,n){const o=[];let r=-1;for(;++r<e.length;){const i=e[r].resolveAll;i&&!o.includes(i)&&(t=i(t,n),o.push(i))}return t}function zl(e,t,n){let o=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const r={},i=[];let a=[],s=[],u=!0;const l={consume:function(e){ml(e)?(o.line++,o.column=1,o.offset+=-3===e?2:1,C()):-1!==e&&(o.column++,o.offset++);o._bufferIndex<0?o._index++:(o._bufferIndex++,o._bufferIndex===a[o._index].length&&(o._bufferIndex=-1,o._index++));c.previous=e,u=!0},enter:function(e,t){const n=t||{};return n.type=e,n.start=p(),c.events.push(["enter",n,c]),s.push(n),n},exit:function(e){const t=s.pop();return t.end=p(),c.events.push(["exit",t,c]),t},attempt:v((function(e,t){D(e,t.from)})),check:v(y),interrupt:v(y,{interrupt:!0})},c={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:f,sliceSerialize:function(e,t){return function(e,t){let n=-1;const o=[];let r;for(;++n<e.length;){const i=e[n];let a;if("string"===typeof i)a=i;else switch(i){case-5:a="\r";break;case-4:a="\n";break;case-3:a="\r\n";break;case-2:a=t?" ":"\t";break;case-1:if(!t&&r)continue;a=" ";break;default:a=String.fromCharCode(i)}r=-2===i,o.push(a)}return o.join("")}(f(e),t)},now:p,defineSkip:function(e){r[e.line]=e.column,C()},write:function(e){if(a=il(a,e),g(),null!==a[a.length-1])return[];return D(t,0),c.events=Ll(i,c.events,c),c.events}};let d,h=t.tokenize.call(c,l);return t.resolveAll&&i.push(t),c;function f(e){return function(e,t){const n=t.start._index,o=t.start._bufferIndex,r=t.end._index,i=t.end._bufferIndex;let a;if(n===r)a=[e[n].slice(o,i)];else{if(a=e.slice(n,r),o>-1){const e=a[0];"string"===typeof e?a[0]=e.slice(o):a.shift()}i>0&&a.push(e[r].slice(0,i))}return a}(a,e)}function p(){const{line:e,column:t,offset:n,_index:r,_bufferIndex:i}=o;return{line:e,column:t,offset:n,_index:r,_bufferIndex:i}}function g(){let e;for(;o._index<a.length;){const t=a[o._index];if("string"===typeof t)for(e=o._index,o._bufferIndex<0&&(o._bufferIndex=0);o._index===e&&o._bufferIndex<t.length;)m(t.charCodeAt(o._bufferIndex));else m(t)}}function m(e){u=void 0,d=e,h=h(e)}function y(e,t){t.restore()}function v(e,t){return function(n,r,i){let a,d,h,f;return Array.isArray(n)?g(n):"tokenize"in n?g([n]):function(e){return t;function t(t){const n=null!==t&&e[t],o=null!==t&&e.null;return g([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(o)?o:o?[o]:[]])(t)}}(n);function g(e){return a=e,d=0,0===e.length?i:m(e[d])}function m(e){return function(n){f=function(){const e=p(),t=c.previous,n=c.currentConstruct,r=c.events.length,i=Array.from(s);return{restore:a,from:r};function a(){o=e,c.previous=t,c.currentConstruct=n,c.events.length=r,s=i,C()}}(),h=e,e.partial||(c.currentConstruct=e);if(e.name&&c.parser.constructs.disable.null.includes(e.name))return v(n);return e.tokenize.call(t?Object.assign(Object.create(c),t):c,l,y,v)(n)}}function y(t){return u=!0,e(h,f),r}function v(e){return u=!0,f.restore(),++d<a.length?m(a[d]):i}}}function D(e,t){e.resolveAll&&!i.includes(e)&&i.push(e),e.resolve&&rl(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function C(){o.line in r&&o.column<2&&(o.column=r[o.line],o.offset+=r[o.line]-1)}}const jl={name:"thematicBreak",tokenize:function(e,t,n){let o,r=0;return function(t){return e.enter("thematicBreak"),function(e){return o=e,i(e)}(t)};function i(i){return i===o?(e.enter("thematicBreakSequence"),a(i)):r>=3&&(null===i||ml(i))?(e.exit("thematicBreak"),t(i)):n(i)}function a(t){return t===o?(e.consume(t),r++,a):(e.exit("thematicBreakSequence"),vl(t)?wl(e,i,"whitespace")(t):i(t))}}};const Hl={name:"list",tokenize:function(e,t,n){const o=this,r=o.events[o.events.length-1];let i=r&&"linePrefix"===r[1].type?r[2].sliceSerialize(r[1],!0).length:0,a=0;return function(t){const r=o.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===r?!o.containerState.marker||t===o.containerState.marker:fl(t)){if(o.containerState.type||(o.containerState.type=r,e.enter(r,{_container:!0})),"listUnordered"===r)return e.enter("listItemPrefix"),42===t||45===t?e.check(jl,n,u)(t):u(t);if(!o.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),s(t)}return n(t)};function s(t){return fl(t)&&++a<10?(e.consume(t),s):(!o.interrupt||a<2)&&(o.containerState.marker?t===o.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),u(t)):n(t)}function u(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),o.containerState.marker=o.containerState.marker||t,e.check(xl,o.interrupt?n:l,e.attempt(ql,d,c))}function l(e){return o.containerState.initialBlankLine=!0,i++,d(e)}function c(t){return vl(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),d):n(t)}function d(n){return o.containerState.size=i+o.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}},continuation:{tokenize:function(e,t,n){const o=this;return o.containerState._closeFlow=void 0,e.check(xl,r,i);function r(n){return o.containerState.furtherBlankLines=o.containerState.furtherBlankLines||o.containerState.initialBlankLine,wl(e,t,"listItemIndent",o.containerState.size+1)(n)}function i(n){return o.containerState.furtherBlankLines||!vl(n)?(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,a(n)):(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,e.attempt(Ul,t,a)(n))}function a(r){return o.containerState._closeFlow=!0,o.interrupt=void 0,wl(e,e.attempt(Hl,t,n),"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(r)}}},exit:function(e){e.exit(this.containerState.type)}},ql={tokenize:function(e,t,n){const o=this;return wl(e,(function(e){const r=o.events[o.events.length-1];return!vl(e)&&r&&"listItemPrefixWhitespace"===r[1].type?t(e):n(e)}),"listItemPrefixWhitespace",o.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},Ul={tokenize:function(e,t,n){const o=this;return wl(e,(function(e){const r=o.events[o.events.length-1];return r&&"listItemIndent"===r[1].type&&r[2].sliceSerialize(r[1],!0).length===o.containerState.size?t(e):n(e)}),"listItemIndent",o.containerState.size+1)},partial:!0};const Wl={name:"blockQuote",tokenize:function(e,t,n){const o=this;return function(t){if(62===t){const n=o.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),r}return n(t)};function r(n){return vl(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){const o=this;return function(t){if(vl(t))return wl(e,r,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return r(t)};function r(o){return e.attempt(Wl,t,n)(o)}}},exit:function(e){e.exit("blockQuote")}};function Vl(e,t,n,o,r,i,a,s,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return function(t){if(60===t)return e.enter(o),e.enter(r),e.enter(i),e.consume(t),e.exit(i),d;if(null===t||32===t||41===t||hl(t))return n(t);return e.enter(o),e.enter(a),e.enter(s),e.enter("chunkString",{contentType:"string"}),p(t)};function d(n){return 62===n?(e.enter(i),e.consume(n),e.exit(i),e.exit(r),e.exit(o),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),h(n))}function h(t){return 62===t?(e.exit("chunkString"),e.exit(s),d(t)):null===t||60===t||ml(t)?n(t):(e.consume(t),92===t?f:h)}function f(t){return 60===t||62===t||92===t?(e.consume(t),h):h(t)}function p(r){return c||null!==r&&41!==r&&!yl(r)?c<l&&40===r?(e.consume(r),c++,p):41===r?(e.consume(r),c--,p):null===r||32===r||40===r||hl(r)?n(r):(e.consume(r),92===r?g:p):(e.exit("chunkString"),e.exit(s),e.exit(a),e.exit(o),t(r))}function g(t){return 40===t||41===t||92===t?(e.consume(t),p):p(t)}}function Kl(e,t,n,o,r,i){const a=this;let s,u=0;return function(t){return e.enter(o),e.enter(r),e.consume(t),e.exit(r),e.enter(i),l};function l(d){return u>999||null===d||91===d||93===d&&!s||94===d&&!u&&"_hiddenFootnoteSupport"in a.parser.constructs?n(d):93===d?(e.exit(i),e.enter(r),e.consume(d),e.exit(r),e.exit(o),t):ml(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),l):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(t){return null===t||91===t||93===t||ml(t)||u++>999?(e.exit("chunkString"),l(t)):(e.consume(t),s||(s=!vl(t)),92===t?d:c)}function d(t){return 91===t||92===t||93===t?(e.consume(t),u++,c):c(t)}}function Gl(e,t,n,o,r,i){let a;return function(t){if(34===t||39===t||40===t)return e.enter(o),e.enter(r),e.consume(t),e.exit(r),a=40===t?41:t,s;return n(t)};function s(n){return n===a?(e.enter(r),e.consume(n),e.exit(r),e.exit(o),t):(e.enter(i),u(n))}function u(t){return t===a?(e.exit(i),s(a)):null===t?n(t):ml(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),wl(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),l(t))}function l(t){return t===a||null===t||ml(t)?(e.exit("chunkString"),u(t)):(e.consume(t),92===t?c:l)}function c(t){return t===a||92===t?(e.consume(t),l):l(t)}}function Yl(e,t){let n;return function o(r){if(ml(r))return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),n=!0,o;if(vl(r))return wl(e,o,n?"linePrefix":"lineSuffix")(r);return t(r)}}function Ql(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Zl={name:"definition",tokenize:function(e,t,n){const o=this;let r;return function(t){return e.enter("definition"),function(t){return Kl.call(o,e,i,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function i(t){return r=Ql(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),a):n(t)}function a(t){return yl(t)?Yl(e,s)(t):s(t)}function s(t){return Vl(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function u(t){return e.attempt(Xl,l,l)(t)}function l(t){return vl(t)?wl(e,c,"whitespace")(t):c(t)}function c(i){return null===i||ml(i)?(e.exit("definition"),o.parser.defined.push(r),t(i)):n(i)}}},Xl={tokenize:function(e,t,n){return function(t){return yl(t)?Yl(e,o)(t):n(t)};function o(t){return Gl(e,r,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function r(t){return vl(t)?wl(e,i,"whitespace")(t):i(t)}function i(e){return null===e||ml(e)?t(e):n(e)}},partial:!0};const $l={name:"codeIndented",tokenize:function(e,t,n){const o=this;return function(t){return e.enter("codeIndented"),wl(e,r,"linePrefix",5)(t)};function r(e){const t=o.events[o.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?i(e):n(e)}function i(t){return null===t?s(t):ml(t)?e.attempt(Jl,i,s)(t):(e.enter("codeFlowValue"),a(t))}function a(t){return null===t||ml(t)?(e.exit("codeFlowValue"),i(t)):(e.consume(t),a)}function s(n){return e.exit("codeIndented"),t(n)}}},Jl={tokenize:function(e,t,n){const o=this;return r;function r(t){return o.parser.lazy[o.now().line]?n(t):ml(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r):wl(e,i,"linePrefix",5)(t)}function i(e){const i=o.events[o.events.length-1];return i&&"linePrefix"===i[1].type&&i[2].sliceSerialize(i[1],!0).length>=4?t(e):ml(e)?r(e):n(e)}},partial:!0};const ec={name:"headingAtx",tokenize:function(e,t,n){let o=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),r(t)}(t)};function r(t){return 35===t&&o++<6?(e.consume(t),r):null===t||yl(t)?(e.exit("atxHeadingSequence"),i(t)):n(t)}function i(n){return 35===n?(e.enter("atxHeadingSequence"),a(n)):null===n||ml(n)?(e.exit("atxHeading"),t(n)):vl(n)?wl(e,i,"whitespace")(n):(e.enter("atxHeadingText"),s(n))}function a(t){return 35===t?(e.consume(t),a):(e.exit("atxHeadingSequence"),i(t))}function s(t){return null===t||35===t||yl(t)?(e.exit("atxHeadingText"),i(t)):(e.consume(t),s)}},resolve:function(e,t){let n,o,r=e.length-2,i=3;"whitespace"===e[i][1].type&&(i+=2);r-2>i&&"whitespace"===e[r][1].type&&(r-=2);"atxHeadingSequence"===e[r][1].type&&(i===r-1||r-4>i&&"whitespace"===e[r-2][1].type)&&(r-=i+1===r?2:4);r>i&&(n={type:"atxHeadingText",start:e[i][1].start,end:e[r][1].end},o={type:"chunkText",start:e[i][1].start,end:e[r][1].end,contentType:"text"},rl(e,i,r-i+1,[["enter",n,t],["enter",o,t],["exit",o,t],["exit",n,t]]));return e}};const tc={name:"setextUnderline",tokenize:function(e,t,n){const o=this;let r;return function(t){let a,s=o.events.length;for(;s--;)if("lineEnding"!==o.events[s][1].type&&"linePrefix"!==o.events[s][1].type&&"content"!==o.events[s][1].type){a="paragraph"===o.events[s][1].type;break}if(!o.parser.lazy[o.now().line]&&(o.interrupt||a))return e.enter("setextHeadingLine"),r=t,function(t){return e.enter("setextHeadingLineSequence"),i(t)}(t);return n(t)};function i(t){return t===r?(e.consume(t),i):(e.exit("setextHeadingLineSequence"),vl(t)?wl(e,a,"lineSuffix")(t):a(t))}function a(o){return null===o||ml(o)?(e.exit("setextHeadingLine"),t(o)):n(o)}},resolveTo:function(e,t){let n,o,r,i=e.length;for(;i--;)if("enter"===e[i][0]){if("content"===e[i][1].type){n=i;break}"paragraph"===e[i][1].type&&(o=i)}else"content"===e[i][1].type&&e.splice(i,1),r||"definition"!==e[i][1].type||(r=i);const a={type:"setextHeading",start:Object.assign({},e[o][1].start),end:Object.assign({},e[e.length-1][1].end)};e[o][1].type="setextHeadingText",r?(e.splice(o,0,["enter",a,t]),e.splice(r+1,0,["exit",e[n][1],t]),e[n][1].end=Object.assign({},e[r][1].end)):e[n][1]=a;return e.push(["exit",a,t]),e}};const nc=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],oc=["pre","script","style","textarea"],rc={name:"htmlFlow",tokenize:function(e,t,n){const o=this;let r,i,a,s,u;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),l}(t)};function l(s){return 33===s?(e.consume(s),c):47===s?(e.consume(s),i=!0,f):63===s?(e.consume(s),r=3,o.interrupt?t:M):ll(s)?(e.consume(s),a=String.fromCharCode(s),p):n(s)}function c(i){return 45===i?(e.consume(i),r=2,d):91===i?(e.consume(i),r=5,s=0,h):ll(i)?(e.consume(i),r=4,o.interrupt?t:M):n(i)}function d(r){return 45===r?(e.consume(r),o.interrupt?t:M):n(r)}function h(r){const i="CDATA[";return r===i.charCodeAt(s++)?(e.consume(r),6===s?o.interrupt?t:x:h):n(r)}function f(t){return ll(t)?(e.consume(t),a=String.fromCharCode(t),p):n(t)}function p(s){if(null===s||47===s||62===s||yl(s)){const u=47===s,l=a.toLowerCase();return u||i||!oc.includes(l)?nc.includes(a.toLowerCase())?(r=6,u?(e.consume(s),g):o.interrupt?t(s):x(s)):(r=7,o.interrupt&&!o.parser.lazy[o.now().line]?n(s):i?m(s):y(s)):(r=1,o.interrupt?t(s):x(s))}return 45===s||cl(s)?(e.consume(s),a+=String.fromCharCode(s),p):n(s)}function g(r){return 62===r?(e.consume(r),o.interrupt?t:x):n(r)}function m(t){return vl(t)?(e.consume(t),m):F(t)}function y(t){return 47===t?(e.consume(t),F):58===t||95===t||ll(t)?(e.consume(t),v):vl(t)?(e.consume(t),y):F(t)}function v(t){return 45===t||46===t||58===t||95===t||cl(t)?(e.consume(t),v):D(t)}function D(t){return 61===t?(e.consume(t),C):vl(t)?(e.consume(t),D):y(t)}function C(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),u=t,b):vl(t)?(e.consume(t),C):w(t)}function b(t){return t===u?(e.consume(t),u=null,E):null===t||ml(t)?n(t):(e.consume(t),b)}function w(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||yl(t)?D(t):(e.consume(t),w)}function E(e){return 47===e||62===e||vl(e)?y(e):n(e)}function F(t){return 62===t?(e.consume(t),k):n(t)}function k(t){return null===t||ml(t)?x(t):vl(t)?(e.consume(t),k):n(t)}function x(t){return 45===t&&2===r?(e.consume(t),P):60===t&&1===r?(e.consume(t),_):62===t&&4===r?(e.consume(t),R):63===t&&3===r?(e.consume(t),M):93===t&&5===r?(e.consume(t),N):!ml(t)||6!==r&&7!==r?null===t||ml(t)?(e.exit("htmlFlowData"),A(t)):(e.consume(t),x):(e.exit("htmlFlowData"),e.check(ic,B,A)(t))}function A(t){return e.check(ac,S,B)(t)}function S(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),I}function I(t){return null===t||ml(t)?A(t):(e.enter("htmlFlowData"),x(t))}function P(t){return 45===t?(e.consume(t),M):x(t)}function _(t){return 47===t?(e.consume(t),a="",T):x(t)}function T(t){if(62===t){const n=a.toLowerCase();return oc.includes(n)?(e.consume(t),R):x(t)}return ll(t)&&a.length<8?(e.consume(t),a+=String.fromCharCode(t),T):x(t)}function N(t){return 93===t?(e.consume(t),M):x(t)}function M(t){return 62===t?(e.consume(t),R):45===t&&2===r?(e.consume(t),M):x(t)}function R(t){return null===t||ml(t)?(e.exit("htmlFlowData"),B(t)):(e.consume(t),R)}function B(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},concrete:!0},ic={tokenize:function(e,t,n){return function(o){return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),e.attempt(xl,t,n)}},partial:!0},ac={tokenize:function(e,t,n){const o=this;return function(t){if(ml(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r;return n(t)};function r(e){return o.parser.lazy[o.now().line]?n(e):t(e)}},partial:!0};const sc={tokenize:function(e,t,n){const o=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r};function r(e){return o.parser.lazy[o.now().line]?n(e):t(e)}},partial:!0},uc={name:"codeFenced",tokenize:function(e,t,n){const o=this,r={tokenize:function(e,t,n){let r=0;return a;function a(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),u}function u(t){return e.enter("codeFencedFence"),vl(t)?wl(e,l,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):l(t)}function l(t){return t===i?(e.enter("codeFencedFenceSequence"),c(t)):n(t)}function c(t){return t===i?(r++,e.consume(t),c):r>=s?(e.exit("codeFencedFenceSequence"),vl(t)?wl(e,d,"whitespace")(t):d(t)):n(t)}function d(o){return null===o||ml(o)?(e.exit("codeFencedFence"),t(o)):n(o)}},partial:!0};let i,a=0,s=0;return function(t){return function(t){const n=o.events[o.events.length-1];return a=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,i=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(t)}(t)};function u(t){return t===i?(s++,e.consume(t),u):s<3?n(t):(e.exit("codeFencedFenceSequence"),vl(t)?wl(e,l,"whitespace")(t):l(t))}function l(n){return null===n||ml(n)?(e.exit("codeFencedFence"),o.interrupt?t(n):e.check(sc,f,v)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),c(n))}function c(t){return null===t||ml(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),l(t)):vl(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),wl(e,d,"whitespace")(t)):96===t&&t===i?n(t):(e.consume(t),c)}function d(t){return null===t||ml(t)?l(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return null===t||ml(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),l(t)):96===t&&t===i?n(t):(e.consume(t),h)}function f(t){return e.attempt(r,v,p)(t)}function p(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),g}function g(t){return a>0&&vl(t)?wl(e,m,"linePrefix",a+1)(t):m(t)}function m(t){return null===t||ml(t)?e.check(sc,f,v)(t):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||ml(t)?(e.exit("codeFlowValue"),m(t)):(e.consume(t),y)}function v(n){return e.exit("codeFenced"),t(n)}},concrete:!0};const lc=document.createElement("i");function cc(e){const t="&"+e+";";lc.innerHTML=t;const n=lc.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}const dc={name:"characterReference",tokenize:function(e,t,n){const o=this;let r,i,a=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),s};function s(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),r=31,i=cl,l(t))}function u(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),r=6,i=pl,l):(e.enter("characterReferenceValue"),r=7,i=fl,l(t))}function l(s){if(59===s&&a){const r=e.exit("characterReferenceValue");return i!==cl||cc(o.sliceSerialize(r))?(e.enter("characterReferenceMarker"),e.consume(s),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(s)}return i(s)&&a++<r?(e.consume(s),l):n(s)}}};const hc={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),o};function o(o){return gl(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}};const fc={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),wl(e,t,"linePrefix")}}};const pc={name:"labelEnd",tokenize:function(e,t,n){const o=this;let r,i,a=o.events.length;for(;a--;)if(("labelImage"===o.events[a][1].type||"labelLink"===o.events[a][1].type)&&!o.events[a][1]._balanced){r=o.events[a][1];break}return function(t){if(!r)return n(t);if(r._inactive)return c(t);return i=o.parser.defined.includes(Ql(o.sliceSerialize({start:r.end,end:o.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),s};function s(t){return 40===t?e.attempt(gc,l,i?l:c)(t):91===t?e.attempt(mc,l,i?u:c)(t):i?l(t):c(t)}function u(t){return e.attempt(yc,l,c)(t)}function l(e){return t(e)}function c(e){return r._balanced=!0,n(e)}},resolveTo:function(e,t){let n,o,r,i,a=e.length,s=0;for(;a--;)if(n=e[a][1],o){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[a][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(r){if("enter"===e[a][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(o=a,"labelLink"!==n.type)){s=2;break}}else"labelEnd"===n.type&&(r=a);const u={type:"labelLink"===e[o][1].type?"link":"image",start:Object.assign({},e[o][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[o][1].start),end:Object.assign({},e[r][1].end)},c={type:"labelText",start:Object.assign({},e[o+s+2][1].end),end:Object.assign({},e[r-2][1].start)};return i=[["enter",u,t],["enter",l,t]],i=il(i,e.slice(o+1,o+s+3)),i=il(i,[["enter",c,t]]),i=il(i,Ll(t.parser.constructs.insideSpan.null,e.slice(o+s+4,r-3),t)),i=il(i,[["exit",c,t],e[r-2],e[r-1],["exit",l,t]]),i=il(i,e.slice(r+1)),i=il(i,[["exit",u,t]]),rl(e,o,e.length,i),e},resolveAll:function(e){let t=-1;for(;++t<e.length;){const n=e[t][1];"labelImage"!==n.type&&"labelLink"!==n.type&&"labelEnd"!==n.type||(e.splice(t+1,"labelImage"===n.type?4:2),n.type="data",t++)}return e}},gc={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),o};function o(t){return yl(t)?Yl(e,r)(t):r(t)}function r(t){return 41===t?l(t):Vl(e,i,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function i(t){return yl(t)?Yl(e,s)(t):l(t)}function a(e){return n(e)}function s(t){return 34===t||39===t||40===t?Gl(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):l(t)}function u(t){return yl(t)?Yl(e,l)(t):l(t)}function l(o){return 41===o?(e.enter("resourceMarker"),e.consume(o),e.exit("resourceMarker"),e.exit("resource"),t):n(o)}}},mc={tokenize:function(e,t,n){const o=this;return function(t){return Kl.call(o,e,r,i,"reference","referenceMarker","referenceString")(t)};function r(e){return o.parser.defined.includes(Ql(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function i(e){return n(e)}}},yc={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),o};function o(o){return 93===o?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}};const vc={name:"labelStartImage",tokenize:function(e,t,n){const o=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),r};function r(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),i):n(t)}function i(e){return 94===e&&"_hiddenFootnoteSupport"in o.parser.constructs?n(e):t(e)}},resolveAll:pc.resolveAll};function Dc(e){return null===e||yl(e)||Cl(e)?1:Dl(e)?2:void 0}const Cc={name:"attention",tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,o=this.previous,r=Dc(o);let i;return function(t){return i=t,e.enter("attentionSequence"),a(t)};function a(s){if(s===i)return e.consume(s),a;const u=e.exit("attentionSequence"),l=Dc(s),c=!l||2===l&&r||n.includes(s),d=!r||2===r&&l||n.includes(o);return u._open=Boolean(42===i?c:c&&(r||!d)),u._close=Boolean(42===i?d:d&&(l||!c)),t(s)}},resolveAll:function(e,t){let n,o,r,i,a,s,u,l,c=-1;for(;++c<e.length;)if("enter"===e[c][0]&&"attentionSequence"===e[c][1].type&&e[c][1]._close)for(n=c;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[c][1]).charCodeAt(0)){if((e[n][1]._close||e[c][1]._open)&&(e[c][1].end.offset-e[c][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[c][1].end.offset-e[c][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[c][1].end.offset-e[c][1].start.offset>1?2:1;const d=Object.assign({},e[n][1].end),h=Object.assign({},e[c][1].start);bc(d,-s),bc(h,s),i={type:s>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},e[n][1].end)},a={type:s>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[c][1].start),end:h},r={type:s>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[c][1].start)},o={type:s>1?"strong":"emphasis",start:Object.assign({},i.start),end:Object.assign({},a.end)},e[n][1].end=Object.assign({},i.start),e[c][1].start=Object.assign({},a.end),u=[],e[n][1].end.offset-e[n][1].start.offset&&(u=il(u,[["enter",e[n][1],t],["exit",e[n][1],t]])),u=il(u,[["enter",o,t],["enter",i,t],["exit",i,t],["enter",r,t]]),u=il(u,Ll(t.parser.constructs.insideSpan.null,e.slice(n+1,c),t)),u=il(u,[["exit",r,t],["enter",a,t],["exit",a,t],["exit",o,t]]),e[c][1].end.offset-e[c][1].start.offset?(l=2,u=il(u,[["enter",e[c][1],t],["exit",e[c][1],t]])):l=0,rl(e,n-1,c-n+3,u),c=n+u.length-l-2;break}c=-1;for(;++c<e.length;)"attentionSequence"===e[c][1].type&&(e[c][1].type="data");return e}};function bc(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const wc={name:"autolink",tokenize:function(e,t,n){let o=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),r};function r(t){return ll(t)?(e.consume(t),i):u(t)}function i(e){return 43===e||45===e||46===e||cl(e)?(o=1,a(e)):u(e)}function a(t){return 58===t?(e.consume(t),o=0,s):(43===t||45===t||46===t||cl(t))&&o++<32?(e.consume(t),a):(o=0,u(t))}function s(o){return 62===o?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(o),e.exit("autolinkMarker"),e.exit("autolink"),t):null===o||32===o||60===o||hl(o)?n(o):(e.consume(o),s)}function u(t){return 64===t?(e.consume(t),l):dl(t)?(e.consume(t),u):n(t)}function l(e){return cl(e)?c(e):n(e)}function c(n){return 46===n?(e.consume(n),o=0,l):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):d(n)}function d(t){if((45===t||cl(t))&&o++<63){const n=45===t?d:c;return e.consume(t),n}return n(t)}}};const Ec={name:"htmlText",tokenize:function(e,t,n){const o=this;let r,i,a;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),s};function s(t){return 33===t?(e.consume(t),u):47===t?(e.consume(t),C):63===t?(e.consume(t),v):ll(t)?(e.consume(t),E):n(t)}function u(t){return 45===t?(e.consume(t),l):91===t?(e.consume(t),i=0,f):ll(t)?(e.consume(t),y):n(t)}function l(t){return 45===t?(e.consume(t),h):n(t)}function c(t){return null===t?n(t):45===t?(e.consume(t),d):ml(t)?(a=c,T(t)):(e.consume(t),c)}function d(t){return 45===t?(e.consume(t),h):c(t)}function h(e){return 62===e?_(e):45===e?d(e):c(e)}function f(t){const o="CDATA[";return t===o.charCodeAt(i++)?(e.consume(t),6===i?p:f):n(t)}function p(t){return null===t?n(t):93===t?(e.consume(t),g):ml(t)?(a=p,T(t)):(e.consume(t),p)}function g(t){return 93===t?(e.consume(t),m):p(t)}function m(t){return 62===t?_(t):93===t?(e.consume(t),m):p(t)}function y(t){return null===t||62===t?_(t):ml(t)?(a=y,T(t)):(e.consume(t),y)}function v(t){return null===t?n(t):63===t?(e.consume(t),D):ml(t)?(a=v,T(t)):(e.consume(t),v)}function D(e){return 62===e?_(e):v(e)}function C(t){return ll(t)?(e.consume(t),b):n(t)}function b(t){return 45===t||cl(t)?(e.consume(t),b):w(t)}function w(t){return ml(t)?(a=w,T(t)):vl(t)?(e.consume(t),w):_(t)}function E(t){return 45===t||cl(t)?(e.consume(t),E):47===t||62===t||yl(t)?F(t):n(t)}function F(t){return 47===t?(e.consume(t),_):58===t||95===t||ll(t)?(e.consume(t),k):ml(t)?(a=F,T(t)):vl(t)?(e.consume(t),F):_(t)}function k(t){return 45===t||46===t||58===t||95===t||cl(t)?(e.consume(t),k):x(t)}function x(t){return 61===t?(e.consume(t),A):ml(t)?(a=x,T(t)):vl(t)?(e.consume(t),x):F(t)}function A(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),r=t,S):ml(t)?(a=A,T(t)):vl(t)?(e.consume(t),A):(e.consume(t),I)}function S(t){return t===r?(e.consume(t),r=void 0,P):null===t?n(t):ml(t)?(a=S,T(t)):(e.consume(t),S)}function I(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||yl(t)?F(t):(e.consume(t),I)}function P(e){return 47===e||62===e||yl(e)?F(e):n(e)}function _(o){return 62===o?(e.consume(o),e.exit("htmlTextData"),e.exit("htmlText"),t):n(o)}function T(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),N}function N(t){return vl(t)?wl(e,M,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):M(t)}function M(t){return e.enter("htmlTextData"),a(t)}}};const Fc={name:"labelStartLink",tokenize:function(e,t,n){const o=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),r};function r(e){return 94===e&&"_hiddenFootnoteSupport"in o.parser.constructs?n(e):t(e)}},resolveAll:pc.resolveAll};const kc={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),o};function o(o){return ml(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}};const xc={name:"codeText",tokenize:function(e,t,n){let o,r,i=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),a(t)};function a(t){return 96===t?(e.consume(t),i++,a):(e.exit("codeTextSequence"),s(t))}function s(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),s):96===t?(r=e.enter("codeTextSequence"),o=0,l(t)):ml(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):(e.enter("codeTextData"),u(t))}function u(t){return null===t||32===t||96===t||ml(t)?(e.exit("codeTextData"),s(t)):(e.consume(t),u)}function l(n){return 96===n?(e.consume(n),o++,l):o===i?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(r.type="codeTextData",u(n))}},resolve:function(e){let t,n,o=e.length-4,r=3;if(("lineEnding"===e[r][1].type||"space"===e[r][1].type)&&("lineEnding"===e[o][1].type||"space"===e[o][1].type))for(t=r;++t<o;)if("codeTextData"===e[t][1].type){e[r][1].type="codeTextPadding",e[o][1].type="codeTextPadding",r+=2,o-=2;break}t=r-1,o++;for(;++t<=o;)void 0===n?t!==o&&"lineEnding"!==e[t][1].type&&(n=t):t!==o&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),o-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}};const Ac={42:Hl,43:Hl,45:Hl,48:Hl,49:Hl,50:Hl,51:Hl,52:Hl,53:Hl,54:Hl,55:Hl,56:Hl,57:Hl,62:Wl},Sc={91:Zl},Ic={[-2]:$l,[-1]:$l,32:$l},Pc={35:ec,42:jl,45:[tc,jl],60:rc,61:tc,95:jl,96:uc,126:uc},_c={38:dc,92:hc},Tc={[-5]:fc,[-4]:fc,[-3]:fc,33:vc,38:dc,42:Cc,60:[wc,Ec],91:Fc,92:[kc,hc],93:pc,95:Cc,96:xc},Nc={null:[Cc,Tl]},Mc={null:[42,95]},Rc={null:[]};function Bc(t){const n=function(e){const t={};let n=-1;for(;++n<e.length;)sl(t,e[n]);return t}([e,...(t||{}).extensions||[]]),o={defined:[],lazy:{},constructs:n,content:r(El),document:r(Fl),flow:r(_l),string:r(Nl),text:r(Ml)};return o;function r(e){return function(t){return zl(o,e,t)}}}const Oc=/[\0\t\n\r]/g;function Lc(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535===(65535&n)||65534===(65535&n)||n>1114111?"\ufffd":String.fromCharCode(n)}const zc=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function jc(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return Lc(n.slice(t?2:1),t?16:10)}return cc(n)||e}const Hc={}.hasOwnProperty,qc=function(e,t,n){return"string"!==typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ne),autolinkProtocol:A,autolinkEmail:A,atxHeading:s($),blockQuote:s(G),characterEscape:A,characterReference:A,codeFenced:s(Y),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:s(Y,u),codeText:s(Q,u),codeTextData:A,data:A,codeFlowValue:A,definition:s(Z),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:s(X),hardBreakEscape:s(J),hardBreakTrailing:s(J),htmlFlow:s(ee,u),htmlFlowData:A,htmlText:s(ee,u),htmlTextData:A,image:s(te),label:u,link:s(ne),listItem:s(re),listItemValue:p,listOrdered:s(oe,f),listUnordered:s(oe),paragraph:s(ie),reference:H,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:s($),strong:s(ae),thematicBreak:s(ue)},exit:{atxHeading:c(),atxHeadingSequence:E,autolink:c(),autolinkEmail:K,autolinkProtocol:V,blockQuote:c(),characterEscapeValue:S,characterReferenceMarkerHexadecimal:U,characterReferenceMarkerNumeric:U,characterReferenceValue:W,codeFenced:c(v),codeFencedFence:y,codeFencedFenceInfo:g,codeFencedFenceMeta:m,codeFlowValue:S,codeIndented:c(D),codeText:c(N),codeTextData:S,data:S,definition:c(),definitionDestinationString:w,definitionLabelString:C,definitionTitleString:b,emphasis:c(),hardBreakEscape:c(P),hardBreakTrailing:c(P),htmlFlow:c(_),htmlFlowData:S,htmlText:c(T),htmlTextData:S,image:c(R),label:O,labelText:B,lineEnding:I,link:c(M),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:q,resourceDestinationString:L,resourceTitleString:z,resource:j,setextHeading:c(x),setextHeadingLineSequence:k,setextHeadingText:F,strong:c(),thematicBreak:c()}};Wc(t,(e||{}).mdastExtensions||[]);const n={};return o;function o(e){let n={type:"root",children:[]};const o={stack:[n],tokenStack:[],config:t,enter:l,exit:d,buffer:u,resume:h,setData:i,getData:a},s=[];let c=-1;for(;++c<e.length;)if("listOrdered"===e[c][1].type||"listUnordered"===e[c][1].type)if("enter"===e[c][0])s.push(c);else{c=r(e,s.pop(),c)}for(c=-1;++c<e.length;){const n=t[e[c][0]];Hc.call(n,e[c][1].type)&&n[e[c][1].type].call(Object.assign({sliceSerialize:e[c][2].sliceSerialize},o),e[c][1])}if(o.tokenStack.length>0){const e=o.tokenStack[o.tokenStack.length-1];(e[1]||Kc).call(o,void 0,e[0])}for(n.position={start:Uc(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:Uc(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},c=-1;++c<t.transforms.length;)n=t.transforms[c](n)||n;return n}function r(e,t,n){let o,r,i,a,s=t-1,u=-1,l=!1;for(;++s<=n;){const t=e[s];if("listUnordered"===t[1].type||"listOrdered"===t[1].type||"blockQuote"===t[1].type?("enter"===t[0]?u++:u--,a=void 0):"lineEndingBlank"===t[1].type?"enter"===t[0]&&(!o||a||u||i||(i=s),a=void 0):"linePrefix"===t[1].type||"listItemValue"===t[1].type||"listItemMarker"===t[1].type||"listItemPrefix"===t[1].type||"listItemPrefixWhitespace"===t[1].type||(a=void 0),!u&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===u&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(o){let a=s;for(r=void 0;a--;){const t=e[a];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;r&&(e[r][1].type="lineEndingBlank",l=!0),t[1].type="lineEnding",r=a}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}i&&(!r||i<r)&&(o._spread=!0),o.end=Object.assign({},r?e[r][1].start:t[1].end),e.splice(r||s,0,["exit",o,t[2]]),s++,n++}"listItemPrefix"===t[1].type&&(o={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0},e.splice(s,0,["enter",o,t[2]]),s++,n++,i=void 0,a=!0)}}return e[t][1]._spread=l,n}function i(e,t){n[e]=t}function a(e){return n[e]}function s(e,t){return n;function n(n){l.call(this,e(n),n),t&&t.call(this,n)}}function u(){this.stack.push({type:"fragment",children:[]})}function l(e,t,n){return this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n]),e.position={start:Uc(t.start)},e}function c(e){return t;function t(t){e&&e.call(this,t),d.call(this,t)}}function d(e,t){const n=this.stack.pop(),o=this.tokenStack.pop();if(!o)throw new Error("Cannot close `"+e.type+"` ("+Au({start:e.start,end:e.end})+"): it\u2019s not open");if(o[0].type!==e.type)if(t)t.call(this,e,o[0]);else{(o[1]||Kc).call(this,e,o[0])}return n.position.end=Uc(e.end),n}function h(){return function(e,t){const n=t||tl;return nl(e,"boolean"!==typeof n.includeImageAlt||n.includeImageAlt,"boolean"!==typeof n.includeHtml||n.includeHtml)}(this.stack.pop())}function f(){i("expectingFirstListItemValue",!0)}function p(e){if(a("expectingFirstListItemValue")){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),i("expectingFirstListItemValue")}}function g(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function m(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function y(){a("flowCodeInside")||(this.buffer(),i("flowCodeInside",!0))}function v(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),i("flowCodeInside")}function D(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function C(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Ql(this.sliceSerialize(e)).toLowerCase()}function b(){const e=this.resume();this.stack[this.stack.length-1].title=e}function w(){const e=this.resume();this.stack[this.stack.length-1].url=e}function E(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function F(){i("setextHeadingSlurpLineEnding",!0)}function k(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).charCodeAt(0)?1:2}function x(){i("setextHeadingSlurpLineEnding")}function A(e){const t=this.stack[this.stack.length-1];let n=t.children[t.children.length-1];n&&"text"===n.type||(n=se(),n.position={start:Uc(e.start)},t.children.push(n)),this.stack.push(n)}function S(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=Uc(e.end)}function I(e){const n=this.stack[this.stack.length-1];if(a("atHardBreak")){return n.children[n.children.length-1].position.end=Uc(e.end),void i("atHardBreak")}!a("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(n.type)&&(A.call(this,e),S.call(this,e))}function P(){i("atHardBreak",!0)}function _(){const e=this.resume();this.stack[this.stack.length-1].value=e}function T(){const e=this.resume();this.stack[this.stack.length-1].value=e}function N(){const e=this.resume();this.stack[this.stack.length-1].value=e}function M(){const e=this.stack[this.stack.length-1];if(a("inReference")){const t=a("referenceType")||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;i("referenceType")}function R(){const e=this.stack[this.stack.length-1];if(a("inReference")){const t=a("referenceType")||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;i("referenceType")}function B(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(zc,jc)}(t),n.identifier=Ql(t).toLowerCase()}function O(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(i("inReference",!0),"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function L(){const e=this.resume();this.stack[this.stack.length-1].url=e}function z(){const e=this.resume();this.stack[this.stack.length-1].title=e}function j(){i("inReference")}function H(){i("referenceType","collapsed")}function q(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Ql(this.sliceSerialize(e)).toLowerCase(),i("referenceType","full")}function U(e){i("characterReferenceType",e.type)}function W(e){const t=this.sliceSerialize(e),n=a("characterReferenceType");let o;if(n)o=Lc(t,"characterReferenceMarkerNumeric"===n?10:16),i("characterReferenceType");else{o=cc(t)}const r=this.stack.pop();r.value+=o,r.position.end=Uc(e.end)}function V(e){S.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function K(e){S.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function G(){return{type:"blockquote",children:[]}}function Y(){return{type:"code",lang:null,meta:null,value:""}}function Q(){return{type:"inlineCode",value:""}}function Z(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function X(){return{type:"emphasis",children:[]}}function $(){return{type:"heading",depth:void 0,children:[]}}function J(){return{type:"break"}}function ee(){return{type:"html",value:""}}function te(){return{type:"image",title:null,url:"",alt:null}}function ne(){return{type:"link",title:null,url:"",children:[]}}function oe(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function re(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function ie(){return{type:"paragraph",children:[]}}function ae(){return{type:"strong",children:[]}}function se(){return{type:"text",value:""}}function ue(){return{type:"thematicBreak"}}}(n)(function(e){for(;!Al(e););return e}(Bc(n).document().write(function(){let e,t=1,n="",o=!0;return function(r,i,a){const s=[];let u,l,c,d,h;for(r=n+r.toString(i),c=0,n="",o&&(65279===r.charCodeAt(0)&&c++,o=void 0);c<r.length;){if(Oc.lastIndex=c,u=Oc.exec(r),d=u&&void 0!==u.index?u.index:r.length,h=r.charCodeAt(d),!u){n=r.slice(c);break}if(10===h&&c===d&&e)s.push(-3),e=void 0;else switch(e&&(s.push(-5),e=void 0),c<d&&(s.push(r.slice(c,d)),t+=d-c),h){case 0:s.push(65533),t++;break;case 9:for(l=4*Math.ceil(t/4),s.push(-2);t++<l;)s.push(-1);break;case 10:s.push(-4),t=1;break;default:e=!0,t=1}c=d+1}return a&&(e&&s.push(-5),n&&s.push(n),s.push(null)),s}}()(e,t,!0))))};function Uc(e){return{line:e.line,column:e.column,offset:e.offset}}function Wc(e,t){let n=-1;for(;++n<t.length;){const o=t[n];Array.isArray(o)?Wc(e,o):Vc(e,o)}}function Vc(e,t){let n;for(n in t)if(Hc.call(t,n))if("canContainEols"===n){const o=t[n];o&&e[n].push(...o)}else if("transforms"===n){const o=t[n];o&&e[n].push(...o)}else if("enter"===n||"exit"===n){const o=t[n];o&&Object.assign(e[n],o)}}function Kc(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Au({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Au({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Au({start:t.start,end:t.end})+") is still open")}function Gc(e){Object.assign(this,{Parser:t=>{const n=this.data("settings");return qc(t,Object.assign({},n,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}function Yc(e){const t=[];let n=-1,o=0,r=0;for(;++n<e.length;){const i=e.charCodeAt(n);let a="";if(37===i&&cl(e.charCodeAt(n+1))&&cl(e.charCodeAt(n+2)))r=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(a=String.fromCharCode(i));else if(i>55295&&i<57344){const t=e.charCodeAt(n+1);i<56320&&t>56319&&t<57344?(a=String.fromCharCode(i,t),r=1):a="\ufffd"}else a=String.fromCharCode(i);a&&(t.push(e.slice(o,n),encodeURIComponent(a)),o=n+r+1,a=""),r&&(n+=r,r=0)}return t.join("")+e.slice(o)}const Qc=function(e){if(void 0===e||null===e)return Xc;if("string"===typeof e)return function(e){return Zc(t);function t(t){return t&&t.type===e}}(e);if("object"===typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Qc(e[n]);return Zc(o);function o(){let e=-1;for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];for(;++e<t.length;)if(t[e].call(this,...o))return!0;return!1}}(e):function(e){return Zc(t);function t(t){let n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"===typeof e)return Zc(e);throw new Error("Expected function, string, or object as test")};function Zc(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return Boolean(t&&"object"===typeof t&&"type"in t&&Boolean(e.call(this,t,...o)))}}function Xc(){return!0}const $c=!0,Jc=!1,ed=function(e,t,n,o){"function"===typeof t&&"function"!==typeof n&&(o=n,n=t,t=null);const r=Qc(t),i=o?-1:1;!function e(a,s,u){const l=a&&"object"===typeof a?a:{};if("string"===typeof l.type){const e="string"===typeof l.tagName?l.tagName:"string"===typeof l.name?l.name:void 0;Object.defineProperty(c,"name",{value:"node ("+a.type+(e?"<"+e+">":"")+")"})}return c;function c(){let l,c,d,h=[];if((!t||r(a,s,u[u.length-1]||null))&&(h=function(e){if(Array.isArray(e))return e;if("number"===typeof e)return[$c,e];return[e]}(n(a,u)),h[0]===Jc))return h;if(a.children&&"skip"!==h[0])for(c=(o?a.children.length:-1)+i,d=u.concat(a);c>-1&&c<a.children.length;){if(l=e(a.children[c],c,d)(),l[0]===Jc)return l;c="number"===typeof l[1]?l[1]:c+i}return h}}(e,void 0,[])()};const td=function(e,t,n,o){"function"===typeof t&&"function"!==typeof n&&(o=n,n=t,t=null),ed(e,t,(function(e,t){const o=t[t.length-1];return n(e,o?o.children.indexOf(e):null,o)}),o)},nd=rd("start"),od=rd("end");function rd(e){return function(t){const n=t&&t.position&&t.position[e]||{};return{line:n.line||null,column:n.column||null,offset:n.offset>-1?n.offset:null}}}const id={}.hasOwnProperty;function ad(e){return String(e||"").toUpperCase()}function sd(e,t){const n=String(t.identifier).toUpperCase(),o=Yc(n.toLowerCase()),r=e.footnoteOrder.indexOf(n);let i;-1===r?(e.footnoteOrder.push(n),e.footnoteCounts[n]=1,i=e.footnoteOrder.length):(e.footnoteCounts[n]++,i=r+1);const a=e.footnoteCounts[n],s={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fn-"+o,id:e.clobberPrefix+"fnref-"+o+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};e.patch(t,s);const u={type:"element",tagName:"sup",properties:{},children:[s]};return e.patch(t,u),e.applyData(t,u)}function ud(e,t){const n=t.referenceType;let o="]";if("collapsed"===n?o+="[]":"full"===n&&(o+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return{type:"text",value:"!["+t.alt+o};const r=e.all(t),i=r[0];i&&"text"===i.type?i.value="["+i.value:r.unshift({type:"text",value:"["});const a=r[r.length-1];return a&&"text"===a.type?a.value+=o:r.push({type:"text",value:o}),r}function ld(e){const t=e.spread;return void 0===t||null===t?e.children.length>1:t}function cd(e){const t=String(e),n=/\r?\n|\r/g;let o=n.exec(t),r=0;const i=[];for(;o;)i.push(dd(t.slice(r,o.index),r>0,!0),o[0]),r=o.index+o[0].length,o=n.exec(t);return i.push(dd(t.slice(r),r>0,!1)),i.join("")}function dd(e,t,n){let o=0,r=e.length;if(t){let t=e.codePointAt(o);for(;9===t||32===t;)o++,t=e.codePointAt(o)}if(n){let t=e.codePointAt(r-1);for(;9===t||32===t;)r--,t=e.codePointAt(r-1)}return r>o?e.slice(o,r):""}const hd={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",o=t.lang?t.lang.match(/^[^ \t]+(?=[ \t]|$)/):null,r={};o&&(r.className=["language-"+o]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:sd,footnote:function(e,t){const n=e.footnoteById;let o=1;for(;o in n;)o++;const r=String(o);return n[r]={type:"footnoteDefinition",identifier:r,children:[{type:"paragraph",children:t.children}],position:t.position},sd(e,{type:"footnoteReference",identifier:r,position:t.position})},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.dangerous){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}return null},imageReference:function(e,t){const n=e.definition(t.identifier);if(!n)return ud(e,t);const o={src:Yc(n.url||""),alt:t.alt};null!==n.title&&void 0!==n.title&&(o.title=n.title);const r={type:"element",tagName:"img",properties:o,children:[]};return e.patch(t,r),e.applyData(t,r)},image:function(e,t){const n={src:Yc(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const o={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,o),e.applyData(t,o)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const o={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,o),e.applyData(t,o)},linkReference:function(e,t){const n=e.definition(t.identifier);if(!n)return ud(e,t);const o={href:Yc(n.url||"")};null!==n.title&&void 0!==n.title&&(o.title=n.title);const r={type:"element",tagName:"a",properties:o,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},link:function(e,t){const n={href:Yc(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const o={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)},listItem:function(e,t,n){const o=e.all(t),r=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let o=-1;for(;!t&&++o<n.length;)t=ld(n[o])}return t}(n):ld(t),i={},a=[];if("boolean"===typeof t.checked){const e=o[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},o.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let s=-1;for(;++s<o.length;){const e=o[s];(r||0!==s||"element"!==e.type||"p"!==e.tagName)&&a.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||r?a.push(e):a.push(...e.children)}const u=o[o.length-1];u&&(r||"element"!==u.type||"p"!==u.tagName)&&a.push({type:"text",value:"\n"});const l={type:"element",tagName:"li",properties:i,children:a};return e.patch(t,l),e.applyData(t,l)},list:function(e,t){const n={},o=e.all(t);let r=-1;for("number"===typeof t.start&&1!==t.start&&(n.start=t.start);++r<o.length;){const e=o[r];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(o,!0)};return e.patch(t,i),e.applyData(t,i)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),o=n.shift(),r=[];if(o){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([o],!0)};e.patch(t.children[0],n),r.push(n)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},i=nd(t.children[1]),a=od(t.children[t.children.length-1]);i.line&&a.line&&(o.position={start:i,end:a}),r.push(o)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(r,!0)};return e.patch(t,i),e.applyData(t,i)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const o=n?n.children:void 0,r=0===(o?o.indexOf(t):1)?"th":"td",i=n&&"table"===n.type?n.align:void 0,a=i?i.length:t.children.length;let s=-1;const u=[];for(;++s<a;){const n=t.children[s],o={},a=i?i[s]:void 0;a&&(o.align=a);let l={type:"element",tagName:r,properties:o,children:[]};n&&(l.children=e.all(n),e.patch(n,l),l=e.applyData(t,l)),u.push(l)}const l={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,l),e.applyData(t,l)},text:function(e,t){const n={type:"text",value:cd(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:fd,yaml:fd,definition:fd,footnoteDefinition:fd};function fd(){return null}const pd={}.hasOwnProperty;function gd(e,t){const n=t||{},o=n.allowDangerousHtml||!1,r={};return a.dangerous=o,a.clobberPrefix=void 0===n.clobberPrefix||null===n.clobberPrefix?"user-content-":n.clobberPrefix,a.footnoteLabel=n.footnoteLabel||"Footnotes",a.footnoteLabelTagName=n.footnoteLabelTagName||"h2",a.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},a.footnoteBackLabel=n.footnoteBackLabel||"Back to content",a.unknownHandler=n.unknownHandler,a.passThrough=n.passThrough,a.handlers=l(l({},hd),n.handlers),a.definition=function(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return td(e,"definition",(e=>{const n=ad(e.identifier);n&&!id.call(t,n)&&(t[n]=e)})),function(e){const n=ad(e);return n&&id.call(t,n)?t[n]:null}}(e),a.footnoteById=r,a.footnoteOrder=[],a.footnoteCounts={},a.patch=md,a.applyData=yd,a.one=function(e,t){return vd(a,e,t)},a.all=function(e){return Dd(a,e)},a.wrap=Cd,a.augment=i,td(e,"footnoteDefinition",(e=>{const t=String(e.identifier).toUpperCase();pd.call(r,t)||(r[t]=e)})),a;function i(e,t){if(e&&"data"in e&&e.data){const n=e.data;n.hName&&("element"!==t.type&&(t={type:"element",tagName:"",properties:{},children:[]}),t.tagName=n.hName),"element"===t.type&&n.hProperties&&(t.properties=l(l({},t.properties),n.hProperties)),"children"in t&&t.children&&n.hChildren&&(t.children=n.hChildren)}if(e){const n="type"in e?e:{position:e};(function(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column})(n)||(t.position={start:nd(n),end:od(n)})}return t}function a(e,t,n,o){return Array.isArray(n)&&(o=n,n={}),i(e,{type:"element",tagName:t,properties:n||{},children:o||[]})}}function md(e,t){e.position&&(t.position=function(e){return{start:nd(e),end:od(e)}}(e))}function yd(e,t){let n=t;if(e&&e.data){const t=e.data.hName,o=e.data.hChildren,r=e.data.hProperties;"string"===typeof t&&("element"===n.type?n.tagName=t:n={type:"element",tagName:t,properties:{},children:[]}),"element"===n.type&&r&&(n.properties=l(l({},n.properties),r)),"children"in n&&n.children&&null!==o&&void 0!==o&&(n.children=o)}return n}function vd(e,t,n){const o=t&&t.type;if(!o)throw new Error("Expected node, got `"+t+"`");return pd.call(e.handlers,o)?e.handlers[o](e,t,n):e.passThrough&&e.passThrough.includes(o)?"children"in t?l(l({},t),{},{children:Dd(e,t)}):t:e.unknownHandler?e.unknownHandler(e,t,n):function(e,t){const n=t.data||{},o=!("value"in t)||pd.call(n,"hProperties")||pd.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:Dd(e,t)}:{type:"text",value:t.value};return e.patch(t,o),e.applyData(t,o)}(e,t)}function Dd(e,t){const n=[];if("children"in t){const o=t.children;let r=-1;for(;++r<o.length;){const i=vd(e,o[r],t);if(i){if(r&&"break"===o[r-1].type&&(Array.isArray(i)||"text"!==i.type||(i.value=i.value.replace(/^\s+/,"")),!Array.isArray(i)&&"element"===i.type)){const e=i.children[0];e&&"text"===e.type&&(e.value=e.value.replace(/^\s+/,""))}Array.isArray(i)?n.push(...i):n.push(i)}}}return n}function Cd(e,t){const n=[];let o=-1;for(t&&n.push({type:"text",value:"\n"});++o<e.length;)o&&n.push({type:"text",value:"\n"}),n.push(e[o]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function bd(e,t){const n=gd(e,t),o=n.one(e,null),r=function(e){const t=[];let n=-1;for(;++n<e.footnoteOrder.length;){const o=e.footnoteById[e.footnoteOrder[n]];if(!o)continue;const r=e.all(o),i=String(o.identifier).toUpperCase(),a=Yc(i.toLowerCase());let s=0;const u=[];for(;++s<=e.footnoteCounts[i];){const t={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+a+(s>1?"-"+s:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:"\u21a9"}]};s>1&&t.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(s)}]}),u.length>0&&u.push({type:"text",value:" "}),u.push(t)}const l=r[r.length-1];if(l&&"element"===l.type&&"p"===l.tagName){const e=l.children[l.children.length-1];e&&"text"===e.type?e.value+=" ":l.children.push({type:"text",value:" "}),l.children.push(...u)}else r.push(...u);const c={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+a},children:e.wrap(r,!0)};e.patch(o,c),t.push(c)}if(0!==t.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:l(l({},JSON.parse(JSON.stringify(e.footnoteLabelProperties))),{},{id:"footnote-label"}),children:[{type:"text",value:e.footnoteLabel}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(t,!0)},{type:"text",value:"\n"}]}}(n);return r&&o.children.push({type:"text",value:"\n"},r),Array.isArray(o)?{type:"root",children:o}:o}const wd=function(e,t){return e&&"run"in e?function(e,t){return(n,o,r)=>{e.run(bd(n,t),o,(e=>{r(e)}))}}(e,t):function(e){return t=>bd(t,e)}(e||t)};var Ed=n(5173);class Fd{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}function kd(e,t){const n={},o={};let r=-1;for(;++r<e.length;)Object.assign(n,e[r].property),Object.assign(o,e[r].normal);return new Fd(n,o,t)}function xd(e){return e.toLowerCase()}Fd.prototype.property={},Fd.prototype.normal={},Fd.prototype.space=null;class Ad{constructor(e,t){this.property=e,this.attribute=t}}Ad.prototype.space=null,Ad.prototype.boolean=!1,Ad.prototype.booleanish=!1,Ad.prototype.overloadedBoolean=!1,Ad.prototype.number=!1,Ad.prototype.commaSeparated=!1,Ad.prototype.spaceSeparated=!1,Ad.prototype.commaOrSpaceSeparated=!1,Ad.prototype.mustUseProperty=!1,Ad.prototype.defined=!1;let Sd=0;const Id=Bd(),Pd=Bd(),_d=Bd(),Td=Bd(),Nd=Bd(),Md=Bd(),Rd=Bd();function Bd(){return 2**++Sd}const Od=Object.keys(t);class Ld extends Ad{constructor(e,n,o,r){let i=-1;if(super(e,n),zd(this,"space",r),"number"===typeof o)for(;++i<Od.length;){const e=Od[i];zd(this,Od[i],(o&t[e])===t[e])}}}function zd(e,t,n){n&&(e[t]=n)}Ld.prototype.defined=!0;const jd={}.hasOwnProperty;function Hd(e){const t={},n={};let o;for(o in e.properties)if(jd.call(e.properties,o)){const r=e.properties[o],i=new Ld(o,e.transform(e.attributes||{},o),r,e.space);e.mustUseProperty&&e.mustUseProperty.includes(o)&&(i.mustUseProperty=!0),t[o]=i,n[xd(o)]=o,n[xd(i.attribute)]=o}return new Fd(t,n,e.space)}const qd=Hd({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Ud=Hd({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Wd(e,t){return t in e?e[t]:t}function Vd(e,t){return Wd(e,t.toLowerCase())}const Kd=Hd({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Vd,properties:{xmlns:null,xmlnsXLink:null}}),Gd=Hd({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:Pd,ariaAutoComplete:null,ariaBusy:Pd,ariaChecked:Pd,ariaColCount:Td,ariaColIndex:Td,ariaColSpan:Td,ariaControls:Nd,ariaCurrent:null,ariaDescribedBy:Nd,ariaDetails:null,ariaDisabled:Pd,ariaDropEffect:Nd,ariaErrorMessage:null,ariaExpanded:Pd,ariaFlowTo:Nd,ariaGrabbed:Pd,ariaHasPopup:null,ariaHidden:Pd,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Nd,ariaLevel:Td,ariaLive:null,ariaModal:Pd,ariaMultiLine:Pd,ariaMultiSelectable:Pd,ariaOrientation:null,ariaOwns:Nd,ariaPlaceholder:null,ariaPosInSet:Td,ariaPressed:Pd,ariaReadOnly:Pd,ariaRelevant:null,ariaRequired:Pd,ariaRoleDescription:Nd,ariaRowCount:Td,ariaRowIndex:Td,ariaRowSpan:Td,ariaSelected:Pd,ariaSetSize:Td,ariaSort:null,ariaValueMax:Td,ariaValueMin:Td,ariaValueNow:Td,ariaValueText:null,role:null}}),Yd=Hd({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Vd,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Md,acceptCharset:Nd,accessKey:Nd,action:null,allow:null,allowFullScreen:Id,allowPaymentRequest:Id,allowUserMedia:Id,alt:null,as:null,async:Id,autoCapitalize:null,autoComplete:Nd,autoFocus:Id,autoPlay:Id,blocking:Nd,capture:null,charSet:null,checked:Id,cite:null,className:Nd,cols:Td,colSpan:null,content:null,contentEditable:Pd,controls:Id,controlsList:Nd,coords:Td|Md,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Id,defer:Id,dir:null,dirName:null,disabled:Id,download:_d,draggable:Pd,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Id,formTarget:null,headers:Nd,height:Td,hidden:Id,high:Td,href:null,hrefLang:null,htmlFor:Nd,httpEquiv:Nd,id:null,imageSizes:null,imageSrcSet:null,inert:Id,inputMode:null,integrity:null,is:null,isMap:Id,itemId:null,itemProp:Nd,itemRef:Nd,itemScope:Id,itemType:Nd,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Id,low:Td,manifest:null,max:null,maxLength:Td,media:null,method:null,min:null,minLength:Td,multiple:Id,muted:Id,name:null,nonce:null,noModule:Id,noValidate:Id,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Id,optimum:Td,pattern:null,ping:Nd,placeholder:null,playsInline:Id,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Id,referrerPolicy:null,rel:Nd,required:Id,reversed:Id,rows:Td,rowSpan:Td,sandbox:Nd,scope:null,scoped:Id,seamless:Id,selected:Id,shadowRootClonable:Id,shadowRootDelegatesFocus:Id,shadowRootMode:null,shape:null,size:Td,sizes:null,slot:null,span:Td,spellCheck:Pd,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Td,step:null,style:null,tabIndex:Td,target:null,title:null,translate:null,type:null,typeMustMatch:Id,useMap:null,value:Pd,width:Td,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Nd,axis:null,background:null,bgColor:null,border:Td,borderColor:null,bottomMargin:Td,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Id,declare:Id,event:null,face:null,frame:null,frameBorder:null,hSpace:Td,leftMargin:Td,link:null,longDesc:null,lowSrc:null,marginHeight:Td,marginWidth:Td,noResize:Id,noHref:Id,noShade:Id,noWrap:Id,object:null,profile:null,prompt:null,rev:null,rightMargin:Td,rules:null,scheme:null,scrolling:Pd,standby:null,summary:null,text:null,topMargin:Td,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Td,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Id,disableRemotePlayback:Id,prefix:null,property:null,results:Td,security:null,unselectable:null}}),Qd=Hd({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Wd,properties:{about:Rd,accentHeight:Td,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Td,amplitude:Td,arabicForm:null,ascent:Td,attributeName:null,attributeType:null,azimuth:Td,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Td,by:null,calcMode:null,capHeight:Td,className:Nd,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Td,diffuseConstant:Td,direction:null,display:null,dur:null,divisor:Td,dominantBaseline:null,download:Id,dx:null,dy:null,edgeMode:null,editable:null,elevation:Td,enableBackground:null,end:null,event:null,exponent:Td,externalResourcesRequired:null,fill:null,fillOpacity:Td,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Md,g2:Md,glyphName:Md,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Td,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Td,horizOriginX:Td,horizOriginY:Td,id:null,ideographic:Td,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Td,k:Td,k1:Td,k2:Td,k3:Td,k4:Td,kernelMatrix:Rd,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Td,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Td,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Td,overlineThickness:Td,paintOrder:null,panose1:null,path:null,pathLength:Td,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Nd,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Td,pointsAtY:Td,pointsAtZ:Td,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Rd,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Rd,rev:Rd,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Rd,requiredFeatures:Rd,requiredFonts:Rd,requiredFormats:Rd,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Td,specularExponent:Td,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Td,strikethroughThickness:Td,string:null,stroke:null,strokeDashArray:Rd,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Td,strokeOpacity:Td,strokeWidth:null,style:null,surfaceScale:Td,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Rd,tabIndex:Td,tableValues:null,target:null,targetX:Td,targetY:Td,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Rd,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Td,underlineThickness:Td,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Td,values:null,vAlphabetic:Td,vMathematical:Td,vectorEffect:null,vHanging:Td,vIdeographic:Td,version:null,vertAdvY:Td,vertOriginX:Td,vertOriginY:Td,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Td,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Zd=kd([Ud,qd,Kd,Gd,Yd],"html"),Xd=kd([Ud,qd,Kd,Gd,Qd],"svg");function $d(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{td(t,"element",((t,n,o)=>{const r=o;let i;if(e.allowedElements?i=!e.allowedElements.includes(t.tagName):e.disallowedElements&&(i=e.disallowedElements.includes(t.tagName)),!i&&e.allowElement&&"number"===typeof n&&(i=!e.allowElement(t,n,r)),i&&"number"===typeof n)return e.unwrapDisallowed&&t.children?r.children.splice(n,1,...t.children):r.children.splice(n,1),n}))}}var Jd=n(4589);function eh(e){const t=e&&"object"===typeof e&&"text"===e.type?e.value||"":e;return"string"===typeof t&&""===t.replace(/[ \t\n\f\r]/g,"")}const th=/^data[-\w.:]+$/i,nh=/-[a-z]/g,oh=/[A-Z]/g;function rh(e){return"-"+e.toLowerCase()}function ih(e){return e.charAt(1).toUpperCase()}const ah={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};const sh=n(351),uh=["http","https","mailto","tel"];function lh(e){const t=(e||"").trim(),n=t.charAt(0);if("#"===n||"/"===n)return t;const o=t.indexOf(":");if(-1===o)return t;let r=-1;for(;++r<uh.length;){const e=uh[r];if(o===e.length&&t.slice(0,e.length).toLowerCase()===e)return t}return r=t.indexOf("?"),-1!==r&&o>r?t:(r=t.indexOf("#"),-1!==r&&o>r?t:"javascript:void(0)")}const ch={}.hasOwnProperty,dh=new Set(["table","thead","tbody","tfoot","tr"]);function hh(e,t){const n=[];let o,r=-1;for(;++r<t.children.length;)o=t.children[r],"element"===o.type?n.push(fh(e,o,r,t)):"text"===o.type?"element"===t.type&&dh.has(t.tagName)&&eh(o)||n.push(o.value):"raw"!==o.type||e.options.skipHtml||n.push(o.value);return n}function fh(e,t,n,r){const i=e.options,a=void 0===i.transformLinkUri?lh:i.transformLinkUri,s=e.schema,u=t.tagName,l={};let c,d=s;if("html"===s.space&&"svg"===u&&(d=Xd,e.schema=d),t.properties)for(c in t.properties)ch.call(t.properties,c)&&gh(l,c,t.properties[c],e);"ol"!==u&&"ul"!==u||e.listDepth++;const h=hh(e,t);"ol"!==u&&"ul"!==u||e.listDepth--,e.schema=s;const f=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},p=i.components&&ch.call(i.components,u)?i.components[u]:u,g="string"===typeof p||p===o.Fragment;if(!Jd.isValidElementType(p))throw new TypeError("Component for name `".concat(u,"` not defined or is not renderable"));if(l.key=n,"a"===u&&i.linkTarget&&(l.target="function"===typeof i.linkTarget?i.linkTarget(String(l.href||""),t.children,"string"===typeof l.title?l.title:null):i.linkTarget),"a"===u&&a&&(l.href=a(String(l.href||""),t.children,"string"===typeof l.title?l.title:null)),g||"code"!==u||"element"!==r.type||"pre"===r.tagName||(l.inline=!0),g||"h1"!==u&&"h2"!==u&&"h3"!==u&&"h4"!==u&&"h5"!==u&&"h6"!==u||(l.level=Number.parseInt(u.charAt(1),10)),"img"===u&&i.transformImageUri&&(l.src=i.transformImageUri(String(l.src||""),String(l.alt||""),"string"===typeof l.title?l.title:null)),!g&&"li"===u&&"element"===r.type){const e=function(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if("element"===n.type&&"input"===n.tagName)return n}return null}(t);l.checked=e&&e.properties?Boolean(e.properties.checked):null,l.index=ph(r,t),l.ordered="ol"===r.tagName}var m;return g||"ol"!==u&&"ul"!==u||(l.ordered="ol"===u,l.depth=e.listDepth),"td"!==u&&"th"!==u||(l.align&&(l.style||(l.style={}),l.style.textAlign=l.align,delete l.align),g||(l.isHeader="th"===u)),g||"tr"!==u||"element"!==r.type||(l.isHeader=Boolean("thead"===r.tagName)),i.sourcePos&&(l["data-sourcepos"]=[(m=f).start.line,":",m.start.column,"-",m.end.line,":",m.end.column].map(String).join("")),!g&&i.rawSourcePos&&(l.sourcePosition=t.position),!g&&i.includeElementIndex&&(l.index=ph(r,t),l.siblingCount=ph(r)),g||(l.node=t),h.length>0?o.createElement(p,l,h):o.createElement(p,l)}function ph(e,t){let n=-1,o=0;for(;++n<e.children.length&&e.children[n]!==t;)"element"===e.children[n].type&&o++;return o}function gh(e,t,n,o){const r=function(e,t){const n=xd(t);let o=t,r=Ad;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&th.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(nh,ih);o="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!nh.test(e)){let n=e.replace(oh,rh);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}r=Ld}return new r(o,t)}(o.schema,t);let i=n;null!==i&&void 0!==i&&i===i&&(Array.isArray(i)&&(i=r.commaSeparated?function(e,t){const n=t||{};return(""===e[e.length-1]?[...e,""]:e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}(i):i.join(" ").trim()),"style"===r.property&&"string"===typeof i&&(i=function(e){const t={};try{sh(e,n)}catch(o){}return t;function n(e,n){const o="-ms-"===e.slice(0,4)?"ms-".concat(e.slice(4)):e;t[o.replace(/-([a-z])/g,mh)]=n}}(i)),r.space&&r.property?e[ch.call(ah,r.property)?ah[r.property]:r.property]=i:r.attribute&&(e[r.attribute]=i))}function mh(e,t){return t.toUpperCase()}const yh={}.hasOwnProperty,vh={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function Dh(e){for(const o in vh)if(yh.call(vh,o)&&yh.call(e,o)){const e=vh[o];console.warn("[react-markdown] Warning: please ".concat(e.to?"use `".concat(e.to,"` instead of"):"remove"," `").concat(o,"` (see <").concat("https://github.com/remarkjs/react-markdown/blob/main/changelog.md","#").concat(e.id,"> for more info)")),delete vh[o]}const t=Ku().use(Gc).use(e.remarkPlugins||[]).use(wd,l(l({},e.remarkRehypeOptions),{},{allowDangerousHtml:!0})).use(e.rehypePlugins||[]).use($d,e),n=new Lu;"string"===typeof e.children?n.value=e.children:void 0!==e.children&&null!==e.children&&console.warn("[react-markdown] Warning: please pass a string as `children` (not: `".concat(e.children,"`)"));const r=t.runSync(t.parse(n),n);if("root"!==r.type)throw new TypeError("Expected a `root` node");let i=o.createElement(o.Fragment,{},hh({options:e,schema:Zd,listDepth:0},r));return e.className&&(i=o.createElement("div",{className:e.className},i)),i}function Ch(e,t){const n=String(e);if("string"!==typeof t)throw new TypeError("Expected character");let o=0,r=n.indexOf(t);for(;-1!==r;)o++,r=n.indexOf(t,r+t.length);return o}Dh.propTypes={children:Ed.string,className:Ed.string,allowElement:Ed.func,allowedElements:Ed.arrayOf(Ed.string),disallowedElements:Ed.arrayOf(Ed.string),unwrapDisallowed:Ed.bool,remarkPlugins:Ed.arrayOf(Ed.oneOfType([Ed.object,Ed.func,Ed.arrayOf(Ed.oneOfType([Ed.bool,Ed.string,Ed.object,Ed.func,Ed.arrayOf(Ed.any)]))])),rehypePlugins:Ed.arrayOf(Ed.oneOfType([Ed.object,Ed.func,Ed.arrayOf(Ed.oneOfType([Ed.bool,Ed.string,Ed.object,Ed.func,Ed.arrayOf(Ed.any)]))])),sourcePos:Ed.bool,rawSourcePos:Ed.bool,skipHtml:Ed.bool,includeElementIndex:Ed.bool,transformLinkUri:Ed.oneOfType([Ed.func,Ed.bool]),linkTarget:Ed.oneOfType([Ed.func,Ed.string]),transformImageUri:Ed.func,components:Ed.object};Eh(/[A-Za-z]/),Eh(/[\dA-Za-z]/),Eh(/[#-'*+\--9=?A-Z^-~]/);Eh(/\d/),Eh(/[\dA-Fa-f]/),Eh(/[!-/:-@[-`{-~]/);const bh=Eh(/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDD00-\uDEB3\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF])/),wh=Eh(/\s/);function Eh(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}const Fh=function(e){if(null===e||void 0===e)return xh;if("function"===typeof e)return kh(e);if("object"===typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Fh(e[n]);return kh(o);function o(){let e=-1;for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];for(;++e<t.length;)if(t[e].apply(this,o))return!0;return!1}}(e):function(e){const t=e;return kh(n);function n(n){const o=n;let r;for(r in e)if(o[r]!==t[r])return!1;return!0}}(e);if("string"===typeof e)return function(e){return kh(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function kh(e){return function(t,n,o){return Boolean(Ah(t)&&e.call(this,t,"number"===typeof n?n:void 0,o||void 0))}}function xh(){return!0}function Ah(e){return null!==e&&"object"===typeof e&&"type"in e}const Sh=[],Ih=!0,Ph=!1;function _h(e,t,n,o){let r;"function"===typeof t&&"function"!==typeof n?(o=n,n=t):r=t;const i=Fh(r),a=o?-1:1;!function e(r,s,u){const l=r&&"object"===typeof r?r:{};if("string"===typeof l.type){const e="string"===typeof l.tagName?l.tagName:"string"===typeof l.name?l.name:void 0;Object.defineProperty(c,"name",{value:"node ("+r.type+(e?"<"+e+">":"")+")"})}return c;function c(){let l,c,d,h=Sh;if((!t||i(r,s,u[u.length-1]||void 0))&&(h=function(e){if(Array.isArray(e))return e;if("number"===typeof e)return[Ih,e];return null===e||void 0===e?Sh:[e]}(n(r,u)),h[0]===Ph))return h;if("children"in r&&r.children){const t=r;if(t.children&&"skip"!==h[0])for(c=(o?t.children.length:-1)+a,d=u.concat(t);c>-1&&c<t.children.length;){const n=t.children[c];if(l=e(n,c,d)(),l[0]===Ph)return l;c="number"===typeof l[1]?l[1]:c+a}}return h}}(e,void 0,[])()}function Th(e,t,n){const o=Fh((n||{}).ignore||[]),r=function(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let o=-1;for(;++o<n.length;){const e=n[o];t.push([Nh(e[0]),Mh(e[1])])}return t}(t);let i=-1;for(;++i<r.length;)_h(e,"text",a);function a(e,t){let n,a=-1;for(;++a<t.length;){const e=t[a],r=n?n.children:void 0;if(o(e,r?r.indexOf(e):void 0,n))return;n=e}if(n)return function(e,t){const n=t[t.length-1],o=r[i][0],a=r[i][1];let s=0;const u=n.children.indexOf(e);let l=!1,c=[];o.lastIndex=0;let d=o.exec(e.value);for(;d;){const n=d.index,r={index:d.index,input:d.input,stack:[...t,e]};let i=a(...d,r);if("string"===typeof i&&(i=i.length>0?{type:"text",value:i}:void 0),!1===i?o.lastIndex=n+1:(s!==n&&c.push({type:"text",value:e.value.slice(s,n)}),Array.isArray(i)?c.push(...i):i&&c.push(i),s=n+d[0].length,l=!0),!o.global)break;d=o.exec(e.value)}l?(s<e.value.length&&c.push({type:"text",value:e.value.slice(s)}),n.children.splice(u,1,...c)):c=[e];return u+c.length}(e,t)}}function Nh(e){return"string"===typeof e?new RegExp(function(e){if("string"!==typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(e),"g"):e}function Mh(e){return"function"===typeof e?e:function(){return e}}const Rh="phrasing",Bh=["autolink","link","image","label"];function Oh(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Lh(e){this.config.enter.autolinkProtocol.call(this,e)}function zh(e){this.config.exit.autolinkProtocol.call(this,e)}function jh(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function Hh(e){this.config.exit.autolinkEmail.call(this,e)}function qh(e){this.exit(e)}function Uh(e){Th(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Wh],[/(?<=^|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]|(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDD00-\uDEB3\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF]))([\+\x2D\.0-9A-Z_a-z]+)@([\x2D0-9A-Z_a-z]+(?:\.[\x2D0-9A-Z_a-z]+)+)/g,Vh]],{ignore:["link","linkReference"]})}function Wh(e,t,n,o,r){let i="";if(!Kh(r))return!1;if(/^w/i.test(t)&&(n=t+n,t="",i="http://"),!function(e){const t=e.split(".");if(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))return!1;return!0}(n))return!1;const a=function(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],o=n.indexOf(")");const r=Ch(e,"(");let i=Ch(e,")");for(;-1!==o&&r>i;)e+=n.slice(0,o+1),n=n.slice(o+1),o=n.indexOf(")"),i++;return[e,n]}(n+o);if(!a[0])return!1;const s={type:"link",title:null,url:i+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[s,{type:"text",value:a[1]}]:s}function Vh(e,t,n,o){return!(!Kh(o,!0)||/[-\d_]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function Kh(e,t){const n=e.input.charCodeAt(e.index-1);return(0===e.index||wh(n)||bh(n))&&(!t||47!==n)}function Gh(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}function Yh(){this.buffer()}function Qh(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function Zh(){this.buffer()}function Xh(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function $h(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Gh(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Jh(e){this.exit(e)}function ef(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Gh(this.sliceSerialize(e)).toLowerCase(),n.label=t}function tf(e){this.exit(e)}function nf(e,t,n,o){const r=n.createTracker(o);let i=r.move("[^");const a=n.enter("footnoteReference"),s=n.enter("reference");return i+=r.move(n.safe(n.associationId(e),{after:"]",before:i})),s(),a(),i+=r.move("]"),i}function of(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:function(e,n,o,r){const i=o.createTracker(r);let a=i.move("[^");const s=o.enter("footnoteDefinition"),u=o.enter("label");a+=i.move(o.safe(o.associationId(e),{before:a,after:"]"})),u(),a+=i.move("]:"),e.children&&e.children.length>0&&(i.shift(4),a+=i.move((t?"\n":" ")+o.indentLines(o.containerFlow(e,i.current()),t?af:rf)));return s(),a},footnoteReference:nf},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]}}function rf(e,t,n){return 0===t?e:af(e,t,n)}function af(e,t,n){return(n?"":"    ")+e}nf.peek=function(){return"["};const sf=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];function uf(e){this.enter({type:"delete",children:[]},e)}function lf(e){this.exit(e)}function cf(e,t,n,o){const r=n.createTracker(o),i=n.enter("strikethrough");let a=r.move("~~");return a+=n.containerPhrasing(e,l(l({},r.current()),{},{before:a,after:"~"})),a+=r.move("~~"),i(),a}function df(e){return e.length}function hf(e){const t="string"===typeof e?e.codePointAt(0):0;return 67===t||99===t?99:76===t||108===t?108:82===t||114===t?114:0}function ff(e,t,n){return">"+(n?"":" ")+e}function pf(e,t,n){if("string"===typeof t&&(t=[t]),!t||0===t.length)return n;let o=-1;for(;++o<t.length;)if(e.includes(t[o]))return!0;return!1}function gf(e,t,n,o){let r=-1;for(;++r<n.unsafe.length;)if("\n"===n.unsafe[r].character&&(i=n.stack,a=n.unsafe[r],pf(i,a.inConstruct,!0)&&!pf(i,a.notInConstruct,!1)))return/[ \t]/.test(o.before)?"":" ";var i,a;return"\\\n"}function mf(e,t,n){return(n?"":"    ")+e}function yf(e){const t=e.options.quote||'"';if('"'!==t&&"'"!==t)throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function vf(e){return"&#x"+e.toString(16).toUpperCase()+";"}cf.peek=function(){return"~"};bf(/[A-Za-z]/),bf(/[\dA-Za-z]/),bf(/[#-'*+\--9=?A-Z^-~]/);bf(/\d/),bf(/[\dA-Fa-f]/),bf(/[!-/:-@[-`{-~]/);const Df=bf(/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDD00-\uDEB3\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF])/),Cf=bf(/\s/);function bf(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function wf(e){return null===e||function(e){return null!==e&&(e<0||32===e)}(e)||Cf(e)?1:Df(e)?2:void 0}function Ef(e,t,n){const o=wf(e),r=wf(t);return void 0===o?void 0===r?"_"===n?{inside:!0,outside:!0}:{inside:!1,outside:!1}:1===r?{inside:!0,outside:!0}:{inside:!1,outside:!0}:1===o?void 0===r?{inside:!1,outside:!1}:1===r?{inside:!0,outside:!0}:{inside:!1,outside:!1}:void 0===r?{inside:!1,outside:!1}:1===r?{inside:!0,outside:!1}:{inside:!1,outside:!1}}function Ff(e,t,n,o){const r=function(e){const t=e.options.emphasis||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}(n),i=n.enter("emphasis"),a=n.createTracker(o),s=a.move(r);let u=a.move(n.containerPhrasing(e,l({after:r,before:s},a.current())));const c=u.charCodeAt(0),d=Ef(o.before.charCodeAt(o.before.length-1),c,r);d.inside&&(u=vf(c)+u.slice(1));const h=u.charCodeAt(u.length-1),f=Ef(o.after.charCodeAt(0),h,r);f.inside&&(u=u.slice(0,-1)+vf(h));const p=a.move(r);return i(),n.attentionEncodeSurroundingInfo={after:f.outside,before:d.outside},s+u+p}Ff.peek=function(e,t,n){return n.options.emphasis||"*"};const kf=function(e){if(null===e||void 0===e)return Af;if("function"===typeof e)return xf(e);if("object"===typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=kf(e[n]);return xf(o);function o(){let e=-1;for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];for(;++e<t.length;)if(t[e].apply(this,o))return!0;return!1}}(e):function(e){const t=e;return xf(n);function n(n){const o=n;let r;for(r in e)if(o[r]!==t[r])return!1;return!0}}(e);if("string"===typeof e)return function(e){return xf(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function xf(e){return function(t,n,o){return Boolean(Sf(t)&&e.call(this,t,"number"===typeof n?n:void 0,o||void 0))}}function Af(){return!0}function Sf(e){return null!==e&&"object"===typeof e&&"type"in e}const If=[],Pf=!0,_f=!1;function Tf(e,t,n,o){let r;"function"===typeof t&&"function"!==typeof n?(o=n,n=t):r=t;const i=kf(r),a=o?-1:1;!function e(r,s,u){const l=r&&"object"===typeof r?r:{};if("string"===typeof l.type){const e="string"===typeof l.tagName?l.tagName:"string"===typeof l.name?l.name:void 0;Object.defineProperty(c,"name",{value:"node ("+r.type+(e?"<"+e+">":"")+")"})}return c;function c(){let l,c,d,h=If;if((!t||i(r,s,u[u.length-1]||void 0))&&(h=function(e){if(Array.isArray(e))return e;if("number"===typeof e)return[Pf,e];return null===e||void 0===e?If:[e]}(n(r,u)),h[0]===_f))return h;if("children"in r&&r.children){const t=r;if(t.children&&"skip"!==h[0])for(c=(o?t.children.length:-1)+a,d=u.concat(t);c>-1&&c<t.children.length;){const n=t.children[c];if(l=e(n,c,d)(),l[0]===_f)return l;c="number"===typeof l[1]?l[1]:c+a}}return h}}(e,void 0,[])()}const Nf={};function Mf(e,t){const n=t||Nf;return Rf(e,"boolean"!==typeof n.includeImageAlt||n.includeImageAlt,"boolean"!==typeof n.includeHtml||n.includeHtml)}function Rf(e,t,n){if(function(e){return Boolean(e&&"object"===typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Bf(e.children,t,n)}return Array.isArray(e)?Bf(e,t,n):""}function Bf(e,t,n){const o=[];let r=-1;for(;++r<e.length;)o[r]=Rf(e[r],t,n);return o.join("")}function Of(e,t){let n=!1;return function(e,t,n,o){let r,i,a;"function"===typeof t&&"function"!==typeof n?(i=void 0,a=t,r=n):(i=t,a=n,r=o),Tf(e,i,(function(e,t){const n=t[t.length-1],o=n?n.children.indexOf(e):void 0;return a(e,o,n)}),r)}(e,(function(e){if("value"in e&&/\r?\n|\r/.test(e.value)||"break"===e.type)return n=!0,_f})),Boolean((!e.depth||e.depth<3)&&Mf(e)&&(t.options.setext||n))}function Lf(e){return e.value||""}function zf(e,t,n,o){const r=yf(n),i='"'===r?"Quote":"Apostrophe",a=n.enter("image");let s=n.enter("label");const u=n.createTracker(o);let c=u.move("![");return c+=u.move(n.safe(e.alt,l({before:c,after:"]"},u.current()))),c+=u.move("]("),s(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(s=n.enter("destinationLiteral"),c+=u.move("<"),c+=u.move(n.safe(e.url,l({before:c,after:">"},u.current()))),c+=u.move(">")):(s=n.enter("destinationRaw"),c+=u.move(n.safe(e.url,l({before:c,after:e.title?" ":")"},u.current())))),s(),e.title&&(s=n.enter("title".concat(i)),c+=u.move(" "+r),c+=u.move(n.safe(e.title,l({before:c,after:r},u.current()))),c+=u.move(r),s()),c+=u.move(")"),a(),c}function jf(e,t,n,o){const r=e.referenceType,i=n.enter("imageReference");let a=n.enter("label");const s=n.createTracker(o);let u=s.move("![");const c=n.safe(e.alt,l({before:u,after:"]"},s.current()));u+=s.move(c+"]["),a();const d=n.stack;n.stack=[],a=n.enter("reference");const h=n.safe(n.associationId(e),l({before:u,after:"]"},s.current()));return a(),n.stack=d,i(),"full"!==r&&c&&c===h?"shortcut"===r?u=u.slice(0,-1):u+=s.move("]"):u+=s.move(h+"]"),u}function Hf(e,t,n){let o=e.value||"",r="`",i=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(o);)r+="`";for(/[^ \r\n]/.test(o)&&(/^[ \r\n]/.test(o)&&/[ \r\n]$/.test(o)||/^`|`$/.test(o))&&(o=" "+o+" ");++i<n.unsafe.length;){const e=n.unsafe[i],t=n.compilePattern(e);let r;if(e.atBreak)for(;r=t.exec(o);){let e=r.index;10===o.charCodeAt(e)&&13===o.charCodeAt(e-1)&&e--,o=o.slice(0,e)+" "+o.slice(r.index+1)}}return r+o+r}function qf(e,t){const n=Mf(e);return Boolean(!t.options.resourceLink&&e.url&&!e.title&&e.children&&1===e.children.length&&"text"===e.children[0].type&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}function Uf(e,t,n,o){const r=yf(n),i='"'===r?"Quote":"Apostrophe",a=n.createTracker(o);let s,u;if(qf(e,n)){const t=n.stack;n.stack=[],s=n.enter("autolink");let o=a.move("<");return o+=a.move(n.containerPhrasing(e,l({before:o,after:">"},a.current()))),o+=a.move(">"),s(),n.stack=t,o}s=n.enter("link"),u=n.enter("label");let c=a.move("[");return c+=a.move(n.containerPhrasing(e,l({before:c,after:"]("},a.current()))),c+=a.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=n.enter("destinationLiteral"),c+=a.move("<"),c+=a.move(n.safe(e.url,l({before:c,after:">"},a.current()))),c+=a.move(">")):(u=n.enter("destinationRaw"),c+=a.move(n.safe(e.url,l({before:c,after:e.title?" ":")"},a.current())))),u(),e.title&&(u=n.enter("title".concat(i)),c+=a.move(" "+r),c+=a.move(n.safe(e.title,l({before:c,after:r},a.current()))),c+=a.move(r),u()),c+=a.move(")"),s(),c}function Wf(e,t,n,o){const r=e.referenceType,i=n.enter("linkReference");let a=n.enter("label");const s=n.createTracker(o);let u=s.move("[");const c=n.containerPhrasing(e,l({before:u,after:"]"},s.current()));u+=s.move(c+"]["),a();const d=n.stack;n.stack=[],a=n.enter("reference");const h=n.safe(n.associationId(e),l({before:u,after:"]"},s.current()));return a(),n.stack=d,i(),"full"!==r&&c&&c===h?"shortcut"===r?u=u.slice(0,-1):u+=s.move("]"):u+=s.move(h+"]"),u}function Vf(e){const t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Kf(e){const t=e.options.rule||"*";if("*"!==t&&"-"!==t&&"_"!==t)throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}Lf.peek=function(){return"<"},zf.peek=function(){return"!"},jf.peek=function(){return"!"},Hf.peek=function(){return"`"},Uf.peek=function(e,t,n){return qf(e,n)?"<":"["},Wf.peek=function(){return"["};const Gf=function(e){if(null===e||void 0===e)return Qf;if("function"===typeof e)return Yf(e);if("object"===typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Gf(e[n]);return Yf(o);function o(){let e=-1;for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];for(;++e<t.length;)if(t[e].apply(this,o))return!0;return!1}}(e):function(e){const t=e;return Yf(n);function n(n){const o=n;let r;for(r in e)if(o[r]!==t[r])return!1;return!0}}(e);if("string"===typeof e)return function(e){return Yf(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function Yf(e){return function(t,n,o){return Boolean(Zf(t)&&e.call(this,t,"number"===typeof n?n:void 0,o||void 0))}}function Qf(){return!0}function Zf(e){return null!==e&&"object"===typeof e&&"type"in e}const Xf=Gf(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function $f(e,t,n,o){const r=function(e){const t=e.options.strong||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}(n),i=n.enter("strong"),a=n.createTracker(o),s=a.move(r+r);let u=a.move(n.containerPhrasing(e,l({after:r,before:s},a.current())));const c=u.charCodeAt(0),d=Ef(o.before.charCodeAt(o.before.length-1),c,r);d.inside&&(u=vf(c)+u.slice(1));const h=u.charCodeAt(u.length-1),f=Ef(o.after.charCodeAt(0),h,r);f.inside&&(u=u.slice(0,-1)+vf(h));const p=a.move(r+r);return i(),n.attentionEncodeSurroundingInfo={after:f.outside,before:d.outside},s+u+p}$f.peek=function(e,t,n){return n.options.strong||"*"};const Jf={blockquote:function(e,t,n,o){const r=n.enter("blockquote"),i=n.createTracker(o);i.move("> "),i.shift(2);const a=n.indentLines(n.containerFlow(e,i.current()),ff);return r(),a},break:gf,code:function(e,t,n,o){const r=function(e){const t=e.options.fence||"`";if("`"!==t&&"~"!==t)throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}(n),i=e.value||"",a="`"===r?"GraveAccent":"Tilde";if(function(e,t){return Boolean(!1===t.options.fences&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}(e,n)){const e=n.enter("codeIndented"),t=n.indentLines(i,mf);return e(),t}const s=n.createTracker(o),u=r.repeat(Math.max(function(e,t){const n=String(e);let o=n.indexOf(t),r=o,i=0,a=0;if("string"!==typeof t)throw new TypeError("Expected substring");for(;-1!==o;)o===r?++i>a&&(a=i):i=1,r=o+t.length,o=n.indexOf(t,r);return a}(i,r)+1,3)),c=n.enter("codeFenced");let d=s.move(u);if(e.lang){const t=n.enter("codeFencedLang".concat(a));d+=s.move(n.safe(e.lang,l({before:d,after:" ",encode:["`"]},s.current()))),t()}if(e.lang&&e.meta){const t=n.enter("codeFencedMeta".concat(a));d+=s.move(" "),d+=s.move(n.safe(e.meta,l({before:d,after:"\n",encode:["`"]},s.current()))),t()}return d+=s.move("\n"),i&&(d+=s.move(i+"\n")),d+=s.move(u),c(),d},definition:function(e,t,n,o){const r=yf(n),i='"'===r?"Quote":"Apostrophe",a=n.enter("definition");let s=n.enter("label");const u=n.createTracker(o);let c=u.move("[");return c+=u.move(n.safe(n.associationId(e),l({before:c,after:"]"},u.current()))),c+=u.move("]: "),s(),!e.url||/[\0- \u007F]/.test(e.url)?(s=n.enter("destinationLiteral"),c+=u.move("<"),c+=u.move(n.safe(e.url,l({before:c,after:">"},u.current()))),c+=u.move(">")):(s=n.enter("destinationRaw"),c+=u.move(n.safe(e.url,l({before:c,after:e.title?" ":"\n"},u.current())))),s(),e.title&&(s=n.enter("title".concat(i)),c+=u.move(" "+r),c+=u.move(n.safe(e.title,l({before:c,after:r},u.current()))),c+=u.move(r),s()),a(),c},emphasis:Ff,hardBreak:gf,heading:function(e,t,n,o){const r=Math.max(Math.min(6,e.depth||1),1),i=n.createTracker(o);if(Of(e,n)){const t=n.enter("headingSetext"),o=n.enter("phrasing"),a=n.containerPhrasing(e,l(l({},i.current()),{},{before:"\n",after:"\n"}));return o(),t(),a+"\n"+(1===r?"=":"-").repeat(a.length-(Math.max(a.lastIndexOf("\r"),a.lastIndexOf("\n"))+1))}const a="#".repeat(r),s=n.enter("headingAtx"),u=n.enter("phrasing");i.move(a+" ");let c=n.containerPhrasing(e,l({before:"# ",after:"\n"},i.current()));return/^[\t ]/.test(c)&&(c=vf(c.charCodeAt(0))+c.slice(1)),c=c?a+" "+c:a,n.options.closeAtx&&(c+=" "+a),u(),s(),c},html:Lf,image:zf,imageReference:jf,inlineCode:Hf,link:Uf,linkReference:Wf,list:function(e,t,n,o){const r=n.enter("list"),i=n.bulletCurrent;let a=e.ordered?function(e){const t=e.options.bulletOrdered||".";if("."!==t&&")"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}(n):Vf(n);const s=e.ordered?"."===a?")":".":function(e){const t=Vf(e),n=e.options.bulletOther;if(!n)return"*"===t?"-":"*";if("*"!==n&&"+"!==n&&"-"!==n)throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}(n);let u=!(!t||!n.bulletLastUsed)&&a===n.bulletLastUsed;if(!e.ordered){const t=e.children?e.children[0]:void 0;if("*"!==a&&"-"!==a||!t||t.children&&t.children[0]||"list"!==n.stack[n.stack.length-1]||"listItem"!==n.stack[n.stack.length-2]||"list"!==n.stack[n.stack.length-3]||"listItem"!==n.stack[n.stack.length-4]||0!==n.indexStack[n.indexStack.length-1]||0!==n.indexStack[n.indexStack.length-2]||0!==n.indexStack[n.indexStack.length-3]||(u=!0),Kf(n)===a&&t){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n&&"listItem"===n.type&&n.children&&n.children[0]&&"thematicBreak"===n.children[0].type){u=!0;break}}}}u&&(a=s),n.bulletCurrent=a;const l=n.containerFlow(e,o);return n.bulletLastUsed=a,n.bulletCurrent=i,r(),l},listItem:function(e,t,n,o){const r=function(e){const t=e.options.listItemIndent||"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}(n);let i=n.bulletCurrent||Vf(n);t&&"list"===t.type&&t.ordered&&(i=("number"===typeof t.start&&t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+i);let a=i.length+1;("tab"===r||"mixed"===r&&(t&&"list"===t.type&&t.spread||e.spread))&&(a=4*Math.ceil(a/4));const s=n.createTracker(o);s.move(i+" ".repeat(a-i.length)),s.shift(a);const u=n.enter("listItem"),l=n.indentLines(n.containerFlow(e,s.current()),(function(e,t,n){if(t)return(n?"":" ".repeat(a))+e;return(n?i:i+" ".repeat(a-i.length))+e}));return u(),l},paragraph:function(e,t,n,o){const r=n.enter("paragraph"),i=n.enter("phrasing"),a=n.containerPhrasing(e,o);return i(),r(),a},root:function(e,t,n,o){return(e.children.some((function(e){return Xf(e)}))?n.containerPhrasing:n.containerFlow).call(n,e,o)},strong:$f,text:function(e,t,n,o){return n.safe(e.value,o)},thematicBreak:function(e,t,n){const o=(Kf(n)+(n.options.ruleSpaces?" ":"")).repeat(function(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}(n));return n.options.ruleSpaces?o.slice(0,-1):o}};function ep(e){const t=e._align;this.enter({type:"table",align:t.map((function(e){return"none"===e?null:e})),children:[]},e),this.data.inTable=!0}function tp(e){this.exit(e),this.data.inTable=void 0}function np(e){this.enter({type:"tableRow",children:[]},e)}function op(e){this.exit(e)}function rp(e){this.enter({type:"tableCell",children:[]},e)}function ip(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,ap));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function ap(e,t){return"|"===t?t:e}function sp(e){const t=e||{},n=t.tableCellPadding,o=t.tablePipeAlign,r=t.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:function(e,t,n){let o=Jf.inlineCode(e,t,n);n.stack.includes("tableCell")&&(o=o.replace(/\|/g,"\\$&"));return o},table:function(e,t,n,o){return s(function(e,t,n){const o=e.children;let r=-1;const i=[],a=t.enter("table");for(;++r<o.length;)i[r]=u(o[r],t,n);return a(),i}(e,n,o),e.align)},tableCell:a,tableRow:function(e,t,n,o){const r=u(e,n,o),i=s([r]);return i.slice(0,i.indexOf("\n"))}}};function a(e,t,n,o){const r=n.enter("tableCell"),a=n.enter("phrasing"),s=n.containerPhrasing(e,l(l({},o),{},{before:i,after:i}));return a(),r(),s}function s(e,t){return function(e,t){const n=t||{},o=(n.align||[]).concat(),r=n.stringLength||df,i=[],a=[],s=[],u=[];let l=0,c=-1;for(;++c<e.length;){const t=[],o=[];let i=-1;for(e[c].length>l&&(l=e[c].length);++i<e[c].length;){const a=null===(d=e[c][i])||void 0===d?"":String(d);if(!1!==n.alignDelimiters){const e=r(a);o[i]=e,(void 0===u[i]||e>u[i])&&(u[i]=e)}t.push(a)}a[c]=t,s[c]=o}var d;let h=-1;if("object"===typeof o&&"length"in o)for(;++h<l;)i[h]=hf(o[h]);else{const e=hf(o);for(;++h<l;)i[h]=e}h=-1;const f=[],p=[];for(;++h<l;){const e=i[h];let t="",o="";99===e?(t=":",o=":"):108===e?t=":":114===e&&(o=":");let r=!1===n.alignDelimiters?1:Math.max(1,u[h]-t.length-o.length);const a=t+"-".repeat(r)+o;!1!==n.alignDelimiters&&(r=t.length+r+o.length,r>u[h]&&(u[h]=r),p[h]=r),f[h]=a}a.splice(1,0,f),s.splice(1,0,p),c=-1;const g=[];for(;++c<a.length;){const e=a[c],t=s[c];h=-1;const o=[];for(;++h<l;){const r=e[h]||"";let a="",s="";if(!1!==n.alignDelimiters){const e=u[h]-(t[h]||0),n=i[h];114===n?a=" ".repeat(e):99===n?e%2?(a=" ".repeat(e/2+.5),s=" ".repeat(e/2-.5)):(a=" ".repeat(e/2),s=a):s=" ".repeat(e)}!1===n.delimiterStart||h||o.push("|"),!1===n.padding||!1===n.alignDelimiters&&""===r||!1===n.delimiterStart&&!h||o.push(" "),!1!==n.alignDelimiters&&o.push(a),o.push(r),!1!==n.alignDelimiters&&o.push(s),!1!==n.padding&&o.push(" "),!1===n.delimiterEnd&&h===l-1||o.push("|")}g.push(!1===n.delimiterEnd?o.join("").replace(/ +$/,""):o.join(""))}return g.join("\n")}(e,{align:t,alignDelimiters:o,padding:n,stringLength:r})}function u(e,t,n){const o=e.children;let r=-1;const i=[],s=t.enter("tableRow");for(;++r<o.length;)i[r]=a(o[r],0,t,n);return s(),i}}function up(e){const t=this.stack[this.stack.length-2];t.type,t.checked="taskListCheckValueChecked"===e.type}function lp(e){const t=this.stack[this.stack.length-2];if(t&&"listItem"===t.type&&"boolean"===typeof t.checked){const e=this.stack[this.stack.length-1];e.type;const n=e.children[0];if(n&&"text"===n.type){const o=t.children;let r,i=-1;for(;++i<o.length;){const e=o[i];if("paragraph"===e.type){r=e;break}}r===e&&(n.value=n.value.slice(1),0===n.value.length?e.children.shift():e.position&&n.position&&"number"===typeof n.position.start.offset&&(n.position.start.column++,n.position.start.offset++,e.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function cp(e,t,n,o){const r=e.children[0],i="boolean"===typeof e.checked&&r&&"paragraph"===r.type,a="["+(e.checked?"x":" ")+"] ",s=n.createTracker(o);i&&s.move(a);let u=Jf.listItem(e,t,n,l(l({},o),s.current()));return i&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,(function(e){return e+a}))),u}function dp(e,t,n,o){const r=e.length;let i,a=0;if(t=t<0?-t>r?0:r+t:t>r?r:t,n=n>0?n:0,o.length<1e4)i=Array.from(o),i.unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);a<o.length;)i=o.slice(a,a+1e4),i.unshift(t,0),e.splice(...i),a+=1e4,t+=1e4}const hp={}.hasOwnProperty;function fp(e,t){let n;for(n in t){const o=(hp.call(e,n)?e[n]:void 0)||(e[n]={}),r=t[n];let i;if(r)for(i in r){hp.call(o,i)||(o[i]=[]);const e=r[i];pp(o[i],Array.isArray(e)?e:e?[e]:[])}}}function pp(e,t){let n=-1;const o=[];for(;++n<t.length;)("after"===t[n].add?e:o).push(t[n]);dp(e,0,0,o)}const gp=Cp(/[A-Za-z]/),mp=Cp(/[\dA-Za-z]/);Cp(/[#-'*+\--9=?A-Z^-~]/);Cp(/\d/),Cp(/[\dA-Fa-f]/),Cp(/[!-/:-@[-`{-~]/);function yp(e){return null!==e&&(e<0||32===e)}const vp=Cp(/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDD00-\uDEB3\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF])/),Dp=Cp(/\s/);function Cp(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}const bp={tokenize:function(e,t,n){let o=0;return function t(i){if((87===i||119===i)&&o<3)return o++,e.consume(i),t;if(46===i&&3===o)return e.consume(i),r;return n(i)};function r(e){return null===e?n(e):t(e)}},partial:!0},wp={tokenize:function(e,t,n){let o,r,i;return a;function a(t){return 46===t||95===t?e.check(Fp,u,s)(t):null===t||yp(t)||Dp(t)||45!==t&&vp(t)?u(t):(i=!0,e.consume(t),a)}function s(t){return 95===t?o=!0:(r=o,o=void 0),e.consume(t),a}function u(e){return r||o||!i?n(e):t(e)}},partial:!0},Ep={tokenize:function(e,t){let n=0,o=0;return r;function r(a){return 40===a?(n++,e.consume(a),r):41===a&&o<n?i(a):33===a||34===a||38===a||39===a||41===a||42===a||44===a||46===a||58===a||59===a||60===a||63===a||93===a||95===a||126===a?e.check(Fp,t,i)(a):null===a||yp(a)||Dp(a)?t(a):(e.consume(a),r)}function i(t){return 41===t&&o++,e.consume(t),r}},partial:!0},Fp={tokenize:function(e,t,n){return o;function o(a){return 33===a||34===a||39===a||41===a||42===a||44===a||46===a||58===a||59===a||63===a||95===a||126===a?(e.consume(a),o):38===a?(e.consume(a),i):93===a?(e.consume(a),r):60===a||null===a||yp(a)||Dp(a)?t(a):n(a)}function r(e){return null===e||40===e||91===e||yp(e)||Dp(e)?t(e):o(e)}function i(e){return gp(e)?a(e):n(e)}function a(t){return 59===t?(e.consume(t),o):gp(t)?(e.consume(t),a):n(t)}},partial:!0},kp={tokenize:function(e,t,n){return function(t){return e.consume(t),o};function o(e){return mp(e)?n(e):t(e)}},partial:!0},xp={name:"wwwAutolink",tokenize:function(e,t,n){const o=this;return function(t){if(87!==t&&119!==t||!_p.call(o,o.previous)||Rp(o.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(bp,e.attempt(wp,e.attempt(Ep,r),n),n)(t)};function r(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:_p},Ap={name:"protocolAutolink",tokenize:function(e,t,n){const o=this;let r="",i=!1;return function(t){if((72===t||104===t)&&Tp.call(o,o.previous)&&!Rp(o.events))return e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),r+=String.fromCodePoint(t),e.consume(t),a;return n(t)};function a(t){if(gp(t)&&r.length<5)return r+=String.fromCodePoint(t),e.consume(t),a;if(58===t){const n=r.toLowerCase();if("http"===n||"https"===n)return e.consume(t),s}return n(t)}function s(t){return 47===t?(e.consume(t),i?u:(i=!0,s)):n(t)}function u(t){return null===t||function(e){return null!==e&&(e<32||127===e)}(t)||yp(t)||Dp(t)||vp(t)?n(t):e.attempt(wp,e.attempt(Ep,l),n)(t)}function l(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}},previous:Tp},Sp={name:"emailAutolink",tokenize:function(e,t,n){const o=this;let r,i;return function(t){if(!Mp(t)||!Np.call(o,o.previous)||Rp(o.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(t)};function a(t){return Mp(t)?(e.consume(t),a):64===t?(e.consume(t),s):n(t)}function s(t){return 46===t?e.check(kp,l,u)(t):45===t||95===t||mp(t)?(i=!0,e.consume(t),s):l(t)}function u(t){return e.consume(t),r=!0,s}function l(a){return i&&r&&gp(o.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(a)):n(a)}},previous:Np},Ip={};let Pp=48;for(;Pp<123;)Ip[Pp]=Sp,Pp++,58===Pp?Pp=65:91===Pp&&(Pp=97);function _p(e){return null===e||40===e||42===e||95===e||91===e||93===e||126===e||yp(e)}function Tp(e){return!gp(e)}function Np(e){return!(47===e||Mp(e))}function Mp(e){return 43===e||45===e||46===e||95===e||mp(e)}function Rp(e){let t=e.length,n=!1;for(;t--;){const o=e[t][1];if(("labelLink"===o.type||"labelImage"===o.type)&&!o._balanced){n=!0;break}if(o._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}Ip[43]=Sp,Ip[45]=Sp,Ip[46]=Sp,Ip[95]=Sp,Ip[72]=[Sp,Ap],Ip[104]=[Sp,Ap],Ip[87]=[Sp,xp],Ip[119]=[Sp,xp];Lp(/[A-Za-z]/),Lp(/[\dA-Za-z]/),Lp(/[#-'*+\--9=?A-Z^-~]/);Lp(/\d/),Lp(/[\dA-Fa-f]/),Lp(/[!-/:-@[-`{-~]/);function Bp(e){return null!==e&&(e<0||32===e)}function Op(e){return-2===e||-1===e||32===e}Lp(/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDD00-\uDEB3\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF])/),Lp(/\s/);function Lp(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function zp(e,t,n,o){const r=o?o-1:Number.POSITIVE_INFINITY;let i=0;return function(o){if(Op(o))return e.enter(n),a(o);return t(o)};function a(o){return Op(o)&&i++<r?(e.consume(o),a):(e.exit(n),t(o))}}const jp={partial:!0,tokenize:function(e,t,n){return function(t){return Op(t)?zp(e,o,"linePrefix")(t):o(t)};function o(e){return null===e||function(e){return null!==e&&e<-2}(e)?t(e):n(e)}}};function Hp(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const qp={tokenize:function(e,t,n){const o=this;return zp(e,(function(e){const r=o.events[o.events.length-1];return r&&"gfmFootnoteDefinitionIndent"===r[1].type&&4===r[2].sliceSerialize(r[1],!0).length?t(e):n(e)}),"gfmFootnoteDefinitionIndent",5)},partial:!0};function Up(e,t,n){const o=this;let r=o.events.length;const i=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]);let a;for(;r--;){const e=o.events[r][1];if("labelImage"===e.type){a=e;break}if("gfmFootnoteCall"===e.type||"labelLink"===e.type||"label"===e.type||"image"===e.type||"link"===e.type)break}return function(r){if(!a||!a._balanced)return n(r);const s=Hp(o.sliceSerialize({start:a.end,end:o.now()}));if(94!==s.codePointAt(0)||!i.includes(s.slice(1)))return n(r);return e.enter("gfmFootnoteCallLabelMarker"),e.consume(r),e.exit("gfmFootnoteCallLabelMarker"),t(r)}}function Wp(e,t){let n,o=e.length;for(;o--;)if("labelImage"===e[o][1].type&&"enter"===e[o][0]){n=e[o][1];break}e[o+1][1].type="data",e[o+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[o+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[o+3][1].end),end:Object.assign({},e[o+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},u=[e[o+1],e[o+2],["enter",r,t],e[o+3],e[o+4],["enter",i,t],["exit",i,t],["enter",a,t],["enter",s,t],["exit",s,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(o,e.length-o+1,...u),e}function Vp(e,t,n){const o=this,r=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]);let i,a=0;return function(t){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(t),e.exit("gfmFootnoteCallLabelMarker"),s};function s(t){return 94!==t?n(t):(e.enter("gfmFootnoteCallMarker"),e.consume(t),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(s){if(a>999||93===s&&!i||null===s||91===s||Bp(s))return n(s);if(93===s){e.exit("chunkString");const i=e.exit("gfmFootnoteCallString");return r.includes(Hp(o.sliceSerialize(i)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(s),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(s)}return Bp(s)||(i=!0),a++,e.consume(s),92===s?l:u}function l(t){return 91===t||92===t||93===t?(e.consume(t),a++,u):u(t)}}function Kp(e,t,n){const o=this,r=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]);let i,a,s=0;return function(t){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),u};function u(t){return 94===t?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",l):n(t)}function l(t){if(s>999||93===t&&!a||null===t||91===t||Bp(t))return n(t);if(93===t){e.exit("chunkString");const n=e.exit("gfmFootnoteDefinitionLabelString");return i=Hp(o.sliceSerialize(n)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),d}return Bp(t)||(a=!0),s++,e.consume(t),92===t?c:l}function c(t){return 91===t||92===t||93===t?(e.consume(t),s++,l):l(t)}function d(t){return 58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),r.includes(i)||r.push(i),zp(e,h,"gfmFootnoteDefinitionWhitespace")):n(t)}function h(e){return t(e)}}function Gp(e,t,n){return e.check(jp,t,e.attempt(qp,t,n))}function Yp(e){e.exit("gfmFootnoteDefinition")}function Qp(e,t,n,o){const r=e.length;let i,a=0;if(t=t<0?-t>r?0:r+t:t>r?r:t,n=n>0?n:0,o.length<1e4)i=Array.from(o),i.unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);a<o.length;)i=o.slice(a,a+1e4),i.unshift(t,0),e.splice(...i),a+=1e4,t+=1e4}$p(/[A-Za-z]/),$p(/[\dA-Za-z]/),$p(/[#-'*+\--9=?A-Z^-~]/);$p(/\d/),$p(/[\dA-Fa-f]/),$p(/[!-/:-@[-`{-~]/);const Zp=$p(/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDD00-\uDEB3\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF])/),Xp=$p(/\s/);function $p(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function Jp(e){return null===e||function(e){return null!==e&&(e<0||32===e)}(e)||Xp(e)?1:Zp(e)?2:void 0}function eg(e,t,n){const o=[];let r=-1;for(;++r<e.length;){const i=e[r].resolveAll;i&&!o.includes(i)&&(t=i(t,n),o.push(i))}return t}function tg(e){let t=(e||{}).singleTilde;const n={name:"strikethrough",tokenize:function(e,n,o){const r=this.previous,i=this.events;let a=0;return function(t){if(126===r&&"characterEscape"!==i[i.length-1][1].type)return o(t);return e.enter("strikethroughSequenceTemporary"),s(t)};function s(i){const u=Jp(r);if(126===i)return a>1?o(i):(e.consume(i),a++,s);if(a<2&&!t)return o(i);const l=e.exit("strikethroughSequenceTemporary"),c=Jp(i);return l._open=!c||2===c&&Boolean(u),l._close=!u||2===u&&Boolean(c),n(i)}},resolveAll:function(e,t){let n=-1;for(;++n<e.length;)if("enter"===e[n][0]&&"strikethroughSequenceTemporary"===e[n][1].type&&e[n][1]._close){let o=n;for(;o--;)if("exit"===e[o][0]&&"strikethroughSequenceTemporary"===e[o][1].type&&e[o][1]._open&&e[n][1].end.offset-e[n][1].start.offset===e[o][1].end.offset-e[o][1].start.offset){e[n][1].type="strikethroughSequence",e[o][1].type="strikethroughSequence";const r={type:"strikethrough",start:Object.assign({},e[o][1].start),end:Object.assign({},e[n][1].end)},i={type:"strikethroughText",start:Object.assign({},e[o][1].end),end:Object.assign({},e[n][1].start)},a=[["enter",r,t],["enter",e[o][1],t],["exit",e[o][1],t],["enter",i,t]],s=t.parser.constructs.insideSpan.null;s&&Qp(a,a.length,0,eg(s,e.slice(o+1,n),t)),Qp(a,a.length,0,[["exit",i,t],["enter",e[n][1],t],["exit",e[n][1],t],["exit",r,t]]),Qp(e,o-1,n-o+3,a),n=o+a.length-2;break}}n=-1;for(;++n<e.length;)"strikethroughSequenceTemporary"===e[n][1].type&&(e[n][1].type="data");return e}};return null!==t&&void 0!==t||(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}}}ig(/[A-Za-z]/),ig(/[\dA-Za-z]/),ig(/[#-'*+\--9=?A-Z^-~]/);ig(/\d/),ig(/[\dA-Fa-f]/),ig(/[!-/:-@[-`{-~]/);function ng(e){return null!==e&&e<-2}function og(e){return null!==e&&(e<0||32===e)}function rg(e){return-2===e||-1===e||32===e}ig(/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDD00-\uDEB3\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF])/),ig(/\s/);function ig(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function ag(e,t,n,o){const r=o?o-1:Number.POSITIVE_INFINITY;let i=0;return function(o){if(rg(o))return e.enter(n),a(o);return t(o)};function a(o){return rg(o)&&i++<r?(e.consume(o),a):(e.exit(n),t(o))}}class sg{constructor(){this.map=[]}add(e,t,n){!function(e,t,n,o){let r=0;if(0===n&&0===o.length)return;for(;r<e.map.length;){if(e.map[r][0]===t)return e.map[r][1]+=n,void e.map[r][2].push(...o);r+=1}e.map.push([t,n,o])}(this,e,t,n)}consume(e){if(this.map.sort((function(e,t){return e[0]-t[0]})),0===this.map.length)return;let t=this.map.length;const n=[];for(;t>0;)t-=1,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push(e.slice()),e.length=0;let o=n.pop();for(;o;){for(const t of o)e.push(t);o=n.pop()}this.map.length=0}}function ug(e,t){let n=!1;const o=[];for(;t<e.length;){const r=e[t];if(n){if("enter"===r[0])"tableContent"===r[1].type&&o.push("tableDelimiterMarker"===e[t+1][1].type?"left":"none");else if("tableContent"===r[1].type){if("tableDelimiterMarker"===e[t-1][1].type){const e=o.length-1;o[e]="left"===o[e]?"center":"right"}}else if("tableDelimiterRow"===r[1].type)break}else"enter"===r[0]&&"tableDelimiterRow"===r[1].type&&(n=!0);t+=1}return o}function lg(e,t,n){const o=this;let r,i=0,a=0;return function(e){let t=o.events.length-1;for(;t>-1;){const e=o.events[t][1].type;if("lineEnding"!==e&&"linePrefix"!==e)break;t--}const r=t>-1?o.events[t][1].type:null,i="tableHead"===r||"tableRow"===r?C:s;if(i===C&&o.parser.lazy[o.now().line])return n(e);return i(e)};function s(t){return e.enter("tableHead"),e.enter("tableRow"),function(e){if(124===e)return u(e);return r=!0,a+=1,u(e)}(t)}function u(t){return null===t?n(t):ng(t)?a>1?(a=0,o.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),d):n(t):rg(t)?ag(e,u,"whitespace")(t):(a+=1,r&&(r=!1,i+=1),124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),r=!0,u):(e.enter("data"),l(t)))}function l(t){return null===t||124===t||og(t)?(e.exit("data"),u(t)):(e.consume(t),92===t?c:l)}function c(t){return 92===t||124===t?(e.consume(t),l):l(t)}function d(t){return o.interrupt=!1,o.parser.lazy[o.now().line]?n(t):(e.enter("tableDelimiterRow"),r=!1,rg(t)?ag(e,h,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):h(t))}function h(t){return 45===t||58===t?p(t):124===t?(r=!0,e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),f):D(t)}function f(t){return rg(t)?ag(e,p,"whitespace")(t):p(t)}function p(t){return 58===t?(a+=1,r=!0,e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),g):45===t?(a+=1,g(t)):null===t||ng(t)?v(t):D(t)}function g(t){return 45===t?(e.enter("tableDelimiterFiller"),m(t)):D(t)}function m(t){return 45===t?(e.consume(t),m):58===t?(r=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),y):(e.exit("tableDelimiterFiller"),y(t))}function y(t){return rg(t)?ag(e,v,"whitespace")(t):v(t)}function v(n){return 124===n?h(n):(null===n||ng(n))&&r&&i===a?(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(n)):D(n)}function D(e){return n(e)}function C(t){return e.enter("tableRow"),b(t)}function b(n){return 124===n?(e.enter("tableCellDivider"),e.consume(n),e.exit("tableCellDivider"),b):null===n||ng(n)?(e.exit("tableRow"),t(n)):rg(n)?ag(e,b,"whitespace")(n):(e.enter("data"),w(n))}function w(t){return null===t||124===t||og(t)?(e.exit("data"),b(t)):(e.consume(t),92===t?E:w)}function E(t){return 92===t||124===t?(e.consume(t),w):w(t)}}function cg(e,t){let n,o,r,i=-1,a=!0,s=0,u=[0,0,0,0],l=[0,0,0,0],c=!1,d=0;const h=new sg;for(;++i<e.length;){const f=e[i],p=f[1];"enter"===f[0]?"tableHead"===p.type?(c=!1,0!==d&&(hg(h,t,d,n,o),o=void 0,d=0),n={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},h.add(i,0,[["enter",n,t]])):"tableRow"===p.type||"tableDelimiterRow"===p.type?(a=!0,r=void 0,u=[0,0,0,0],l=[0,i+1,0,0],c&&(c=!1,o={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},h.add(i,0,[["enter",o,t]])),s="tableDelimiterRow"===p.type?2:o?3:1):!s||"data"!==p.type&&"tableDelimiterMarker"!==p.type&&"tableDelimiterFiller"!==p.type?"tableCellDivider"===p.type&&(a?a=!1:(0!==u[1]&&(l[0]=l[1],r=dg(h,t,u,s,void 0,r)),u=l,l=[u[1],i,0,0])):(a=!1,0===l[2]&&(0!==u[1]&&(l[0]=l[1],r=dg(h,t,u,s,void 0,r),u=[0,0,0,0]),l[2]=i)):"tableHead"===p.type?(c=!0,d=i):"tableRow"===p.type||"tableDelimiterRow"===p.type?(d=i,0!==u[1]?(l[0]=l[1],r=dg(h,t,u,s,i,r)):0!==l[1]&&(r=dg(h,t,l,s,i,r)),s=0):!s||"data"!==p.type&&"tableDelimiterMarker"!==p.type&&"tableDelimiterFiller"!==p.type||(l[3]=i)}for(0!==d&&hg(h,t,d,n,o),h.consume(t.events),i=-1;++i<t.events.length;){const e=t.events[i];"enter"===e[0]&&"table"===e[1].type&&(e[1]._align=ug(t.events,i))}return e}function dg(e,t,n,o,r,i){const a=1===o?"tableHeader":2===o?"tableDelimiter":"tableData";0!==n[0]&&(i.end=Object.assign({},fg(t.events,n[0])),e.add(n[0],0,[["exit",i,t]]));const s=fg(t.events,n[1]);if(i={type:a,start:Object.assign({},s),end:Object.assign({},s)},e.add(n[1],0,[["enter",i,t]]),0!==n[2]){const r=fg(t.events,n[2]),i=fg(t.events,n[3]),a={type:"tableContent",start:Object.assign({},r),end:Object.assign({},i)};if(e.add(n[2],0,[["enter",a,t]]),2!==o){const o=t.events[n[2]],r=t.events[n[3]];if(o[1].end=Object.assign({},r[1].end),o[1].type="chunkText",o[1].contentType="text",n[3]>n[2]+1){const t=n[2]+1,o=n[3]-n[2]-1;e.add(t,o,[])}}e.add(n[3]+1,0,[["exit",a,t]])}return void 0!==r&&(i.end=Object.assign({},fg(t.events,r)),e.add(r,0,[["exit",i,t]]),i=void 0),i}function hg(e,t,n,o,r){const i=[],a=fg(t.events,n);r&&(r.end=Object.assign({},a),i.push(["exit",r,t])),o.end=Object.assign({},a),i.push(["exit",o,t]),e.add(n+1,0,i)}function fg(e,t){const n=e[t],o="enter"===n[0]?"start":"end";return n[1][o]}gg(/[A-Za-z]/),gg(/[\dA-Za-z]/),gg(/[#-'*+\--9=?A-Z^-~]/);gg(/\d/),gg(/[\dA-Fa-f]/),gg(/[!-/:-@[-`{-~]/);function pg(e){return-2===e||-1===e||32===e}gg(/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B4E\u1B4F\u1B5A-\u1B60\u1B7D-\u1B7F\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDD6E\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9\uDFD4\uDFD5\uDFD7\uDFD8]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09\uDFE1]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDD6D-\uDD6F\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD839\uDDFF|\uD83A[\uDD5E\uDD5F])|(?:[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2429\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E5\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD803[\uDD8E\uDD8F]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDC00-\uDCEF\uDD00-\uDEB3\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0-\uDCBB\uDCC0\uDCC1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFEF])/),gg(/\s/);function gg(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}const mg={name:"tasklistCheck",tokenize:function(e,t,n){const o=this;return function(t){if(null!==o.previous||!o._gfmTasklistFirstContentOfListItem)return n(t);return e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),r};function r(t){return function(e){return null!==e&&(e<0||32===e)}(t)?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),i):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),i):n(t)}function i(t){return 93===t?(e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):n(t)}function a(o){return function(e){return null!==e&&e<-2}(o)?t(o):pg(o)?e.check({tokenize:yg},t,n)(o):n(o)}}};function yg(e,t,n){return function(e,t,n,o){const r=o?o-1:Number.POSITIVE_INFINITY;let i=0;return function(o){return pg(o)?(e.enter(n),a(o)):t(o)};function a(o){return pg(o)&&i++<r?(e.consume(o),a):(e.exit(n),t(o))}}(e,(function(e){return null===e?n(e):t(e)}),"whitespace")}function vg(e){return function(e){const t={};let n=-1;for(;++n<e.length;)fp(t,e[n]);return t}([{text:Ip},{document:{91:{name:"gfmFootnoteDefinition",tokenize:Kp,continuation:{tokenize:Gp},exit:Yp}},text:{91:{name:"gfmFootnoteCall",tokenize:Vp},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Up,resolveTo:Wp}}},tg(e),{flow:{null:{name:"table",tokenize:lg,resolveAll:cg}}},{text:{91:mg}}])}const Dg={};function Cg(e){const t=e||Dg,n=this.data(),o=n.micromarkExtensions||(n.micromarkExtensions=[]),r=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),i=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);o.push(vg(t)),r.push([{transforms:[Uh],enter:{literalAutolink:Oh,literalAutolinkEmail:Lh,literalAutolinkHttp:Lh,literalAutolinkWww:Lh},exit:{literalAutolink:qh,literalAutolinkEmail:Hh,literalAutolinkHttp:zh,literalAutolinkWww:jh}},{enter:{gfmFootnoteCallString:Yh,gfmFootnoteCall:Qh,gfmFootnoteDefinitionLabelString:Zh,gfmFootnoteDefinition:Xh},exit:{gfmFootnoteCallString:$h,gfmFootnoteCall:Jh,gfmFootnoteDefinitionLabelString:ef,gfmFootnoteDefinition:tf}},{canContainEols:["delete"],enter:{strikethrough:uf},exit:{strikethrough:lf}},{enter:{table:ep,tableData:rp,tableHeader:rp,tableRow:np},exit:{codeText:ip,table:tp,tableData:op,tableHeader:op,tableRow:op}},{exit:{taskListCheckValueChecked:up,taskListCheckValueUnchecked:up,paragraph:lp}}]),i.push(function(e){return{extensions:[{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Rh,notInConstruct:Bh},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Rh,notInConstruct:Bh},{character:":",before:"[ps]",after:"\\/",inConstruct:Rh,notInConstruct:Bh}]},of(e),{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:sf}],handlers:{delete:cf}},sp(e),{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:cp}}]}}(t))}const bg=(()=>{let e=0;return()=>(e+=1,"u".concat("0000".concat((Math.random()*36**4|0).toString(36)).slice(-4)).concat(e))})();function wg(e){const t=[];for(let n=0,o=e.length;n<o;n++)t.push(e[n]);return t}let Eg=null;function Fg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Eg||(e.includeStyleProperties?(Eg=e.includeStyleProperties,Eg):(Eg=wg(window.getComputedStyle(document.documentElement)),Eg))}function kg(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function xg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.width||function(e){const t=kg(e,"border-left-width"),n=kg(e,"border-right-width");return e.clientWidth+t+n}(e),o=t.height||function(e){const t=kg(e,"border-top-width"),n=kg(e,"border-bottom-width");return e.clientHeight+t+n}(e);return{width:n,height:o}}const Ag=16384;function Sg(e){return new Promise(((t,n)=>{const o=new Image;o.onload=()=>{o.decode().then((()=>{requestAnimationFrame((()=>t(o)))}))},o.onerror=n,o.crossOrigin="anonymous",o.decoding="async",o.src=e}))}async function Ig(e,t,n){const o="http://www.w3.org/2000/svg",r=document.createElementNS(o,"svg"),i=document.createElementNS(o,"foreignObject");return r.setAttribute("width","".concat(t)),r.setAttribute("height","".concat(n)),r.setAttribute("viewBox","0 0 ".concat(t," ").concat(n)),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("externalResourcesRequired","true"),r.appendChild(i),i.appendChild(e),async function(e){return Promise.resolve().then((()=>(new XMLSerializer).serializeToString(e))).then(encodeURIComponent).then((e=>"data:image/svg+xml;charset=utf-8,".concat(e)))}(r)}const Pg=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return null!==n&&(n.constructor.name===t.name||Pg(n,t))};function _g(e,t,n,o){const r=".".concat(e,":").concat(t),i=n.cssText?function(e){const t=e.getPropertyValue("content");return"".concat(e.cssText," content: '").concat(t.replace(/'|"/g,""),"';")}(n):function(e,t){return Fg(t).map((t=>{const n=e.getPropertyValue(t),o=e.getPropertyPriority(t);return"".concat(t,": ").concat(n).concat(o?" !important":"",";")})).join(" ")}(n,o);return document.createTextNode("".concat(r,"{").concat(i,"}"))}function Tg(e,t,n,o){const r=window.getComputedStyle(e,n),i=r.getPropertyValue("content");if(""===i||"none"===i)return;const a=bg();try{t.className="".concat(t.className," ").concat(a)}catch(u){return}const s=document.createElement("style");s.appendChild(_g(a,n,r,o)),t.appendChild(s)}const Ng="application/font-woff",Mg="image/jpeg",Rg={woff:Ng,woff2:Ng,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Mg,jpeg:Mg,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Bg(e){const t=function(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}(e).toLowerCase();return Rg[t]||""}function Og(e){return-1!==e.search(/^(data:)/)}function Lg(e,t){return"data:".concat(t,";base64,").concat(e)}async function zg(e,t,n){const o=await fetch(e,t);if(404===o.status)throw new Error('Resource "'.concat(o.url,'" not found'));const r=await o.blob();return new Promise(((e,t)=>{const i=new FileReader;i.onerror=t,i.onloadend=()=>{try{e(n({res:o,result:i.result}))}catch(r){t(r)}},i.readAsDataURL(r)}))}const jg={};async function Hg(e,t,n){const o=function(e,t,n){let o=e.replace(/\?.*/,"");return n&&(o=e),/ttf|otf|eot|woff2?/i.test(o)&&(o=o.replace(/.*\//,"")),t?"[".concat(t,"]").concat(o):o}(e,t,n.includeQueryParams);if(null!=jg[o])return jg[o];let r;n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());try{const o=await zg(e,n.fetchRequestInit,(e=>{let{res:n,result:o}=e;return t||(t=n.headers.get("Content-Type")||""),function(e){return e.split(/,/)[1]}(o)}));r=Lg(o,t)}catch(i){r=n.imagePlaceholder||"";let t="Failed to fetch resource: ".concat(e);i&&(t="string"===typeof i?i:i.message),t&&console.warn(t)}return jg[o]=r,r}async function qg(e,t){return Pg(e,HTMLCanvasElement)?async function(e){const t=e.toDataURL();return"data:,"===t?e.cloneNode(!1):Sg(t)}(e):Pg(e,HTMLVideoElement)?async function(e,t){if(e.currentSrc){const t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.clientWidth,t.height=e.clientHeight,null===n||void 0===n||n.drawImage(e,0,0,t.width,t.height),Sg(t.toDataURL())}const n=e.poster,o=Bg(n);return Sg(await Hg(n,o,t))}(e,t):Pg(e,HTMLIFrameElement)?async function(e,t){var n;try{if(null===(n=null===e||void 0===e?void 0:e.contentDocument)||void 0===n?void 0:n.body)return await Kg(e.contentDocument.body,t,!0)}catch(o){}return e.cloneNode(!1)}(e,t):e.cloneNode(Wg(e))}const Ug=e=>null!=e.tagName&&"SLOT"===e.tagName.toUpperCase(),Wg=e=>null!=e.tagName&&"SVG"===e.tagName.toUpperCase();function Vg(e,t,n){return Pg(t,Element)&&(function(e,t,n){const o=t.style;if(!o)return;const r=window.getComputedStyle(e);r.cssText?(o.cssText=r.cssText,o.transformOrigin=r.transformOrigin):Fg(n).forEach((n=>{let i=r.getPropertyValue(n);if("font-size"===n&&i.endsWith("px")){const e=Math.floor(parseFloat(i.substring(0,i.length-2)))-.1;i="".concat(e,"px")}Pg(e,HTMLIFrameElement)&&"display"===n&&"inline"===i&&(i="block"),"d"===n&&t.getAttribute("d")&&(i="path(".concat(t.getAttribute("d"),")")),o.setProperty(n,i,r.getPropertyPriority(n))}))}(e,t,n),function(e,t,n){Tg(e,t,":before",n),Tg(e,t,":after",n)}(e,t,n),function(e,t){Pg(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Pg(e,HTMLInputElement)&&t.setAttribute("value",e.value)}(e,t),function(e,t){if(Pg(e,HTMLSelectElement)){const n=t,o=Array.from(n.children).find((t=>e.value===t.getAttribute("value")));o&&o.setAttribute("selected","")}}(e,t)),t}async function Kg(e,t,n){return n||!t.filter||t.filter(e)?Promise.resolve(e).then((e=>qg(e,t))).then((n=>async function(e,t,n){var o,r;if(Wg(t))return t;let i=[];return i=Ug(e)&&e.assignedNodes?wg(e.assignedNodes()):Pg(e,HTMLIFrameElement)&&(null===(o=e.contentDocument)||void 0===o?void 0:o.body)?wg(e.contentDocument.body.childNodes):wg((null!==(r=e.shadowRoot)&&void 0!==r?r:e).childNodes),0===i.length||Pg(e,HTMLVideoElement)||await i.reduce(((e,o)=>e.then((()=>Kg(o,n))).then((e=>{e&&t.appendChild(e)}))),Promise.resolve()),t}(e,n,t))).then((n=>Vg(e,n,t))).then((e=>async function(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(0===n.length)return e;const o={};for(let i=0;i<n.length;i++){const r=n[i].getAttribute("xlink:href");if(r){const n=e.querySelector(r),i=document.querySelector(r);n||!i||o[r]||(o[r]=await Kg(i,t,!0))}}const r=Object.values(o);if(r.length){const t="http://www.w3.org/1999/xhtml",n=document.createElementNS(t,"svg");n.setAttribute("xmlns",t),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";const o=document.createElementNS(t,"defs");n.appendChild(o);for(let e=0;e<r.length;e++)o.appendChild(r[e]);e.appendChild(n)}return e}(e,t))):null}const Gg=/url\((['"]?)([^'"]+?)\1\)/g,Yg=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Qg=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function Zg(e,t,n,o,r){try{const i=n?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),o=n.createElement("base"),r=n.createElement("a");return n.head.appendChild(o),n.body.appendChild(r),t&&(o.href=t),r.href=e,r.href}(t,n):t,a=Bg(t);let s;if(r){s=Lg(await r(i),a)}else s=await Hg(i,a,o);return e.replace(function(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp("(url\\(['\"]?)(".concat(t,")(['\"]?\\))"),"g")}(t),"$1".concat(s,"$3"))}catch(i){}return e}function Xg(e){return-1!==e.search(Gg)}async function $g(e,t,n){if(!Xg(e))return e;const o=function(e,t){let{preferredFontFormat:n}=t;return n?e.replace(Qg,(e=>{for(;;){const[t,,o]=Yg.exec(e)||[];if(!o)return"";if(o===n)return"src: ".concat(t,";")}})):e}(e,n),r=function(e){const t=[];return e.replace(Gg,((e,n,o)=>(t.push(o),e))),t.filter((e=>!Og(e)))}(o);return r.reduce(((e,o)=>e.then((e=>Zg(e,o,t,n)))),Promise.resolve(o))}async function Jg(e,t,n){var o;const r=null===(o=t.style)||void 0===o?void 0:o.getPropertyValue(e);if(r){const o=await $g(r,null,n);return t.style.setProperty(e,o,t.style.getPropertyPriority(e)),!0}return!1}async function em(e,t){Pg(e,Element)&&(await async function(e,t){await Jg("background",e,t)||await Jg("background-image",e,t),await Jg("mask",e,t)||await Jg("-webkit-mask",e,t)||await Jg("mask-image",e,t)||await Jg("-webkit-mask-image",e,t)}(e,t),await async function(e,t){const n=Pg(e,HTMLImageElement);if((!n||Og(e.src))&&(!Pg(e,SVGImageElement)||Og(e.href.baseVal)))return;const o=n?e.src:e.href.baseVal,r=await Hg(o,Bg(o),t);await new Promise(((o,i)=>{e.onload=o,e.onerror=t.onImageErrorHandler?function(){try{o(t.onImageErrorHandler(...arguments))}catch(e){i(e)}}:i;const a=e;a.decode&&(a.decode=o),"lazy"===a.loading&&(a.loading="eager"),n?(e.srcset="",e.src=r):e.href.baseVal=r}))}(e,t),await async function(e,t){const n=wg(e.childNodes).map((e=>em(e,t)));await Promise.all(n).then((()=>e))}(e,t))}const tm={};async function nm(e){let t=tm[e];if(null!=t)return t;const n=await fetch(e);return t={url:e,cssText:await n.text()},tm[e]=t,t}async function om(e,t){let n=e.cssText;const o=/url\(["']?([^"')]+)["']?\)/g,r=(n.match(/url\([^)]+\)/g)||[]).map((async r=>{let i=r.replace(o,"$1");return i.startsWith("https://")||(i=new URL(i,e.url).href),zg(i,t.fetchRequestInit,(e=>{let{result:t}=e;return n=n.replace(r,"url(".concat(t,")")),[r,t]}))}));return Promise.all(r).then((()=>n))}function rm(e){if(null==e)return[];const t=[];let n=e.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const o=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const e=o.exec(n);if(null===e)break;t.push(e[0])}n=n.replace(o,"");const r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=r.exec(n);if(null===e){if(e=i.exec(n),null===e)break;r.lastIndex=i.lastIndex}else i.lastIndex=r.lastIndex;t.push(e[0])}return t}async function im(e,t){if(null==e.ownerDocument)throw new Error("Provided element is not within a Document");const n=wg(e.ownerDocument.styleSheets),o=await async function(e,t){const n=[],o=[];return e.forEach((n=>{if("cssRules"in n)try{wg(n.cssRules||[]).forEach(((e,r)=>{if(e.type===CSSRule.IMPORT_RULE){let i=r+1;const a=nm(e.href).then((e=>om(e,t))).then((e=>rm(e).forEach((e=>{try{n.insertRule(e,e.startsWith("@import")?i+=1:n.cssRules.length)}catch(t){console.error("Error inserting rule from remote css",{rule:e,error:t})}})))).catch((e=>{console.error("Error loading remote css",e.toString())}));o.push(a)}}))}catch(r){const i=e.find((e=>null==e.href))||document.styleSheets[0];null!=n.href&&o.push(nm(n.href).then((e=>om(e,t))).then((e=>rm(e).forEach((e=>{i.insertRule(e,i.cssRules.length)})))).catch((e=>{console.error("Error loading remote stylesheet",e)}))),console.error("Error inlining remote css file",r)}})),Promise.all(o).then((()=>(e.forEach((e=>{if("cssRules"in e)try{wg(e.cssRules||[]).forEach((e=>{n.push(e)}))}catch(t){console.error("Error while reading CSS rules from ".concat(e.href),t)}})),n)))}(n,t);return function(e){return e.filter((e=>e.type===CSSRule.FONT_FACE_RULE)).filter((e=>Xg(e.style.getPropertyValue("src"))))}(o)}function am(e){return e.trim().replace(/["']/g,"")}async function sm(e,t){const n=await im(e,t),o=function(e){const t=new Set;return function e(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach((e=>{t.add(am(e))})),Array.from(n.children).forEach((t=>{t instanceof HTMLElement&&e(t)}))}(e),t}(e);return(await Promise.all(n.filter((e=>o.has(am(e.style.fontFamily)))).map((e=>{const n=e.parentStyleSheet?e.parentStyleSheet.href:null;return $g(e.cssText,n,t)})))).join("\n")}async function um(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{width:n,height:o}=xg(e,t),r=await Kg(e,t,!0);await async function(e,t){const n=null!=t.fontEmbedCSS?t.fontEmbedCSS:t.skipFonts?null:await sm(e,t);if(n){const t=document.createElement("style"),o=document.createTextNode(n);t.appendChild(o),e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}}(r,t),await em(r,t),function(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width="".concat(t.width,"px")),t.height&&(n.height="".concat(t.height,"px"));const o=t.style;null!=o&&Object.keys(o).forEach((e=>{n[e]=o[e]}))}(r,t);return await Ig(r,n,o)}async function lm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{width:n,height:o}=xg(e,t),r=await um(e,t),i=await Sg(r),a=document.createElement("canvas"),s=a.getContext("2d"),u=t.pixelRatio||function(){let e,t;try{t=process}catch(o){}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}(),l=t.canvasWidth||n,c=t.canvasHeight||o;return a.width=l*u,a.height=c*u,t.skipAutoScale||function(e){(e.width>Ag||e.height>Ag)&&(e.width>Ag&&e.height>Ag?e.width>e.height?(e.height*=Ag/e.width,e.width=Ag):(e.width*=Ag/e.height,e.height=Ag):e.width>Ag?(e.height*=Ag/e.width,e.width=Ag):(e.width*=Ag/e.height,e.height=Ag))}(a),a.style.width="".concat(l),a.style.height="".concat(c),t.backgroundColor&&(s.fillStyle=t.backgroundColor,s.fillRect(0,0,a.width,a.height)),s.drawImage(i,0,0,a.width,a.height),a}const cm=(0,o.createContext)();function dm(e){let{children:t}=e;const[n,r]=(0,o.useState)({open:!1,message:"",progressRoles:null,progressGraph:null,status:""}),i=(0,o.useCallback)((function(e){r({open:!0,message:e,status:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",progressRoles:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,progressGraph:arguments.length>3&&void 0!==arguments[3]?arguments[3]:null})}),[]),a=(0,o.useCallback)(((e,t)=>{r((n=>l(l({},n),{},{progressRoles:{current:e,total:t}})))}),[]),s=(0,o.useCallback)(((e,t)=>{r((n=>l(l({},n),{},{progressGraph:{current:e,total:t}})))}),[]),u=(0,o.useCallback)((()=>r((e=>l(l({},e),{},{open:!1})))),[]);return(0,d.jsxs)(cm.Provider,{value:{showToast:i,closeToast:u,updateToastProgressRoles:a,updateToastProgressGraph:s},children:[t,(0,d.jsx)(fm,{toast:n,closeToast:u})]})}function hm(){return(0,o.useContext)(cm)}function fm(e){let{toast:t,closeToast:n}=e;return t.open?(0,d.jsx)("div",{className:"fixed bottom-6 right-6 z-[100]",children:(0,d.jsxs)("div",{className:"flex flex-col gap-2 px-6 py-4 rounded-lg shadow-lg border\n          ".concat("success"===t.status?"bg-green-700/90 border-green-400":"error"===t.status?"bg-red-800/90 border-red-400":"bg-gray-800/90 border-blue-400","\n          min-w-[300px] max-w-xs animate-fade-in"),style:{transition:"all 0.3s"},children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:["success"===t.status&&(0,d.jsx)("svg",{className:"h-6 w-6 text-green-200",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"error"===t.status&&(0,d.jsx)("svg",{className:"h-6 w-6 text-red-200",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),"info"===t.status&&(0,d.jsxs)("svg",{className:"h-6 w-6 text-blue-200",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4m0 4h.01"})]}),(0,d.jsx)("span",{className:"font-semibold text-white",children:t.message})]}),t.progressRoles&&(0,d.jsxs)("div",{className:"w-full mt-1",children:[(0,d.jsxs)("div",{className:"flex justify-between text-xs text-gray-200 mb-1",children:[(0,d.jsx)("span",{children:"Entra roles"}),(0,d.jsxs)("span",{children:[t.progressRoles.current," / ",t.progressRoles.total]})]}),(0,d.jsx)("div",{className:"w-full bg-gray-700 rounded h-2 overflow-hidden",children:(0,d.jsx)("div",{className:"h-2 rounded transition-all duration-300 ".concat("error"===t.status?"bg-red-400":"success"===t.status?"bg-green-400":"bg-blue-400"),style:{width:t.progressRoles.total?"".concat(Math.round(t.progressRoles.current/t.progressRoles.total*100),"%"):"0%"}})})]}),t.progressGraph&&(0,d.jsxs)("div",{className:"w-full mt-1",children:[(0,d.jsxs)("div",{className:"flex justify-between text-xs text-gray-200 mb-1",children:[(0,d.jsx)("span",{children:"Graph API permissions"}),(0,d.jsxs)("span",{children:[t.progressGraph.current," / ",t.progressGraph.total||"?"]})]}),(0,d.jsx)("div",{className:"w-full bg-gray-700 rounded h-2 overflow-hidden",children:(0,d.jsx)("div",{className:"h-2 rounded transition-all duration-300 ".concat("error"===t.status?"bg-red-400":"success"===t.status?"bg-green-400":"bg-blue-400"),style:{width:t.progressGraph.total?"".concat(Math.round(t.progressGraph.current/t.progressGraph.total*100),"%"):"0%"}})})]}),(0,d.jsx)("button",{className:"absolute top-1 right-2 text-gray-300 hover:text-white text-xl",style:{background:"none",border:"none"},onClick:n,"aria-label":"Close",type:"button",children:"\xd7"})]})}):null}const pm=6144,gm=4608;const mm=function(){const{getNodes:e}=Fa(),{showToast:t,closeToast:n}=hm();return(0,d.jsx)(Wi,{position:"bottom-left",style:{left:40,bottom:0},children:(0,d.jsxs)("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-md hover:bg-white/10 border border-gray-300 shadow-sm text-xs text-white-700 font-medium transition-all duration-150",style:{boxShadow:"0 2px 8px 0 rgba(0,0,0,0.07)",backdropFilter:"blur(2px)"},onClick:()=>{t("Generating image...","info"),setTimeout(n,5e3);const o=_o(e()),r=nr(o,pm,gm,.3,1.2);(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(await lm(e,t)).toDataURL()})(document.querySelector(".react-flow__viewport"),{backgroundColor:"#141414",width:pm,height:gm,style:{width:pm,height:gm,transform:"translate(".concat(r.x,"px, ").concat(r.y,"px) scale(").concat(r.zoom,")")}}).then((e=>{t("Image generated!","success"),setTimeout(n,5e3),function(e){const t=document.createElement("a");t.setAttribute("download","reactflow.png"),t.setAttribute("href",e),t.click()}(e)}))},"aria-label":"Download as image",children:[(0,d.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16V4m0 12l-4-4m4 4l4-4M4 20h16"})}),(0,d.jsx)("span",{children:"Export as image"})]})})},ym=["node"],vm={customNode:function(e){let{data:t}=e;const n=t.isEntraRole,o=t.isGraphPermission,r=n||o?{position:"relative",display:"inline-block",borderRadius:16,padding:3,overflow:"visible"}:{},i=n?{position:"absolute",zIndex:0,top:0,left:0,right:0,bottom:0,borderRadius:16,pointerEvents:"none",background:"linear-gradient(90deg, #e92a67 0%, #2a8af6 100%)",boxShadow:"0 0 8px #ffffff22, 0 0 12px #ae53ba44, 0 0 16px #2a8af644, 0 0 20px #e92a6733"}:o?{position:"absolute",zIndex:0,top:0,left:0,right:0,bottom:0,borderRadius:16,pointerEvents:"none",background:"linear-gradient(90deg, #2a8af6 0%, #60aaff 100%)",boxShadow:"0 0 8px #60aaff55, 0 0 12px #2a8af644, 0 0 16px #2a8af644, 0 0 20px #60aaff33"}:{},a=l({fontFamily:"'Fira Mono', 'Menlo', 'Monaco', 'Consolas', 'Liberation Mono', 'Courier New', monospace",fontWeight:500,fontSize:17,letterSpacing:"-0.5px",lineHeight:1.2},n?{position:"relative",zIndex:1,padding:"16px 20px",borderRadius:13,minWidth:t.isGraphPermission?600:400,maxWidth:t.isGraphPermission?600:400,background:"#151515",color:"#fff",border:"none",boxShadow:"0 1px 4px 0 #fff3, 0 0 4px 0 #ae53ba22, 0 0 6px 0 #2a8af611",textAlign:"center"}:o?{position:"relative",zIndex:1,padding:"16px 20px",borderRadius:13,minWidth:600,maxWidth:600,background:"#151d2b",color:"#fff",border:"none",boxShadow:"0 1px 8px 0 #60aaff33, 0 0 8px 0 #2a8af622, 0 0 12px 0 #2a8af611",textAlign:"center"}:{padding:10,border:"1px solid #777",borderRadius:5,minWidth:350,maxWidth:350,textAlign:"center",background:"none",color:"white"}),s=n?{fontSize:14,color:"#8b8b8b",fontFamily:"'Fira Mono', 'Menlo', 'Monaco', 'Consolas', 'Liberation Mono', 'Courier New', monospace",fontWeight:400,marginTop:4,letterSpacing:0}:{};return(0,d.jsxs)("div",{style:r,children:[(n||o)&&(0,d.jsx)("div",{style:i}),(0,d.jsxs)("div",{style:a,children:[(0,d.jsx)(qa,{type:"target",position:ko.Left,id:"left",style:{background:"#555"}}),(0,d.jsx)("div",{children:t.label}),n&&t.subtitle&&(0,d.jsx)("div",{style:s,children:t.subtitle}),(0,d.jsx)(qa,{type:"source",position:ko.Right,id:"right",style:{background:"#555"}})]})]})},userNode:function(){return(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:80},children:[(0,d.jsx)(qa,{type:"target",position:ko.Left,id:"left",style:{background:"#555"}}),(0,d.jsx)("div",{children:(0,d.jsxs)("svg",{width:100,height:100,viewBox:"0 0 48 48",fill:"none",children:[(0,d.jsx)("circle",{cx:"24",cy:"18",r:"10",fill:"#afd2fc"}),(0,d.jsx)("ellipse",{cx:"24",cy:"36",rx:"14",ry:"8",fill:"#60a5fa"})]})}),(0,d.jsx)("div",{style:{color:"#fff",fontWeight:600,fontSize:18,marginTop:2,fontFamily:"'Fira Mono', monospace"},children:"User"}),(0,d.jsx)(qa,{type:"source",position:ko.Right,id:"right",style:{background:"#555"}})]})}},Dm={strong:e=>{let{node:t}=e,n=c(e,ym);return(0,d.jsx)("strong",{className:"p-1 rounded bg-yellow-700/60",children:n.children})}},Cm=e=>{var t,r,i;let{data:a,roleMembers:s,onGraphPermissionNodeClick:u,graphPermissionApps:c}=e;const[h,f]=(0,o.useState)(""),p=a.nodes.filter((e=>e.data.label.toLowerCase().includes(h.toLowerCase()))),g=new Set(p.map((e=>e.id))),m=new Set,y=new Set,v=new Set,D=e=>{m.has(e)||(m.add(e),y.add(e),a.edges.forEach((t=>{t.source===e&&(y.add(t.target),v.add(t.id||"".concat(t.source,"-").concat(t.target)),D(t.target))})))};g.forEach((e=>{if(m.has(e))return;m.add(e),y.add(e);const t=new Set;a.edges.forEach((n=>{n.source===e&&(t.add(n.target),y.add(n.target),v.add(n.id||"".concat(n.source,"-").concat(n.target))),n.target===e&&(t.add(n.source),y.add(n.source),v.add(n.id||"".concat(n.source,"-").concat(n.target)))})),t.forEach((e=>{D(e)}))}));const C=a.nodes.filter((e=>y.has(e.id))),b=a.edges.filter((e=>y.has(e.source)&&y.has(e.target)&&v.has(e.id||"".concat(e.source,"-").concat(e.target)))),[w,E]=(0,o.useState)(null),[F,k]=(0,o.useState)(""),x=(0,o.useRef)(null);(0,o.useEffect)((()=>{function e(e){w&&x.current&&!x.current.contains(e.target)&&E(null)}return w&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[w]),(0,o.useEffect)((()=>{w||k("")}),[w]);return(0,d.jsxs)("div",{style:{height:"100vh",borderTop:"1px solid #ddd",overflow:"hidden",color:"white"},className:"relative",children:[(0,d.jsx)("div",{className:"absolute top-6 right-4 z-20",children:(0,d.jsx)("input",{type:"text",placeholder:"Type to filter...",value:h,onChange:e=>f(e.target.value),className:"p-2 w-60 border border-gray-700 bg-gray-800 text-gray-100 rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,d.jsxs)("div",{className:"absolute right-4 top-16 mt-2 z-20 bg-gray-900 bg-opacity-80 rounded px-2 py-1 border border-gray-700 flex items-center gap-1 text-xs text-gray-300 shadow",children:[(0,d.jsx)("span",{className:"inline-block w-5 h-1 rounded",style:{background:"#16a34a"}}),"Green lines are direct privilege escalations to Global Admin"]}),(0,d.jsxs)(tu,{nodes:C.map((e=>"user"===e.id?l(l({},e),{},{type:"userNode"}):e)),edges:b,nodeTypes:vm,colorMode:"dark",minZoom:.01,fitView:!0,onNodeClick:async(e,t)=>{E(t);try{const e=await n(6283)("./".concat(t.id,".md")),o=await fetch(e.default),r=await o.text();k(r)}catch(o){k("No information available for this node.")}},children:[(0,d.jsx)(uu,{}),(0,d.jsx)(yu,{}),(0,d.jsx)(mm,{})]}),w&&(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 overflow-y-auto backdrop-blur-sm",children:(0,d.jsxs)("div",{ref:x,className:"bg-gray-900 rounded-lg shadow-lg max-w-4xl w-full p-6 relative my-8 border border-white",style:{maxHeight:"90vh",overflowY:"auto"},children:[(0,d.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-white text-2xl",onClick:()=>E(null),"aria-label":"Close",children:"\xd7"}),(0,d.jsxs)("div",{className:"prose prose-invert prose-a:text-white prose-headings:text-white max-w-none text-gray-100",children:[(0,d.jsx)(Dh,{remarkPlugins:[Cg],components:Dm,children:F}),(null===(t=w.data)||void 0===t?void 0:t.isEntraRole)&&s&&s[w.id]&&(0,d.jsxs)("div",{className:"mt-6",children:[(0,d.jsx)("div",{className:"font-bold text-lg mb-2 text-white",children:"Members of this Entra role:"}),(0,d.jsxs)("ul",{className:"list-disc ml-6",children:[0===s[w.id].length&&(0,d.jsx)("li",{className:"text-gray-400",children:"No members found."}),s[w.id].map((e=>(0,d.jsxs)("li",{className:"mb-1",children:[(0,d.jsx)("span",{className:"font-mono text-sm text-blue-200",children:e.displayName}),e.userPrincipalName&&(0,d.jsx)("span",{className:"ml-2 text-xs text-gray-400",children:e.userPrincipalName}),e.mail&&(0,d.jsx)("span",{className:"ml-2 text-xs text-gray-400",children:e.mail}),e.type&&(0,d.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:e.type.replace("microsoft.graph.","")})]},e.id)))]})]}),(null===(r=w.data)||void 0===r?void 0:r.isGraphPermission)&&c&&(0,d.jsxs)("div",{className:"mt-6",children:[(0,d.jsx)("div",{className:"font-bold text-lg mb-2 text-white",children:"Applications with this Graph API permission:"}),(0,d.jsxs)("ul",{className:"list-disc ml-6",children:[(0===(null===(i=c[w.id])||void 0===i?void 0:i.length)||!c[w.id])&&(0,d.jsx)("li",{className:"text-gray-400",children:"No applications found. Run the assessment first."}),(c[w.id]||[]).map((e=>(0,d.jsxs)("li",{className:"mb-1",children:[(0,d.jsx)("span",{className:"font-mono text-sm text-blue-200",children:e.displayName}),(0,d.jsxs)("span",{className:"ml-2 text-xs text-gray-400",children:["App ID: ",e.appId]})]},e.id)))]})]})]})]})})]})},bm={nodes:[{id:"azureDevOpsAdmin",type:"customNode",data:{label:"Azure DevOps Administrator",isEntraRole:!0},position:{x:0,y:0},sourcePosition:"right",targetPosition:"left"},{id:"authAdmin",type:"customNode",data:{label:"Authentication Administrator",isEntraRole:!0},position:{x:0,y:160},sourcePosition:"right",targetPosition:"left"},{id:"helpdeskAdmin",type:"customNode",data:{label:"Helpdesk Administrator",isEntraRole:!0},position:{x:0,y:240},sourcePosition:"right",targetPosition:"left"},{id:"passwordAdmin",type:"customNode",data:{label:"Password Administrator",isEntraRole:!0},position:{x:0,y:320},sourcePosition:"right",targetPosition:"left"},{id:"userAdmin1",type:"customNode",data:{label:"User Administrator",isEntraRole:!0},position:{x:0,y:400},sourcePosition:"right",targetPosition:"left"},{id:"hybridIdAdmin1",type:"customNode",data:{label:"Hybrid Identity Administrator",isEntraRole:!0},position:{x:0,y:560},sourcePosition:"right",targetPosition:"left"},{id:"partnerTier1Support",type:"customNode",data:{label:"Partner Tier1 Support",isEntraRole:!0},position:{x:0,y:640},sourcePosition:"right",targetPosition:"left"},{id:"cloudAppAdmin",type:"customNode",data:{label:"Cloud Application Administrator",isEntraRole:!0},position:{x:0,y:720},sourcePosition:"right",targetPosition:"left"},{id:"appAdmin",type:"customNode",data:{label:"Application Administrator",isEntraRole:!0},position:{x:0,y:800},sourcePosition:"right",targetPosition:"left"},{id:"userAdmin2",type:"customNode",data:{label:"User Administrator",isEntraRole:!0},position:{x:0,y:960},sourcePosition:"right",targetPosition:"left"},{id:"directoryWriters",type:"customNode",data:{label:"Directory Writers",isEntraRole:!0},position:{x:0,y:1040},sourcePosition:"right",targetPosition:"left"},{id:"exchangeAdmin",type:"customNode",data:{label:"Exchange Administrator",isEntraRole:!0},position:{x:0,y:1120},sourcePosition:"right",targetPosition:"left"},{id:"groupsAdmin",type:"customNode",data:{label:"Group Administrator",isEntraRole:!0},position:{x:0,y:1200},sourcePosition:"right",targetPosition:"left"},{id:"identityGovernanceAdmin",type:"customNode",data:{label:"Identity Governance Administrator",isEntraRole:!0},position:{x:0,y:1280},sourcePosition:"right",targetPosition:"left"},{id:"knowledgeAdmin",type:"customNode",data:{label:"Knowledge Administrator",isEntraRole:!0},position:{x:0,y:1360},sourcePosition:"right",targetPosition:"left"},{id:"knowledgeManager",type:"customNode",data:{label:"Knowledge Manager",isEntraRole:!0},position:{x:0,y:1440},sourcePosition:"right",targetPosition:"left"},{id:"lifecycleWorkflowsAdmin",type:"customNode",data:{label:"Lifecycle Workflows Administrator",isEntraRole:!0},position:{x:0,y:1520},sourcePosition:"right",targetPosition:"left"},{id:"partnerTier1Support2",type:"customNode",data:{label:"Partner Tier1 Support",isEntraRole:!0},position:{x:0,y:1600},sourcePosition:"right",targetPosition:"left"},{id:"sharePointAdmin",type:"customNode",data:{label:"SharePoint Administrator",isEntraRole:!0},position:{x:0,y:1680},sourcePosition:"right",targetPosition:"left"},{id:"teamsAdmin",type:"customNode",data:{label:"Teams Administrator",isEntraRole:!0},position:{x:0,y:1760},sourcePosition:"right",targetPosition:"left"},{id:"win365Admin",type:"customNode",data:{label:"Windows 365 Administrator",isEntraRole:!0},position:{x:0,y:1840},sourcePosition:"right",targetPosition:"left"},{id:"yammerAdmin",type:"customNode",data:{label:"Yammer Administrator",isEntraRole:!0},position:{x:0,y:1920},sourcePosition:"right",targetPosition:"left"},{id:"intuneAdmin",type:"customNode",data:{label:"Intune Administrator",isEntraRole:!0},position:{x:0,y:2e3},sourcePosition:"right",targetPosition:"left"},{id:"privilegedRoleAdmin",type:"customNode",data:{label:"Privileged Role Administrator",isEntraRole:!0},position:{x:0,y:2160},sourcePosition:"right",targetPosition:"left"},{id:"partnerTier2Support",type:"customNode",data:{label:"Partner Tier2 Support",isEntraRole:!0},position:{x:0,y:2240},sourcePosition:"right",targetPosition:"left"},{id:"privilegedAuthAdmin",type:"customNode",data:{label:"Privileged Authentication Administrator",isEntraRole:!0},position:{x:0,y:2320},sourcePosition:"right",targetPosition:"left"},{id:"hybridIdAdmin2",type:"customNode",data:{label:"Hybrid Identity Administrator",isEntraRole:!0},position:{x:0,y:2480},sourcePosition:"right",targetPosition:"left"},{id:"domainNameAdmin",type:"customNode",data:{label:"Domain Name Administrator",isEntraRole:!0},position:{x:0,y:2560},sourcePosition:"right",targetPosition:"left"},{id:"externalIdpAdmin",type:"customNode",data:{label:"External Identity Provider Administrator",isEntraRole:!0},position:{x:0,y:2640},sourcePosition:"right",targetPosition:"left"},{id:"securityAdmin",type:"customNode",data:{label:"Security Administrator",isEntraRole:!0},position:{x:0,y:2720},sourcePosition:"right",targetPosition:"left"},{id:"conditionalAccessAdmin",type:"customNode",data:{label:"Conditional Access Administrator",isEntraRole:!0},position:{x:0,y:2850},sourcePosition:"right",targetPosition:"left"},{id:"user",type:"customNode",data:{label:"User Account"},position:{x:850,y:-250},sourcePosition:"right",targetPosition:"left"},{id:"devOpsPipeline",type:"customNode",data:{label:"Impersonate a DevOps pipeline"},position:{x:600,y:10},sourcePosition:"right",targetPosition:"left"},{id:"passwordResetSPOwner",type:"customNode",data:{label:"Reset the password of a Service Principal owner"},position:{x:600,y:280},sourcePosition:"right",targetPosition:"left"},{id:"addSecretToApp",type:"customNode",data:{label:"Add a new secret to an existing App Registration"},position:{x:650,y:820},sourcePosition:"right",targetPosition:"left"},{id:"privilegedAzureAccess",type:"customNode",data:{label:"Privileged Azure Resource Access via Group Membership"},position:{x:600,y:1200},sourcePosition:"right",targetPosition:"left"},{id:"compromisedSP",type:"customNode",data:{label:"Impersonate a Service Principal with privileged application permissions"},position:{x:1200,y:550},sourcePosition:"right",targetPosition:"left"},{id:"managedIdentity",type:"customNode",data:{label:"Managed Identity with privileged Graph API permission"},position:{x:1200,y:1200},sourcePosition:"right",targetPosition:"left"},{id:"tokenTheft",type:"customNode",data:{label:"Token theft from Global Admin device"},position:{x:1200,y:2e3},sourcePosition:"right",targetPosition:"left"},{id:"directGlobalAdminTakeover",type:"customNode",data:{label:"Assign or reset a Global Administrator password and MFA"},position:{x:1200,y:2200},sourcePosition:"right",targetPosition:"left"},{id:"federatedDomainInjection",type:"customNode",data:{label:"Federated Domain Injection + SAML Token forgery"},position:{x:1200,y:2400},sourcePosition:"right",targetPosition:"left"},{id:"disableDefenderEDR",type:"customNode",data:{label:"Disable Defender EDR"},position:{x:1200,y:2550},sourcePosition:"right",targetPosition:"left"},{id:"tenantLockoutCAP",type:"customNode",data:{label:"Create or modify a Conditional Access Policy to allow or block access"},position:{x:2500,y:2700},sourcePosition:"right",targetPosition:"left"},{id:"hasGraphPermission",type:"customNode",data:{label:"Has Graph API permissions"},position:{x:1800,y:700},sourcePosition:"right",targetPosition:"left"},{id:"groupGraph",data:{label:"Graph API permissions"},position:{x:2450,y:550},style:{width:720,height:800,backgroundColor:"rgba(1, 170, 255, 0.15)",borderRadius:16},type:"group"},{id:"graphCAP",type:"customNode",data:{label:"Policy.ReadWrite.ConditionalAccess",isGraphPermission:!0},position:{x:2500,y:600},sourcePosition:"right",targetPosition:"left"},{id:"graphDeleteUser",type:"customNode",data:{label:"User.DeleteRestore.All",isGraphPermission:!0},position:{x:2500,y:670},sourcePosition:"right",targetPosition:"left"},{id:"graphDisableAccount",type:"customNode",data:{label:"User.EnableDisableAccount.All",isGraphPermission:!0},position:{x:2500,y:740},sourcePosition:"right",targetPosition:"left"},{id:"graphAADGroup",type:"customNode",data:{label:"PrivilegedAccess.ReadWrite.AzureADGroup",isGraphPermission:!0},position:{x:2500,y:850},sourcePosition:"right",targetPosition:"left"},{id:"graphPrivAADGroup",type:"customNode",data:{label:"PrivilegedAssignmentSchedule.ReadWrite.AzureADGroup",isGraphPermission:!0},position:{x:2500,y:920},sourcePosition:"right",targetPosition:"left"},{id:"graphRoleAssignment",type:"customNode",data:{label:"RoleAssignmentSchedule.ReadWrite.Directory",isGraphPermission:!0},position:{x:2500,y:990},sourcePosition:"right",targetPosition:"left"},{id:"graphRoleManagement",type:"customNode",data:{label:"RoleManagement.ReadWrite.Directory",isGraphPermission:!0},position:{x:2500,y:1060},sourcePosition:"right",targetPosition:"left"},{id:"graphAuthMethod",type:"customNode",data:{label:"UserAuthenticationMethod.ReadWrite.All",isGraphPermission:!0},position:{x:2500,y:1130},sourcePosition:"right",targetPosition:"left"},{id:"graphOther",type:"customNode",data:{label:"Other Graph API permission",isGraphPermission:!0},position:{x:2500,y:1250},sourcePosition:"right",targetPosition:"left"},{id:"globalAdmin",type:"customNode",data:{label:"\ud83d\udc51 Global Administrator",isEntraRole:!0},position:{x:3600,y:1600},sourcePosition:"right",targetPosition:"left"},{id:"tenantHijack",type:"customNode",data:{label:"Tenant Hijack and Ransomware"},position:{x:4300,y:1607},sourcePosition:"right",targetPosition:"left"}],edges:[{id:"e_azureDevOps_devOpsPipeline",source:"azureDevOpsAdmin",target:"devOpsPipeline",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_devOpsPipeline_compromisedSP",source:"devOpsPipeline",target:"compromisedSP",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_authAdmin_pwdReset",source:"authAdmin",target:"passwordResetSPOwner",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_helpdeskAdmin_pwdReset",source:"helpdeskAdmin",target:"passwordResetSPOwner",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_passwordAdmin_pwdReset",source:"passwordAdmin",target:"passwordResetSPOwner",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_userAdmin1_pwdReset",source:"userAdmin1",target:"passwordResetSPOwner",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_pwdReset_compSP",source:"passwordResetSPOwner",target:"compromisedSP",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_cloudAppAdmin_addSecretToApp",source:"cloudAppAdmin",target:"addSecretToApp",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_appAdmin_addSecretToApp",source:"appAdmin",target:"addSecretToApp",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_cloudAppAdmin_compromisedSP",source:"cloudAppAdmin",target:"compromisedSP",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_appAdmin_compromisedSP",source:"appAdmin",target:"compromisedSP",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_addSecretToApp_compSP",source:"addSecretToApp",target:"compromisedSP",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_hybridIdAdmin1_compSP",source:"hybridIdAdmin1",target:"compromisedSP",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_partnerTier1Support_compSP",source:"partnerTier1Support",target:"compromisedSP",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_userAdmin2_privilegedAzure",source:"userAdmin2",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_directoryWriters_privilegedAzure",source:"directoryWriters",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_exchangeAdmin_privilegedAzure",source:"exchangeAdmin",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_groupsAdmin_privilegedAzure",source:"groupsAdmin",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_identityGovernanceAdmin_privilegedAzure",source:"identityGovernanceAdmin",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_knowledgeAdmin_privilegedAzure",source:"knowledgeAdmin",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_knowledgeManager_privilegedAzure",source:"knowledgeManager",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_lifecycleWorkflowsAdmin_privilegedAzure",source:"lifecycleWorkflowsAdmin",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_partnerTier1Support2_privilegedAzure",source:"partnerTier1Support2",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_sharePointAdmin_privilegedAzure",source:"sharePointAdmin",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_teamsAdmin_privilegedAzure",source:"teamsAdmin",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_win365Admin_privilegedAzure",source:"win365Admin",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_yammerAdmin_privilegedAzure",source:"yammerAdmin",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_intuneAdmin_privilegedAzure",source:"intuneAdmin",target:"privilegedAzureAccess",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_privilegedAzure_managedIdentity",source:"privilegedAzureAccess",target:"managedIdentity",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_privilegedAzure_compSP",source:"privilegedAzureAccess",target:"compromisedSP",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_graphAADGroup_globalAdmin",source:"graphAADGroup",target:"globalAdmin",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_graphPrivAADGroup_globalAdmin",source:"graphPrivAADGroup",target:"globalAdmin",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_graphRoleAssignment_globalAdmin",source:"graphRoleAssignment",target:"globalAdmin",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_graphRoleManagement_globalAdmin",source:"graphRoleManagement",target:"globalAdmin",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_graphAuthMethod_globalAdmin",source:"graphAuthMethod",target:"globalAdmin",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_graphOther_globalAdmin",source:"graphOther",target:"globalAdmin",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_user_compromisedSP",source:"user",target:"compromisedSP",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_managedIdentity_hasGraphPermission",source:"managedIdentity",target:"hasGraphPermission",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_tokenTheft_globalAdmin",source:"tokenTheft",target:"globalAdmin",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_intuneAdmin_tokenTheft",source:"intuneAdmin",target:"tokenTheft",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_privRoleAdmin_directGlobal",source:"privilegedRoleAdmin",target:"directGlobalAdminTakeover",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_partnerTier2Support_directGlobal",source:"partnerTier2Support",target:"directGlobalAdminTakeover",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_privAuthAdmin_directGlobal",source:"privilegedAuthAdmin",target:"directGlobalAdminTakeover",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_directGlobal_globalAdmin",source:"directGlobalAdminTakeover",target:"globalAdmin",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_hybridIdAdmin2_federatedDomain",source:"hybridIdAdmin2",target:"federatedDomainInjection",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_domainName_federatedDomain",source:"domainNameAdmin",target:"federatedDomainInjection",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_externalIdp_federatedDomain",source:"externalIdpAdmin",target:"federatedDomainInjection",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_securityAdmin_federatedDomain",source:"securityAdmin",target:"federatedDomainInjection",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_federatedDomain_globalAdmin",source:"federatedDomainInjection",target:"globalAdmin",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_conditionalAccessAdmin_tenantLockout",source:"conditionalAccessAdmin",target:"tenantLockoutCAP",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_compromisedSP_hasGraphPermission",source:"compromisedSP",target:"hasGraphPermission",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_hasGraphPermission_graphCAP",source:"hasGraphPermission",target:"graphCAP",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_hasGraphPermission_graphDeleteUser",source:"hasGraphPermission",target:"graphDeleteUser",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_hasGraphPermission_graphDisableAccount",source:"hasGraphPermission",target:"graphDisableAccount",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_hasGraphPermission_graphAADGroup",source:"hasGraphPermission",target:"graphAADGroup",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_hasGraphPermission_graphPrivAADGroup",source:"hasGraphPermission",target:"graphPrivAADGroup",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_hasGraphPermission_graphRoleAssignment",source:"hasGraphPermission",target:"graphRoleAssignment",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_hasGraphPermission_graphRoleManagement",source:"hasGraphPermission",target:"graphRoleManagement",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_hasGraphPermission_graphAuthMethod",source:"hasGraphPermission",target:"graphAuthMethod",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_hasGraphPermission_graphOther",source:"hasGraphPermission",target:"graphOther",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_graphCAP_tenantHijack",source:"graphCAP",target:"tenantHijack",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_graphDeleteUser_tenantHijack",source:"graphDeleteUser",target:"tenantHijack",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_graphDisableAccount_tenantHijack",source:"graphDisableAccount",target:"tenantHijack",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_tenantLockoutCAP_tenantHijack",source:"tenantLockoutCAP",target:"tenantHijack",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_globalAdmin_tenantHijack",source:"globalAdmin",target:"tenantHijack",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}},{id:"e_disableDefenderEDR_globalAdmin",source:"disableDefenderEDR",target:"globalAdmin",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_securityAdmin_disableDefenderEDR",source:"securityAdmin",target:"disableDefenderEDR",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_securityAdmin_federatedDomainInjection",source:"securityAdmin",target:"federatedDomainInjection",sourcePosition:"right",targetPosition:"left",style:{stroke:"#d1d5db",strokeWidth:2}},{id:"e_securityAdmin_tenantLockoutCAP",source:"securityAdmin",target:"tenantLockoutCAP",sourcePosition:"right",targetPosition:"left",style:{stroke:"#16a34a",strokeWidth:2}}]},wm={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Em=400,Fm=499,km=500,xm=599,Am=[wm.OPENID_SCOPE,wm.PROFILE_SCOPE,wm.OFFLINE_ACCESS_SCOPE],Sm=[...Am,wm.EMAIL_SCOPE],Im="Content-Type",Pm="Content-Length",_m="Retry-After",Tm="X-AnchorMailbox",Nm="x-ms-request-id",Mm="x-ms-httpver",Rm="active-account-filters",Bm="common",Om="organizations",Lm="consumers",zm="access_token",jm="xms_cc",Hm={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},qm={PLAIN:"plain",S256:"S256"},Um="code",Wm="id_token token refresh_token",Vm="query",Km="fragment",Gm="query",Ym="authorization_code",Qm="refresh_token",Zm="MSSTS",Xm="ADFS",$m="Generic",Jm="-",ey=".",ty={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},ny="appmetadata",oy="1",ry="authority-metadata",iy=86400,ay="config",sy="cache",uy="network",ly="hardcoded_values",cy={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},dy={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},hy=60,fy=3600,py="throttling",gy="retry-after, h429",my="invalid_grant",yy="client_mismatch",vy=200,Dy=400,Cy="1",by="3",wy="4",Ey="2",Fy="4",ky="5",xy="0",Ay="1",Sy="2",Iy="3",Py="4",_y="pop";var Ty;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(Ty||(Ty={}));class Ny{constructor(e,t,n){this.level=Ty.Info;const o=e||Ny.createDefaultLoggerOptions();this.localCallback=o.loggerCallback||(()=>{}),this.piiLoggingEnabled=o.piiLoggingEnabled||!1,this.level="number"===typeof o.logLevel?o.logLevel:Ty.Info,this.correlationId=o.correlationId||wm.EMPTY_STRING,this.packageName=t||wm.EMPTY_STRING,this.packageVersion=n||wm.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Ty.Info}}clone(e,t,n){return new Ny({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const n=(new Date).toUTCString(),o="[".concat(n,"] : [").concat(t.correlationId||this.correlationId||"","]"),r="".concat(o," : ").concat(this.packageName,"@").concat(this.packageVersion," : ").concat(Ty[t.logLevel]," - ").concat(e);this.executeCallback(t.logLevel,r,t.containsPii||!1)}executeCallback(e,t,n){this.localCallback&&this.localCallback(e,t,n)}error(e,t){this.logMessage(e,{logLevel:Ty.Error,containsPii:!1,correlationId:t||wm.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:Ty.Error,containsPii:!0,correlationId:t||wm.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:Ty.Warning,containsPii:!1,correlationId:t||wm.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:Ty.Warning,containsPii:!0,correlationId:t||wm.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:Ty.Info,containsPii:!1,correlationId:t||wm.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:Ty.Info,containsPii:!0,correlationId:t||wm.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:Ty.Verbose,containsPii:!1,correlationId:t||wm.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:Ty.Verbose,containsPii:!0,correlationId:t||wm.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:Ty.Trace,containsPii:!1,correlationId:t||wm.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:Ty.Trace,containsPii:!0,correlationId:t||wm.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const My="AAD",Ry="OIDC",By="EAR",Oy="none",Ly="unexpected_error",zy="post_request_failed",jy={[Ly]:"Unexpected error in authentication.",[zy]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class Hy extends Error{constructor(e,t,n){super(t?"".concat(e,": ").concat(t):e),Object.setPrototypeOf(this,Hy.prototype),this.errorCode=e||wm.EMPTY_STRING,this.errorMessage=t||wm.EMPTY_STRING,this.subError=n||wm.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function qy(e,t){return new Hy(e,t?"".concat(jy[e]," ").concat(t):jy[e])}const Uy="client_info_decoding_error",Wy="client_info_empty_error",Vy="token_parsing_error",Ky="null_or_empty_token",Gy="endpoints_resolution_error",Yy="network_error",Qy="openid_config_error",Zy="hash_not_deserialized",Xy="invalid_state",$y="state_mismatch",Jy="state_not_found",ev="nonce_mismatch",tv="auth_time_not_found",nv="max_age_transpired",ov="multiple_matching_tokens",rv="multiple_matching_accounts",iv="multiple_matching_appMetadata",av="request_cannot_be_made",sv="cannot_remove_empty_scope",uv="cannot_append_scopeset",lv="empty_input_scopeset",cv="device_code_polling_cancelled",dv="device_code_expired",hv="device_code_unknown_error",fv="no_account_in_silent_request",pv="invalid_cache_record",gv="invalid_cache_environment",mv="no_account_found",yv="no_crypto_object",vv="unexpected_credential_type",Dv="invalid_assertion",Cv="invalid_client_credential",bv="token_refresh_required",wv="user_timeout_reached",Ev="token_claims_cnf_required_for_signedjwt",Fv="authorization_code_missing_from_server_response",kv="binding_key_not_removed",xv="end_session_endpoint_not_supported",Av="key_id_missing",Sv="no_network_connectivity",Iv="user_canceled",Pv="missing_tenant_id_error",_v="method_not_implemented",Tv="nested_app_auth_bridge_disabled",Nv={[Uy]:"The client info could not be parsed/decoded correctly",[Wy]:"The client info was empty",[Vy]:"Token cannot be parsed",[Ky]:"The token is null or empty",[Gy]:"Endpoints cannot be resolved",[Yy]:"Network request failed",[Qy]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Zy]:"The hash parameters could not be deserialized",[Xy]:"State was not the expected format",[$y]:"State mismatch error",[Jy]:"State not found",[ev]:"Nonce mismatch error",[tv]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[nv]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[ov]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[rv]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[iv]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[av]:"Token request cannot be made without authorization code or refresh token.",[sv]:"Cannot remove null or empty scope from ScopeSet",[uv]:"Cannot append ScopeSet",[lv]:"Empty input ScopeSet cannot be processed",[cv]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[dv]:"Device code is expired.",[hv]:"Device code stopped polling for unknown reasons.",[fv]:"Please pass an account object, silent flow is not supported without account information",[pv]:"Cache record object was null or undefined.",[gv]:"Invalid environment when attempting to create cache entry",[mv]:"No account found in cache for given key.",[yv]:"No crypto object detected.",[vv]:"Unexpected credential type.",[Dv]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[Cv]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[bv]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[wv]:"User defined timeout for device code polling reached",[Ev]:"Cannot generate a POP jwt if the token_claims are not populated",[Fv]:"Server response does not contain an authorization code to proceed",[kv]:"Could not remove the credential's binding key from storage.",[xv]:"The provided authority does not support logout",[Av]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Sv]:"No network connectivity. Check your internet connection.",[Iv]:"User cancelled the flow.",[Pv]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[_v]:"This method has not been implemented",[Tv]:"The nested app auth bridge is disabled"};class Mv extends Hy{constructor(e,t){super(e,t?"".concat(Nv[e],": ").concat(t):Nv[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,Mv.prototype)}}function Rv(e,t){return new Mv(e,t)}const Bv={createNewGuid:()=>{throw Rv(_v)},base64Decode:()=>{throw Rv(_v)},base64Encode:()=>{throw Rv(_v)},base64UrlEncode:()=>{throw Rv(_v)},encodeKid:()=>{throw Rv(_v)},async getPublicKeyThumbprint(){throw Rv(_v)},async removeTokenBindingKey(){throw Rv(_v)},async clearKeystore(){throw Rv(_v)},async signJwt(){throw Rv(_v)},async hashString(){throw Rv(_v)}},Ov="@azure/msal-common",Lv="15.6.0";function zv(e,t){const n=function(e){if(!e)throw Rv(Ky);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);if(!t||t.length<4)throw Rv(Vy);return t[2]}(e);try{const e=t(n);return JSON.parse(e)}catch(o){throw Rv(Vy)}}function jv(e,t){if(0===t||Date.now()-3e5>e+t)throw Rv(nv)}function Hv(){return Math.round((new Date).getTime()/1e3)}function qv(e){return e.getTime()/1e3}function Uv(e){return e?new Date(1e3*Number(e)):new Date}function Wv(e,t){const n=Number(e)||0;return Hv()+t>n}function Vv(e){return[Zv(e),Xv(e),$v(e),Jv(e),eD(e)].join(Jm).toLowerCase()}function Kv(e,t,n,o,r){return{credentialType:ty.ID_TOKEN,homeAccountId:e,environment:t,clientId:o,secret:n,realm:r}}function Gv(e,t,n,o,r,i,a,s,u,l,c,d,h,f,p){var g,m;const y={homeAccountId:e,credentialType:ty.ACCESS_TOKEN,secret:n,cachedAt:Hv().toString(),expiresOn:a.toString(),extendedExpiresOn:s.toString(),environment:t,clientId:o,realm:r,target:i,tokenType:c||dy.BEARER};if(d&&(y.userAssertionHash=d),l&&(y.refreshOn=l.toString()),f&&(y.requestedClaims=f,y.requestedClaimsHash=p),(null===(g=y.tokenType)||void 0===g?void 0:g.toLowerCase())!==dy.BEARER.toLowerCase())switch(y.credentialType=ty.ACCESS_TOKEN_WITH_AUTH_SCHEME,y.tokenType){case dy.POP:const e=zv(n,u);if(null===e||void 0===e||null===(m=e.cnf)||void 0===m||!m.kid)throw Rv(Ev);y.keyId=e.cnf.kid;break;case dy.SSH:y.keyId=h}return y}function Yv(e,t,n,o,r,i,a){const s={credentialType:ty.REFRESH_TOKEN,homeAccountId:e,environment:t,clientId:o,secret:n};return i&&(s.userAssertionHash=i),r&&(s.familyId=r),a&&(s.expiresOn=a.toString()),s}function Qv(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")}function Zv(e){return[e.homeAccountId,e.environment].join(Jm).toLowerCase()}function Xv(e){const t=e.credentialType===ty.REFRESH_TOKEN&&e.familyId||e.clientId;return[e.credentialType,t,e.realm||""].join(Jm).toLowerCase()}function $v(e){return(e.target||"").toLowerCase()}function Jv(e){return(e.requestedClaimsHash||"").toLowerCase()}function eD(e){return e.tokenType&&e.tokenType.toLowerCase()!==dy.BEARER.toLowerCase()?e.tokenType.toLowerCase():""}function tD(){return Hv()+iy}function nD(e,t,n){e.authorization_endpoint=t.authorization_endpoint,e.token_endpoint=t.token_endpoint,e.end_session_endpoint=t.end_session_endpoint,e.issuer=t.issuer,e.endpointsFromNetwork=n,e.jwks_uri=t.jwks_uri}function oD(e,t,n){e.aliases=t.aliases,e.preferred_cache=t.preferred_cache,e.preferred_network=t.preferred_network,e.aliasesFromNetwork=n}function rD(e){return e.expiresAt<=Hv()}const iD="redirect_uri_empty",aD="claims_request_parsing_error",sD="authority_uri_insecure",uD="url_parse_error",lD="empty_url_error",cD="empty_input_scopes_error",dD="invalid_prompt_value",hD="invalid_claims",fD="token_request_empty",pD="logout_request_empty",gD="invalid_code_challenge_method",mD="pkce_params_missing",yD="invalid_cloud_discovery_metadata",vD="invalid_authority_metadata",DD="untrusted_authority",CD="missing_ssh_jwk",bD="missing_ssh_kid",wD="missing_nonce_authentication_header",ED="invalid_authentication_header",FD="cannot_set_OIDCOptions",kD="cannot_allow_platform_broker",xD="authority_mismatch",AD={[iD]:"A redirect URI is required for all calls, and none has been set.",[aD]:"Could not parse the given claims request object.",[sD]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[uD]:"URL could not be parsed into appropriate segments.",[lD]:"URL was empty or null.",[cD]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[dD]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[hD]:"Given claims parameter must be a stringified JSON object.",[fD]:"Token request was empty and not found in cache.",[pD]:"The logout request was null or undefined.",[gD]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[mD]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[yD]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[vD]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[DD]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[CD]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[bD]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[wD]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[ED]:"Invalid authentication header provided",[FD]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[kD]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[xD]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class SD extends Hy{constructor(e){super(e,AD[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,SD.prototype)}}function ID(e){return new SD(e)}class PD{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return 0===Object.keys(t).length}catch(t){}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},n=e.split("&"),o=e=>decodeURIComponent(e.replace(/\+/g," "));return n.forEach((e=>{if(e.trim()){const[n,r]=e.split(/=(.+)/g,2);n&&r&&(t[o(n)]=o(r))}})),t}static trimArrayEntries(e){return e.map((e=>e.trim()))}static removeEmptyStringsFromArray(e){return e.filter((e=>!!e))}static jsonParseHelper(e){try{return JSON.parse(e)}catch(t){return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}class _D{constructor(e){const t=e?PD.trimArrayEntries([...e]):[],n=t?PD.removeEmptyStringsFromArray(t):[];if(!n||!n.length)throw ID(cD);this.scopes=new Set,n.forEach((e=>this.scopes.add(e)))}static fromString(e){const t=(e||wm.EMPTY_STRING).split(" ");return new _D(t)}static createSearchScopes(e){const t=new _D(e);return t.containsOnlyOIDCScopes()?t.removeScope(wm.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}containsScope(e){const t=this.printScopesLowerCase().split(" "),n=new _D(t);return!!e&&n.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&(this.scopes.size>=e.scopes.size&&e.asArray().every((e=>this.containsScope(e))))}containsOnlyOIDCScopes(){let e=0;return Sm.forEach((t=>{this.containsScope(t)&&(e+=1)})),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach((e=>this.appendScope(e)))}catch(t){throw Rv(uv)}}removeScope(e){if(!e)throw Rv(sv);this.scopes.delete(e.trim())}removeOIDCScopes(){Sm.forEach((e=>{this.scopes.delete(e)}))}unionScopeSets(e){if(!e)throw Rv(lv);const t=new Set;return e.scopes.forEach((e=>t.add(e.toLowerCase()))),this.scopes.forEach((e=>t.add(e.toLowerCase()))),t}intersectingScopeSets(e){if(!e)throw Rv(lv);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),n=e.getScopeCount(),o=this.getScopeCount();return t.size<o+n}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach((t=>e.push(t))),e}printScopes(){if(this.scopes){return this.asArray().join(" ")}return wm.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function TD(e,t){if(!e)throw Rv(Wy);try{const n=t(e);return JSON.parse(n)}catch(n){throw Rv(Uy)}}function ND(e){if(!e)throw Rv(Uy);const t=e.split(ey,2);return{uid:t[0],utid:t.length<2?wm.EMPTY_STRING:t[1]}}const MD=["isHomeTenant"],RD=["isHomeTenant"];function BD(e,t){return!!e&&!!t&&e===t.split(".")[1]}function OD(e,t,n,o){if(o){const{oid:t,sub:n,tid:r,name:i,tfp:a,acr:s}=o,u=r||a||s||"";return{tenantId:u,localAccountId:t||n||"",name:i,isHomeTenant:BD(u,e)}}return{tenantId:n,localAccountId:t,isHomeTenant:BD(n,e)}}function LD(e,t,n,o){let r=e;if(t){const{isHomeTenant:n}=t,o=c(t,MD);r=l(l({},e),o)}if(n){const t=OD(e.homeAccountId,e.localAccountId,e.tenantId,n),{isHomeTenant:i}=t,a=c(t,RD);return r=l(l(l({},r),a),{},{idTokenClaims:n,idToken:o}),r}return r}const zD=0,jD=1,HD=2,qD=3;function UD(e){if(e){return e.tid||e.tfp||e.acr||null}return null}class WD{generateAccountId(){return[this.homeAccountId,this.environment].join(Jm).toLowerCase()}generateAccountKey(){return WD.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map((e=>[e.tenantId,e])))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(Jm).toLowerCase()}static createAccount(e,t,n){var o,r,i,a,s,u,l,c;const d=new WD;let h;t.authorityType===jD?d.authorityType=Xm:t.protocolMode===Ry?d.authorityType=$m:d.authorityType=Zm,e.clientInfo&&n&&(h=TD(e.clientInfo,n)),d.clientInfo=e.clientInfo,d.homeAccountId=e.homeAccountId,d.nativeAccountId=e.nativeAccountId;const f=e.environment||t&&t.getPreferredCache();if(!f)throw Rv(gv);d.environment=f,d.realm=(null===(o=h)||void 0===o?void 0:o.utid)||UD(e.idTokenClaims)||"",d.localAccountId=(null===(r=h)||void 0===r?void 0:r.uid)||(null===(i=e.idTokenClaims)||void 0===i?void 0:i.oid)||(null===(a=e.idTokenClaims)||void 0===a?void 0:a.sub)||"";const p=(null===(s=e.idTokenClaims)||void 0===s?void 0:s.preferred_username)||(null===(u=e.idTokenClaims)||void 0===u?void 0:u.upn),g=null!==(l=e.idTokenClaims)&&void 0!==l&&l.emails?e.idTokenClaims.emails[0]:null;if(d.username=p||g||"",d.name=(null===(c=e.idTokenClaims)||void 0===c?void 0:c.name)||"",d.cloudGraphHostName=e.cloudGraphHostName,d.msGraphHost=e.msGraphHost,e.tenantProfiles)d.tenantProfiles=e.tenantProfiles;else{const t=OD(e.homeAccountId,d.localAccountId,d.realm,e.idTokenClaims);d.tenantProfiles=[t]}return d}static createFromAccountInfo(e,t,n){var o;const r=new WD;return r.authorityType=e.authorityType||$m,r.homeAccountId=e.homeAccountId,r.localAccountId=e.localAccountId,r.nativeAccountId=e.nativeAccountId,r.realm=e.tenantId,r.environment=e.environment,r.username=e.username,r.name=e.name,r.cloudGraphHostName=t,r.msGraphHost=n,r.tenantProfiles=Array.from((null===(o=e.tenantProfiles)||void 0===o?void 0:o.values())||[]),r}static generateHomeAccountId(e,t,n,o,r){if(t!==jD&&t!==HD){if(e)try{const t=TD(e,o.base64Decode);if(t.uid&&t.utid)return"".concat(t.uid,".").concat(t.utid)}catch(i){}n.warning("No client info in response")}return(null===r||void 0===r?void 0:r.sub)||""}static isAccountEntity(e){return!!e&&(e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"))}static accountInfoIsEqual(e,t,n){if(!e||!t)return!1;let o=!0;if(n){const n=e.idTokenClaims||{},r=t.idTokenClaims||{};o=n.iat===r.iat&&n.nonce===r.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&o}}function VD(e){return e.startsWith("#/")?e.substring(2):e.startsWith("#")||e.startsWith("?")?e.substring(1):e}function KD(e){if(!e||e.indexOf("=")<0)return null;try{const t=VD(e),n=Object.fromEntries(new URLSearchParams(t));if(n.code||n.ear_jwe||n.error||n.error_description||n.state)return n}catch(t){throw Rv(Zy)}return null}function GD(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const o=new Array;return e.forEach(((e,r)=>{!t&&n&&r in n?o.push("".concat(r,"=").concat(e)):o.push("".concat(r,"=").concat(encodeURIComponent(e)))})),o.join("&")}class YD{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw ID(lD);e.includes("#")||(this._urlString=YD.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return PD.endsWith(t,"?")?t=t.slice(0,-1):PD.endsWith(t,"?/")&&(t=t.slice(0,-2)),PD.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch(t){throw ID(uD)}if(!e.HostNameAndPort||!e.PathSegments)throw ID(uD);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw ID(sD)}static appendQueryString(e,t){return t?e.indexOf("?")<0?"".concat(e,"?").concat(t):"".concat(e,"&").concat(t):e}static removeHashFromUrl(e){return YD.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),n=t.PathSegments;return!e||0===n.length||n[0]!==Bm&&n[0]!==Om||(n[0]=e),YD.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw ID(uD);const n={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let o=n.AbsolutePath.split("/");return o=o.filter((e=>e&&e.length>0)),n.PathSegments=o,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(t);if(!n)throw ID(uD);return n[2]}static getAbsoluteUrl(e,t){if(e[0]===wm.FORWARD_SLASH){const n=new YD(t).getUrlComponents();return n.Protocol+"//"+n.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new YD(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!KD(e)}}const QD={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},ZD={tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},XD=new Set;function $D(e,t,n,o){if(null===o||void 0===o||o.trace("getAliasesFromMetadata called with source: ".concat(n)),e&&t){const r=JD(t,e);if(r)return null===o||void 0===o||o.trace("getAliasesFromMetadata: found cloud discovery metadata in ".concat(n,", returning aliases")),r.aliases;null===o||void 0===o||o.trace("getAliasesFromMetadata: did not find cloud discovery metadata in ".concat(n))}return null}function JD(e,t){for(let n=0;n<e.length;n++){const o=e[n];if(o.aliases.includes(t))return o}return null}ZD.metadata.forEach((e=>{e.aliases.forEach((e=>{XD.add(e)}))}));const eC="cache_quota_exceeded",tC="cache_error_unknown",nC={[eC]:"Exceeded cache storage capacity.",[tC]:"Unexpected error occurred when using cache storage."};class oC extends Error{constructor(e,t){const n=t||(nC[e]?nC[e]:nC[tC]);super("".concat(e,": ").concat(n)),Object.setPrototypeOf(this,oC.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}}class rC{constructor(e,t,n,o){this.clientId=e,this.cryptoImpl=t,this.commonLogger=n.clone(Ov,Lv),this.staticAuthorityOptions=o}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const t=this.getAllAccounts(e);if(t.length>1){return t.sort((e=>e.idTokenClaims?-1:1))[0]}return 1===t.length?t[0]:null}getBaseAccountInfo(e){const t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap((e=>this.getTenantProfilesFromAccountEntity(e,null===t||void 0===t?void 0:t.tenantId,t)))}getTenantedAccountInfoByFilter(e,t,n,o){let r,i=null;if(o&&!this.tenantProfileMatchesFilter(n,o))return null;const a=this.getIdToken(e,t,n.tenantId);return a&&(r=zv(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(r,o))?null:(i=LD(e,n,r,null===a||void 0===a?void 0:a.secret),i)}getTenantProfilesFromAccountEntity(e,t,n){const o=e.getAccountInfo();let r=o.tenantProfiles||new Map;const i=this.getTokenKeys();if(t){const e=r.get(t);if(!e)return[];r=new Map([[t,e]])}const a=[];return r.forEach((e=>{const t=this.getTenantedAccountInfoByFilter(o,i,e,n);t&&a.push(t)})),a}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId))&&((!t.name||e.name===t.name)&&(void 0===t.isHomeTenant||e.isHomeTenant===t.isHomeTenant))}idTokenClaimsMatchTenantProfileFilter(e,t){if(t){if(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId))return!1;if(t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint))return!1;if(t.username&&!this.matchUsername(e.preferred_username,t.username))return!1;if(t.name&&!this.matchName(e,t.name))return!1;if(t.sid&&!this.matchSid(e,t.sid))return!1}return!0}async saveCacheRecord(e,t,n){if(!e)throw Rv(pv);try{e.account&&await this.setAccount(e.account,t),e.idToken&&!1!==(null===n||void 0===n?void 0:n.idToken)&&await this.setIdTokenCredential(e.idToken,t),e.accessToken&&!1!==(null===n||void 0===n?void 0:n.accessToken)&&await this.saveAccessToken(e.accessToken,t),e.refreshToken&&!1!==(null===n||void 0===n?void 0:n.refreshToken)&&await this.setRefreshTokenCredential(e.refreshToken,t),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(s){var o,r;if(null===(o=this.commonLogger)||void 0===o||o.error("CacheManager.saveCacheRecord: failed"),s instanceof Error){var i,a;if(null===(i=this.commonLogger)||void 0===i||i.errorPii("CacheManager.saveCacheRecord: ".concat(s.message),t),"QuotaExceededError"===s.name||"NS_ERROR_DOM_QUOTA_REACHED"===s.name||s.message.includes("exceeded the quota"))throw null===(a=this.commonLogger)||void 0===a||a.error("CacheManager.saveCacheRecord: exceeded storage quota",t),new oC(eC);throw new oC(s.name,s.message)}throw null===(r=this.commonLogger)||void 0===r||r.errorPii("CacheManager.saveCacheRecord: ".concat(s),t),new oC(tC)}}async saveAccessToken(e,t){const n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},o=this.getTokenKeys(),r=_D.fromString(e.target),i=[];o.accessToken.forEach((e=>{if(!this.accessTokenKeyMatchesFilter(e,n,!1))return;const t=this.getAccessTokenCredential(e);if(t&&this.credentialMatchesFilter(t,n)){_D.fromString(t.target).intersectingScopeSets(r)&&i.push(this.removeAccessToken(e))}})),await Promise.all(i),await this.setAccessTokenCredential(e,t)}getAccountsFilteredBy(e){const t=this.getAccountKeys(),n=[];return t.forEach((t=>{var o;if(!this.isAccountKey(t,e.homeAccountId))return;const r=this.getAccount(t,this.commonLogger);if(!r)return;if(e.homeAccountId&&!this.matchHomeAccountId(r,e.homeAccountId))return;if(e.username&&!this.matchUsername(r.username,e.username))return;if(e.environment&&!this.matchEnvironment(r,e.environment))return;if(e.realm&&!this.matchRealm(r,e.realm))return;if(e.nativeAccountId&&!this.matchNativeAccountId(r,e.nativeAccountId))return;if(e.authorityType&&!this.matchAuthorityType(r,e.authorityType))return;const i={localAccountId:null===e||void 0===e?void 0:e.localAccountId,name:null===e||void 0===e?void 0:e.name},a=null===(o=r.tenantProfiles)||void 0===o?void 0:o.filter((e=>this.tenantProfileMatchesFilter(e,i)));a&&0===a.length||n.push(r)})),n}isAccountKey(e,t,n){return!(e.split(Jm).length<3)&&(!(t&&!e.toLowerCase().includes(t.toLowerCase()))&&!(n&&!e.toLowerCase().includes(n.toLowerCase())))}isCredentialKey(e){if(e.split(Jm).length<6)return!1;const t=e.toLowerCase();if(-1===t.indexOf(ty.ID_TOKEN.toLowerCase())&&-1===t.indexOf(ty.ACCESS_TOKEN.toLowerCase())&&-1===t.indexOf(ty.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===t.indexOf(ty.REFRESH_TOKEN.toLowerCase()))return!1;if(t.indexOf(ty.REFRESH_TOKEN.toLowerCase())>-1){const e="".concat(ty.REFRESH_TOKEN).concat(Jm).concat(this.clientId).concat(Jm),n="".concat(ty.REFRESH_TOKEN).concat(Jm).concat(oy).concat(Jm);if(-1===t.indexOf(e.toLowerCase())&&-1===t.indexOf(n.toLowerCase()))return!1}else if(-1===t.indexOf(this.clientId.toLowerCase()))return!1;return!0}credentialMatchesFilter(e,t){if(t.clientId&&!this.matchClientId(e,t.clientId))return!1;if(t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash))return!1;if("string"===typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId))return!1;if(t.environment&&!this.matchEnvironment(e,t.environment))return!1;if(t.realm&&!this.matchRealm(e,t.realm))return!1;if(t.credentialType&&!this.matchCredentialType(e,t.credentialType))return!1;if(t.familyId&&!this.matchFamilyId(e,t.familyId))return!1;if(t.target&&!this.matchTarget(e,t.target))return!1;if((t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash)return!1;if(e.credentialType===ty.ACCESS_TOKEN_WITH_AUTH_SCHEME){if(t.tokenType&&!this.matchTokenType(e,t.tokenType))return!1;if(t.tokenType===dy.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId))return!1}return!0}getAppMetadataFilteredBy(e){const t=this.getKeys(),n={};return t.forEach((t=>{if(!this.isAppMetadata(t))return;const o=this.getAppMetadata(t);o&&(e.environment&&!this.matchEnvironment(o,e.environment)||e.clientId&&!this.matchClientId(o,e.clientId)||(n[t]=o))})),n}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let n=null;return t.forEach((t=>{if(!this.isAuthorityMetadata(t)||-1===t.indexOf(this.clientId))return;const o=this.getAuthorityMetadata(t);o&&-1!==o.aliases.indexOf(e)&&(n=o)})),n}async removeAllAccounts(){const e=this.getAccountKeys(),t=[];e.forEach((e=>{t.push(this.removeAccount(e))})),await Promise.all(t)}async removeAccount(e){const t=this.getAccount(e,this.commonLogger);t&&(await this.removeAccountContext(t),this.removeItem(e))}async removeAccountContext(e){const t=this.getTokenKeys(),n=e.generateAccountId(),o=[];t.idToken.forEach((e=>{0===e.indexOf(n)&&this.removeIdToken(e)})),t.accessToken.forEach((e=>{0===e.indexOf(n)&&o.push(this.removeAccessToken(e))})),t.refreshToken.forEach((e=>{0===e.indexOf(n)&&this.removeRefreshToken(e)})),await Promise.all(o)}async removeAccessToken(e){const t=this.getAccessTokenCredential(e);if(t){if(t.credentialType.toLowerCase()===ty.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&t.tokenType===dy.POP){const e=t.keyId;if(e)try{await this.cryptoImpl.removeTokenBindingKey(e)}catch(n){throw Rv(kv)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach((e=>{this.isAppMetadata(e)&&this.removeItem(e)})),!0}readAccountFromCache(e){const t=WD.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,n,o,r){this.commonLogger.trace("CacheManager - getIdToken called");const i={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:ty.ID_TOKEN,clientId:this.clientId,realm:n},a=this.getIdTokensByFilter(i,t),s=a.size;if(s<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(s>1){let t=a;if(!n){const n=new Map;a.forEach(((t,o)=>{t.realm===e.tenantId&&n.set(o,t)}));const o=n.size;if(o<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(1===o)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),n.values().next().value;t=n}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),t.forEach(((e,t)=>{this.removeIdToken(t)})),o&&r&&o.addFields({multiMatchedID:a.size},r),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t){const n=t&&t.idToken||this.getTokenKeys().idToken,o=new Map;return n.forEach((t=>{if(!this.idTokenKeyMatchesFilter(t,l({clientId:this.clientId},e)))return;const n=this.getIdTokenCredential(t);n&&this.credentialMatchesFilter(n,e)&&o.set(t,n)})),o}idTokenKeyMatchesFilter(e,t){const n=e.toLowerCase();return(!t.clientId||-1!==n.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==n.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,n,o,r,i){this.commonLogger.trace("CacheManager - getAccessToken called");const a=_D.createSearchScopes(t.scopes),s=t.authenticationScheme||dy.BEARER,u=s&&s.toLowerCase()!==dy.BEARER.toLowerCase()?ty.ACCESS_TOKEN_WITH_AUTH_SCHEME:ty.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:u,clientId:this.clientId,realm:o||e.tenantId,target:a,tokenType:s,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},c=n&&n.accessToken||this.getTokenKeys().accessToken,d=[];c.forEach((e=>{if(this.accessTokenKeyMatchesFilter(e,l,!0)){const t=this.getAccessTokenCredential(e);t&&this.credentialMatchesFilter(t,l)&&d.push(t)}}));const h=d.length;return h<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):h>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),d.forEach((e=>{this.removeAccessToken(Vv(e))})),r&&i&&r.addFields({multiMatchedAT:d.length},i),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),d[0])}accessTokenKeyMatchesFilter(e,t,n){const o=e.toLowerCase();if(t.clientId&&-1===o.indexOf(t.clientId.toLowerCase()))return!1;if(t.homeAccountId&&-1===o.indexOf(t.homeAccountId.toLowerCase()))return!1;if(t.realm&&-1===o.indexOf(t.realm.toLowerCase()))return!1;if(t.requestedClaimsHash&&-1===o.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){const e=t.target.asArray();for(let t=0;t<e.length;t++){if(n&&!o.includes(e[t].toLowerCase()))return!1;if(!n&&o.includes(e[t].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const t=this.getTokenKeys(),n=[];return t.accessToken.forEach((t=>{if(!this.accessTokenKeyMatchesFilter(t,e,!0))return;const o=this.getAccessTokenCredential(t);o&&this.credentialMatchesFilter(o,e)&&n.push(o)})),n}getRefreshToken(e,t,n,o,r){this.commonLogger.trace("CacheManager - getRefreshToken called");const i=t?oy:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:ty.REFRESH_TOKEN,clientId:this.clientId,familyId:i},s=n&&n.refreshToken||this.getTokenKeys().refreshToken,u=[];s.forEach((e=>{if(this.refreshTokenKeyMatchesFilter(e,a)){const t=this.getRefreshTokenCredential(e);t&&this.credentialMatchesFilter(t,a)&&u.push(t)}}));const l=u.length;return l<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(l>1&&o&&r&&o.addFields({multiMatchedRT:l},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),u[0])}refreshTokenKeyMatchesFilter(e,t){const n=e.toLowerCase();return(!t.familyId||-1!==n.indexOf(t.familyId.toLowerCase()))&&(!(!t.familyId&&t.clientId&&-1===n.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==n.indexOf(t.homeAccountId.toLowerCase())))}readAppMetadataFromCache(e){const t={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(t),o=Object.keys(n).map((e=>n[e])),r=o.length;if(r<1)return null;if(r>1)throw Rv(iv);return o[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!(!t||t.familyId!==oy)}matchHomeAccountId(e,t){return!("string"!==typeof e.homeAccountId||t!==e.homeAccountId)}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){var n;return!(t.toLowerCase()!==(null===(n=e.name)||void 0===n?void 0:n.toLowerCase()))}matchUsername(e,t){return!(!e||"string"!==typeof e||(null===t||void 0===t?void 0:t.toLowerCase())!==e.toLowerCase())}matchUserAssertionHash(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const n=function(e,t){let n;const o=e.canonicalAuthority;if(o){var r;const i=new YD(o).getUrlComponents().HostNameAndPort;n=$D(i,null===(r=e.cloudDiscoveryMetadata)||void 0===r?void 0:r.metadata,ay,t)||$D(i,ZD.metadata,ly,t)||e.knownAuthorities}return n||[]}(this.staticAuthorityOptions,this.commonLogger);if(n.includes(t)&&n.includes(e.environment))return!0}const n=this.getAuthorityMetadataByAlias(t);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!(!e.clientId||t!==e.clientId)}matchFamilyId(e,t){return!(!e.familyId||t!==e.familyId)}matchRealm(e,t){var n;return!((null===(n=e.realm)||void 0===n?void 0:n.toLowerCase())!==t.toLowerCase())}matchNativeAccountId(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||(e.preferred_username===t||e.upn===t)}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!(!e.authorityType||t.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,t){if(e.credentialType!==ty.ACCESS_TOKEN&&e.credentialType!==ty.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)return!1;return _D.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!(!e.tokenType||e.tokenType!==t)}matchKeyId(e,t){return!(!e.keyId||e.keyId!==t)}isAppMetadata(e){return-1!==e.indexOf(ny)}isAuthorityMetadata(e){return-1!==e.indexOf(ry)}generateAuthorityMetadataCacheKey(e){return"".concat(ry,"-").concat(this.clientId,"-").concat(e)}static toObject(e,t){for(const n in t)e[n]=t[n];return e}}class iC extends rC{async setAccount(){throw Rv(_v)}getAccount(){throw Rv(_v)}async setIdTokenCredential(){throw Rv(_v)}getIdTokenCredential(){throw Rv(_v)}async setAccessTokenCredential(){throw Rv(_v)}getAccessTokenCredential(){throw Rv(_v)}async setRefreshTokenCredential(){throw Rv(_v)}getRefreshTokenCredential(){throw Rv(_v)}setAppMetadata(){throw Rv(_v)}getAppMetadata(){throw Rv(_v)}setServerTelemetry(){throw Rv(_v)}getServerTelemetry(){throw Rv(_v)}setAuthorityMetadata(){throw Rv(_v)}getAuthorityMetadata(){throw Rv(_v)}getAuthorityMetadataKeys(){throw Rv(_v)}setThrottlingCache(){throw Rv(_v)}getThrottlingCache(){throw Rv(_v)}removeItem(){throw Rv(_v)}getKeys(){throw Rv(_v)}getAccountKeys(){throw Rv(_v)}getTokenKeys(){throw Rv(_v)}}const aC={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},sC={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Ty.Info,correlationId:wm.EMPTY_STRING},uC={claimsBasedCachingEnabled:!1},lC={async sendGetRequestAsync(){throw Rv(_v)},async sendPostRequestAsync(){throw Rv(_v)}},cC={sku:wm.SKU,version:Lv,cpu:wm.EMPTY_STRING,os:wm.EMPTY_STRING},dC={clientSecret:wm.EMPTY_STRING,clientAssertion:void 0},hC={azureCloudInstance:Oy,tenant:"".concat(wm.DEFAULT_COMMON_TENANT)},fC={application:{appName:"",appVersion:""}};function pC(e){return e.authOptions.authority.options.protocolMode===Ry}const gC={sendGetRequestAsync:()=>Promise.reject(Rv(_v)),sendPostRequestAsync:()=>Promise.reject(Rv(_v))},mC="acquireTokenByCode",yC="acquireTokenByRefreshToken",vC="acquireTokenSilent",DC="acquireTokenSilentAsync",CC="acquireTokenPopup",bC="acquireTokenPreRedirect",wC="acquireTokenRedirect",EC="cryptoOptsGetPublicKeyThumbprint",FC="cryptoOptsSignJwt",kC="silentCacheClientAcquireToken",xC="silentIframeClientAcquireToken",AC="awaitConcurrentIframe",SC="silentRefreshClientAcquireToken",IC="ssoSilent",PC="standardInteractionClientGetDiscoveredAuthority",_C="nativeInteractionClientAcquireToken",TC="networkClientSendPostRequestAsync",NC="refreshTokenClientExecutePostToTokenEndpoint",MC="authorizationCodeClientExecutePostToTokenEndpoint",RC="refreshTokenClientExecuteTokenRequest",BC="refreshTokenClientAcquireToken",OC="refreshTokenClientAcquireTokenWithCachedRefreshToken",LC="refreshTokenClientAcquireTokenByRefreshToken",zC="refreshTokenClientCreateTokenRequestBody",jC="acquireTokenFromCache",HC="silentFlowClientAcquireCachedToken",qC="silentFlowClientGenerateResultFromCacheRecord",UC="acquireTokenBySilentIframe",WC="initializeBaseRequest",VC="initializeSilentRequest",KC="initializeClientApplication",GC="initializeCache",YC="silentIframeClientTokenHelper",QC="silentHandlerInitiateAuthRequest",ZC="silentHandlerMonitorIframeForHash",XC="silentHandlerLoadFrame",$C="silentHandlerLoadFrameSync",JC="standardInteractionClientCreateAuthCodeClient",eb="standardInteractionClientGetClientConfiguration",tb="standardInteractionClientInitializeAuthorizationRequest",nb="getAuthCodeUrl",ob="getStandardParams",rb="handleCodeResponseFromServer",ib="handleCodeResponse",ab="handleResponseEar",sb="handleResponsePlatformBroker",ub="handleResponseCode",lb="updateTokenEndpointAuthority",cb="authClientAcquireToken",db="authClientExecuteTokenRequest",hb="authClientCreateTokenRequestBody",fb="popTokenGenerateCnf",pb="popTokenGenerateKid",gb="handleServerTokenResponse",mb="deserializeResponse",yb="authorityFactoryCreateDiscoveredInstance",vb="authorityResolveEndpointsAsync",Db="authorityGetCloudDiscoveryMetadataFromNetwork",Cb="authorityUpdateCloudDiscoveryMetadata",bb="authorityGetEndpointMetadataFromNetwork",wb="authorityUpdateEndpointMetadata",Eb="authorityUpdateMetadataWithRegionalInformation",Fb="regionDiscoveryDetectRegion",kb="regionDiscoveryGetRegionFromIMDS",xb="regionDiscoveryGetCurrentVersion",Ab="acquireTokenByCodeAsync",Sb="handleRedirectPromise",Ib="handleNativeRedirectPromise",Pb="nativeMessageHandlerHandshake",_b="removeHiddenIframe",Tb="clearTokensAndKeysWithClaims",Nb="cacheManagerGetRefreshToken",Mb="importExistingCache",Rb="setUserData",Bb="localStorageUpdated",Ob="generatePkceCodes",Lb="generateCodeVerifier",zb="generateCodeChallengeFromVerifier",jb="sha256Digest",Hb="getRandomValues",qb="generateHKDF",Ub="generateBaseKey",Wb="base64Decode",Vb="urlEncodeArr",Kb="encrypt",Gb="decrypt",Yb="generateEarKey",Qb="decryptEarResponse",Zb=(new Map([[mC,"ATByCode"],[yC,"ATByRT"],[vC,"ATS"],[DC,"ATSAsync"],[CC,"ATPopup"],[wC,"ATRedirect"],[EC,"CryptoGetPKThumb"],[FC,"CryptoSignJwt"],[kC,"SltCacheClientAT"],[xC,"SltIframeClientAT"],[SC,"SltRClientAT"],[IC,"SsoSlt"],[PC,"StdIntClientGetDiscAuth"],["fetchAccountIdWithNativeBroker","FetchAccIdWithNtvBroker"],[_C,"NtvIntClientAT"],["baseClientCreateTokenRequestHeaders","BaseClientCreateTReqHead"],[TC,"NetClientSendPost"],[NC,"RTClientExecPost"],[MC,"AuthCodeClientExecPost"],["brokerHandshake","BrokerHandshake"],["acquireTokenByRefreshTokenInBroker","ATByRTInBroker"],["acquireTokenByBroker","ATByBroker"],[RC,"RTClientExecTReq"],[BC,"RTClientAT"],[OC,"RTClientATWithCachedRT"],[LC,"RTClientATByRT"],[zC,"RTClientCreateTReqBody"],[jC,"ATFromCache"],[HC,"SltFlowClientATCached"],[qC,"SltFlowClientGenResFromCache"],[UC,"ATBySltIframe"],[WC,"InitBaseReq"],[VC,"InitSltReq"],[KC,"InitClientApplication"],[GC,"InitCache"],[Mb,"importCache"],[Rb,"setUserData"],[Bb,"localStorageUpdated"],[YC,"SIClientTHelper"],[QC,"SHandlerInitAuthReq"],[ZC,"SltHandlerMonitorIframeForHash"],[XC,"SHandlerLoadFrame"],[$C,"SHandlerLoadFrameSync"],[JC,"StdIntClientCreateAuthCodeClient"],[eb,"StdIntClientGetClientConf"],[tb,"StdIntClientInitAuthReq"],[nb,"GetAuthCodeUrl"],[rb,"HandleCodeResFromServer"],[ib,"HandleCodeResp"],[ab,"HandleRespEar"],[ub,"HandleRespCode"],[sb,"HandleRespPlatBroker"],[lb,"UpdTEndpointAuth"],[cb,"AuthClientAT"],[db,"AuthClientExecTReq"],[hb,"AuthClientCreateTReqBody"],[fb,"PopTGenCnf"],[pb,"PopTGenKid"],[gb,"HandleServerTRes"],[mb,"DeserializeRes"],[yb,"AuthFactCreateDiscInst"],[vb,"AuthResolveEndpointsAsync"],["authorityResolveEndpointsFromLocalSources","AuthResolveEndpointsFromLocal"],[Db,"AuthGetCDMetaFromNet"],[Cb,"AuthUpdCDMeta"],[bb,"AuthUpdCDMetaFromNet"],[wb,"AuthUpdEndpointMeta"],[Eb,"AuthUpdMetaWithRegInfo"],[Fb,"RegDiscDetectReg"],[kb,"RegDiscGetRegFromIMDS"],[xb,"RegDiscGetCurrentVer"],[Ab,"ATByCodeAsync"],["getEndpointMetadataFromNetwork","GetEndpointMetaFromNet"],["getCloudDiscoveryMetadataFromNetworkMeasurement","GetCDMetaFromNet"],[Sb,"HandleRedirectPromise"],[Ib,"HandleNtvRedirectPromise"],["updateCloudDiscoveryMetadataMeasurement","UpdateCDMeta"],["usernamePasswordClientAcquireToken","UserPassClientAT"],[Pb,"NtvMsgHandlerHandshake"],["nativeGenerateAuthResult","NtvGenAuthRes"],[_b,"RemoveHiddenIframe"],[Tb,"ClearTAndKeysWithClaims"],[Nb,"CacheManagerGetRT"],[Ob,"GenPkceCodes"],[Lb,"GenCodeVerifier"],[zb,"GenCodeChallengeFromVerifier"],[jb,"Sha256Digest"],[Hb,"GetRandomValues"],[qb,"genHKDF"],[Ub,"genBaseKey"],[Wb,"b64Decode"],[Vb,"urlEncArr"],[Kb,"encrypt"],[Gb,"decrypt"],[Yb,"genEarKey"],[Qb,"decryptEarResp"]]),1);new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT","unencryptedCacheCount","encryptedCacheExpiredCount"]);class Xb{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class $b{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:Zb,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new Xb}}startPerformanceMeasurement(){return new Xb}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const Jb="invalid_grant",ew=483,tw=600,nw="msal",ow=30,rw="msal.js.browser",iw="53ee284d-920a-4b59-9d30-a60315b26836",aw="ppnbnpeolgkicgegkbkbjmhlideopiji",sw="MATS",uw="Handshake",lw="HandshakeResponse",cw="GetToken",dw="Response",hw="localStorage",fw="sessionStorage",pw="memoryStorage",gw="GET",mw="POST",yw="signin",vw="signout",Dw="request.origin",Cw="urlHash",bw="request.params",ww="code.verifier",Ew="interaction.status",Fw="request.native",kw="msal.account.keys",xw="msal.token.keys",Aw="wrapper.sku",Sw="wrapper.version",Iw=861,Pw=862,_w=863,Tw=865,Nw=866,Mw=61,Rw=961,Bw=962;var Ow;!function(e){e.Redirect="redirect",e.Popup="popup",e.Silent="silent",e.None="none"}(Ow||(Ow={}));const Lw="startup",zw="login",jw="logout",Hw="acquireToken",qw="ssoSilent",Uw="handleRedirect",Ww="none",Vw={scopes:Am},Kw="@azure/msal-react",Gw="msal.db",Yw="".concat(Gw,".keys"),Qw=0,Zw=1,Xw=2,$w=3,Jw=4,eE=5,tE=[Qw,eE,Jw];class nE{navigateInternal(e,t){return nE.defaultNavigateWindow(e,t)}navigateExternal(e,t){return nE.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise((e=>{setTimeout((()=>{e(!0)}),t.timeout)}))}}class oE extends Hy{constructor(e,t,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,oE.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=n}}function rE(e,t,n,o){return e.errorMessage="".concat(e.errorMessage,", additionalErrorInfo: error.name:").concat(null===o||void 0===o?void 0:o.name,", error.message:").concat(null===o||void 0===o?void 0:o.message),new oE(e,t,n)}const iE="pkce_not_created",aE="ear_jwk_empty",sE="ear_jwe_empty",uE="crypto_nonexistent",lE="empty_navigate_uri",cE="hash_empty_error",dE="no_state_in_hash",hE="hash_does_not_contain_known_properties",fE="unable_to_parse_state",pE="state_interaction_type_mismatch",gE="interaction_in_progress",mE="popup_window_error",yE="empty_window_error",vE="user_cancelled",DE="monitor_popup_timeout",CE="monitor_window_timeout",bE="redirect_in_iframe",wE="block_iframe_reload",EE="block_nested_popups",FE="iframe_closed_prematurely",kE="silent_logout_unsupported",xE="no_account_error",AE="silent_prompt_value_error",SE="no_token_request_cache_error",IE="unable_to_parse_token_request_cache_error",PE="auth_request_not_set_error",_E="invalid_cache_type",TE="non_browser_environment",NE="database_not_open",ME="no_network_connectivity",RE="post_request_failed",BE="get_request_failed",OE="failed_to_parse_response",LE="unable_to_load_token",zE="crypto_key_not_found",jE="auth_code_required",HE="auth_code_or_nativeAccountId_required",qE="spa_code_and_nativeAccountId_present",UE="database_unavailable",WE="unable_to_acquire_token_from_native_platform",VE="native_handshake_timeout",KE="native_extension_not_installed",GE="native_connection_not_established",YE="uninitialized_public_client_application",QE="native_prompt_not_supported",ZE="invalid_base64_string",XE="invalid_pop_token_request",$E="failed_to_build_headers",JE="failed_to_parse_headers",eF="failed_to_decrypt_ear_response",tF="For more visit: aka.ms/msaljs/browser-errors",nF={[iE]:"The PKCE code challenge and verifier could not be generated.",[aE]:"No EAR encryption key provided. This is unexpected.",[sE]:"Server response does not contain ear_jwe property. This is unexpected.",[uE]:"The crypto object or function is not available.",[lE]:"Navigation URI is empty. Please check stack trace for more info.",[cE]:"Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ".concat(tF),[dE]:"Hash does not contain state. Please verify that the request originated from msal.",[hE]:"Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ".concat(tF),[fE]:"Unable to parse state. Please verify that the request originated from msal.",[pE]:"Hash contains state but the interaction type does not match the caller.",[gE]:"Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ".concat(tF),[mE]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[yE]:"window.open returned null or undefined window object.",[vE]:"User cancelled the flow.",[DE]:"Token acquisition in popup failed due to timeout.  ".concat(tF),[CE]:"Token acquisition in iframe failed due to timeout.  ".concat(tF),[bE]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[wE]:"Request was blocked inside an iframe because MSAL detected an authentication response.  ".concat(tF),[EE]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[FE]:"The iframe being monitored was closed prematurely.",[kE]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[xE]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[AE]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[SE]:"No token request found in cache.",[IE]:"The cached token request could not be parsed.",[PE]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[_E]:"Invalid cache type",[TE]:"Login and token requests are not supported in non-browser environments.",[NE]:"Database is not open!",[ME]:"No network connectivity. Check your internet connection.",[RE]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[BE]:"Network request failed. Please check the network trace to determine root cause.",[OE]:"Failed to parse network response. Check network trace.",[LE]:"Error loading token to cache.",[zE]:"Cryptographic Key or Keypair not found in browser storage.",[jE]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[HE]:"An authorization code or nativeAccountId must be provided to this flow.",[qE]:"Request cannot contain both spa code and native account id.",[UE]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[WE]:"Unable to acquire token from native platform.  ".concat(tF),[VE]:"Timed out while attempting to establish connection to browser extension",[KE]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[GE]:"Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ".concat(tF),[YE]:"You must call and await the initialize function before attempting to call any other MSAL API.  ".concat(tF),[QE]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[ZE]:"Invalid base64 encoded string.",[XE]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[$E]:"Failed to build request headers object.",[JE]:"Failed to parse response headers",[eF]:"Failed to decrypt ear response"};class oF extends Hy{constructor(e,t){super(e,nF[e],t),Object.setPrototypeOf(this,oF.prototype),this.name="BrowserAuthError"}}function rF(e,t){return new oF(e,t)}class iF{async sendGetRequestAsync(e,t){let n,o={},r=0;const i=aF(t);try{n=await fetch(e,{method:gw,headers:i})}catch(a){throw rE(rF(window.navigator.onLine?BE:ME),void 0,void 0,a)}o=sF(n.headers);try{return r=n.status,{headers:o,body:await n.json(),status:r}}catch(a){throw rE(rF(OE),r,o,a)}}async sendPostRequestAsync(e,t){const n=t&&t.body||"",o=aF(t);let r,i=0,a={};try{r=await fetch(e,{method:mw,headers:o,body:n})}catch(s){throw rE(rF(window.navigator.onLine?RE:ME),void 0,void 0,s)}a=sF(r.headers);try{return i=r.status,{headers:a,body:await r.json(),status:i}}catch(s){throw rE(rF(OE),i,a,s)}}}function aF(e){try{const t=new Headers;if(!e||!e.headers)return t;const n=e.headers;return Object.entries(n).forEach((e=>{let[n,o]=e;t.append(n,o)})),t}catch(t){throw rE(rF($E),void 0,void 0,t)}}function sF(e){try{const t={};return e.forEach(((e,n)=>{t[n]=e})),t}catch(t){throw rF(JE)}}function uF(e){return encodeURIComponent(cF(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function lF(e){return dF(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function cF(e){return dF((new TextEncoder).encode(e))}function dF(e){const t=Array.from(e,(e=>String.fromCodePoint(e))).join("");return btoa(t)}function hF(e){return(new TextDecoder).decode(fF(e))}function fF(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw rF(ZE)}const n=atob(t);return Uint8Array.from(n,(e=>e.codePointAt(0)||0))}const pF="AES-GCM",gF="HKDF",mF="SHA-256",yF=new Uint8Array([1,0,1]),vF="0123456789abcdef",DF=new Uint32Array(1),CF="raw",bF="encrypt",wF="decrypt",EF={name:"RSASSA-PKCS1-v1_5",hash:mF,modulusLength:2048,publicExponent:yF};async function FF(e,t,n){null===t||void 0===t||t.addQueueMeasurement(jb,n);const o=(new TextEncoder).encode(e);return window.crypto.subtle.digest(mF,o)}function kF(e){return window.crypto.getRandomValues(e)}function xF(){return window.crypto.getRandomValues(DF),DF[0]}function AF(){const e=Date.now(),t=1024*xF()+(1023&xF()),n=new Uint8Array(16),o=Math.trunc(t/2**30),r=t&2**30-1,i=xF();n[0]=e/2**40,n[1]=e/2**32,n[2]=e/2**24,n[3]=e/65536,n[4]=e/256,n[5]=e,n[6]=112|o>>>8,n[7]=o,n[8]=128|r>>>24,n[9]=r>>>16,n[10]=r>>>8,n[11]=r,n[12]=i>>>24,n[13]=i>>>16,n[14]=i>>>8,n[15]=i;let a="";for(let s=0;s<n.length;s++)a+=vF.charAt(n[s]>>>4),a+=vF.charAt(15&n[s]),3!==s&&5!==s&&7!==s&&9!==s||(a+="-");return a}async function SF(e){return window.crypto.subtle.exportKey("jwk",e)}async function IF(){const e=await _F(),t={alg:"dir",kty:"oct",k:lF(new Uint8Array(e))};return cF(JSON.stringify(t))}async function PF(e,t){const n=t.split(".");if(5!==n.length)throw rF(eF,"jwe_length");const o=await async function(e){const t=hF(e),n=fF(JSON.parse(t).k);return window.crypto.subtle.importKey(CF,n,pF,!1,[wF])}(e).catch((()=>{throw rF(eF,"import_key")}));try{const e=(new TextEncoder).encode(n[0]),t=fF(n[2]),r=fF(n[3]),i=fF(n[4]),a=8*i.byteLength,s=new Uint8Array(r.length+i.length);s.set(r),s.set(i,r.length);const u=await window.crypto.subtle.decrypt({name:pF,iv:t,tagLength:a,additionalData:e},o,s);return(new TextDecoder).decode(u)}catch(r){throw rF(eF,"decrypt")}}async function _F(){const e=await window.crypto.subtle.generateKey({name:pF,length:256},!0,[bF,wF]);return window.crypto.subtle.exportKey(CF,e)}async function TF(e){return window.crypto.subtle.importKey(CF,e,gF,!1,["deriveKey"])}async function NF(e,t,n){return window.crypto.subtle.deriveKey({name:gF,salt:t,hash:mF,info:(new TextEncoder).encode(n)},e,{name:pF,length:256},!1,[bF,wF])}async function MF(e,t,n){const o=(new TextEncoder).encode(t),r=window.crypto.getRandomValues(new Uint8Array(16)),i=await NF(e,r,n),a=await window.crypto.subtle.encrypt({name:pF,iv:new Uint8Array(12)},i,o);return{data:lF(new Uint8Array(a)),nonce:lF(r)}}async function RF(e,t,n,o){const r=fF(o),i=await NF(e,fF(t),n),a=await window.crypto.subtle.decrypt({name:pF,iv:new Uint8Array(12)},i,r);return(new TextDecoder).decode(a)}async function BF(e){const t=await FF(e);return lF(new Uint8Array(t))}const OF="storage_not_supported",LF="stubbed_public_client_application_called",zF="in_mem_redirect_unavailable",jF={[OF]:"Given storage configuration option was not supported.",[LF]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[zF]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class HF extends Hy{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,HF.prototype)}}function qF(e){return new HF(e,jF[e])}function UF(e){e.location.hash="","function"===typeof e.history.replaceState&&e.history.replaceState(null,"","".concat(e.location.origin).concat(e.location.pathname).concat(e.location.search))}function WF(){return window.parent!==window}function VF(){return"undefined"!==typeof window&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function KF(){if("undefined"!==typeof window&&window.opener&&window.opener!==window&&"string"===typeof window.name&&0===window.name.indexOf("".concat(nw,".")))throw rF(EE)}function GF(){if("undefined"===typeof window)throw rF(TE)}function YF(e){if(!e)throw rF(YE)}function QF(e){GF(),function(){if(YD.hashContainsKnownProperties(window.location.hash)&&WF())throw rF(wE)}(),KF(),YF(e)}function ZF(e,t){if(QF(e),function(e){if(WF()&&!e)throw rF(bE)}(t.system.allowRedirectInIframe),t.cache.cacheLocation===pw&&!t.cache.storeAuthStateInCookie)throw qF(zF)}function XF(e){const t=document.createElement("link");t.rel="preconnect",t.href=new URL(e).origin,t.crossOrigin="anonymous",document.head.appendChild(t),window.setTimeout((()=>{try{document.head.removeChild(t)}catch(e){}}),1e4)}const $F=1e4;const JF="4.12.0";class ek{static loggerCallback(e,t){switch(e){case Ty.Error:return void console.error(t);case Ty.Info:return void console.info(t);case Ty.Verbose:return void console.debug(t);case Ty.Warning:return void console.warn(t);default:return void console.log(t)}}constructor(e){var t,n;let o;this.browserEnvironment="undefined"!==typeof window,this.config=function(e,t){let{auth:n,cache:o,system:r,telemetry:i}=e;const a={clientId:wm.EMPTY_STRING,authority:"".concat(wm.DEFAULT_AUTHORITY),knownAuthorities:[],cloudDiscoveryMetadata:wm.EMPTY_STRING,authorityMetadata:wm.EMPTY_STRING,redirectUri:"undefined"!==typeof window?VF():"",postLogoutRedirectUri:wm.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:My,OIDCOptions:{serverResponseType:Km,defaultScopes:[wm.OPENID_SCOPE,wm.PROFILE_SCOPE,wm.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:Oy,tenant:wm.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},s={cacheLocation:fw,temporaryCacheLocation:fw,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!o||o.cacheLocation!==hw),claimsBasedCachingEnabled:!1},u={loggerCallback:()=>{},logLevel:Ty.Info,piiLoggingEnabled:!1},c=l(l({},aC),{},{loggerOptions:u,networkClient:t?new iF:gC,navigationClient:new nE,loadFrameTimeout:0,windowHashTimeout:(null===r||void 0===r?void 0:r.loadFrameTimeout)||6e4,iframeHashTimeout:(null===r||void 0===r?void 0:r.loadFrameTimeout)||$F,navigateFrameWait:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:(null===r||void 0===r?void 0:r.nativeBrokerHandshakeTimeout)||2e3,pollIntervalMilliseconds:ow}),d=l(l(l({},c),r),{},{loggerOptions:(null===r||void 0===r?void 0:r.loggerOptions)||u}),h={application:{appName:wm.EMPTY_STRING,appVersion:wm.EMPTY_STRING},client:new $b};(null===n||void 0===n?void 0:n.protocolMode)!==Ry&&null!==n&&void 0!==n&&n.OIDCOptions&&new Ny(d.loggerOptions).warning(JSON.stringify(ID(FD)));if(null!==n&&void 0!==n&&n.protocolMode&&n.protocolMode===Ry&&null!==d&&void 0!==d&&d.allowPlatformBroker)throw ID(kD);return{auth:l(l(l({},a),n),{},{OIDCOptions:l(l({},a.OIDCOptions),null===n||void 0===n?void 0:n.OIDCOptions)}),cache:l(l({},s),o),system:d,telemetry:l(l({},h),i)}}(e,this.browserEnvironment);try{o=window[fw]}catch(c){}const r=null===(t=o)||void 0===t?void 0:t.getItem("msal.browser.log.level"),i=null===(n=o)||void 0===n||null===(n=n.getItem("msal.browser.log.pii"))||void 0===n?void 0:n.toLowerCase(),a="true"===i||"false"!==i&&void 0,s=l({},this.config.system.loggerOptions),u=r&&Object.keys(Ty).includes(r)?Ty[r]:void 0;u&&(s.loggerCallback=ek.loggerCallback,s.logLevel=u),void 0!==a&&(s.piiLoggingEnabled=a),this.logger=new Ny(s,"@azure/msal-browser",JF),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class tk extends ek{getModuleName(){return tk.MODULE_NAME}getId(){return tk.ID}async initialize(){return this.available="undefined"!==typeof window,this.available}}tk.MODULE_NAME="",tk.ID="StandardOperatingContext";const nk="missing_kid_error",ok="missing_alg_error",rk={[nk]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[ok]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class ik extends Hy{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,ik.prototype)}}function ak(e){return new ik(e,rk[e])}class sk{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw ak(nk);if(!e.alg)throw ak(ok);const t=new sk({typ:e.typ||_y,kid:e.kid,alg:e.alg});return JSON.stringify(t)}}class uk{constructor(){this.dbName=Gw,this.version=1,this.tableName=Yw,this.dbOpen=!1}async open(){return new Promise(((e,t)=>{const n=window.indexedDB.open(this.dbName,this.version);n.addEventListener("upgradeneeded",(e=>{e.target.result.createObjectStore(this.tableName)})),n.addEventListener("success",(t=>{const n=t;this.db=n.target.result,this.dbOpen=!0,e()})),n.addEventListener("error",(()=>t(rF(UE))))}))}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise(((t,n)=>{if(!this.db)return n(rF(NE));const o=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);o.addEventListener("success",(e=>{const n=e;this.closeConnection(),t(n.target.result)})),o.addEventListener("error",(e=>{this.closeConnection(),n(e)}))}))}async setItem(e,t){return await this.validateDbIsOpen(),new Promise(((n,o)=>{if(!this.db)return o(rF(NE));const r=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);r.addEventListener("success",(()=>{this.closeConnection(),n()})),r.addEventListener("error",(e=>{this.closeConnection(),o(e)}))}))}async removeItem(e){return await this.validateDbIsOpen(),new Promise(((t,n)=>{if(!this.db)return n(rF(NE));const o=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);o.addEventListener("success",(()=>{this.closeConnection(),t()})),o.addEventListener("error",(e=>{this.closeConnection(),n(e)}))}))}async getKeys(){return await this.validateDbIsOpen(),new Promise(((e,t)=>{if(!this.db)return t(rF(NE));const n=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();n.addEventListener("success",(t=>{const n=t;this.closeConnection(),e(n.target.result)})),n.addEventListener("error",(e=>{this.closeConnection(),t(e)}))}))}async containsKey(e){return await this.validateDbIsOpen(),new Promise(((t,n)=>{if(!this.db)return n(rF(NE));const o=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);o.addEventListener("success",(e=>{const n=e;this.closeConnection(),t(1===n.target.result)})),o.addEventListener("error",(e=>{this.closeConnection(),n(e)}))}))}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise(((e,t)=>{const n=window.indexedDB.deleteDatabase(Gw),o=setTimeout((()=>t(!1)),200);n.addEventListener("success",(()=>(clearTimeout(o),e(!0)))),n.addEventListener("blocked",(()=>(clearTimeout(o),e(!0)))),n.addEventListener("error",(()=>(clearTimeout(o),t(!1))))}))}}class lk{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach(((t,n)=>{e.push(n)})),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}class ck{constructor(e){this.inMemoryCache=new lk,this.indexedDBCache=new uk,this.logger=e}handleDatabaseAccessError(e){if(!(e instanceof oF&&e.errorCode===UE))throw e;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")}async getItem(e){const t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(n){this.handleDatabaseAccessError(n)}return t}async setItem(e,t){this.inMemoryCache.setItem(e,t);try{await this.indexedDBCache.setItem(e,t)}catch(n){this.handleDatabaseAccessError(n)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(0===e.length)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e}async containsKey(e){const t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(n){this.handleDatabaseAccessError(n)}return t}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}class dk{constructor(e,t,n){this.logger=e,function(e){if(!window)throw rF(TE);if(!window.crypto)throw rF(uE);if(!e&&!window.crypto.subtle)throw rF(uE,"crypto_subtle_undefined")}(null!==n&&void 0!==n&&n),this.cache=new ck(this.logger),this.performanceClient=t}createNewGuid(){return AF()}base64Encode(e){return cF(e)}base64Decode(e){return hF(e)}base64UrlEncode(e){return uF(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var t;const n=null===(t=this.performanceClient)||void 0===t?void 0:t.startMeasurement(EC,e.correlationId),o=await async function(e,t){return window.crypto.subtle.generateKey(EF,e,t)}(dk.EXTRACTABLE,dk.POP_KEY_USAGES),r=await SF(o.publicKey),i=hk({e:r.e,kty:r.kty,n:r.n}),a=await this.hashString(i),s=await SF(o.privateKey),u=await async function(e,t,n){return window.crypto.subtle.importKey("jwk",e,EF,t,n)}(s,!1,["sign"]);return await this.cache.setItem(a,{privateKey:u,publicKey:o.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),n&&n.end({success:!0}),a}async removeTokenBindingKey(e){await this.cache.removeItem(e);return!await this.cache.containsKey(e)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error("Clearing keystore failed with error: ".concat(e.message)):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,t,n,o){var r;const i=null===(r=this.performanceClient)||void 0===r?void 0:r.startMeasurement(FC,o),a=await this.cache.getItem(t);if(!a)throw rF(zE);const s=await SF(a.publicKey),u=hk(s),c=uF(JSON.stringify({kid:t})),d=uF(sk.getShrHeaderString(l(l({},null===n||void 0===n?void 0:n.header),{},{alg:s.alg,kid:c})));e.cnf={jwk:JSON.parse(u)};const h=uF(JSON.stringify(e)),f="".concat(d,".").concat(h),p=(new TextEncoder).encode(f),g=await async function(e,t){return window.crypto.subtle.sign(EF,e,t)}(a.privateKey,p),m=lF(new Uint8Array(g)),y="".concat(f,".").concat(m);return i&&i.end({success:!0}),y}async hashString(e){return BF(e)}}function hk(e){return JSON.stringify(e,Object.keys(e).sort())}dk.POP_KEY_USAGES=["sign","verify"],dk.EXTRACTABLE=!0;const fk=(e,t,n,o,r)=>function(){n.trace("Executing function ".concat(t));const i=null===o||void 0===o?void 0:o.startMeasurement(t,r);if(r){const e=t+"CallCount";null===o||void 0===o||o.incrementFields({[e]:1},r)}try{const o=e(...arguments);return null===i||void 0===i||i.end({success:!0}),n.trace("Returning result from ".concat(t)),o}catch(a){n.trace("Error occurred in ".concat(t));try{n.trace(JSON.stringify(a))}catch(a){n.trace("Unable to print error message.")}throw null===i||void 0===i||i.end({success:!1},a),a}},pk=(e,t,n,o,r)=>function(){n.trace("Executing function ".concat(t));const i=null===o||void 0===o?void 0:o.startMeasurement(t,r);if(r){const e=t+"CallCount";null===o||void 0===o||o.incrementFields({[e]:1},r)}return null===o||void 0===o||o.setPreQueueTime(t,r),e(...arguments).then((e=>(n.trace("Returning result from ".concat(t)),null===i||void 0===i||i.end({success:!0}),e))).catch((e=>{n.trace("Error occurred in ".concat(t));try{n.trace(JSON.stringify(e))}catch(e){n.trace("Unable to print error message.")}throw null===i||void 0===i||i.end({success:!1},e),e}))};class gk{constructor(e,t,n,o){this.networkInterface=e,this.logger=t,this.performanceClient=n,this.correlationId=o}async detectRegion(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Fb,this.correlationId);let o=e;if(o)t.region_source=by;else{const e=gk.IMDS_OPTIONS;try{const n=await pk(this.getRegionFromIMDS.bind(this),kb,this.logger,this.performanceClient,this.correlationId)(wm.IMDS_VERSION,e);if(n.status===vy&&(o=n.body,t.region_source=wy),n.status===Dy){const n=await pk(this.getCurrentVersion.bind(this),xb,this.logger,this.performanceClient,this.correlationId)(e);if(!n)return t.region_source=Cy,null;const r=await pk(this.getRegionFromIMDS.bind(this),kb,this.logger,this.performanceClient,this.correlationId)(n,e);r.status===vy&&(o=r.body,t.region_source=wy)}}catch(r){return t.region_source=Cy,null}}return o||(t.region_source=Cy),o||null}async getRegionFromIMDS(e,t){var n;return null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(kb,this.correlationId),this.networkInterface.sendGetRequestAsync("".concat(wm.IMDS_ENDPOINT,"?api-version=").concat(e,"&format=text"),t,wm.IMDS_TIMEOUT)}async getCurrentVersion(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(xb,this.correlationId);try{const t=await this.networkInterface.sendGetRequestAsync("".concat(wm.IMDS_ENDPOINT,"?format=json"),e);return t.status===Dy&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0?t.body["newest-versions"][0]:null}catch(n){return null}}}gk.IMDS_OPTIONS={headers:{Metadata:"true"}};class mk{constructor(e,t,n,o,r,i,a,s){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=n,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=r,this.performanceClient=a,this.correlationId=i,this.managedIdentity=s||!1,this.regionDiscovery=new gk(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(wm.CIAM_AUTH_URL))return qD;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case wm.ADFS:return jD;case wm.DSTS:return HD}return zD}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new YD(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Rv(Gy)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Rv(Gy)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Rv(Gy)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Rv(xv);return this.replacePath(this.metadata.end_session_endpoint)}throw Rv(Gy)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Rv(Gy)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Rv(Gy)}canReplaceTenant(e){return 1===e.PathSegments.length&&!mk.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===zD&&this.protocolMode!==Ry}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const n=new YD(this.metadata.canonical_authority).getUrlComponents(),o=n.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach(((e,r)=>{let i=o[r];if(0===r&&this.canReplaceTenant(n)){const e=new YD(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];i!==e&&(this.logger.verbose("Replacing tenant domain name ".concat(i," with id ").concat(e)),i=e)}e!==i&&(t=t.replace("/".concat(i,"/"),"/".concat(e,"/")))})),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===jD||this.protocolMode===Ry&&!this.isAliasOfKnownMicrosoftAuthority(e)?"".concat(this.canonicalAuthority,".well-known/openid-configuration"):"".concat(this.canonicalAuthority,"v2.0/.well-known/openid-configuration")}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var e,t;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(vb,this.correlationId);const n=this.getCurrentMetadataEntity(),o=await pk(this.updateCloudDiscoveryMetadata.bind(this),Cb,this.logger,this.performanceClient,this.correlationId)(n);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,n.preferred_network);const r=await pk(this.updateEndpointMetadata.bind(this),wb,this.logger,this.performanceClient,this.correlationId)(n);this.updateCachedMetadata(n,o,{source:r}),null===(t=this.performanceClient)||void 0===t||t.addFields({cloudDiscoverySource:o,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:tD(),jwks_uri:""}),e}updateCachedMetadata(e,t,n){t!==sy&&(null===n||void 0===n?void 0:n.source)!==sy&&(e.expiresAt=tD(),e.canonical_authority=this.canonicalAuthority);const o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}async updateEndpointMetadata(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(wb,this.correlationId);const n=this.updateEndpointMetadataFromLocalSources(e);if(n){var o;if(n.source===ly)if(null!==(o=this.authorityOptions.azureRegionConfiguration)&&void 0!==o&&o.azureRegion&&n.metadata){nD(e,await pk(this.updateMetadataWithRegionalInformation.bind(this),Eb,this.logger,this.performanceClient,this.correlationId)(n.metadata),!1),e.canonical_authority=this.canonicalAuthority}return n.source}let r=await pk(this.getEndpointMetadataFromNetwork.bind(this),bb,this.logger,this.performanceClient,this.correlationId)();var i;if(r)return null!==(i=this.authorityOptions.azureRegionConfiguration)&&void 0!==i&&i.azureRegion&&(r=await pk(this.updateMetadataWithRegionalInformation.bind(this),Eb,this.logger,this.performanceClient,this.correlationId)(r)),nD(e,r,!0),uy;throw Rv(Qy,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),nD(e,t,!1),{source:ay};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const t=this.getEndpointMetadataFromHardcodedValues();if(t)return nD(e,t,!1),{source:ly,metadata:t};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const n=rD(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:sy}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new YD(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(e){throw ID(vD)}return null}async getEndpointMetadataFromNetwork(){var e;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(bb,this.correlationId);const t={},n=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose("Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ".concat(n));try{const e=await this.networkInterface.sendGetRequestAsync(n,t),o=function(e){return e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("jwks_uri")}(e.body);return o?e.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(o){return this.logger.verbose("Authority.getEndpointMetadataFromNetwork: ".concat(o)),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in QD?QD[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var t,n;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Eb,this.correlationId);const o=null===(n=this.authorityOptions.azureRegionConfiguration)||void 0===n?void 0:n.azureRegion;if(o){var r;if(o!==wm.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Ey,this.regionDiscoveryMetadata.region_used=o,mk.replaceWithRegionalInformation(e,o);const t=await pk(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),Fb,this.logger,this.performanceClient,this.correlationId)(null===(r=this.authorityOptions.azureRegionConfiguration)||void 0===r?void 0:r.environmentRegion,this.regionDiscoveryMetadata);if(t)return this.regionDiscoveryMetadata.region_outcome=Fy,this.regionDiscoveryMetadata.region_used=t,mk.replaceWithRegionalInformation(e,t);this.regionDiscoveryMetadata.region_outcome=ky}return e}async updateCloudDiscoveryMetadata(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Cb,this.correlationId);const n=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(n)return n;const o=await pk(this.getCloudDiscoveryMetadataFromNetwork.bind(this),Db,this.logger,this.performanceClient,this.correlationId)();if(o)return oD(e,o,!0),uy;throw ID(DD)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii("Known Authorities: ".concat(this.authorityOptions.knownAuthorities||wm.NOT_APPLICABLE)),this.logger.verbosePii("Authority Metadata: ".concat(this.authorityOptions.authorityMetadata||wm.NOT_APPLICABLE)),this.logger.verbosePii("Canonical Authority: ".concat(e.canonical_authority||wm.NOT_APPLICABLE));const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),oD(e,t,!1),ay;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const t=(n=this.hostnameAndPort,JD(ZD.metadata,n));if(t)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),oD(e,t,!1),ly;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}var n;const o=rD(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!o?(this.logger.verbose("Found cloud discovery metadata in the cache."),sy):(o&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===qD)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),mk.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JD(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),e)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),e;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(e){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),ID(yD)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),mk.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var e;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(Db,this.correlationId);const t="".concat(wm.AAD_INSTANCE_DISCOVERY_ENDPT).concat(this.canonicalAuthority,"oauth2/v2.0/authorize"),n={};let o=null;try{const e=await this.networkInterface.sendGetRequestAsync(t,n);let r,i;if(function(e){return e.hasOwnProperty("tenant_discovery_endpoint")&&e.hasOwnProperty("metadata")}(e.body))r=e.body,i=r.metadata,this.logger.verbosePii("tenant_discovery_endpoint is: ".concat(r.tenant_discovery_endpoint));else{if(!function(e){return e.hasOwnProperty("error")&&e.hasOwnProperty("error_description")}(e.body))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(this.logger.warning("A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ".concat(e.status)),r=e.body,r.error===wm.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning("The CloudInstanceDiscoveryErrorResponse error is ".concat(r.error)),this.logger.warning("The CloudInstanceDiscoveryErrorResponse error description is ".concat(r.error_description)),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),i=[]}this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),o=JD(i,this.hostnameAndPort)}catch(r){if(r instanceof Hy)this.logger.error("There was a network error while attempting to get the cloud discovery instance metadata.\nError: ".concat(r.errorCode,"\nError Description: ").concat(r.errorMessage));else{const e=r;this.logger.error("A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ".concat(e.name,"\nError Description: ").concat(e.message))}return null}return o||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),o=mk.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),o}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter((e=>e&&YD.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort)).length>0}static generateAuthority(e,t){let n;if(t&&t.azureCloudInstance!==Oy){const e=t.tenant?t.tenant:wm.DEFAULT_COMMON_TENANT;n="".concat(t.azureCloudInstance,"/").concat(e,"/")}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return wm.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Rv(Gy)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return XD.has(e)}static isPublicCloudAuthority(e){return wm.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,n){const o=new YD(e);o.validateAsUri();const r=o.getUrlComponents();let i="".concat(t,".").concat(r.HostNameAndPort);this.isPublicCloudAuthority(r.HostNameAndPort)&&(i="".concat(t,".").concat(wm.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX));const a=YD.constructAuthorityUriFromObject(l(l({},o.getUrlComponents()),{},{HostNameAndPort:i})).urlString;return n?"".concat(a,"?").concat(n):a}static replaceWithRegionalInformation(e,t){const n=l({},e);return n.authorization_endpoint=mk.buildRegionalAuthorityString(n.authorization_endpoint,t),n.token_endpoint=mk.buildRegionalAuthorityString(n.token_endpoint,t),n.end_session_endpoint&&(n.end_session_endpoint=mk.buildRegionalAuthorityString(n.end_session_endpoint,t)),n}static transformCIAMAuthority(e){let t=e;const n=new YD(e).getUrlComponents();if(0===n.PathSegments.length&&n.HostNameAndPort.endsWith(wm.CIAM_AUTH_URL)){const e=n.HostNameAndPort.split(".")[0];t="".concat(t).concat(e).concat(wm.AAD_TENANT_DOMAIN_SUFFIX)}return t}}function yk(e){return e.endsWith(wm.FORWARD_SLASH)?e:"".concat(e).concat(wm.FORWARD_SLASH)}mk.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Bm,Lm,Om]);const vk="no_tokens_found",Dk="native_account_unavailable",Ck="refresh_token_expired",bk="bad_token",wk=["interaction_required","consent_required","login_required",bk],Ek=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Fk={[vk]:"No refresh token found in the cache. Please sign-in.",[Dk]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Ck]:"Refresh token has expired.",[bk]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class kk extends Hy{constructor(e,t,n,o,r,i,a,s){super(e,t,n),Object.setPrototypeOf(this,kk.prototype),this.timestamp=o||wm.EMPTY_STRING,this.traceId=r||wm.EMPTY_STRING,this.correlationId=i||wm.EMPTY_STRING,this.claims=a||wm.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=s}}function xk(e,t,n){const o=!!e&&wk.indexOf(e)>-1,r=!!n&&Ek.indexOf(n)>-1,i=!!t&&wk.some((e=>t.indexOf(e)>-1));return o||i||r}function Ak(e){return new kk(e,Fk[e])}function Sk(e,t,n){var o;return{clientId:e,authority:t.authority,scopes:t.scopes,homeAccountIdentifier:n,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid,embeddedClientId:t.embeddedClientId||(null===(o=t.tokenBodyParameters)||void 0===o?void 0:o.clientId)}}const Ik=864e5,Pk="Lax",_k="None";class Tk{initialize(){return Promise.resolve()}getItem(e){const t="".concat(encodeURIComponent(e)),n=document.cookie.split(";");for(let o=0;o<n.length;o++){const e=n[o],[r,...i]=decodeURIComponent(e).trim().split("="),a=i.join("=");if(r===t)return a}return""}getUserData(){throw Rv(_v)}setItem(e,t,n){let o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Pk,i="".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t),";path=/;SameSite=").concat(r,";");if(n){const e=function(e){const t=new Date,n=new Date(t.getTime()+e*Ik);return n.toUTCString()}(n);i+="expires=".concat(e,";")}(o||r===_k)&&(i+="Secure;"),document.cookie=i}async setUserData(){return Promise.reject(Rv(_v))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),t=[];return e.forEach((e=>{const n=decodeURIComponent(e).trim().split("=");t.push(n[0])})),t}containsKey(e){return this.getKeys().includes(e)}}function Nk(e){const t=e.getItem(kw);return t?JSON.parse(t):[]}function Mk(e,t){const n=t.getItem("".concat(xw,".").concat(e));if(n){const e=JSON.parse(n);if(e&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("accessToken")&&e.hasOwnProperty("refreshToken"))return e}return{idToken:[],accessToken:[],refreshToken:[]}}const Rk="msal.cache.encryption";class Bk{constructor(e,t,n){if(!window.localStorage)throw qF(OF);this.memoryStorage=new lk,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=n,this.broadcast=new BroadcastChannel("msal.broadcast.cache")}async initialize(e){const t=new Tk,n=t.getItem(Rk);let o={key:"",id:""};if(n)try{o=JSON.parse(n)}catch(r){}if(o.key&&o.id){const t=fk(fF,Wb,this.logger,this.performanceClient,e)(o.key);this.encryptionCookie={id:o.id,key:await pk(TF,qb,this.logger,this.performanceClient,e)(t)},await pk(this.importExistingCache.bind(this),Mb,this.logger,this.performanceClient,e)(e)}else{this.clear();const n=AF(),o=await pk(_F,Ub,this.logger,this.performanceClient,e)(),r=fk(lF,Vb,this.logger,this.performanceClient,e)(new Uint8Array(o));this.encryptionCookie={id:n,key:await pk(TF,qb,this.logger,this.performanceClient,e)(o)};const i={id:n,key:r};t.setItem(Rk,JSON.stringify(i),0,!0,_k)}this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw rF(YE);return this.memoryStorage.getItem(e)}setItem(e,t){window.localStorage.setItem(e,t)}async setUserData(e,t,n){if(!this.initialized||!this.encryptionCookie)throw rF(YE);const{data:o,nonce:r}=await pk(MF,Kb,this.logger,this.performanceClient,n)(this.encryptionCookie.key,t,this.getContext(e)),i={id:this.encryptionCookie.id,nonce:r,data:o};this.memoryStorage.setItem(e,t),this.setItem(e,JSON.stringify(i)),this.broadcast.postMessage({key:e,value:t,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear();Nk(this).forEach((e=>this.removeItem(e)));const e=Mk(this.clientId,this);e.idToken.forEach((e=>this.removeItem(e))),e.accessToken.forEach((e=>this.removeItem(e))),e.refreshToken.forEach((e=>this.removeItem(e))),this.getKeys().forEach((e=>{(e.startsWith(wm.CACHE_PREFIX)||-1!==e.indexOf(this.clientId))&&this.removeItem(e)}))}async importExistingCache(e){if(!this.encryptionCookie)return;let t=Nk(this);t=await this.importArray(t,e),this.setItem(kw,JSON.stringify(t));const n=Mk(this.clientId,this);n.idToken=await this.importArray(n.idToken,e),n.accessToken=await this.importArray(n.accessToken,e),n.refreshToken=await this.importArray(n.refreshToken,e),this.setItem("".concat(xw,".").concat(this.clientId),JSON.stringify(n))}async getItemFromEncryptedCache(e,t){if(!this.encryptionCookie)return null;const n=this.getItem(e);if(!n)return null;let o;try{o=JSON.parse(n)}catch(r){return null}return o.id&&o.nonce&&o.data?o.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):pk(RF,Gb,this.logger,this.performanceClient,t)(this.encryptionCookie.key,o.nonce,this.getContext(e),o.data):(this.performanceClient.incrementFields({unencryptedCacheCount:1},t),null)}async importArray(e,t){const n=[],o=[];return e.forEach((e=>{const r=this.getItemFromEncryptedCache(e,t).then((t=>{t?(this.memoryStorage.setItem(e,t),n.push(e)):this.removeItem(e)}));o.push(r)})),await Promise.all(o),n}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const t=this.performanceClient.startMeasurement(Bb);t.add({isBackground:!0});const{key:n,value:o,context:r}=e.data;return n?r&&r!==this.clientId?(this.logger.trace("Ignoring broadcast event from clientId: ".concat(r)),void t.end({success:!1,errorCode:"contextMismatch"})):(o?(this.memoryStorage.setItem(n,o),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(n),this.logger.verbose("Removed item from internal cache")),void t.end({success:!0})):(this.logger.error("Broadcast event missing key"),void t.end({success:!1,errorCode:"noKey"}))}}class Ok{constructor(){if(!window.sessionStorage)throw qF(OF)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}}const Lk="msal:initializeStart",zk="msal:initializeEnd",jk="msal:accountAdded",Hk="msal:accountRemoved",qk="msal:activeAccountChanged",Uk="msal:loginStart",Wk="msal:loginSuccess",Vk="msal:loginFailure",Kk="msal:acquireTokenStart",Gk="msal:acquireTokenSuccess",Yk="msal:acquireTokenFailure",Qk="msal:acquireTokenFromNetworkStart",Zk="msal:ssoSilentStart",Xk="msal:ssoSilentSuccess",$k="msal:ssoSilentFailure",Jk="msal:acquireTokenByCodeStart",ex="msal:acquireTokenByCodeSuccess",tx="msal:acquireTokenByCodeFailure",nx="msal:handleRedirectStart",ox="msal:handleRedirectEnd",rx="msal:popupOpened",ix="msal:logoutStart",ax="msal:logoutSuccess",sx="msal:logoutFailure",ux="msal:logoutEnd",lx="msal:restoreFromBFCache";class cx extends rC{constructor(e,t,n,o,r,i,a){super(e,n,o,a),this.cacheConfig=t,this.logger=o,this.internalStorage=new lk,this.browserStorage=dx(e,t.cacheLocation,o,r),this.temporaryCacheStorage=dx(e,t.temporaryCacheLocation,o,r),this.cookieStorage=new Tk,this.performanceClient=r,this.eventHandler=i}async initialize(e){await this.browserStorage.initialize(e)}validateAndParseJson(e){try{const t=JSON.parse(e);return t&&"object"===typeof t?t:null}catch(t){return null}}getAccount(e){this.logger.trace("BrowserCacheManager.getAccount called");const t=this.browserStorage.getUserData(e);if(!t)return this.removeAccountKeyFromMap(e),null;const n=this.validateAndParseJson(t);return n&&WD.isAccountEntity(n)?rC.toObject(new WD,n):(this.removeAccountKeyFromMap(e),null)}async setAccount(e,t){this.logger.trace("BrowserCacheManager.setAccount called");const n=e.generateAccountKey();await pk(this.browserStorage.setUserData.bind(this.browserStorage),Rb,this.logger,this.performanceClient)(n,JSON.stringify(e),t);const o=this.addAccountKeyToMap(n);this.cacheConfig.cacheLocation===hw&&o&&this.eventHandler.emitEvent(jk,void 0,e.getAccountInfo())}getAccountKeys(){return Nk(this.browserStorage)}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii("BrowserCacheManager.addAccountKeyToMap called with key: ".concat(e));const t=this.getAccountKeys();return-1===t.indexOf(e)?(t.push(e),this.browserStorage.setItem(kw,JSON.stringify(t)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii("BrowserCacheManager.removeAccountKeyFromMap called with key: ".concat(e));const t=this.getAccountKeys(),n=t.indexOf(e);n>-1?(t.splice(n,1),this.browserStorage.setItem(kw,JSON.stringify(t)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}async removeAccount(e){super.removeAccount(e),this.removeAccountKeyFromMap(e)}async removeAccountContext(e){await super.removeAccountContext(e),this.cacheConfig.cacheLocation===hw&&this.eventHandler.emitEvent(Hk,void 0,e.getAccountInfo())}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,ty.ID_TOKEN)}async removeAccessToken(e){super.removeAccessToken(e),this.removeTokenKey(e,ty.ACCESS_TOKEN)}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,ty.REFRESH_TOKEN)}getTokenKeys(){return Mk(this.clientId,this.browserStorage)}addTokenKey(e,t){this.logger.trace("BrowserCacheManager addTokenKey called");const n=this.getTokenKeys();switch(t){case ty.ID_TOKEN:-1===n.idToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),n.idToken.push(e));break;case ty.ACCESS_TOKEN:-1===n.accessToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),n.accessToken.push(e));break;case ty.REFRESH_TOKEN:-1===n.refreshToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),n.refreshToken.push(e));break;default:throw this.logger.error("BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ".concat(t)),Rv(vv)}this.browserStorage.setItem("".concat(xw,".").concat(this.clientId),JSON.stringify(n))}removeTokenKey(e,t){this.logger.trace("BrowserCacheManager removeTokenKey called");const n=this.getTokenKeys();switch(t){case ty.ID_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ".concat(e," from map"));const o=n.idToken.indexOf(e);o>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),n.idToken.splice(o,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case ty.ACCESS_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ".concat(e," from map"));const r=n.accessToken.indexOf(e);r>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),n.accessToken.splice(r,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case ty.REFRESH_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ".concat(e," from map"));const i=n.refreshToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),n.refreshToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error("BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ".concat(t)),Rv(vv)}this.browserStorage.setItem("".concat(xw,".").concat(this.clientId),JSON.stringify(n))}getIdTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,ty.ID_TOKEN),null;const n=this.validateAndParseJson(t);return n&&(o=n)&&Qv(o)&&o.hasOwnProperty("realm")&&o.credentialType===ty.ID_TOKEN?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,ty.ID_TOKEN),null);var o}async setIdTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const n=Vv(e);await pk(this.browserStorage.setUserData.bind(this.browserStorage),Rb,this.logger,this.performanceClient)(n,JSON.stringify(e),t),this.addTokenKey(n,ty.ID_TOKEN)}getAccessTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,ty.ACCESS_TOKEN),null;const n=this.validateAndParseJson(t);return n&&(o=n)&&Qv(o)&&o.hasOwnProperty("realm")&&o.hasOwnProperty("target")&&(o.credentialType===ty.ACCESS_TOKEN||o.credentialType===ty.ACCESS_TOKEN_WITH_AUTH_SCHEME)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,ty.ACCESS_TOKEN),null);var o}async setAccessTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const n=Vv(e);await pk(this.browserStorage.setUserData.bind(this.browserStorage),Rb,this.logger,this.performanceClient)(n,JSON.stringify(e),t),this.addTokenKey(n,ty.ACCESS_TOKEN)}getRefreshTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,ty.REFRESH_TOKEN),null;const n=this.validateAndParseJson(t);return n&&(o=n)&&Qv(o)&&o.credentialType===ty.REFRESH_TOKEN?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,ty.REFRESH_TOKEN),null);var o}async setRefreshTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const n=Vv(e);await pk(this.browserStorage.setUserData.bind(this.browserStorage),Rb,this.logger,this.performanceClient)(n,JSON.stringify(e),t),this.addTokenKey(n,ty.REFRESH_TOKEN)}getAppMetadata(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&(o=e,(r=n)&&0===o.indexOf(ny)&&r.hasOwnProperty("clientId")&&r.hasOwnProperty("environment"))?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),n):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null);var o,r}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");const t=function(e){let{environment:t,clientId:n}=e;return[ny,t,n].join(Jm).toLowerCase()}(e);this.browserStorage.setItem(t,JSON.stringify(e))}getServerTelemetry(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){const n=0===e.indexOf(cy.CACHE_KEY);let o=!0;return t&&(o=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),n&&o}(e,n)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),n):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(e,t){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.browserStorage.setItem(e,JSON.stringify(t))}getAuthorityMetadata(e){const t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){return!!t&&0===e.indexOf(ry)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri")}(e,n)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),n):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter((e=>this.isAuthorityMetadata(e)))}setWrapperMetadata(e,t){this.internalStorage.setItem(Aw,e),this.internalStorage.setItem(Sw,t)}getWrapperMetadata(){return[this.internalStorage.getItem(Aw)||wm.EMPTY_STRING,this.internalStorage.getItem(Sw)||wm.EMPTY_STRING]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(){const e=this.generateCacheKey(Rm),t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const n=this.validateAndParseJson(t);return n?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:n.homeAccountId,localAccountId:n.localAccountId,tenantId:n.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){const t=this.generateCacheKey(Rm);if(e){this.logger.verbose("setActiveAccount: Active account set");const n={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(t,JSON.stringify(n))}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(t);this.eventHandler.emitEvent(qk)}getThrottlingCache(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){let n=!1;e&&(n=0===e.indexOf(py));let o=!0;return t&&(o=t.hasOwnProperty("throttleTime")),n&&o}(e,n)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),n):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(e,t){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.browserStorage.setItem(e,JSON.stringify(t))}getTemporaryCache(e,t){const n=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const e=this.cookieStorage.getItem(n);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),e}const o=this.temporaryCacheStorage.getItem(n);if(!o){if(this.cacheConfig.cacheLocation===hw){const e=this.browserStorage.getItem(n);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),e}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,t,n){const o=n?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(o,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}async clear(){await this.removeAllAccounts(),this.removeAppMetadata(),this.temporaryCacheStorage.getKeys().forEach((e=>{-1===e.indexOf(wm.CACHE_PREFIX)&&-1===e.indexOf(this.clientId)||this.removeTemporaryItem(e)})),this.browserStorage.getKeys().forEach((e=>{-1===e.indexOf(wm.CACHE_PREFIX)&&-1===e.indexOf(this.clientId)||this.browserStorage.removeItem(e)})),this.internalStorage.clear()}async clearTokensAndKeysWithClaims(e,t){e.addQueueMeasurement(Tb,t);const n=this.getTokenKeys(),o=[];n.accessToken.forEach((e=>{const t=this.getAccessTokenCredential(e);null!==t&&void 0!==t&&t.requestedClaimsHash&&e.includes(t.requestedClaimsHash.toLowerCase())&&o.push(this.removeAccessToken(e))})),await Promise.all(o),o.length>0&&this.logger.warning("".concat(o.length," access tokens with claims in the cache keys have been removed from the cache."))}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):PD.startsWith(e,wm.CACHE_PREFIX)?e:"".concat(wm.CACHE_PREFIX,".").concat(this.clientId,".").concat(e)}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(bw)),this.removeTemporaryItem(this.generateCacheKey(ww)),this.removeTemporaryItem(this.generateCacheKey(Dw)),this.removeTemporaryItem(this.generateCacheKey(Cw)),this.removeTemporaryItem(this.generateCacheKey(Fw)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,t){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const n=cF(JSON.stringify(e));if(this.setTemporaryCache(bw,n,!0),t){const e=cF(t);this.setTemporaryCache(ww,e,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache(bw,!0);if(!e)throw rF(SE);const t=this.getTemporaryCache(ww,!0);let n,o="";try{n=JSON.parse(hF(e)),t&&(o=hF(t))}catch(r){throw this.logger.errorPii("Attempted to parse: ".concat(e)),this.logger.error("Parsing cached token request threw with error: ".concat(r)),rF(IE)}return[n,o]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(Fw,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){var t;const n=null===(t=this.getInteractionInProgress())||void 0===t?void 0:t.clientId;return e?n===this.clientId:!!n}getInteractionInProgress(){const e="".concat(wm.CACHE_PREFIX,".").concat(Ew),t=this.getTemporaryCache(e,!1);try{return t?JSON.parse(t):null}catch(n){return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),UF(window),null}}setInteractionInProgress(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yw;const o="".concat(wm.CACHE_PREFIX,".").concat(Ew);if(e){if(this.getInteractionInProgress())throw rF(gE);this.setTemporaryCache(o,JSON.stringify({clientId:this.clientId,type:n}),!1)}else e||(null===(t=this.getInteractionInProgress())||void 0===t?void 0:t.clientId)!==this.clientId||this.removeTemporaryItem(o)}async hydrateCache(e,t){var n,o,r;const i=Kv(null===(n=e.account)||void 0===n?void 0:n.homeAccountId,null===(o=e.account)||void 0===o?void 0:o.environment,e.idToken,this.clientId,e.tenantId);let a;t.claims&&(a=await this.cryptoImpl.hashString(t.claims));const s={idToken:i,accessToken:Gv(null===(r=e.account)||void 0===r?void 0:r.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?qv(e.expiresOn):0,e.extExpiresOn?qv(e.extExpiresOn):0,hF,void 0,e.tokenType,void 0,t.sshKid,t.claims,a)};return this.saveCacheRecord(s,e.correlationId)}async saveCacheRecord(e,t,n){try{await super.saveCacheRecord(e,t,n)}catch(o){if(o instanceof oC&&this.performanceClient&&t)try{const e=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:e.refreshToken.length,cacheIdCount:e.idToken.length,cacheAtCount:e.accessToken.length},t)}catch(o){}throw o}}}function dx(e,t,n,o){try{switch(t){case hw:return new Bk(e,n,o);case fw:return new Ok}}catch(r){n.error(r)}return new lk}class hx{constructor(e){this.eventCallbacks=new Map,this.logger=e||new Ny({}),"undefined"!==typeof BroadcastChannel&&(this.broadcastChannel=new BroadcastChannel("msal.broadcast.event")),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,n){if("undefined"!==typeof window){const o=n||AF();return this.eventCallbacks.has(o)?(this.logger.error("Event callback with id: ".concat(o," is already registered. Please provide a unique id or remove the existing callback and try again.")),null):(this.eventCallbacks.set(o,[e,t||[]]),this.logger.verbose("Event callback registered with id: ".concat(o)),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose("Event callback ".concat(e," removed."))}emitEvent(e,t,n,o){var r;const i={eventType:e,interactionType:t||null,payload:n||null,error:o||null,timestamp:Date.now()};switch(e){case jk:case Hk:case qk:null===(r=this.broadcastChannel)||void 0===r||r.postMessage(i);break;default:this.invokeCallbacks(i)}}invokeCallbacks(e){this.eventCallbacks.forEach(((t,n)=>{let[o,r]=t;(0===r.length||r.includes(e.eventType))&&(this.logger.verbose("Emitting event to callback ".concat(n,": ").concat(e.eventType)),o.apply(null,[e]))}))}invokeCrossTabCallbacks(e){const t=e.data;this.invokeCallbacks(t)}subscribeCrossTab(){var e;null===(e=this.broadcastChannel)||void 0===e||e.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){var e;null===(e=this.broadcastChannel)||void 0===e||e.removeEventListener("message",this.invokeCrossTabCallbacks)}}const fx="home_account_id",px="UPN",gx="client_id",mx="redirect_uri",yx="token_type",vx="req_cnf",Dx="return_spa_code",Cx="x-client-xtra-sku",bx="brk_client_id",wx="brk_redirect_uri",Ex="instance_aware";function Fx(e,t,n){if(!t)return;const o=e.get(gx);o&&e.has(bx)&&(null===n||void 0===n||n.addFields({embeddedClientId:o,embeddedRedirectUri:e.get(mx)},t))}function kx(e,t){e.set("response_type",t)}function xx(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Am;!n||o.includes("openid")||t.includes("openid")||o.push("openid");const r=n?[...t||[],...o]:t||[],i=new _D(r);e.set("scope",i.printScopes())}function Ax(e,t){e.set(gx,t)}function Sx(e,t){e.set(mx,t)}function Ix(e,t){e.set("login_hint",t)}function Px(e,t){e.set(Tm,"UPN:".concat(t))}function _x(e,t){e.set(Tm,"Oid:".concat(t.uid,"@").concat(t.utid))}function Tx(e,t){e.set("sid",t)}function Nx(e,t,n){const o=function(e,t){let n;if(e)try{n=JSON.parse(e)}catch(o){throw ID(hD)}else n={};t&&t.length>0&&(n.hasOwnProperty(zm)||(n[zm]={}),n[zm][jm]={values:t});return JSON.stringify(n)}(t,n);try{JSON.parse(o)}catch(r){throw ID(hD)}e.set("claims",o)}function Mx(e,t){e.set("client-request-id",t)}function Rx(e,t){e.set("x-client-SKU",t.sku),e.set("x-client-VER",t.version),t.os&&e.set("x-client-OS",t.os),t.cpu&&e.set("x-client-CPU",t.cpu)}function Bx(e,t){null!==t&&void 0!==t&&t.appName&&e.set("x-app-name",t.appName),null!==t&&void 0!==t&&t.appVersion&&e.set("x-app-ver",t.appVersion)}function Ox(e,t){t&&e.set("state",t)}function Lx(e,t){e.set("client_secret",t)}function zx(e,t){t&&e.set("client_assertion",t)}function jx(e,t){t&&e.set("client_assertion_type",t)}function Hx(e,t){e.set("grant_type",t)}function qx(e){e.set("client_info","1")}function Ux(e){e.has(Ex)||e.set(Ex,"true")}function Wx(e,t){Object.entries(t).forEach((t=>{let[n,o]=t;!e.has(n)&&o&&e.set(n,o)}))}function Vx(e,t){t&&(e.set(yx,dy.POP),e.set(vx,t))}function Kx(e,t){t&&(e.set(yx,dy.SSH),e.set(vx,t))}function Gx(e,t){e.set("x-client-current-telemetry",t.generateCurrentRequestHeaderValue()),e.set("x-client-last-telemetry",t.generateLastRequestHeaderValue())}function Yx(e){e.set("x-ms-lib-capability",gy)}function Qx(e,t,n){e.has(bx)||e.set(bx,t),e.has(wx)||e.set(wx,n)}async function Zx(e,t,n,o,r,i,a){null===a||void 0===a||a.addQueueMeasurement(yb,i);const s=mk.transformCIAMAuthority(yk(e)),u=new mk(s,t,n,o,r,i,a);try{return await pk(u.resolveEndpointsAsync.bind(u),vb,r,a,i)(),u}catch(l){throw Rv(Gy)}}class Xx extends Hy{constructor(e,t,n,o,r){super(e,t,n),this.name="ServerError",this.errorNo=o,this.status=r,Object.setPrototypeOf(this,Xx.prototype)}}class $x{static generateThrottlingStorageKey(e){return"".concat(py,".").concat(JSON.stringify(e))}static preProcess(e,t){const n=$x.generateThrottlingStorageKey(t),o=e.getThrottlingCache(n);if(o){var r;if(o.throttleTime<Date.now())return void e.removeItem(n);throw new Xx((null===(r=o.errorCodes)||void 0===r?void 0:r.join(" "))||wm.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,t,n){if($x.checkResponseStatus(n)||$x.checkResponseForRetryAfter(n)){const o={throttleTime:$x.calculateThrottleTime(parseInt(n.headers[_m])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache($x.generateThrottlingStorageKey(t),o)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&(e.headers.hasOwnProperty(_m)&&(e.status<200||e.status>=300))}static calculateThrottleTime(e){const t=e<=0?0:e,n=Date.now()/1e3;return Math.floor(1e3*Math.min(n+(t||hy),n+fy))}static removeThrottle(e,t,n,o){const r=Sk(t,n,o),i=this.generateThrottlingStorageKey(r);e.removeItem(i)}}class Jx{constructor(e,t){this.config=function(e){let{authOptions:t,systemOptions:n,loggerOptions:o,cacheOptions:r,storageInterface:i,networkInterface:a,cryptoInterface:s,clientCredentials:u,libraryInfo:c,telemetry:d,serverTelemetryManager:h,persistencePlugin:f,serializableCache:p}=e;const g=l(l({},sC),o);return{authOptions:(m=t,l({clientCapabilities:[],azureCloudOptions:hC,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1},m)),systemOptions:l(l({},aC),n),loggerOptions:g,cacheOptions:l(l({},uC),r),storageInterface:i||new iC(t.clientId,Bv,new Ny(g)),networkInterface:a||lC,cryptoInterface:s||Bv,clientCredentials:u||dC,libraryInfo:l(l({},cC),c),telemetry:l(l({},fC),d),serverTelemetryManager:h||null,persistencePlugin:f||null,serializableCache:p||null};var m}(e),this.logger=new Ny(this.config.loggerOptions,Ov,Lv),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[Im]=wm.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case fx:try{const n=ND(e.credential);t[Tm]="Oid:".concat(n.uid,"@").concat(n.utid)}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case px:t[Tm]="UPN: ".concat(e.credential)}return t}async executePostToTokenEndpoint(e,t,n,o,r,i){var a;i&&(null===(a=this.performanceClient)||void 0===a||a.addQueueMeasurement(i,r));const s=await this.sendPostRequest(o,e,{body:t,headers:n},r);return this.config.serverTelemetryManager&&s.status<500&&429!==s.status&&this.config.serverTelemetryManager.clearTelemetryCache(),s}async sendPostRequest(e,t,n,o){let r;$x.preProcess(this.cacheManager,e);try{var i,a;r=await pk(this.networkClient.sendPostRequestAsync.bind(this.networkClient),TC,this.logger,this.performanceClient,o)(t,n);const e=r.headers||{};null===(i=this.performanceClient)||void 0===i||i.addFields({refreshTokenSize:(null===(a=r.body.refresh_token)||void 0===a?void 0:a.length)||0,httpVerToken:e[Mm]||"",requestId:e[Nm]||""},o)}catch(u){if(u instanceof oE){const e=u.responseHeaders;var s;if(e)null===(s=this.performanceClient)||void 0===s||s.addFields({httpVerToken:e[Mm]||"",requestId:e[Nm]||"",contentTypeHeader:e[Im]||void 0,contentLengthHeader:e[Pm]||void 0,httpStatus:u.httpStatus},o);throw u.error}throw u instanceof Hy?u:Rv(Yy)}return $x.postProcess(this.cacheManager,e,r),r}async updateAuthority(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(lb,t);const o="https://".concat(e,"/").concat(this.authority.tenant,"/"),r=await Zx(o,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=r}createTokenQueryParameters(e){const t=new Map;return e.embeddedClientId&&Qx(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&Wx(t,e.tokenQueryParameters),Mx(t,e.correlationId),Fx(t,e.correlationId,this.performanceClient),GD(t)}}class eA{static setRequestState(e,t,n){const o=eA.generateLibraryState(e,n);return t?"".concat(o).concat(wm.RESOURCE_DELIM).concat(t):o}static generateLibraryState(e,t){if(!e)throw Rv(yv);const n={id:e.createNewGuid()};t&&(n.meta=t);const o=JSON.stringify(n);return e.base64Encode(o)}static parseRequestState(e,t){if(!e)throw Rv(yv);if(!t)throw Rv(Xy);try{const n=t.split(wm.RESOURCE_DELIM),o=n[0],r=n.length>1?n.slice(1).join(wm.RESOURCE_DELIM):wm.EMPTY_STRING,i=e.base64Decode(o),a=JSON.parse(i);return{userRequestState:r||wm.EMPTY_STRING,libraryState:a}}catch(n){throw Rv(Xy)}}}const tA="sw";class nA{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(fb,e.correlationId);const o=await pk(this.generateKid.bind(this),fb,t,this.performanceClient,e.correlationId)(e),r=this.cryptoUtils.base64UrlEncode(JSON.stringify(o));return{kid:o.kid,reqCnfString:r}}async generateKid(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(pb,e.correlationId);return{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:tA}}async signPopToken(e,t,n){return this.signPayload(e,t,n)}async signPayload(e,t,n,o){const{resourceRequestMethod:r,resourceRequestUri:i,shrClaims:a,shrNonce:s,shrOptions:u}=n,c=i?new YD(i):void 0,d=null===c||void 0===c?void 0:c.getUrlComponents();return this.cryptoUtils.signJwt(l({at:e,ts:Hv(),m:null===r||void 0===r?void 0:r.toUpperCase(),u:null===d||void 0===d?void 0:d.HostNameAndPort,nonce:s||this.cryptoUtils.createNewGuid(),p:null===d||void 0===d?void 0:d.AbsolutePath,q:null!==d&&void 0!==d&&d.QueryString?[[],d.QueryString]:void 0,client_claims:a||void 0},o),t,u,n.correlationId)}}class oA{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class rA{constructor(e,t,n,o,r,i,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=n,this.logger=o,this.serializableCache=r,this.persistencePlugin=i,this.performanceClient=a}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){var n;const o="Error(s): ".concat(e.error_codes||wm.NOT_AVAILABLE," - Timestamp: ").concat(e.timestamp||wm.NOT_AVAILABLE," - Description: ").concat(e.error_description||wm.NOT_AVAILABLE," - Correlation ID: ").concat(e.correlation_id||wm.NOT_AVAILABLE," - Trace ID: ").concat(e.trace_id||wm.NOT_AVAILABLE),r=null!==(n=e.error_codes)&&void 0!==n&&n.length?e.error_codes[0]:void 0,i=new Xx(e.error,o,e.suberror,r,e.status);if(t&&e.status&&e.status>=km&&e.status<=xm)return void this.logger.warning("executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n".concat(i));if(t&&e.status&&e.status>=Em&&e.status<=Fm)return void this.logger.warning("executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n".concat(i));if(xk(e.error,e.error_description,e.suberror))throw new kk(e.error,e.error_description,e.suberror,e.timestamp||wm.EMPTY_STRING,e.trace_id||wm.EMPTY_STRING,e.correlation_id||wm.EMPTY_STRING,e.claims||wm.EMPTY_STRING,r);throw i}}async handleServerTokenResponse(e,t,n,o,r,i,a,s,u){var l;let c,d;if(null===(l=this.performanceClient)||void 0===l||l.addQueueMeasurement(gb,e.correlation_id),e.id_token){if(c=zv(e.id_token||wm.EMPTY_STRING,this.cryptoObj.base64Decode),r&&r.nonce&&c.nonce!==r.nonce)throw Rv(ev);if(o.maxAge||0===o.maxAge){const e=c.auth_time;if(!e)throw Rv(tv);jv(e,o.maxAge)}}this.homeAccountIdentifier=WD.generateHomeAccountId(e.client_info||wm.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,c),r&&r.state&&(d=eA.parseRequestState(this.cryptoObj,r.state)),e.key_id=e.key_id||o.sshKid||void 0;const h=this.generateCacheRecord(e,t,n,o,c,i,r);let f;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),f=new oA(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(f)),a&&!s&&h.account){const e=h.account.generateAccountKey();if(!this.cacheStorage.getAccount(e))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await rA.generateAuthenticationResult(this.cryptoObj,t,h,!1,o,c,d,void 0,u)}await this.cacheStorage.saveCacheRecord(h,o.correlationId,o.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&f&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(f))}return rA.generateAuthenticationResult(this.cryptoObj,t,h,!1,o,c,d,e,u)}generateCacheRecord(e,t,n,o,r,i,a){const s=t.getPreferredCache();if(!s)throw Rv(gv);const u=UD(r);let l,c;e.id_token&&r&&(l=Kv(this.homeAccountIdentifier,s,e.id_token,this.clientId,u||""),c=iA(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,r,e.client_info,s,u,a,void 0,this.logger));let d=null;if(e.access_token){const r=e.scope?_D.fromString(e.scope):new _D(o.scopes||[]),a=("string"===typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,l=("string"===typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,c=("string"===typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,h=n+a,f=h+l,p=c&&c>0?n+c:void 0;d=Gv(this.homeAccountIdentifier,s,e.access_token,this.clientId,u||t.tenant||"",r.printScopes(),h,f,this.cryptoObj.base64Decode,p,e.token_type,i,e.key_id,o.claims,o.requestedClaimsHash)}let h=null;if(e.refresh_token){let t;if(e.refresh_token_expires_in){t=n+("string"===typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)}h=Yv(this.homeAccountIdentifier,s,e.refresh_token,this.clientId,e.foci,i,t)}let f=null;return e.foci&&(f={clientId:this.clientId,environment:s,familyId:e.foci}),{account:c,idToken:l,accessToken:d,refreshToken:h,appMetadata:f}}static async generateAuthenticationResult(e,t,n,o,r,i,a,s,u){var l,c,d,h,f;let p,g,m=wm.EMPTY_STRING,y=[],v=null,D=wm.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType!==dy.POP||r.popKid)m=n.accessToken.secret;else{const t=new nA(e),{secret:o,keyId:i}=n.accessToken;if(!i)throw Rv(Av);m=await t.signPopToken(o,i,r)}y=_D.fromString(n.accessToken.target).asArray(),v=Uv(n.accessToken.expiresOn),p=Uv(n.accessToken.extendedExpiresOn),n.accessToken.refreshOn&&(g=Uv(n.accessToken.refreshOn))}n.appMetadata&&(D=n.appMetadata.familyId===oy?oy:"");const C=(null===i||void 0===i?void 0:i.oid)||(null===i||void 0===i?void 0:i.sub)||"",b=(null===i||void 0===i?void 0:i.tid)||"";null!==s&&void 0!==s&&s.spa_accountid&&n.account&&(n.account.nativeAccountId=null===s||void 0===s?void 0:s.spa_accountid);const w=n.account?LD(n.account.getAccountInfo(),void 0,i,null===(l=n.idToken)||void 0===l?void 0:l.secret):null;return{authority:t.canonicalAuthority,uniqueId:C,tenantId:b,scopes:y,account:w,idToken:(null===n||void 0===n||null===(c=n.idToken)||void 0===c?void 0:c.secret)||"",idTokenClaims:i||{},accessToken:m,fromCache:o,expiresOn:v,extExpiresOn:p,refreshOn:g,correlationId:r.correlationId,requestId:u||wm.EMPTY_STRING,familyId:D,tokenType:(null===(d=n.accessToken)||void 0===d?void 0:d.tokenType)||wm.EMPTY_STRING,state:a?a.userRequestState:wm.EMPTY_STRING,cloudGraphHostName:(null===(h=n.account)||void 0===h?void 0:h.cloudGraphHostName)||wm.EMPTY_STRING,msGraphHost:(null===(f=n.account)||void 0===f?void 0:f.msGraphHost)||wm.EMPTY_STRING,code:null===s||void 0===s?void 0:s.spa_code,fromNativeBroker:!1}}}function iA(e,t,n,o,r,i,a,s,u,l,c){null===c||void 0===c||c.verbose("setCachedAccount called");const d=e.getAccountKeys().find((e=>e.startsWith(n)));let h=null;d&&(h=e.getAccount(d));const f=h||WD.createAccount({homeAccountId:n,idTokenClaims:r,clientInfo:i,environment:a,cloudGraphHostName:null===u||void 0===u?void 0:u.cloud_graph_host_name,msGraphHost:null===u||void 0===u?void 0:u.msgraph_host,nativeAccountId:l},t,o),p=f.tenantProfiles||[],g=s||f.realm;if(g&&!p.find((e=>e.tenantId===g))){const e=OD(n,f.localAccountId,g,r);p.push(e)}return f.tenantProfiles=p,f}class aA{static validateRedirectUri(e){if(!e)throw ID(iD)}static validatePrompt(e){const t=[];for(const n in Hm)t.push(Hm[n]);if(t.indexOf(e)<0)throw ID(dD)}static validateClaims(e){try{JSON.parse(e)}catch(t){throw ID(hD)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw ID(mD);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([qm.PLAIN,qm.S256].indexOf(e)<0)throw ID(gD)}}async function sA(e,t,n){if("string"===typeof e)return e;return e({clientId:t,tokenEndpoint:n})}class uA extends Jx{constructor(e,t){var n;super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=null===(n=this.config.authOptions.authority.options.OIDCOptions)||void 0===n?void 0:n.defaultScopes}async acquireToken(e,t){var n,o;if(null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(cb,e.correlationId),!e.code)throw Rv(av);const r=Hv(),i=await pk(this.executeTokenRequest.bind(this),db,this.logger,this.performanceClient,e.correlationId)(this.authority,e),a=null===(o=i.headers)||void 0===o?void 0:o[Nm],s=new rA(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(i.body),pk(s.handleServerTokenResponse.bind(s),gb,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,r,e,t,void 0,void 0,void 0,a)}getLogoutUri(e){if(!e)throw ID(pD);const t=this.createLogoutUrlQueryString(e);return YD.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(db,t.correlationId);const o=this.createTokenQueryParameters(t),r=YD.appendQueryString(e.tokenEndpoint,o),i=await pk(this.createTokenRequestBody.bind(this),hb,this.logger,this.performanceClient,t.correlationId)(t);let a;if(t.clientInfo)try{const e=TD(t.clientInfo,this.cryptoUtils.base64Decode);a={credential:"".concat(e.uid).concat(ey).concat(e.utid),type:fx}}catch(l){this.logger.verbose("Could not parse client info for CCS Header: "+l)}const s=this.createTokenRequestHeaders(a||t.ccsCredential),u=Sk(this.config.authOptions.clientId,t);return pk(this.executePostToTokenEndpoint.bind(this),MC,this.logger,this.performanceClient,t.correlationId)(r,i,s,u,t.correlationId,MC)}async createTokenRequestBody(e){var t,n;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(hb,e.correlationId);const o=new Map;if(Ax(o,e.embeddedClientId||(null===(n=e.tokenBodyParameters)||void 0===n?void 0:n[gx])||this.config.authOptions.clientId),this.includeRedirectUri?Sx(o,e.redirectUri):aA.validateRedirectUri(e.redirectUri),xx(o,e.scopes,!0,this.oidcDefaultScopes),function(e,t){e.set("code",t)}(o,e.code),Rx(o,this.config.libraryInfo),Bx(o,this.config.telemetry.application),Yx(o),this.serverTelemetryManager&&!pC(this.config)&&Gx(o,this.serverTelemetryManager),e.codeVerifier&&function(e,t){e.set("code_verifier",t)}(o,e.codeVerifier),this.config.clientCredentials.clientSecret&&Lx(o,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const t=this.config.clientCredentials.clientAssertion;zx(o,await sA(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),jx(o,t.assertionType)}if(Hx(o,Ym),qx(o),e.authenticationScheme===dy.POP){const t=new nA(this.cryptoUtils,this.performanceClient);let n;if(e.popKid)n=this.cryptoUtils.encodeKid(e.popKid);else{n=(await pk(t.generateCnf.bind(t),fb,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}Vx(o,n)}else if(e.authenticationScheme===dy.SSH){if(!e.sshJwk)throw ID(CD);Kx(o,e.sshJwk)}let r;if((!PD.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Nx(o,e.claims,this.config.authOptions.clientCapabilities),e.clientInfo)try{const t=TD(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:"".concat(t.uid).concat(ey).concat(t.utid),type:fx}}catch(i){this.logger.verbose("Could not parse client info for CCS Header: "+i)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case fx:try{_x(o,ND(r.credential))}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case px:Px(o,r.credential)}return e.embeddedClientId&&Qx(o,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Wx(o,e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[Dx]||Wx(o,{[Dx]:"1"}),Fx(o,e.correlationId,this.performanceClient),GD(o)}createLogoutUrlQueryString(e){const t=new Map;return e.postLogoutRedirectUri&&function(e,t){e.set("post_logout_redirect_uri",t)}(t,e.postLogoutRedirectUri),e.correlationId&&Mx(t,e.correlationId),e.idTokenHint&&function(e,t){e.set("id_token_hint",t)}(t,e.idTokenHint),e.state&&Ox(t,e.state),e.logoutHint&&function(e,t){e.set("logout_hint",t)}(t,e.logoutHint),e.extraQueryParameters&&Wx(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&Ux(t),GD(t,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}function lA(e){const{skus:t,libraryName:n,libraryVersion:o,extensionName:r,extensionVersion:i}=e,a=new Map([[0,[n,o]],[2,[r,i]]]);let s=[];if(null!==t&&void 0!==t&&t.length){if(s=t.split(","),s.length<4)return t}else s=Array.from({length:4},(()=>"|"));return a.forEach(((e,t)=>{var n,o;2===e.length&&null!==(n=e[0])&&void 0!==n&&n.length&&null!==(o=e[1])&&void 0!==o&&o.length&&function(e){const{skuArr:t,index:n,skuName:o,skuVersion:r}=e;if(n>=t.length)return;t[n]=[o,r].join("|")}({skuArr:s,index:t,skuName:e[0],skuVersion:e[1]})})),s.join(",")}class cA{constructor(e,t){this.cacheOutcome=xy,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||wm.EMPTY_STRING,this.wrapperVer=e.wrapperVer||wm.EMPTY_STRING,this.telemetryCacheKey=cy.CACHE_KEY+Jm+e.clientId}generateCurrentRequestHeaderValue(){const e="".concat(this.apiId).concat(cy.VALUE_SEPARATOR).concat(this.cacheOutcome),t=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();null!==n&&void 0!==n&&n.length&&t.push("broker_error=".concat(n));const o=t.join(cy.VALUE_SEPARATOR),r=[e,this.getRegionDiscoveryFields()].join(cy.VALUE_SEPARATOR);return[cy.SCHEMA_VERSION,r,o].join(cy.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=cA.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*t).join(cy.VALUE_SEPARATOR),o=e.errors.slice(0,t).join(cy.VALUE_SEPARATOR),r=e.errors.length,i=[r,t<r?cy.OVERFLOW_TRUE:cy.OVERFLOW_FALSE].join(cy.VALUE_SEPARATOR);return[cy.SCHEMA_VERSION,e.cacheHits,n,o,i].join(cy.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=cy.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof Hy?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(cy.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=cA.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey);else{const n={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n)}}static maxErrorsToSend(e){let t,n=0,o=0;const r=e.errors.length;for(t=0;t<r;t++){const r=e.failedRequests[2*t]||wm.EMPTY_STRING,i=e.failedRequests[2*t+1]||wm.EMPTY_STRING,a=e.errors[t]||wm.EMPTY_STRING;if(o+=r.toString().length+i.toString().length+a.length+3,!(o<cy.MAX_LAST_HEADER_BYTES))break;n+=1}return n}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||wm.EMPTY_STRING),e.push(this.regionSource||wm.EMPTY_STRING),e.push(this.regionOutcome||wm.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return lA(e)}}class dA{constructor(e,t,n,o,r,i,a,s,u){this.config=e,this.browserStorage=t,this.browserCrypto=n,this.networkClient=this.config.system.networkClient,this.eventHandler=r,this.navigationClient=i,this.nativeMessageHandler=s,this.correlationId=u||AF(),this.logger=o.clone(rw,JF,this.correlationId),this.performanceClient=a}async clearCacheOnLogout(e){if(e){WD.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{await this.browserStorage.removeAccount(WD.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch(t){this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),await this.browserStorage.clear(),await this.browserCrypto.clearKeystore()}catch(n){this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const t=e||this.config.auth.redirectUri;return YD.getAbsoluteUrl(t,VF())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");const n={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new cA(n,this.browserStorage)}async getDiscoveredAuthority(e){const{account:t}=e,n=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(PC,this.correlationId);const o={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},r=e.requestAuthority||this.config.auth.authority,i=null!==n&&void 0!==n&&n.length?"true"===n:this.config.auth.instanceAware,a=t&&i?this.config.auth.authority.replace(YD.getDomainFromUrl(r),t.environment):r,s=mk.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),u=await pk(Zx,yb,this.logger,this.performanceClient,this.correlationId)(s,this.config.system.networkClient,this.browserStorage,o,this.logger,this.correlationId,this.performanceClient);if(t&&!u.isAlias(t.environment))throw ID(xD);return u}}async function hA(e,t,n,o){n.addQueueMeasurement(WC,e.correlationId);const r=e.authority||t.auth.authority,i=[...e&&e.scopes||[]],a=l(l({},e),{},{correlationId:e.correlationId,authority:r,scopes:i});if(a.authenticationScheme){if(a.authenticationScheme===dy.SSH){if(!e.sshJwk)throw ID(CD);if(!e.sshKid)throw ID(bD)}o.verbose('Authentication Scheme set to "'.concat(a.authenticationScheme,'" as configured in Auth request'))}else a.authenticationScheme=dy.BEARER,o.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return t.cache.claimsBasedCachingEnabled&&e.claims&&!PD.isEmptyObj(e.claims)&&(a.requestedClaimsHash=await BF(e.claims)),a}async function fA(e,t,n,o,r){o.addQueueMeasurement(VC,e.correlationId);const i=await pk(hA,WC,r,o,e.correlationId)(e,n,o,r);return l(l(l({},e),i),{},{account:t,forceRefresh:e.forceRefresh||!1})}class pA extends dA{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",null===e||void 0===e?void 0:e.correlationId);const t=l({correlationId:this.correlationId||AF()},e);if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const n=this.getLogoutHintFromIdTokenClaims(e.account);n&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=n)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=YD.getAbsoluteUrl(e.postLogoutRedirectUri,VF())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=YD.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,VF())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=YD.getAbsoluteUrl(VF(),VF())),t}getLogoutHintFromIdTokenClaims(e){const t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(JC,this.correlationId);const t=await pk(this.getClientConfiguration.bind(this),eb,this.logger,this.performanceClient,this.correlationId)(e);return new uA(t,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:t,requestAuthority:n,requestAzureCloudOptions:o,requestExtraQueryParameters:r,account:i}=e;this.performanceClient.addQueueMeasurement(eb,this.correlationId);const a=await pk(this.getDiscoveredAuthority.bind(this),PC,this.logger,this.performanceClient,this.correlationId)({requestAuthority:n,requestAzureCloudOptions:o,requestExtraQueryParameters:r,account:i}),s=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:s.loggerCallback,piiLoggingEnabled:s.piiLoggingEnabled,logLevel:s.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:rw,version:JF,cpu:wm.EMPTY_STRING,os:wm.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,t){this.performanceClient.addQueueMeasurement(tb,this.correlationId);const n=this.getRedirectUri(e.redirectUri),o={interactionType:t},r=eA.setRequestState(this.browserCrypto,e&&e.state||wm.EMPTY_STRING,o),i=await pk(hA,WC,this.logger,this.performanceClient,this.correlationId)(l(l({},e),{},{correlationId:this.correlationId}),this.config,this.performanceClient,this.logger),a=l(l({},i),{},{redirectUri:n,state:r,nonce:e.nonce||AF(),responseMode:this.config.auth.OIDCOptions.serverResponseType});if(e.loginHint||e.sid)return a;const s=e.account||this.browserStorage.getActiveAccount();return s&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii("Setting validated request account: ".concat(s.homeAccountId),this.correlationId),a.account=s),a}}const gA="user_switch",mA={[gA]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class yA extends Hy{constructor(e,t,n){super(e,t),Object.setPrototypeOf(this,yA.prototype),this.name="NativeAuthError",this.ext=n}}function vA(e){return!(!e.ext||!e.ext.status||"PERSISTENT_ERROR"!==e.ext.status&&"DISABLED"!==e.ext.status)||(!(!e.ext||!e.ext.error||-2147186943!==e.ext.error)||"ContentError"===e.errorCode)}function DA(e,t,n){if(n&&n.status)switch(n.status){case"ACCOUNT_UNAVAILABLE":return Ak(Dk);case"USER_INTERACTION_REQUIRED":return new kk(e,t);case"USER_CANCEL":return rF(vE);case"NO_NETWORK":return rF(ME)}return new yA(e,mA[e]||t,n)}class CA{constructor(e,t,n,o){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=n,this.handshakeEvent=n.startMeasurement(Pb)}async sendMessage(e){this.logger.trace("NativeMessageHandler - sendMessage called.");const t={channel:iw,extensionId:this.extensionId,responseId:AF(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii("NativeMessageHandler - Sending request to browser extension: ".concat(JSON.stringify(t))),this.messageChannel.port1.postMessage(t),new Promise(((e,n)=>{this.resolvers.set(t.responseId,{resolve:e,reject:n})}))}static async createProvider(e,t,n){e.trace("NativeMessageHandler - createProvider called.");try{const o=new CA(e,t,n,aw);return await o.sendHandshakeRequest(),o}catch(o){const r=new CA(e,t,n);return await r.sendHandshakeRequest(),r}}async sendHandshakeRequest(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:iw,extensionId:this.extensionId,responseId:AF(),body:{method:uw}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=e=>{this.onChannelMessage(e)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise(((t,n)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:n}),this.timeoutId=window.setTimeout((()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),n(rF(VE)),this.handshakeResolvers.delete(e.responseId)}),this.handshakeTimeoutMs)}))}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const t=e.data;if(t.channel&&t.channel===iw&&(!t.extensionId||t.extensionId===this.extensionId)&&t.body.method===uw){const e=this.handshakeResolvers.get(t.responseId);if(!e)return void this.logger.trace("NativeMessageHandler.onWindowMessage - resolver can't be found for request ".concat(t.responseId));this.logger.verbose(t.extensionId?"Extension with id: ".concat(t.extensionId," not installed"):"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),e.reject(rF(KE))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const t=e.data,n=this.resolvers.get(t.responseId),o=this.handshakeResolvers.get(t.responseId);try{const e=t.body.method;if(e===dw){if(!n)return;const e=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii("NativeMessageHandler - Received response from browser extension: ".concat(JSON.stringify(e))),"Success"!==e.status)n.reject(DA(e.code,e.description,e.ext));else{if(!e.result)throw qy(Ly,"Event does not contain result.");e.result.code&&e.result.description?n.reject(DA(e.result.code,e.result.description,e.result.ext)):n.resolve(e.result)}this.resolvers.delete(t.responseId)}else if(e===lw){if(!o)return void this.logger.trace("NativeMessageHandler.onChannelMessage - resolver can't be found for request ".concat(t.responseId));clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose("NativeMessageHandler - Received HandshakeResponse from extension: ".concat(this.extensionId)),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(r){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii("Error parsing response from WAM Extension: ".concat(r)),this.logger.errorPii("Unable to parse ".concat(e)),n?n.reject(r):o&&o.reject(r)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isPlatformBrokerAvailable(e,t,n,o){if(t.trace("isPlatformBrokerAvailable called"),!e.system.allowPlatformBroker)return t.trace("isPlatformBrokerAvailable: allowPlatformBroker is not enabled, returning false"),!1;if(!n)return t.trace("isPlatformBrokerAvailable: Platform extension provider is not initialized, returning false"),!1;if(o)switch(o){case dy.BEARER:case dy.POP:return t.trace("isPlatformBrokerAvailable: authenticationScheme is supported, returning true"),!0;default:return t.trace("isPlatformBrokerAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}function bA(e,t,n){const o=KD(e);if(!o)throw VD(e)?(n.error("A ".concat(t," is present in the iframe but it does not contain known properties. It's likely that the ").concat(t," has been replaced by code running on the redirectUri page.")),n.errorPii("The ".concat(t," detected is: ").concat(e)),rF(hE)):(n.error("The request has returned to the redirectUri but a ".concat(t," is not present. It's likely that the ").concat(t," has been removed or the page has been redirected by code running on the redirectUri page.")),rF(cE));return o}function wA(e,t,n){if(!e.state)throw rF(dE);const o=function(e,t){if(!t)return null;try{return eA.parseRequestState(e,t).libraryState.meta}catch(n){throw Rv(Xy)}}(t,e.state);if(!o)throw rF(fE);if(o.interactionType!==n)throw rF(pE)}function EA(e,t,n,o){var r,i;const a=t.correlationId,s=new Map;Ax(s,t.embeddedClientId||(null===(r=t.extraQueryParameters)||void 0===r?void 0:r[gx])||e.clientId);if(xx(s,[...t.scopes||[],...t.extraScopesToConsent||[]],!0,null===(i=e.authority.options.OIDCOptions)||void 0===i?void 0:i.defaultScopes),Sx(s,t.redirectUri),Mx(s,a),function(e,t){e.set("response_mode",t||Gm)}(s,t.responseMode),qx(s),t.prompt&&(!function(e,t){e.set("prompt",t)}(s,t.prompt),null===o||void 0===o||o.addFields({prompt:t.prompt},a)),t.domainHint&&(!function(e,t){e.set("domain_hint",t)}(s,t.domainHint),null===o||void 0===o||o.addFields({domainHintFromRequest:!0},a)),t.prompt!==Hm.SELECT_ACCOUNT)if(t.sid&&t.prompt===Hm.NONE)n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),Tx(s,t.sid),null===o||void 0===o||o.addFields({sidFromRequest:!0},a);else if(t.account){const e=function(e){var t;return(null===(t=e.idTokenClaims)||void 0===t?void 0:t.sid)||null}(t.account);let r=function(e){var t;return(null===(t=e.idTokenClaims)||void 0===t?void 0:t.login_hint)||null}(t.account);if(r&&t.domainHint&&(n.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),r=null),r){n.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),Ix(s,r),null===o||void 0===o||o.addFields({loginHintFromClaim:!0},a);try{_x(s,ND(t.account.homeAccountId))}catch(u){n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e&&t.prompt===Hm.NONE){n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),Tx(s,e),null===o||void 0===o||o.addFields({sidFromClaim:!0},a);try{_x(s,ND(t.account.homeAccountId))}catch(u){n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(t.loginHint)n.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),Ix(s,t.loginHint),Px(s,t.loginHint),null===o||void 0===o||o.addFields({loginHintFromRequest:!0},a);else if(t.account.username){n.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),Ix(s,t.account.username),null===o||void 0===o||o.addFields({loginHintFromUpn:!0},a);try{_x(s,ND(t.account.homeAccountId))}catch(u){n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else t.loginHint&&(n.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),Ix(s,t.loginHint),Px(s,t.loginHint),null===o||void 0===o||o.addFields({loginHintFromRequest:!0},a));else n.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return t.nonce&&function(e,t){e.set("nonce",t)}(s,t.nonce),t.state&&Ox(s,t.state),(t.claims||e.clientCapabilities&&e.clientCapabilities.length>0)&&Nx(s,t.claims,e.clientCapabilities),t.embeddedClientId&&Qx(s,e.clientId,e.redirectUri),!e.instanceAware||t.extraQueryParameters&&Object.keys(t.extraQueryParameters).includes(Ex)||Ux(s),s}function FA(e,t,n,o){const r=GD(t,n,o);return YD.appendQueryString(e.authorizationEndpoint,r)}function kA(e,t){if(!e.state||!t)throw e.state?Rv(Jy,"Cached State"):Rv(Jy,"Server State");let n,o;try{n=decodeURIComponent(e.state)}catch(r){throw Rv(Xy,e.state)}try{o=decodeURIComponent(t)}catch(r){throw Rv(Xy,e.state)}if(n!==o)throw Rv($y);if(e.error||e.error_description||e.suberror){const t=function(e){var t,n;const o="code=",r=null===(t=e.error_uri)||void 0===t?void 0:t.lastIndexOf(o);return r&&r>=0?null===(n=e.error_uri)||void 0===n?void 0:n.substring(r+o.length):void 0}(e);if(xk(e.error,e.error_description,e.suberror))throw new kk(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",t);throw new Xx(e.error||"",e.error_description,e.suberror,t)}}class xA{constructor(e,t,n,o,r){this.authModule=e,this.browserStorage=t,this.authCodeRequest=n,this.logger=o,this.performanceClient=r}async handleCodeResponse(e,t){let n;this.performanceClient.addQueueMeasurement(ib,t.correlationId);try{n=function(e,t){if(kA(e,t),!e.code)throw Rv(Fv);return e}(e,t.state)}catch(o){throw o instanceof Xx&&o.subError===vE?rF(vE):o}return pk(this.handleCodeResponseFromServer.bind(this),rb,this.logger,this.performanceClient,t.correlationId)(n,t)}async handleCodeResponseFromServer(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.performanceClient.addQueueMeasurement(rb,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await pk(this.authModule.updateAuthority.bind(this.authModule),lb,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId),n&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const e=this.createCcsCredentials(t);e&&(this.authCodeRequest.ccsCredential=e)}return await pk(this.authModule.acquireToken.bind(this.authModule),cb,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:fx}:e.loginHint?{credential:e.loginHint,type:px}:null}}function AA(e){if(null==e)throw new TypeError("Cannot destructure "+e)}class SA extends Jx{constructor(e,t){super(e,t)}async acquireCachedToken(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(HC,e.correlationId);let n=xy;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!PD.isEmptyObj(e.claims))throw this.setCacheOutcome(Ay,e.correlationId),Rv(bv);if(!e.account)throw Rv(fv);const o=e.account.tenantId||function(e){var t;const n=null===(t=new YD(e).getUrlComponents().PathSegments.slice(-1)[0])||void 0===t?void 0:t.toLowerCase();switch(n){case Bm:case Om:case Lm:return;default:return n}}(e.authority),r=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,r,o,this.performanceClient,e.correlationId);if(!i)throw this.setCacheOutcome(Sy,e.correlationId),Rv(bv);if(a=i.cachedAt,Number(a)>Hv()||Wv(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Iy,e.correlationId),Rv(bv);var a;i.refreshOn&&Wv(i.refreshOn,0)&&(n=Py);const s=e.authority||this.authority.getPreferredCache(),u={account:this.cacheManager.readAccountFromCache(e.account),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,r,o,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(n,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await pk(this.generateResultFromCacheRecord.bind(this),qC,this.logger,this.performanceClient,e.correlationId)(u,e),n]}setCacheOutcome(e,t){var n,o;null===(n=this.serverTelemetryManager)||void 0===n||n.setCacheOutcome(e),null===(o=this.performanceClient)||void 0===o||o.addFields({cacheOutcome:e},t),e!==xy&&this.logger.info("Token refresh is required due to cache outcome: ".concat(e))}async generateResultFromCacheRecord(e,t){var n;let o;if(null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(qC,t.correlationId),e.idToken&&(o=zv(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){var r;const e=null===(r=o)||void 0===r?void 0:r.auth_time;if(!e)throw Rv(tv);jv(e,t.maxAge)}return rA.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,o)}}class IA extends pA{async acquireToken(e){this.performanceClient.addQueueMeasurement(kC,e.correlationId);const t=this.initializeServerTelemetryManager(Mw),n=await pk(this.getClientConfiguration.bind(this),eb,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),o=new SA(n,this.performanceClient);this.logger.verbose("Silent auth client created");try{const t=(await pk(o.acquireCachedToken.bind(o),HC,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),t}catch(r){throw r instanceof oF&&r.errorCode===zE&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),r}}logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(null===t||void 0===t?void 0:t.account)}}const PA=["prompt"],_A=["scopes"];class TA extends dA{constructor(e,t,n,o,r,i,a,s,u,l,c,d){var h;super(e,t,n,o,r,i,s,u,d),this.apiId=a,this.accountId=l,this.nativeMessageHandler=u,this.nativeStorageManager=c,this.silentCacheClient=new IA(e,this.nativeStorageManager,n,o,r,i,s,u,d);const f=this.nativeMessageHandler.getExtensionId()===aw?"chrome":null!==(h=this.nativeMessageHandler.getExtensionId())&&void 0!==h&&h.length?"unknown":void 0;this.skus=cA.makeExtraSkuString({libraryName:rw,libraryVersion:JF,extensionName:f,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters=l(l({},e.extraParameters),{},{[Cx]:this.skus})}async acquireToken(e,t){this.performanceClient.addQueueMeasurement(_C,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const n=this.performanceClient.startMeasurement(_C,e.correlationId),o=Hv(),r=this.initializeServerTelemetryManager(this.apiId);try{const a=await this.initializeNativeRequest(e);try{const e=await this.acquireTokensFromCache(this.accountId,a);return n.end({success:!0,isNativeBroker:!1,fromCache:!0}),e}catch(i){if(t===Zw)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),i;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const s=Object.assign({},(AA(a),a)),u={method:cw,request:s},l=await this.nativeMessageHandler.sendMessage(u),c=this.validateNativeResponse(l);return await this.handleNativeResponse(c,a,o).then((e=>(n.end({success:!0,isNativeBroker:!0,requestId:e.requestId}),r.clearNativeBrokerErrorCode(),e))).catch((e=>{throw n.end({success:!1,errorCode:e.errorCode,subErrorCode:e.subError,isNativeBroker:!0}),e}))}catch(i){throw i instanceof yA&&r.setNativeBrokerErrorCode(i.errorCode),i}}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:_D.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}async acquireTokensFromCache(e,t){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),Rv(mv);const n=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!n)throw Rv(mv);try{const e=this.createSilentCacheRequest(t,n),o=await this.silentCacheClient.acquireToken(e),r=l(l({},n),{},{idTokenClaims:null===o||void 0===o?void 0:o.idTokenClaims,idToken:null===o||void 0===o?void 0:o.idToken});return l(l({},o),{},{account:r})}catch(o){throw o}}async acquireTokenRedirect(e,t){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const n=Object.assign({},(AA(e),e));delete n.onRedirectNavigate;const o=await this.initializeNativeRequest(n),r={method:cw,request:o};try{const e=await this.nativeMessageHandler.sendMessage(r);this.validateNativeResponse(e)}catch(s){if(s instanceof yA){if(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(s.errorCode),vA(s))throw s}}this.browserStorage.setTemporaryCache(Fw,JSON.stringify(o),!0);const i={apiId:Iw,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),await this.navigationClient.navigateExternal(a,i)}async handleRedirectPromise(e,t){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const n=this.browserStorage.getCachedNativeRequest();if(!n)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&(null===e||void 0===e||e.addFields({errorCode:"no_cached_request"},t)),null;const{prompt:o}=n,r=c(n,PA);o&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Fw));const i={method:cw,request:r},a=Hv();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const e=await this.nativeMessageHandler.sendMessage(i);this.validateNativeResponse(e);const t=this.handleNativeResponse(e,r,a),n=await t;return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),n}catch(s){throw s}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,t,n){var o,r;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const i=zv(e.id_token,hF),a=this.createHomeAccountIdentifier(e,i),s=null===(o=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId}))||void 0===o?void 0:o.homeAccountId;if(null!==(r=t.extraParameters)&&void 0!==r&&r.child_client_id&&e.account.id!==t.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(a!==s&&e.account.id!==t.accountId)throw DA(gA);const u=await this.getDiscoveredAuthority({requestAuthority:t.authority}),l=iA(this.browserStorage,u,a,hF,i,e.client_info,void 0,i.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);const c=await this.generateAuthenticationResult(e,t,i,l,u.canonicalAuthority,n);return await this.cacheAccount(l),await this.cacheNativeTokens(e,t,a,i,e.access_token,c.tenantId,n),c}createHomeAccountIdentifier(e,t){return WD.generateHomeAccountId(e.client_info||wm.EMPTY_STRING,zD,this.logger,this.browserCrypto,t)}generateScopes(e,t){return e.scope?_D.fromString(e.scope):_D.fromString(t.scope)}async generatePopAccessToken(e,t){if(t.tokenType===dy.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const n=new nA(this.browserCrypto),o={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw Rv(Av);return n.signPopToken(e.access_token,t.keyId,o)}return e.access_token}async generateAuthenticationResult(e,t,n,o,r,i){const a=this.addTelemetryFromNativeResponse(e),s=e.scope?_D.fromString(e.scope):_D.fromString(t.scope),u=e.account.properties||{},l=u.UID||n.oid||n.sub||wm.EMPTY_STRING,c=u.TenantId||n.tid||wm.EMPTY_STRING,d=LD(o.getAccountInfo(),void 0,n,e.id_token);d.nativeAccountId!==e.account.id&&(d.nativeAccountId=e.account.id);const h=await this.generatePopAccessToken(e,t),f=t.tokenType===dy.POP?dy.POP:dy.BEARER;return{authority:r,uniqueId:l,tenantId:c,scopes:s.asArray(),account:d,idToken:e.id_token,idTokenClaims:n,accessToken:h,fromCache:!!a&&this.isResponseFromCache(a),expiresOn:Uv(i+e.expires_in),tokenType:f,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e){await this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e).catch((e=>{this.logger.error("Error occurred while removing account context from browser storage. ".concat(e))}))}cacheNativeTokens(e,t,n,o,r,i,a){const s=Kv(n,t.authority,e.id_token||"",t.clientId,o.tid||""),u=a+(t.tokenType===dy.POP?wm.SHR_NONCE_VALIDITY:("string"===typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0),l=this.generateScopes(e,t),c={idToken:s,accessToken:Gv(n,t.authority,r,t.clientId,o.tid||i,l.printScopes(),u,0,hF,void 0,t.tokenType,void 0,t.keyId)};return this.nativeStorageManager.saveCacheRecord(c,this.correlationId,t.storeInCache)}addTelemetryFromNativeResponse(e){const t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw qy(Ly,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch(t){this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return"undefined"===typeof e.is_cached?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const t=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const n=new YD(t);n.validateAsUri();const{scopes:o}=e,r=c(e,_A),i=new _D(o||[]);i.appendScopes(Am);const a=l(l({},r),{},{accountId:this.accountId,clientId:this.config.auth.clientId,authority:n.urlString,scope:i.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:(()=>{switch(this.apiId){case _w:case Mw:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),Hm.NONE}if(e.prompt)switch(e.prompt){case Hm.NONE:case Hm.CONSENT:case Hm.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace("initializeNativeRequest: prompt = ".concat(e.prompt," is not compatible with native flow")),rF(QE)}else this.logger.trace("initializeNativeRequest: prompt was not provided")})(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:l(l({},e.extraQueryParameters),e.tokenQueryParameters),extendedExpiryToken:!1,keyId:e.popKid});if(a.signPopToken&&e.popKid)throw rF(XE);if(this.handleExtraBrokerParams(a),a.extraParameters=a.extraParameters||{},a.extraParameters.telemetry=sw,e.authenticationScheme===dy.POP){const t={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},n=new nA(this.browserCrypto);let o;if(a.keyId)o=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:a.keyId})),a.signPopToken=!1;else{const r=await pk(n.generateCnf.bind(n),fb,this.logger,this.performanceClient,e.correlationId)(t,this.logger);o=r.reqCnfString,a.keyId=r.kid,a.signPopToken=!0}a.reqCnf=o}return this.addRequestSKUs(a),a}handleExtraBrokerParams(e){var t;const n=e.extraParameters&&e.extraParameters.hasOwnProperty(bx)&&e.extraParameters.hasOwnProperty(wx)&&e.extraParameters.hasOwnProperty(gx);if(!e.embeddedClientId&&!n)return;let o="";const r=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,o=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[wx],o=e.extraParameters[gx]),e.extraParameters={child_client_id:o,child_redirect_uri:r},null===(t=this.performanceClient)||void 0===t||t.addFields({embeddedClientId:o,embeddedRedirectUri:r},e.correlationId)}}async function NA(e,t,n,o,r){const i=EA(l(l({},e.auth),{},{authority:t}),n,o,r);if(Rx(i,{sku:rw,version:JF,os:"",cpu:""}),e.auth.protocolMode!==Ry&&Bx(i,e.telemetry.application),n.platformBroker&&(function(e){e.set("nativebroker","1")}(i),n.authenticationScheme===dy.POP)){const e=new dk(o,r),t=new nA(e);let a;if(n.popKid)a=e.encodeKid(n.popKid);else{a=(await pk(t.generateCnf.bind(t),fb,o,r,n.correlationId)(n,o)).reqCnfString}Vx(i,a)}return Fx(i,n.correlationId,r),i}async function MA(e,t,n,o,r){if(!n.codeChallenge)throw ID(mD);const i=await pk(NA,ob,o,r,n.correlationId)(e,t,n,o,r);return kx(i,Um),function(e,t,n){if(!t||!n)throw ID(mD);e.set("code_challenge",t),e.set("code_challenge_method",n)}(i,n.codeChallenge,wm.S256_CODE_CHALLENGE_METHOD),Wx(i,n.extraQueryParameters||{}),FA(t,i,e.auth.encodeExtraQueryParams,n.extraQueryParameters)}async function RA(e,t,n,o,r,i){if(!o.earJwk)throw rF(aE);const a=await NA(t,n,o,r,i);kx(a,Wm),function(e,t){e.set("ear_jwk",encodeURIComponent(t)),e.set("ear_jwe_crypto","eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}(a,o.earJwk);const s=new Map;Wx(s,o.extraQueryParameters||{});return function(e,t,n){const o=e.createElement("form");return o.method="post",o.action=t,n.forEach(((t,n)=>{const r=e.createElement("input");r.hidden=!0,r.name=n,r.value=t,o.appendChild(r)})),e.body.appendChild(o),o}(e,FA(n,s,t.auth.encodeExtraQueryParams,o.extraQueryParameters),a)}async function BA(e,t,n,o,r,i,a,s,u,c){if(!c)throw rF(GE);const d=new dk(s,u),h=new TA(o,r,d,s,a,o.system.navigationClient,n,u,c,t,i,e.correlationId),{userRequestState:f}=eA.parseRequestState(d,e.state);return pk(h.acquireToken.bind(h),_C,s,u,e.correlationId)(l(l({},e),{},{state:f,prompt:void 0}))}async function OA(e,t,n,o,r,i,a,s,u,c,d,h){if($x.removeThrottle(a,r.auth.clientId,e),t.accountId)return pk(BA,sb,c,d,e.correlationId)(e,t.accountId,o,r,a,s,u,c,d,h);const f=l(l({},e),{},{code:t.code||"",codeVerifier:n}),p=new xA(i,a,f,c,d);return await pk(p.handleCodeResponse.bind(p),ib,c,d,e.correlationId)(t,e)}async function LA(e,t,n,o,r,i,a,s,u,l,c){if($x.removeThrottle(i,o.auth.clientId,e),kA(t,e.state),!t.ear_jwe)throw rF(sE);if(!e.earJwk)throw rF(aE);const d=JSON.parse(await pk(PF,Qb,u,l,e.correlationId)(e.earJwk,t.ear_jwe));if(d.accountId)return pk(BA,sb,u,l,e.correlationId)(e,d.accountId,n,o,i,a,s,u,l,c);const h=new rA(o.auth.clientId,i,new dk(u,l),u,null,null,l);h.validateTokenResponse(d);const f={code:"",state:e.state,nonce:e.nonce,client_info:d.client_info,cloud_graph_host_name:d.cloud_graph_host_name,cloud_instance_host_name:d.cloud_instance_host_name,cloud_instance_name:d.cloud_instance_name,msgraph_host:d.msgraph_host};return await pk(h.handleServerTokenResponse.bind(h),gb,u,l,e.correlationId)(d,r,Hv(),e,f,void 0,void 0,void 0,void 0)}async function zA(e,t,n){e.addQueueMeasurement(Ob,n);const o=fk(jA,Lb,t,e,n)(e,t,n);return{verifier:o,challenge:await pk(HA,zb,t,e,n)(o,e,t,n)}}function jA(e,t,n){try{const o=new Uint8Array(32);fk(kF,Hb,t,e,n)(o);return lF(o)}catch(o){throw rF(iE)}}async function HA(e,t,n,o){t.addQueueMeasurement(zb,o);try{const r=await pk(FF,jb,n,t,o)(e,t,o);return lF(new Uint8Array(r))}catch(r){throw rF(iE)}}class qA extends pA{constructor(e,t,n,o,r,i,a,s,u,l){super(e,t,n,o,r,i,a,u,l),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=s,this.eventHandler=r}acquireToken(e,t){try{var n;const o={popupName:this.generatePopupName(e.scopes||Am,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:null!==(n=e.popupWindowParent)&&void 0!==n?n:window};return this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,o,t)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),o.popup=this.openSizedPopup("about:blank",o),this.acquireTokenPopupAsync(e,o,t))}catch(o){return Promise.reject(o)}}logout(e){try{var t;this.logger.verbose("logoutPopup called");const n=this.initializeLogoutRequest(e),o={popupName:this.generateLogoutPopupName(n),popupWindowAttributes:(null===e||void 0===e?void 0:e.popupWindowAttributes)||{},popupWindowParent:null!==(t=null===e||void 0===e?void 0:e.popupWindowParent)&&void 0!==t?t:window},r=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(n,o,r,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),o.popup=this.openSizedPopup("about:blank",o),this.logoutPopupAsync(n,o,r,i))}catch(n){return Promise.reject(n)}}async acquireTokenPopupAsync(e,t,n){this.logger.verbose("acquireTokenPopupAsync called");const o=await pk(this.initializeAuthorizationRequest.bind(this),tb,this.logger,this.performanceClient,this.correlationId)(e,Ow.Popup);t.popup&&XF(o.authority);const r=CA.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);return o.platformBroker=r,this.config.auth.protocolMode===By?this.executeEarFlow(o,t):this.executeCodeFlow(o,t,n)}async executeCodeFlow(e,t,n){const o=e.correlationId,r=this.initializeServerTelemetryManager(Pw),i=n||await pk(zA,Ob,this.logger,this.performanceClient,o)(this.performanceClient,this.logger,o),a=l(l({},e),{},{codeChallenge:i.challenge});try{const n=await pk(this.createAuthCodeClient.bind(this),JC,this.logger,this.performanceClient,o)({serverTelemetryManager:r,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account}),s=await pk(MA,nb,this.logger,this.performanceClient,o)(this.config,n.authority,a,this.logger,this.performanceClient),u=this.initiateAuthRequest(s,t);this.eventHandler.emitEvent(rx,Ow.Popup,{popupWindow:u},null);const l=await this.monitorPopupForHash(u,t.popupWindowParent),c=fk(bA,mb,this.logger,this.performanceClient,this.correlationId)(l,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await pk(OA,ub,this.logger,this.performanceClient,o)(e,c,i.verifier,Pw,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}catch(u){var s;throw null===(s=t.popup)||void 0===s||s.close(),u instanceof Hy&&(u.setCorrelationId(this.correlationId),r.cacheFailedRequest(u)),u}}async executeEarFlow(e,t){const n=e.correlationId,o=await pk(this.getDiscoveredAuthority.bind(this),PC,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),r=await pk(IF,Yb,this.logger,this.performanceClient,n)(),i=l(l({},e),{},{earJwk:r}),a=t.popup||this.openPopup("about:blank",t);(await RA(a.document,this.config,o,i,this.logger,this.performanceClient)).submit();const s=await pk(this.monitorPopupForHash.bind(this),ZC,this.logger,this.performanceClient,n)(a,t.popupWindowParent),u=fk(bA,mb,this.logger,this.performanceClient,this.correlationId)(s,this.config.auth.OIDCOptions.serverResponseType,this.logger);return pk(LA,ab,this.logger,this.performanceClient,n)(i,u,Pw,this.config,o,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}async logoutPopupAsync(e,t,n,o){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(ix,Ow.Popup,e);const r=this.initializeServerTelemetryManager(Bw);try{await this.clearCacheOnLogout(e.account);const u=await pk(this.createAuthCodeClient.bind(this),JC,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:n,account:e.account||void 0});try{u.authority.endSessionEndpoint}catch(l){var i;if(null!==(i=e.account)&&void 0!==i&&i.homeAccountId&&e.postLogoutRedirectUri&&u.authority.protocolMode===Ry){var a,s;if(this.browserStorage.removeAccount(null===(a=e.account)||void 0===a?void 0:a.homeAccountId),this.eventHandler.emitEvent(ax,Ow.Popup,e),o){const e={apiId:Bw,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=YD.getAbsoluteUrl(o,VF());await this.navigationClient.navigateInternal(t,e)}return void(null===(s=t.popup)||void 0===s||s.close())}}const c=u.getLogoutUri(e);this.eventHandler.emitEvent(ax,Ow.Popup,e);const d=this.openPopup(c,t);if(this.eventHandler.emitEvent(rx,Ow.Popup,{popupWindow:d},null),await this.monitorPopupForHash(d,t.popupWindowParent).catch((()=>{})),o){const e={apiId:Bw,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=YD.getAbsoluteUrl(o,VF());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii("Redirecting main window to: ".concat(t)),await this.navigationClient.navigateInternal(t,e)}else this.logger.verbose("No main window navigation requested")}catch(c){var u;throw null===(u=t.popup)||void 0===u||u.close(),c instanceof Hy&&(c.setCorrelationId(this.correlationId),r.cacheFailedRequest(c)),this.eventHandler.emitEvent(sx,Ow.Popup,null,c),this.eventHandler.emitEvent(ux,Ow.Popup),c}this.eventHandler.emitEvent(ux,Ow.Popup)}initiateAuthRequest(e,t){if(e)return this.logger.infoPii("Navigate to: ".concat(e)),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),rF(lE)}monitorPopupForHash(e,t){return new Promise(((t,n)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const o=setInterval((()=>{if(e.closed)return this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(o),void n(rF(vE));let r="";try{r=e.location.href}catch(s){}if(!r||"about:blank"===r)return;clearInterval(o);let i="";const a=this.config.auth.OIDCOptions.serverResponseType;e&&(i=a===Vm?e.location.search:e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),t(i)}),this.config.system.pollIntervalMilliseconds)})).finally((()=>{this.cleanPopup(e,t)}))}openPopup(e,t){try{let n;if(t.popup?(n=t.popup,this.logger.verbosePii("Navigating popup window to: ".concat(e)),n.location.assign(e)):"undefined"===typeof t.popup&&(this.logger.verbosePii("Opening popup window to: ".concat(e)),n=this.openSizedPopup(e,t)),!n)throw rF(yE);return n.focus&&n.focus(),this.currentWindow=n,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),n}catch(n){throw this.logger.error("error opening popup "+n.message),rF(mE)}}openSizedPopup(e,t){var n,o,r,i;let{popupName:a,popupWindowAttributes:s,popupWindowParent:u}=t;const l=u.screenLeft?u.screenLeft:u.screenX,c=u.screenTop?u.screenTop:u.screenY,d=u.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,h=u.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let f=null===(n=s.popupSize)||void 0===n?void 0:n.width,p=null===(o=s.popupSize)||void 0===o?void 0:o.height,g=null===(r=s.popupPosition)||void 0===r?void 0:r.top,m=null===(i=s.popupPosition)||void 0===i?void 0:i.left;return(!f||f<0||f>d)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),f=ew),(!p||p<0||p>h)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),p=tw),(!g||g<0||g>h)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),g=Math.max(0,h/2-tw/2+c)),(!m||m<0||m>d)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),m=Math.max(0,d/2-ew/2+l)),u.open(e,a,"width=".concat(f,", height=").concat(p,", top=").concat(g,", left=").concat(m,", scrollbars=yes"))}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,t){return"".concat(nw,".").concat(this.config.auth.clientId,".").concat(e.join("-"),".").concat(t,".").concat(this.correlationId)}generateLogoutPopupName(e){const t=e.account&&e.account.homeAccountId;return"".concat(nw,".").concat(this.config.auth.clientId,".").concat(t,".").concat(this.correlationId)}}class UA extends pA{constructor(e,t,n,o,r,i,a,s,u,l){super(e,t,n,o,r,i,a,u,l),this.nativeStorage=s}async acquireToken(e){const t=await pk(this.initializeAuthorizationRequest.bind(this),tb,this.logger,this.performanceClient,this.correlationId)(e,Ow.Redirect);t.platformBroker=CA.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);const n=e=>{e.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(lx,Ow.Redirect))},o=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii("Redirect start page: ".concat(o)),this.browserStorage.setTemporaryCache(Dw,o,!0),window.addEventListener("pageshow",n);try{this.config.auth.protocolMode===By?await this.executeEarFlow(t):await this.executeCodeFlow(t,e.onRedirectNavigate)}catch(r){throw r instanceof Hy&&r.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",n),r}}async executeCodeFlow(e,t){const n=e.correlationId,o=this.initializeServerTelemetryManager(Iw),r=await pk(zA,Ob,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),i=l(l({},e),{},{codeChallenge:r.challenge});this.browserStorage.cacheAuthorizeRequest(i,r.verifier);try{const n=await pk(this.createAuthCodeClient.bind(this),JC,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),r=await pk(MA,nb,this.logger,this.performanceClient,e.correlationId)(this.config,n.authority,i,this.logger,this.performanceClient);return await this.initiateAuthRequest(r,t)}catch(a){throw a instanceof Hy&&(a.setCorrelationId(this.correlationId),o.cacheFailedRequest(a)),a}}async executeEarFlow(e){const t=e.correlationId,n=await pk(this.getDiscoveredAuthority.bind(this),PC,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),o=await pk(IF,Yb,this.logger,this.performanceClient,t)(),r=l(l({},e),{},{earJwk:o});this.browserStorage.cacheAuthorizeRequest(r);(await RA(document,this.config,n,r,this.logger,this.performanceClient)).submit()}async handleRedirectPromise(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;const r=this.initializeServerTelemetryManager(Tw);try{const[i,a]=this.getRedirectResponse(e||"");if(!i)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),"back_forward"!==function(){if("undefined"===typeof window||"undefined"===typeof window.performance||"function"!==typeof window.performance.getEntriesByType)return;const e=window.performance.getEntriesByType("navigation"),t=e.length?e[0]:void 0;return null===t||void 0===t?void 0:t.type}()?o.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const s=this.browserStorage.getTemporaryCache(Dw,!0)||wm.EMPTY_STRING,u=YD.removeHashFromUrl(s);if(u===YD.removeHashFromUrl(window.location.href)&&this.config.auth.navigateToLoginRequestUrl){this.logger.verbose("Current page is loginRequestUrl, handling response"),s.indexOf("#")>-1&&function(e){const t=e.split("#");t.shift(),window.location.hash=t.length>0?t.join("#"):""}(s);return await this.handleResponse(i,t,n,r)}if(!this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(i,t,n,r);if(!WF()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Cw,a,!0);const e={apiId:Tw,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let o=!0;if(s&&"null"!==s)this.logger.verbose("Navigating to loginRequestUrl: ".concat(s)),o=await this.navigationClient.navigateInternal(s,e);else{const t=function(){const e=new YD(window.location.href).getUrlComponents();return"".concat(e.Protocol,"//").concat(e.HostNameAndPort,"/")}();this.browserStorage.setTemporaryCache(Dw,t,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),o=await this.navigationClient.navigateInternal(t,e)}if(!o)return await this.handleResponse(i,t,n,r)}return null}catch(i){throw i instanceof Hy&&(i.setCorrelationId(this.correlationId),r.cacheFailedRequest(i)),i}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(t=this.config.auth.OIDCOptions.serverResponseType===Vm?window.location.search:window.location.hash);let n=KD(t);if(n){try{wA(n,this.browserCrypto,Ow.Redirect)}catch(r){return r instanceof Hy&&this.logger.error("Interaction type validation failed due to ".concat(r.errorCode,": ").concat(r.errorMessage)),[null,""]}return UF(window),this.logger.verbose("Hash contains known properties, returning response hash"),[n,t]}const o=this.browserStorage.getTemporaryCache(Cw,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Cw)),o&&(n=KD(o),n)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[n,o]):[null,""]}async handleResponse(e,t,n,o){if(!e.state)throw rF(dE);if(e.ear_jwe){const n=await pk(this.getDiscoveredAuthority.bind(this),PC,this.logger,this.performanceClient,t.correlationId)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return pk(LA,ab,this.logger,this.performanceClient,t.correlationId)(t,e,Iw,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}const r=await pk(this.createAuthCodeClient.bind(this),JC,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:t.authority});return pk(OA,ub,this.logger,this.performanceClient,t.correlationId)(t,e,n,Iw,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}async initiateAuthRequest(e,t){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii("RedirectHandler.initiateAuthRequest: Navigate to: ".concat(e));const n={apiId:Iw,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=t||this.config.auth.onRedirectNavigate;if("function"===typeof o){this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback");return!1!==o(e)?(this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),void await this.navigationClient.navigateExternal(e,n)):void this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation")}return this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),void await this.navigationClient.navigateExternal(e,n)}throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),rF(lE)}async logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e),n=this.initializeServerTelemetryManager(Rw);try{this.eventHandler.emitEvent(ix,Ow.Redirect,e),await this.clearCacheOnLogout(t.account);const a={apiId:Rw,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},s=await pk(this.createAuthCodeClient.bind(this),JC,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e&&e.authority,requestExtraQueryParameters:null===e||void 0===e?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(s.authority.protocolMode===Ry)try{s.authority.endSessionEndpoint}catch(i){var o,r;if(null!==(o=t.account)&&void 0!==o&&o.homeAccountId)return this.browserStorage.removeAccount(null===(r=t.account)||void 0===r?void 0:r.homeAccountId),void this.eventHandler.emitEvent(ax,Ow.Redirect,t)}const u=s.getLogoutUri(t);if(this.eventHandler.emitEvent(ax,Ow.Redirect,t),!e||"function"!==typeof e.onRedirectNavigate)return this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,vw),void await this.navigationClient.navigateExternal(u,a);if(!1!==e.onRedirectNavigate(u))return this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,vw),void await this.navigationClient.navigateExternal(u,a);this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}catch(a){throw a instanceof Hy&&(a.setCorrelationId(this.correlationId),n.cacheFailedRequest(a)),this.eventHandler.emitEvent(sx,Ow.Redirect,null,a),this.eventHandler.emitEvent(ux,Ow.Redirect),a}this.eventHandler.emitEvent(ux,Ow.Redirect)}getRedirectStartPage(e){const t=e||window.location.href;return YD.getAbsoluteUrl(t,VF())}}async function WA(e,t,n,o,r){if(t.addQueueMeasurement(QC,o),!e)throw n.info("Navigate url is empty"),rF(lE);return r?pk(GA,XC,n,t,o)(e,r,t,o):fk(YA,$C,n,t,o)(e)}async function VA(e,t,n,o,r){const i=QA();if(!i.contentDocument)throw"No document associated with iframe!";return(await RA(i.contentDocument,e,t,n,o,r)).submit(),i}async function KA(e,t,n,o,r,i,a){return o.addQueueMeasurement(ZC,i),new Promise(((o,i)=>{t<$F&&r.warning("system.loadFrameTimeout or system.iframeHashTimeout set to lower (".concat(t,"ms) than the default (").concat($F,"ms). This may result in timeouts."));const s=window.setTimeout((()=>{window.clearInterval(u),i(rF(CE))}),t),u=window.setInterval((()=>{let t="";const n=e.contentWindow;try{t=n?n.location.href:""}catch(i){}if(!t||"about:blank"===t)return;let r="";n&&(r=a===Vm?n.location.search:n.location.hash),window.clearTimeout(s),window.clearInterval(u),o(r)}),n)})).finally((()=>{fk(ZA,_b,r,o,i)(e)}))}function GA(e,t,n,o){return n.addQueueMeasurement(XC,o),new Promise(((n,o)=>{const r=QA();window.setTimeout((()=>{r?(r.src=e,n(r)):o("Unable to load iframe")}),t)}))}function YA(e){const t=QA();return t.src=e,t}function QA(){const e=document.createElement("iframe");return e.className="msalSilentIframe",e.style.visibility="hidden",e.style.position="absolute",e.style.width=e.style.height="0",e.style.border="0",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(e),e}function ZA(e){document.body===e.parentNode&&document.body.removeChild(e)}class XA extends pA{constructor(e,t,n,o,r,i,a,s,u,l,c){super(e,t,n,o,r,i,s,l,c),this.apiId=a,this.nativeStorage=u}async acquireToken(e){this.performanceClient.addQueueMeasurement(xC,e.correlationId),e.loginHint||e.sid||e.account&&e.account.username||this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const t=l({},e);t.prompt?t.prompt!==Hm.NONE&&t.prompt!==Hm.NO_SESSION&&(this.logger.warning("SilentIframeClient. Replacing invalid prompt ".concat(t.prompt," with ").concat(Hm.NONE)),t.prompt=Hm.NONE):t.prompt=Hm.NONE;const n=await pk(this.initializeAuthorizationRequest.bind(this),tb,this.logger,this.performanceClient,e.correlationId)(t,Ow.Silent);return n.platformBroker=CA.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,n.authenticationScheme),XF(n.authority),this.config.auth.protocolMode===By?this.executeEarFlow(n):this.executeCodeFlow(n)}async executeCodeFlow(e){let t;const n=this.initializeServerTelemetryManager(this.apiId);try{return t=await pk(this.createAuthCodeClient.bind(this),JC,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:n,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),await pk(this.silentTokenHelper.bind(this),YC,this.logger,this.performanceClient,e.correlationId)(t,e)}catch(o){if(o instanceof Hy&&(o.setCorrelationId(this.correlationId),n.cacheFailedRequest(o)),!t||!(o instanceof Hy)||o.errorCode!==Jb)throw o;return this.performanceClient.addFields({retryError:o.errorCode},this.correlationId),await pk(this.silentTokenHelper.bind(this),YC,this.logger,this.performanceClient,this.correlationId)(t,e)}}async executeEarFlow(e){const t=e.correlationId,n=await pk(this.getDiscoveredAuthority.bind(this),PC,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),o=await pk(IF,Yb,this.logger,this.performanceClient,t)(),r=l(l({},e),{},{earJwk:o}),i=await pk(VA,QC,this.logger,this.performanceClient,t)(this.config,n,r,this.logger,this.performanceClient),a=this.config.auth.OIDCOptions.serverResponseType,s=await pk(KA,ZC,this.logger,this.performanceClient,t)(i,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,t,a),u=fk(bA,mb,this.logger,this.performanceClient,t)(s,a,this.logger);return pk(LA,ab,this.logger,this.performanceClient,t)(r,u,this.apiId,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}logout(){return Promise.reject(rF(kE))}async silentTokenHelper(e,t){const n=t.correlationId;this.performanceClient.addQueueMeasurement(YC,n);const o=await pk(zA,Ob,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),r=l(l({},t),{},{codeChallenge:o.challenge}),i=await pk(MA,nb,this.logger,this.performanceClient,n)(this.config,e.authority,r,this.logger,this.performanceClient),a=await pk(WA,QC,this.logger,this.performanceClient,n)(i,this.performanceClient,this.logger,n,this.config.system.navigateFrameWait),s=this.config.auth.OIDCOptions.serverResponseType,u=await pk(KA,ZC,this.logger,this.performanceClient,n)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,n,s),c=fk(bA,mb,this.logger,this.performanceClient,n)(u,s,this.logger);return pk(OA,ub,this.logger,this.performanceClient,n)(t,c,o.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.nativeMessageHandler)}}class $A extends Jx{constructor(e,t){super(e,t)}async acquireToken(e){var t,n;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(BC,e.correlationId);const o=Hv(),r=await pk(this.executeTokenRequest.bind(this),RC,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=null===(n=r.headers)||void 0===n?void 0:n[Nm],a=new rA(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return a.validateTokenResponse(r.body),pk(a.handleServerTokenResponse.bind(a),gb,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,o,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){var t;if(!e)throw ID(fD);if(null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(LC,e.correlationId),!e.account)throw Rv(fv);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await pk(this.acquireTokenWithCachedRefreshToken.bind(this),OC,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(n){const t=n instanceof kk&&n.errorCode===vk,o=n instanceof Xx&&n.errorCode===my&&n.subError===yy;if(t||o)return pk(this.acquireTokenWithCachedRefreshToken.bind(this),OC,this.logger,this.performanceClient,e.correlationId)(e,!1);throw n}return pk(this.acquireTokenWithCachedRefreshToken.bind(this),OC,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(OC,e.correlationId);const o=fk(this.cacheManager.getRefreshToken.bind(this.cacheManager),Nb,this.logger,this.performanceClient,e.correlationId)(e.account,t,void 0,this.performanceClient,e.correlationId);if(!o)throw Ak(vk);var r;if(o.expiresOn&&Wv(o.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw null===(r=this.performanceClient)||void 0===r||r.addFields({rtExpiresOnMs:Number(o.expiresOn)},e.correlationId),Ak(Ck);const i=l(l({},e),{},{refreshToken:o.secret,authenticationScheme:e.authenticationScheme||dy.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:fx}});try{return await pk(this.acquireToken.bind(this),BC,this.logger,this.performanceClient,e.correlationId)(i)}catch(s){var a;if(s instanceof kk)if(null===(a=this.performanceClient)||void 0===a||a.addFields({rtExpiresOnMs:Number(o.expiresOn)},e.correlationId),s.subError===bk){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const e=Vv(o);this.cacheManager.removeRefreshToken(e)}throw s}}async executeTokenRequest(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(RC,e.correlationId);const o=this.createTokenQueryParameters(e),r=YD.appendQueryString(t.tokenEndpoint,o),i=await pk(this.createTokenRequestBody.bind(this),zC,this.logger,this.performanceClient,e.correlationId)(e),a=this.createTokenRequestHeaders(e.ccsCredential),s=Sk(this.config.authOptions.clientId,e);return pk(this.executePostToTokenEndpoint.bind(this),NC,this.logger,this.performanceClient,e.correlationId)(r,i,a,s,e.correlationId,NC)}async createTokenRequestBody(e){var t,n,o;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(zC,e.correlationId);const r=new Map;if(Ax(r,e.embeddedClientId||(null===(n=e.tokenBodyParameters)||void 0===n?void 0:n[gx])||this.config.authOptions.clientId),e.redirectUri&&Sx(r,e.redirectUri),xx(r,e.scopes,!0,null===(o=this.config.authOptions.authority.options.OIDCOptions)||void 0===o?void 0:o.defaultScopes),Hx(r,Qm),qx(r),Rx(r,this.config.libraryInfo),Bx(r,this.config.telemetry.application),Yx(r),this.serverTelemetryManager&&!pC(this.config)&&Gx(r,this.serverTelemetryManager),function(e,t){e.set("refresh_token",t)}(r,e.refreshToken),this.config.clientCredentials.clientSecret&&Lx(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const t=this.config.clientCredentials.clientAssertion;zx(r,await sA(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),jx(r,t.assertionType)}if(e.authenticationScheme===dy.POP){const t=new nA(this.cryptoUtils,this.performanceClient);let n;if(e.popKid)n=this.cryptoUtils.encodeKid(e.popKid);else{n=(await pk(t.generateCnf.bind(t),fb,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}Vx(r,n)}else if(e.authenticationScheme===dy.SSH){if(!e.sshJwk)throw ID(CD);Kx(r,e.sshJwk)}if((!PD.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Nx(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case fx:try{_x(r,ND(e.ccsCredential.credential))}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case px:Px(r,e.ccsCredential.credential)}return e.embeddedClientId&&Qx(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Wx(r,e.tokenBodyParameters),Fx(r,e.correlationId,this.performanceClient),GD(r)}}class JA extends pA{async acquireToken(e){this.performanceClient.addQueueMeasurement(SC,e.correlationId);const t=await pk(hA,WC,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),n=l(l({},e),t);e.redirectUri&&(n.redirectUri=this.getRedirectUri(e.redirectUri));const o=this.initializeServerTelemetryManager(Mw),r=await this.createRefreshTokenClient({serverTelemetryManager:o,authorityUrl:n.authority,azureCloudOptions:n.azureCloudOptions,account:n.account});return pk(r.acquireTokenByRefreshToken.bind(r),LC,this.logger,this.performanceClient,e.correlationId)(n).catch((e=>{throw e.setCorrelationId(this.correlationId),o.cacheFailedRequest(e),e}))}logout(){return Promise.reject(rF(kE))}async createRefreshTokenClient(e){const t=await pk(this.getClientConfiguration.bind(this),eb,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new $A(t,this.performanceClient)}}class eS{constructor(e,t,n,o){this.isBrowserEnvironment="undefined"!==typeof window,this.config=e,this.storage=t,this.logger=n,this.cryptoObj=o}async loadExternalTokens(e,t,n){if(!this.isBrowserEnvironment)throw rF(TE);const o=e.correlationId||AF(),r=t.id_token?zv(t.id_token,hF):void 0,i={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new mk(mk.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,i,this.logger,e.correlationId||AF()):void 0,s=await this.loadAccount(e,n.clientInfo||t.client_info||"",o,r,a),u=await this.loadIdToken(t,s.homeAccountId,s.environment,s.realm,o),l=await this.loadAccessToken(e,t,s.homeAccountId,s.environment,s.realm,n,o),c=await this.loadRefreshToken(t,s.homeAccountId,s.environment,o);return this.generateAuthenticationResult(e,{account:s,idToken:u,accessToken:l,refreshToken:c},r,a)}async loadAccount(e,t,n,o,r){if(this.logger.verbose("TokenCache - loading account"),e.account){const t=WD.createFromAccountInfo(e.account);return await this.storage.setAccount(t,n),t}if(!r||!t&&!o)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),rF(LE);const i=WD.generateHomeAccountId(t,r.authorityType,this.logger,this.cryptoObj,o),a=null===o||void 0===o?void 0:o.tid,s=iA(this.storage,r,i,hF,o,t,r.hostnameAndPort,a,void 0,void 0,this.logger);return await this.storage.setAccount(s,n),s}async loadIdToken(e,t,n,o,r){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const i=Kv(t,n,e.id_token,this.config.auth.clientId,o);return await this.storage.setIdTokenCredential(i,r),i}async loadAccessToken(e,t,n,o,r,i,a){if(!t.access_token)return this.logger.verbose("TokenCache - no access token found in response"),null;if(!t.expires_in)return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null;this.logger.verbose("TokenCache - loading access token");const s=t.scope?_D.fromString(t.scope):new _D(e.scopes),u=i.expiresOn||t.expires_in+Hv(),l=i.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+Hv(),c=Gv(n,o,t.access_token,this.config.auth.clientId,r,s.printScopes(),u,l,hF);return await this.storage.setAccessTokenCredential(c,a),c}async loadRefreshToken(e,t,n,o){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const r=Yv(t,n,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(r,o),r}generateAuthenticationResult(e,t,n,o){var r,i,a;let s,u="",l=[],c=null;null!==t&&void 0!==t&&t.accessToken&&(u=t.accessToken.secret,l=_D.fromString(t.accessToken.target).asArray(),c=Uv(t.accessToken.expiresOn),s=Uv(t.accessToken.extendedExpiresOn));const d=t.account;return{authority:o?o.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:l,account:d.getAccountInfo(),idToken:(null===(r=t.idToken)||void 0===r?void 0:r.secret)||"",idTokenClaims:n||{},accessToken:u,fromCache:!0,expiresOn:c,correlationId:e.correlationId||"",requestId:"",extExpiresOn:s,familyId:(null===(i=t.refreshToken)||void 0===i?void 0:i.familyId)||"",tokenType:(null===t||void 0===t||null===(a=t.accessToken)||void 0===a?void 0:a.tokenType)||"",state:e.state||"",cloudGraphHostName:d.cloudGraphHostName||"",msGraphHost:d.msGraphHost||"",fromNativeBroker:!1}}}class tS extends uA{constructor(e){super(e),this.includeRedirectUri=!1}}class nS extends pA{constructor(e,t,n,o,r,i,a,s,u,l){super(e,t,n,o,r,i,s,u,l),this.apiId=a}async acquireToken(e){if(!e.code)throw rF(jE);const t=await pk(this.initializeAuthorizationRequest.bind(this),tb,this.logger,this.performanceClient,e.correlationId)(e,Ow.Silent),n=this.initializeServerTelemetryManager(this.apiId);try{const o=l(l({},t),{},{code:e.code}),r=await pk(this.getClientConfiguration.bind(this),eb,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:n,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),i=new tS(r);this.logger.verbose("Auth code client created");const a=new xA(i,this.browserStorage,o,this.logger,this.performanceClient);return await pk(a.handleCodeResponseFromServer.bind(a),rb,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(o){throw o instanceof Hy&&(o.setCorrelationId(this.correlationId),n.cacheFailedRequest(o)),o}}logout(){return Promise.reject(rF(kE))}}function oS(e){const t=null===e||void 0===e?void 0:e.idTokenClaims;return null!==t&&void 0!==t&&t.tfp||null!==t&&void 0!==t&&t.acr?"B2C":null!==t&&void 0!==t&&t.tid?"9188040d-6c67-4c5b-b112-36a304b66dad"===(null===t||void 0===t?void 0:t.tid)?"MSA":"AAD":void 0}function rS(e,t){try{QF(e)}catch(n){throw t.end({success:!1},n),n}}class iS{constructor(e){var t,n,o,r;this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new dk(this.logger,this.performanceClient):Bv,this.eventHandler=new hx(this.logger),this.browserStorage=this.isBrowserEnvironment?new cx(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,function(e){const t=e.cloudDiscoveryMetadata;let n;if(t)try{n=JSON.parse(t)}catch(o){throw ID(yD)}return{canonicalAuthority:e.authority?yk(e.authority):void 0,knownAuthorities:e.knownAuthorities,cloudDiscoveryMetadata:n}}(this.config.auth)):(t=this.config.auth.clientId,n=this.logger,o=this.performanceClient,r=this.eventHandler,new cx(t,{cacheLocation:pw,temporaryCacheLocation:pw,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},Bv,n,o,r));const i={cacheLocation:pw,temporaryCacheLocation:pw,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new cx(this.config.auth.clientId,i,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new eS(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,t){const n=new iS(e);return await n.initialize(t),n}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e,t){if(this.logger.trace("initialize called"),this.initialized)return void this.logger.info("initialize has already been called, exiting early.");if(!this.isBrowserEnvironment)return this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,void this.eventHandler.emitEvent(zk);const n=(null===e||void 0===e?void 0:e.correlationId)||this.getRequestCorrelationId(),o=this.config.system.allowPlatformBroker,r=this.performanceClient.startMeasurement(KC,n);if(this.eventHandler.emitEvent(Lk),!t)try{this.logMultipleInstances(r)}catch(i){}if(await pk(this.browserStorage.initialize.bind(this.browserStorage),GC,this.logger,this.performanceClient,n)(n),o)try{this.nativeExtensionProvider=await CA.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(a){this.logger.verbose(a)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),await pk(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),Tb,this.logger,this.performanceClient,n)(this.performanceClient,n)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(n),this.initialized=!0,this.eventHandler.emitEvent(zk),r.end({allowPlatformBroker:o,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),YF(this.initialized),this.isBrowserEnvironment){const t=e||"";let n=this.redirectResponse.get(t);return"undefined"===typeof n?(n=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,n),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),n}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){var t;if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if((null===(t=this.browserStorage.getInteractionInProgress())||void 0===t?void 0:t.type)===vw)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const n=this.getAllAccounts(),o=this.browserStorage.getCachedNativeRequest(),r=o&&CA.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e;let i,a;this.eventHandler.emitEvent(nx,Ow.Redirect);try{if(r&&this.nativeExtensionProvider){i=this.performanceClient.startMeasurement(wC,(null===o||void 0===o?void 0:o.correlationId)||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform");const e=new TA(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Tw,this.performanceClient,this.nativeExtensionProvider,o.accountId,this.nativeInternalStorage,o.correlationId);a=pk(e.handleRedirectPromise.bind(e),Ib,this.logger,this.performanceClient,i.event.correlationId)(this.performanceClient,i.event.correlationId)}else{const[t,n]=this.browserStorage.getCachedRequest(),o=t.correlationId;i=this.performanceClient.startMeasurement(wC,o),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const r=this.createRedirectClient(o);a=pk(r.handleRedirectPromise.bind(r),Sb,this.logger,this.performanceClient,i.event.correlationId)(e,t,n,i)}}catch(s){throw this.browserStorage.resetRequestCache(),s}return a.then((e=>{if(e){this.browserStorage.resetRequestCache();n.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(Wk,Ow.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Gk,Ow.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),i.end({success:!0,accountType:oS(e.account)})}else i.event.errorCode?i.end({success:!1}):i.discard();return this.eventHandler.emitEvent(ox,Ow.Redirect),e})).catch((e=>{this.browserStorage.resetRequestCache();const t=e;throw n.length>0?this.eventHandler.emitEvent(Yk,Ow.Redirect,null,t):this.eventHandler.emitEvent(Vk,Ow.Redirect,null,t),this.eventHandler.emitEvent(ox,Ow.Redirect),i.end({success:!1},t),e}))}async acquireTokenRedirect(e){const t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);const n=this.performanceClient.startMeasurement(bC,t);n.add({accountType:oS(e.account),scenarioId:e.scenarioId});const o=e.onRedirectNavigate;if(o)e.onRedirectNavigate=e=>{const t="function"===typeof o?o(e):void 0;return!1!==t?n.end({success:!0}):n.discard(),t};else{const e=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=t=>{const o="function"===typeof e?e(t):void 0;return!1!==o?n.end({success:!0}):n.discard(),o}}const r=this.getAllAccounts().length>0;try{let o;if(ZF(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,yw),r?this.eventHandler.emitEvent(Kk,Ow.Redirect,e):this.eventHandler.emitEvent(Uk,Ow.Redirect,e),this.nativeExtensionProvider&&this.canUsePlatformBroker(e)){o=new TA(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Iw,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,n).catch((n=>{if(n instanceof yA&&vA(n)){this.nativeExtensionProvider=void 0;return this.createRedirectClient(t).acquireToken(e)}if(n instanceof kk){this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow");return this.createRedirectClient(t).acquireToken(e)}throw n}))}else{o=this.createRedirectClient(t).acquireToken(e)}return await o}catch(i){throw this.browserStorage.resetRequestCache(),n.end({success:!1},i),r?this.eventHandler.emitEvent(Yk,Ow.Redirect,null,i):this.eventHandler.emitEvent(Vk,Ow.Redirect,null,i),i}}acquireTokenPopup(e){const t=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(CC,t);n.add({scenarioId:e.scenarioId,accountType:oS(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),rS(this.initialized,n),this.browserStorage.setInteractionInProgress(!0,yw)}catch(a){return Promise.reject(a)}const o=this.getAllAccounts();let r;o.length>0?this.eventHandler.emitEvent(Kk,Ow.Popup,e):this.eventHandler.emitEvent(Uk,Ow.Popup,e);const i=this.getPreGeneratedPkceCodes(t);if(this.canUsePlatformBroker(e))r=this.acquireTokenNative(l(l({},e),{},{correlationId:t}),Pw).then((e=>(n.end({success:!0,isNativeBroker:!0,accountType:oS(e.account)}),e))).catch((n=>{if(n instanceof yA&&vA(n)){this.nativeExtensionProvider=void 0;return this.createPopupClient(t).acquireToken(e,i)}if(n instanceof kk){this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow");return this.createPopupClient(t).acquireToken(e,i)}throw n}));else{r=this.createPopupClient(t).acquireToken(e,i)}return r.then((e=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Wk,Ow.Popup,e):this.eventHandler.emitEvent(Gk,Ow.Popup,e),n.end({success:!0,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:oS(e.account)}),e))).catch((e=>(o.length>0?this.eventHandler.emitEvent(Yk,Ow.Popup,null,e):this.eventHandler.emitEvent(Vk,Ow.Popup,null,e),n.end({success:!1},e),Promise.reject(e)))).finally((async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(t)}))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var t,n;const o=this.getRequestCorrelationId(e),r=l(l({},e),{},{prompt:e.prompt,correlationId:o});let i;if(this.ssoSilentMeasurement=this.performanceClient.startMeasurement(IC,o),null===(t=this.ssoSilentMeasurement)||void 0===t||t.add({scenarioId:e.scenarioId,accountType:oS(e.account)}),rS(this.initialized,this.ssoSilentMeasurement),null===(n=this.ssoSilentMeasurement)||void 0===n||n.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",o),this.eventHandler.emitEvent(Zk,Ow.Silent,r),this.canUsePlatformBroker(r))i=this.acquireTokenNative(r,_w).catch((e=>{if(e instanceof yA&&vA(e)){this.nativeExtensionProvider=void 0;return this.createSilentIframeClient(r.correlationId).acquireToken(r)}throw e}));else{i=this.createSilentIframeClient(r.correlationId).acquireToken(r)}return i.then((e=>{var t;return this.eventHandler.emitEvent(Xk,Ow.Silent,e),null===(t=this.ssoSilentMeasurement)||void 0===t||t.end({success:!0,isNativeBroker:e.fromNativeBroker,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:oS(e.account)}),e})).catch((e=>{var t;throw this.eventHandler.emitEvent($k,Ow.Silent,null,e),null===(t=this.ssoSilentMeasurement)||void 0===t||t.end({success:!1},e),e})).finally((()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)}))}async acquireTokenByCode(e){const t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);const n=this.performanceClient.startMeasurement(mC,t);rS(this.initialized,n),this.eventHandler.emitEvent(Jk,Ow.Silent,e),n.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw rF(qE);if(e.code){const o=e.code;let r=this.hybridAuthCodeResponses.get(o);return r?(this.logger.verbose("Existing acquireTokenByCode request found",t),n.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),r=this.acquireTokenByCodeAsync(l(l({},e),{},{correlationId:t})).then((e=>(this.eventHandler.emitEvent(ex,Ow.Silent,e),this.hybridAuthCodeResponses.delete(o),n.end({success:!0,isNativeBroker:e.fromNativeBroker,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:oS(e.account)}),e))).catch((e=>{throw this.hybridAuthCodeResponses.delete(o),this.eventHandler.emitEvent(tx,Ow.Silent,null,e),n.end({success:!1},e),e})),this.hybridAuthCodeResponses.set(o,r)),await r}if(e.nativeAccountId){if(this.canUsePlatformBroker(e,e.nativeAccountId)){const o=await this.acquireTokenNative(l(l({},e),{},{correlationId:t}),Nw,e.nativeAccountId).catch((e=>{throw e instanceof yA&&vA(e)&&(this.nativeExtensionProvider=void 0),e}));return n.end({accountType:oS(o.account),success:!0}),o}throw rF(WE)}throw rF(HE)}catch(o){throw this.eventHandler.emitEvent(tx,Ow.Silent,null,o),n.end({success:!1},o),o}}async acquireTokenByCodeAsync(e){var t;this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(Ab,e.correlationId),null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement);const n=this.createSilentAuthCodeClient(e.correlationId);return await n.acquireToken(e).then((e=>{var t;return null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.end({success:!0,fromCache:e.fromCache,isNativeBroker:e.fromNativeBroker}),e})).catch((e=>{var t;throw null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.end({success:!1},e),e})).finally((()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)}))}async acquireTokenFromCache(e,t){switch(this.performanceClient.addQueueMeasurement(jC,e.correlationId),t){case Qw:case Zw:case Xw:const t=this.createSilentCacheClient(e.correlationId);return pk(t.acquireToken.bind(t),kC,this.logger,this.performanceClient,e.correlationId)(e);default:throw Rv(bv)}}async acquireTokenByRefreshToken(e,t){switch(this.performanceClient.addQueueMeasurement(yC,e.correlationId),t){case Qw:case Xw:case $w:case Jw:const t=this.createSilentRefreshClient(e.correlationId);return pk(t.acquireToken.bind(t),SC,this.logger,this.performanceClient,e.correlationId)(e);default:throw Rv(bv)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(UC,e.correlationId);const t=this.createSilentIframeClient(e.correlationId);return pk(t.acquireToken.bind(t),xC,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect(l({correlationId:t},e))}async logoutRedirect(e){const t=this.getRequestCorrelationId(e);ZF(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,vw);return this.createRedirectClient(t).logout(e)}logoutPopup(e){try{const t=this.getRequestCorrelationId(e);QF(this.initialized),this.browserStorage.setInteractionInProgress(!0,vw);return this.createPopupClient(t).logout(e).finally((()=>{this.browserStorage.setInteractionInProgress(!1)}))}catch(t){return Promise.reject(t)}}async clearCache(e){if(!this.isBrowserEnvironment)return void this.logger.info("in non-browser environment, returning early.");const t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)}getAllAccounts(e){return function(e,t,n,o){return e.verbose("getAllAccounts called"),n?t.getAllAccounts(o):[]}(this.logger,this.browserStorage,this.isBrowserEnvironment,e)}getAccount(e){return function(e,t,n){if(t.trace("getAccount called"),0===Object.keys(e).length)return t.warning("getAccount: No accountFilter provided"),null;const o=n.getAccountInfoFilteredBy(e);return o?(t.verbose("getAccount: Account matching provided filter found, returning"),o):(t.verbose("getAccount: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByUsername(e){return function(e,t,n){if(t.trace("getAccountByUsername called"),!e)return t.warning("getAccountByUsername: No username provided"),null;const o=n.getAccountInfoFilteredBy({username:e});return o?(t.verbose("getAccountByUsername: Account matching username found, returning"),t.verbosePii("getAccountByUsername: Returning signed-in accounts matching username: ".concat(e)),o):(t.verbose("getAccountByUsername: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return function(e,t,n){if(t.trace("getAccountByHomeId called"),!e)return t.warning("getAccountByHomeId: No homeAccountId provided"),null;const o=n.getAccountInfoFilteredBy({homeAccountId:e});return o?(t.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),t.verbosePii("getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ".concat(e)),o):(t.verbose("getAccountByHomeId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return function(e,t,n){if(t.trace("getAccountByLocalId called"),!e)return t.warning("getAccountByLocalId: No localAccountId provided"),null;const o=n.getAccountInfoFilteredBy({localAccountId:e});return o?(t.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),t.verbosePii("getAccountByLocalId: Returning signed-in accounts matching localAccountId: ".concat(e)),o):(t.verbose("getAccountByLocalId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}setActiveAccount(e){!function(e,t){t.setActiveAccount(e)}(e,this.browserStorage)}getActiveAccount(){return this.browserStorage.getActiveAccount()}async hydrateCache(e,t){this.logger.verbose("hydrateCache called");const n=WD.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(n,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)}async acquireTokenNative(e,t,n,o){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw rF(GE);return new TA(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.nativeExtensionProvider,n||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,o)}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!CA.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isPlatformBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case Hm.NONE:case Hm.CONSENT:case Hm.LOGIN:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace("canUsePlatformBroker: prompt = ".concat(e.prompt," is not compatible with platform broker flow, returning false")),!1}return!(!t&&!this.getNativeAccountId(e))||(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1)}getNativeAccountId(e){const t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new qA(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new UA(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new XA(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,_w,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new IA(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new JA(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new nS(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Nw,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return GF(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){this.config.cache.cacheLocation===hw?this.eventHandler.subscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}disableAccountStorageEvents(){this.config.cache.cacheLocation===hw?this.eventHandler.unsubscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return null!==e&&void 0!==e&&e.correlationId?e.correlationId:this.isBrowserEnvironment?AF():wm.EMPTY_STRING}async loginRedirect(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect(l({correlationId:t},e||Vw))}loginPopup(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup(l({correlationId:t},e||Vw))}async acquireTokenSilent(e){const t=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(vC,t);n.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),rS(this.initialized,n),this.logger.verbose("acquireTokenSilent called",t);const o=e.account||this.getActiveAccount();if(!o)throw rF(xE);return n.add({accountType:oS(o)}),this.acquireTokenSilentDeduped(e,o,t).then((o=>(n.end({success:!0,fromCache:o.fromCache,isNativeBroker:o.fromNativeBroker,accessTokenSize:o.accessToken.length,idTokenSize:o.idToken.length}),l(l({},o),{},{state:e.state,correlationId:t})))).catch((e=>{throw e instanceof Hy&&e.setCorrelationId(t),n.end({success:!1},e),e}))}async acquireTokenSilentDeduped(e,t,n){const o=Sk(this.config.auth.clientId,l(l({},e),{},{authority:e.authority||this.config.auth.authority,correlationId:n}),t.homeAccountId),r=JSON.stringify(o),i=this.activeSilentTokenRequests.get(r);if("undefined"===typeof i){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",n),this.performanceClient.addFields({deduped:!1},n);const o=pk(this.acquireTokenSilentAsync.bind(this),DC,this.logger,this.performanceClient,n)(l(l({},e),{},{correlationId:n}),t);return this.activeSilentTokenRequests.set(r,o),o.finally((()=>{this.activeSilentTokenRequests.delete(r)}))}return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",n),this.performanceClient.addFields({deduped:!0},n),i}async acquireTokenSilentAsync(e,t){const n=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(DC,e.correlationId),this.eventHandler.emitEvent(Kk,Ow.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",n);const o=await pk(fA,VC,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),r=e.cacheLookupPolicy||Qw;return this.acquireTokenSilentNoIframe(o,r).catch((async e=>{const t=function(e,t){const n=!(e instanceof kk&&e.subError!==bk),o=e.errorCode===Jb||e.errorCode===bv,r=n&&o||e.errorCode===vk||e.errorCode===Ck,i=tE.includes(t);return r&&i}(e,r);if(t){if(this.activeIframeRequest){if(r!==eE){const[t,n]=this.activeIframeRequest;this.logger.verbose("Iframe request is already in progress, awaiting resolution for request with correlationId: ".concat(n),o.correlationId);const i=this.performanceClient.startMeasurement(AC,o.correlationId);i.add({awaitIframeCorrelationId:n});const a=await t;if(i.end({success:a}),a)return this.logger.verbose("Parallel iframe request with correlationId: ".concat(n," succeeded. Retrying cache and/or RT redemption"),o.correlationId),this.acquireTokenSilentNoIframe(o,r);throw this.logger.info("Iframe request with correlationId: ".concat(n," failed. Interaction is required.")),e}return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",o.correlationId),pk(this.acquireTokenBySilentIframe.bind(this),UC,this.logger,this.performanceClient,o.correlationId)(o)}{let e;return this.activeIframeRequest=[new Promise((t=>{e=t})),o.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",o.correlationId),pk(this.acquireTokenBySilentIframe.bind(this),UC,this.logger,this.performanceClient,o.correlationId)(o).then((t=>(e(!0),t))).catch((t=>{throw e(!1),t})).finally((()=>{this.activeIframeRequest=void 0}))}}throw e})).then((t=>(this.eventHandler.emitEvent(Gk,Ow.Silent,t),e.correlationId&&this.performanceClient.addFields({fromCache:t.fromCache,isNativeBroker:t.fromNativeBroker},e.correlationId),t))).catch((e=>{throw this.eventHandler.emitEvent(Yk,Ow.Silent,null,e),e})).finally((()=>{document.removeEventListener("visibilitychange",n)}))}async acquireTokenSilentNoIframe(e,t){return CA.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,Mw,e.account.nativeAccountId,t).catch((async e=>{if(e instanceof yA&&vA(e))throw this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,Rv(bv);throw e}))):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),t===Zw&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),pk(this.acquireTokenFromCache.bind(this),jC,this.logger,this.performanceClient,e.correlationId)(e,t).catch((n=>{if(t===Zw)throw n;return this.eventHandler.emitEvent(Qk,Ow.Silent,e),pk(this.acquireTokenByRefreshToken.bind(this),yC,this.logger,this.performanceClient,e.correlationId)(e,t)})))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await pk(zA,Ob,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const t=this.pkceCode?l({},this.pkceCode):void 0;return this.pkceCode=void 0,this.logger.verbose("".concat(t?"Found":"Did not find"," pre-generated PKCE codes")),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}logMultipleInstances(e){const t=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[];window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(t),function(e,t,n){var o;const r=(null===(o=window.msal)||void 0===o?void 0:o.clientIds)||[],i=r.length,a=r.filter((t=>t===e)).length;a>1&&n.warning("There is already an instance of MSAL.js in the window with the same client id."),t.add({msalInstanceCount:i,sameClientIdInstanceCount:a})}(t,e,this.logger)}}class aS{static async createPublicClientApplication(e){const t=await async function(e,t){const n=new tk(e);return await n.initialize(),iS.createController(n,t)}(e);return new aS(e,t)}constructor(e,t){this.isBroker=!1,this.controller=t||new iS(new tk(e))}async initialize(e){return this.controller.initialize(e,this.isBroker)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,t){return this.controller.hydrateCache(e,t)}clearCache(e){return this.controller.clearCache(e)}}const sS={instance:{initialize:()=>Promise.reject(qF(LF)),acquireTokenPopup:()=>Promise.reject(qF(LF)),acquireTokenRedirect:()=>Promise.reject(qF(LF)),acquireTokenSilent:()=>Promise.reject(qF(LF)),acquireTokenByCode:()=>Promise.reject(qF(LF)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(qF(LF)),loginPopup:()=>Promise.reject(qF(LF)),loginRedirect:()=>Promise.reject(qF(LF)),logout:()=>Promise.reject(qF(LF)),logoutRedirect:()=>Promise.reject(qF(LF)),logoutPopup:()=>Promise.reject(qF(LF)),ssoSilent:()=>Promise.reject(qF(LF)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw qF(LF)},getLogger:()=>{throw qF(LF)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw qF(LF)},hydrateCache:()=>Promise.reject(qF(LF)),clearCache:()=>Promise.reject(qF(LF))},inProgress:Ww,accounts:[],logger:new Ny({})},uS=o.createContext(sS);uS.Consumer;class lS{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case Uk:return zw;case Zk:return qw;case Kk:if(e.interactionType===Ow.Redirect||e.interactionType===Ow.Popup)return Hw;break;case nx:return Uw;case ix:return jw;case Xk:case $k:if(t&&t!==qw)break;return Ww;case ux:if(t&&t!==jw)break;return Ww;case ox:if(t&&t!==Uw)break;return Ww;case Wk:case Vk:case Gk:case Yk:case lx:if(e.interactionType===Ow.Redirect||e.interactionType===Ow.Popup){if(t&&t!==zw&&t!==Hw)break;return Ww}}return null}}function cS(e,t){if(e.length!==t.length)return!1;const n=[...t];return e.every((e=>{const t=n.shift();return!(!e||!t)&&(e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username)}))}const dS="3.0.12",hS="UNBLOCK_INPROGRESS",fS="EVENT",pS=(e,t)=>{const{type:n,payload:o}=t;let r=e.inProgress;switch(n){case hS:e.inProgress===Lw&&(r=Ww,o.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case fS:const t=o.message,i=lS.getInteractionStatusFromEvent(t,e.inProgress);i&&(o.logger.info("MsalProvider - ".concat(t.eventType," results in setting inProgress from ").concat(e.inProgress," to ").concat(i)),r=i);break;default:throw new Error("Unknown action type: ".concat(n))}if(r===Lw)return e;const i=o.instance.getAllAccounts();return r===e.inProgress||cS(i,e.accounts)?r!==e.inProgress?l(l({},e),{},{inProgress:r}):cS(i,e.accounts)?e:l(l({},e),{},{accounts:i}):l(l({},e),{},{inProgress:r,accounts:i})};function gS(e){let{instance:t,children:n}=e;(0,o.useEffect)((()=>{t.initializeWrapperLibrary(Kw,dS)}),[t]);const r=(0,o.useMemo)((()=>t.getLogger().clone("@azure/msal-react",dS)),[t]),[i,a]=(0,o.useReducer)(pS,void 0,(()=>({inProgress:Lw,accounts:[]})));(0,o.useEffect)((()=>{const e=t.addEventCallback((e=>{a({payload:{instance:t,logger:r,message:e},type:fS})}));return r.verbose("MsalProvider - Registered event callback with id: ".concat(e)),t.initialize().then((()=>{t.handleRedirectPromise().catch((()=>{})).finally((()=>{a({payload:{instance:t,logger:r},type:hS})}))})).catch((()=>{})),()=>{e&&(r.verbose("MsalProvider - Removing event callback ".concat(e)),t.removeEventCallback(e))}}),[t,r]);const s={instance:t,inProgress:i.inProgress,accounts:i.accounts,logger:r};return o.createElement(uS.Provider,{value:s},n)}const mS=()=>(0,o.useContext)(uS);function yS(e){const{accounts:t,inProgress:n}=mS(),r=(0,o.useMemo)((()=>n!==Lw&&function(e,t){return t&&(t.username||t.homeAccountId||t.localAccountId)?!!function(e,t){return e.length>0&&(t.homeAccountId||t.localAccountId||t.username)&&e.filter((e=>(!t.username||t.username.toLowerCase()===e.username.toLowerCase())&&(!t.homeAccountId||t.homeAccountId.toLowerCase()===e.homeAccountId.toLowerCase())&&(!t.localAccountId||t.localAccountId.toLowerCase()===e.localAccountId.toLowerCase())))[0]||null}(e,t):e.length>0}(t,e)),[t,n,e]);return r}const vS=function(e){let{mitigationsPopupRef:t,mitigationsTab:n,setMitigationsTab:r,setMitigationsOpen:i,roleMembers:a,graphPermissionApps:s,initialData:u,mitigationsMarkdown:c,groupRMAUCache:h,setGroupRMAUCache:f,msalConfigReady:p}=e;const g=mS(),m=g.instance,y=g.accounts,[v,D]=(0,o.useState)({}),[C,b]=(0,o.useState)({}),[w,E]=(0,o.useState)(null);return(0,o.useEffect)((()=>{if(!p||!m||!y[0])return;const e=new Set;Object.values(a).forEach((t=>{t.forEach((t=>{(t.type&&t.type.toLowerCase().includes("group")||!t.type&&t.id&&36===t.id.length)&&t.id&&void 0===v[t.id]&&void 0===h[t.id]&&e.add(t.id)}))})),e.forEach((e=>{(async e=>{if(!p||!m||!y[0])return!1;if(void 0!==v[e])return v[e];b((t=>l(l({},t),{},{[e]:!0})));try{const t=(await m.acquireTokenSilent({account:y[0]})).accessToken,n=await fetch("https://graph.microsoft.com/beta/groups/".concat(e,"?$select=isManagementRestricted,displayName"),{headers:{Authorization:"Bearer ".concat(t)}});if(!n.ok)throw new Error;const o=await n.json();return D((t=>l(l({},t),{},{[e]:!!o.isManagementRestricted}))),f((t=>l(l({},t),{},{[e]:!!o.isManagementRestricted}))),b((t=>l(l({},t),{},{[e]:!1}))),!!o.isManagementRestricted}catch(t){return D((t=>l(l({},t),{},{[e]:!1}))),b((t=>l(l({},t),{},{[e]:!1}))),!1}})(e)}))}),[a,p,m,y]),(0,d.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 overflow-y-auto backdrop-blur-sm",children:[w&&(0,d.jsx)("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-40 backdrop-blur-sm transition-all duration-200 pointer-events-none"}),(0,d.jsxs)("div",{ref:t,className:"bg-gray-900 rounded-lg shadow-lg max-w-5xl w-full p-6 relative my-8 border border-white",style:{maxHeight:"90vh",overflowY:"auto"},children:[(0,d.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl",onClick:()=>i(!1),"aria-label":"Close",type:"button",children:"\xd7"}),(0,d.jsxs)("div",{className:"flex mb-6 border-b border-gray-700",children:[(0,d.jsx)("button",{className:"px-4 py-2 font-semibold text-sm rounded-t ".concat(0===n?"bg-gray-800 text-white border-b-2 border-blue-400":"text-gray-400"),onClick:()=>r(0),type:"button",children:"Overview"}),(0,d.jsx)("button",{className:"ml-2 px-4 py-2 font-semibold text-sm rounded-t ".concat(1===n?"bg-gray-800 text-white border-b-2 border-blue-400":"text-gray-400"),onClick:()=>r(1),type:"button",children:"Mitigations"})]}),0===n?0===Object.keys(a).length&&0===Object.keys(s).length?(0,d.jsxs)("div",{className:"text-center text-gray-300 py-12",children:[(0,d.jsx)("div",{className:"text-lg font-semibold mb-2",children:"Assessment not run yet"}),(0,d.jsx)("div",{className:"mb-2",children:"Please sign in and run the assessment first to view scan results of your Entra roles and Graph API permissions."}),(0,d.jsx)("div",{className:"text-xs text-gray-500",children:'Click the Sign in button and then "Start assessment" from the menu.'})]}):(0,d.jsxs)("div",{className:"overflow-y-auto max-h-[65vh]",children:[(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsx)("h3",{className:"text-lg font-bold mb-2 text-blue-200",children:"Entra Roles"}),(0,d.jsx)("div",{className:"space-y-8",children:Object.entries(a).filter((e=>{let[t,n]=e;return Array.isArray(n)&&n.length>0})).map((e=>{let[t,n]=e;const o=u.nodes.find((e=>e.id===t));if(!o)return null;const r=new Set,i=[];for(const a of n){let e=!1;if(a.odataType)"#microsoft.graph.user"===a.odataType&&(e=!0);else if(a.type){(a.type.toLowerCase().includes("user")||/pim (active|eligible)\s*\(user\)/i.test(a.type))&&(e=!0)}else a.userPrincipalName&&(e=!0);if(e){if(r.has(a.id))continue;r.add(a.id)}i.push(a)}return(0,d.jsxs)("div",{className:"rounded px-3",children:[(0,d.jsx)("div",{className:"font-semibold text-white mb-2",children:o.data.label.replace(/\s*\(\d+\)$/,"")}),(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-700 rounded-lg overflow-hidden border border-solid border-gray-800",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{className:"bg-gray-300",children:[(0,d.jsx)("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-800 uppercase",children:"Display Name"}),(0,d.jsx)("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-800 uppercase",children:"Type"}),(0,d.jsx)("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-800 uppercase",children:"RMAU"})]})}),(0,d.jsx)("tbody",{className:"divide-y divide-gray-700 bg-gray-800",children:i.map((e=>{let t=!1,n=!1;if(e.odataType)"#microsoft.graph.group"===e.odataType?t=!0:"#microsoft.graph.user"===e.odataType&&(n=!0);else if(e.type){const o=e.type.toLowerCase();o.includes("group")?t=!0:o.includes("user")?n=!0:/pim (active|eligible)\s*\(group\)/i.test(e.type)?t=!0:/pim (active|eligible)\s*\(user\)/i.test(e.type)&&(n=!0)}else e.id&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e.id)&&!e.userPrincipalName?t=!0:e.userPrincipalName?n=!0:e.displayName&&/group$/i.test(e.displayName)&&(t=!0);let o=e.type?e.type.replace("microsoft.graph.",""):e.odataType?e.odataType.replace("#microsoft.graph.",""):"",r=null;r=t?(0,d.jsx)("span",{className:"ml-2 inline-block px-2 py-1 rounded bg-blue-900 text-blue-200 font-semibold text-xs",children:"Group"}):n?(0,d.jsx)("span",{className:"ml-2 inline-block px-2 py-1 rounded bg-blue-500 text-blue-200 font-semibold text-xs",children:"User"}):null;const i=n?e.userPrincipalName||e.displayName||e.mail||"":e.displayName;return(0,d.jsxs)("tr",{className:"hover:bg-gray-700/60 transition",children:[(0,d.jsx)("td",{className:"px-3 py-2 font-mono text-blue-200 text-sm",children:i}),(0,d.jsxs)("td",{className:"px-3 py-2 text-xs text-gray-500",children:[o,r]}),(0,d.jsx)("td",{className:"px-3 py-2 text-xs",children:t&&e.id?(0,d.jsxs)("span",{className:"relative group cursor-pointer",onMouseEnter:()=>E(e.id),onMouseLeave:()=>E(null),tabIndex:0,onFocus:()=>E(e.id),onBlur:()=>E(null),children:[C[e.id]?(0,d.jsx)("span",{className:"text-gray-400",children:"Checking..."}):(0,d.jsx)("span",{className:!0===h[e.id]||!0===v[e.id]?"text-green-400 font-semibold":"text-red-400 font-semibold",children:!0===h[e.id]||!0===v[e.id]?"RMAU":"Not RMAU"}),w===e.id&&(0,d.jsxs)("span",{className:"absolute left-1/2 z-50 -translate-x-1/2 mt-2 w-80 px-3 py-2 rounded bg-gray-800 text-white text-xs shadow-lg opacity-100 pointer-events-auto border border-gray-700 transition-all duration-200",children:[(0,d.jsx)("b",{children:"RMAU"})," = Restricted Management Administrative Unit.",(0,d.jsx)("br",{}),"Groups marked as RMAU are protected from privileged role assignments by non-authorized admins.",(0,d.jsx)("br",{}),(0,d.jsx)("span",{className:"text-blue-200",children:"Why important?"})," Only RMAU groups can be used to securely delegate privileged roles (like Global Admin) to reduce the risk of privilege escalation by attackers or misconfigured admins."]})]}):(0,d.jsx)("span",{className:"text-gray-500",children:"/"})})]},e.id)}))})]})})]},t)}))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-bold mb-2 text-blue-200",children:"Graph API Permissions"}),(0,d.jsx)("ul",{className:"space-y-3",children:Object.entries(s).filter((e=>{let[t,n]=e;return Array.isArray(n)&&n.length>0})).map((e=>{let[t,n]=e;const o=u.nodes.find((e=>e.id===t));return o?(0,d.jsxs)("li",{className:"bg-gray-800 rounded p-3",children:[(0,d.jsx)("div",{className:"font-semibold text-white",children:o.data.label.replace(/\s*\(\d+\)$/,"")}),(0,d.jsx)("ul",{className:"ml-4 mt-1 text-sm text-gray-200",children:n.map((e=>(0,d.jsxs)("li",{className:"mb-1",children:[(0,d.jsx)("span",{className:"font-mono",children:e.displayName}),(0,d.jsxs)("span",{className:"ml-2 text-xs text-gray-400",children:["App ID: ",e.appId]})]},e.id)))})]},t):null}))})]})]}):(0,d.jsx)("div",{className:"prose prose-invert prose-a:text-white prose-headings:text-white max-w-none mb-4 text-white",children:(0,d.jsx)(Dh,{remarkPlugins:[Cg],children:c})})]})]})};const DS=function(e){let{onSave:t,defaultClientId:n,defaultTenantId:r}=e;const[i,a]=(0,o.useState)(n),[s,u]=(0,o.useState)(r),[l,c]=(0,o.useState)("");return(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 backdrop-blur-sm",children:(0,d.jsxs)("div",{className:"bg-gray-900 border border-white rounded-lg shadow-lg max-w-xl w-full p-8 relative",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold mb-4 text-center text-white",children:"Login"}),(0,d.jsxs)("p",{className:"text-gray-300 mb-4 text-sm",children:["To use this tool, you need to provide your own ",(0,d.jsx)("b",{children:"Client ID"})," and ",(0,d.jsx)("b",{children:"Tenant ID"})," from an App Registration in your Microsoft Entra tenant."]}),(0,d.jsxs)("div",{className:"bg-gray-800 rounded p-4 mb-4 text-xs text-gray-200",children:[(0,d.jsx)("b",{children:"How to create an App Registration:"}),(0,d.jsxs)("ol",{className:"list-decimal ml-5 mt-2 space-y-1",children:[(0,d.jsxs)("li",{children:["Go to ",(0,d.jsx)("a",{href:"https://portal.azure.com/#view/Microsoft_AAD_RegisteredApps/ApplicationsListBlade",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 underline",children:"Azure Portal > Entra ID > App registrations"}),"."]}),(0,d.jsxs)("li",{children:["Click ",(0,d.jsx)("b",{children:"New registration"}),"."]}),(0,d.jsxs)("li",{children:["Give it a name, select ",(0,d.jsx)("b",{children:"Accounts in this organizational directory only (Single-tenant)"}),"."]}),(0,d.jsxs)("li",{children:["Set ",(0,d.jsx)("b",{children:"Redirect URI"})," to ",(0,d.jsx)("code",{children:window.location.origin})," (type: Single-page application)."]}),(0,d.jsxs)("li",{children:["After creation, copy the ",(0,d.jsx)("b",{children:"Application (client) ID"})," and ",(0,d.jsx)("b",{children:"Directory (tenant) ID"}),"."]})]})]}),(0,d.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i&&s?(c(""),t(i.trim(),s.trim())):c("Both Client ID and Tenant ID are required.")},className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-gray-200 mb-1 font-mono text-xs",children:"Client ID"}),(0,d.jsx)("input",{type:"text",value:i,onChange:e=>a(e.target.value),className:"w-full p-2 rounded bg-gray-800 border border-gray-600 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",autoFocus:!0})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-gray-200 mb-1 font-mono text-xs",children:"Tenant ID"}),(0,d.jsx)("input",{type:"text",value:s,onChange:e=>u(e.target.value),className:"w-full p-2 rounded bg-gray-800 border border-gray-600 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"})]}),l&&(0,d.jsx)("div",{className:"text-red-400 text-xs",children:l}),(0,d.jsxs)("p",{className:"mt-3 text-xs text-gray-400",children:["Make sure your Entra account has the following permissions: ",(0,d.jsx)("span",{className:"italic font-bold",children:"Directory.Read.All"})," and ",(0,d.jsx)("span",{className:"italic font-bold",children:"RoleManagement.Read.Directory"}),"."]}),(0,d.jsx)("button",{type:"submit",className:"w-full mt-2 py-2 rounded bg-blue-600 text-white font-semibold hover:bg-blue-700 transition",children:"Save & Continue"})]}),(0,d.jsx)("div",{className:"mt-6 text-xs text-gray-400 text-center",children:"Your Client ID, Tenant ID and scan results are only stored in your browser and never sent anywhere else."})]})})};function CS(e){let{onShowConfigModal:t,pendingLogin:n,setPendingLogin:r,msalConfigReady:i,setConfig:a}=e;const[s,u]=(0,o.useState)(!1),[c,h]=(0,o.useState)(""),f=(0,o.useRef)(null),[p,g]=(0,o.useState)(!1),[m,y]=(0,o.useState)(""),v=(0,o.useRef)(null),[D,C]=(0,o.useState)(0),[b,w]=(0,o.useState)({}),[E,F]=(0,o.useState)({}),[k,x]=(0,o.useState)(bm),[A,S]=(0,o.useState)({}),[I,P]=(0,o.useState)({}),[_,T]=(0,o.useState)(!1),{showToast:N,closeToast:M,updateToastProgressRoles:R,updateToastProgressGraph:B}=hm(),[O,L]=(0,o.useState)({}),z={};bm.nodes.forEach((e=>{if(e.data&&e.data.isEntraRole){const t=e.data.label.replace(/^\ud83d\udc51\s*/,"").trim();z[t.toLowerCase()]=e.id}}));const j={};function H(){var e,s;const{instance:u,accounts:c}=mS(),h=yS(),[f,p]=(0,o.useState)(!1),[g,m]=(0,o.useState)(""),[y,v]=(0,o.useState)(!1);(0,o.useEffect)((()=>{n&&u&&D()}),[n,u]);const D=()=>{p(!0),u.loginPopup({scopes:["Directory.Read.All","RoleManagement.Read.Directory"]}).finally((()=>p(!1)))};return i?h?(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsxs)("button",{className:"flex items-center gap-2 p-2 rounded-full border border-blue-300 bg-white hover:bg-gray-100 shadow transition",onClick:()=>v((e=>!e)),"aria-label":"Account menu",type:"button",children:[(0,d.jsxs)("svg",{className:"h-6 w-6 text-blue-700",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{cx:"12",cy:"8",r:"4"}),(0,d.jsx)("path",{d:"M4 20c0-2.21 3.58-4 8-4s8 1.79 8 4"})]}),(0,d.jsx)("span",{className:"font-medium text-blue-700 text-xs",children:null===(e=c[0])||void 0===e?void 0:e.username}),(0,d.jsx)("svg",{className:"h-4 w-4 text-blue-700 ml-1",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),y&&(0,d.jsxs)("div",{className:"absolute right-0 mt-2 w-72 bg-white border border-gray-200 rounded shadow-lg z-50",children:[(0,d.jsx)("div",{className:"px-4 py-2 text-xs text-gray-700 border-b",children:null===(s=c[0])||void 0===s?void 0:s.username}),(0,d.jsxs)("button",{className:"flex items-center w-full px-4 py-2 text-blue-700 hover:bg-blue-50 transition text-sm",onClick:()=>{v(!1),(async()=>{p(!0),m(""),N("Assessment started...","info");try{const t=c[0],n=(await u.acquireTokenSilent({account:t})).accessToken;N("Assessing Entra roles & Graph API permissions...","info",null,null);const o=(async()=>{const e=await fetch("https://graph.microsoft.com/v1.0/directoryRoles",{headers:{Authorization:"Bearer ".concat(n)}});if(!e.ok)throw new Error("Failed to fetch directory roles");const t={},o={},r=(await e.json()).value;let i=0;const a=r.length;for(const l of r){var s;const e=z[null===(s=l.displayName)||void 0===s?void 0:s.toLowerCase()];if(!e){i++,R(i,a);continue}const r=await fetch("https://graph.microsoft.com/v1.0/directoryRoles/".concat(l.id,"/members"),{headers:{Authorization:"Bearer ".concat(n),ConsistencyLevel:"eventual"}});let c={value:[]};r.ok&&(c=await r.json());let d=[],h=[];try{const e=await fetch("https://graph.microsoft.com/beta/roleManagement/directory/roleAssignments?$filter=roleDefinitionId eq '".concat(l.id,"'"),{headers:{Authorization:"Bearer ".concat(n)}});if(e.ok){const t=await e.json();d=await Promise.all((t.value||[]).map((async e=>{let t=e.principalDisplayName,o=e.principalUserPrincipalName,r=e.principalEmail,i=null;if(!t&&e.principalId)try{const a=await fetch("https://graph.microsoft.com/v1.0/directoryObjects/".concat(e.principalId),{headers:{Authorization:"Bearer ".concat(n)}});if(a.ok){const n=await a.json();t=n.displayName||n.userPrincipalName||n.mail||e.principalId,o=n.userPrincipalName||"",r=n.mail||"",i=n["@odata.type"]||null}}catch(a){}return!i&&e.principalType&&(e.principalType.toLowerCase().includes("group")?i="#microsoft.graph.group":e.principalType.toLowerCase().includes("user")&&(i="#microsoft.graph.user")),{id:e.principalId,displayName:t||e.principalId,userPrincipalName:o,mail:r,type:e.principalType?"PIM Active (".concat(e.principalType,")"):"PIM Active",odataType:i}})))}const t=await fetch("https://graph.microsoft.com/beta/roleManagement/directory/roleEligibilitySchedules?$filter=roleDefinitionId eq '".concat(l.id,"'"),{headers:{Authorization:"Bearer ".concat(n)}});t.ok&&(h=((await t.json()).value||[]).map((e=>({id:e.principalId,displayName:e.principalDisplayName||e.principalId,userPrincipalName:e.principalUserPrincipalName,mail:e.principalEmail,type:e.principalType?"PIM Eligible (".concat(e.principalType,")"):"PIM Eligible",odataType:e.principalType?e.principalType.toLowerCase().includes("group")?"#microsoft.graph.group":e.principalType.toLowerCase().includes("user")?"#microsoft.graph.user":null:null}))))}catch(u){}const f=[...(c.value||[]).map((e=>({id:e.id,displayName:e.displayName||e.userPrincipalName||e.mail||"(unknown)",userPrincipalName:e.userPrincipalName,mail:e.mail,type:e["@odata.type"]?e["@odata.type"].replace("#microsoft.graph.",""):"",odataType:e["@odata.type"]||null}))),...d,...h];t[e]=f.length,o[e]=f,i++,R(i,a)}return{counts:t,membersMap:o}})(),r=(async()=>{let e=[],t="https://graph.microsoft.com/v1.0/servicePrincipals?$select=id,displayName,appId,appRoles,oauth2PermissionScopes,requiredResourceAccess";for(;t;){const o=await fetch(t,{headers:{Authorization:"Bearer ".concat(n)}});if(!o.ok)throw new Error("Failed to fetch service principals");const r=await o.json();e=e.concat(r.value||[]),t=r["@odata.nextLink"],B(e.length,0)}const o={},r={},i={};bm.nodes.forEach((e=>{if(e.data&&e.data.isGraphPermission){const t=e.data.label.replace(/\s*\(\d+\)$/,"").trim();i[t]=e.id}}));const a={"Policy.ReadWrite.ConditionalAccess":"Policy.ReadWrite.ConditionalAccess","User.DeleteRestore.All":"User.DeleteRestore.All","User.EnableDisableAccount.All":"User.EnableDisableAccount.All","PrivilegedAccess.ReadWrite.AzureADGroup":"PrivilegedAccess.ReadWrite.AzureADGroup","PrivilegedAssignmentSchedule.ReadWrite.AzureADGroup":"PrivilegedAssignmentSchedule.ReadWrite.AzureADGroup","RoleAssignmentSchedule.ReadWrite.Directory":"RoleAssignmentSchedule.ReadWrite.Directory","RoleManagement.ReadWrite.Directory":"RoleManagement.ReadWrite.Directory","UserAuthenticationMethod.ReadWrite.All":"UserAuthenticationMethod.ReadWrite.All","Other Graph API permission":null};let s=0;const u=e.length;for(const n of e){let e=!1;const t=n.requiredResourceAccess||[];for(const s of t)if("00000003-0000-0000-c000-000000000000"===s.resourceAppId){for(const[t,u]of Object.entries(a))if(u&&s.resourceAccess&&s.resourceAccess.some((e=>e.value===u))){const a=i[t];if(!a)continue;o[a]||(o[a]=0),r[a]||(r[a]=[]),o[a]++,r[a].push({id:n.id,displayName:n.displayName,appId:n.appId}),e=!0}if(s.resourceAccess&&s.resourceAccess.some((e=>!Object.values(a).includes(e.value)))){const t=i["Other Graph API permission"];t&&(o[t]||(o[t]=0),r[t]||(r[t]=[]),o[t]++,r[t].push({id:n.id,displayName:n.displayName,appId:n.appId}),e=!0)}}for(const[s,u]of Object.entries(a))if(u){if(Array.isArray(n.appRoles)&&n.appRoles.some((e=>e.value===u))){const t=i[s];t&&(o[t]||(o[t]=0),r[t]||(r[t]=[]),o[t]++,r[t].push({id:n.id,displayName:n.displayName,appId:n.appId}),e=!0)}if(Array.isArray(n.oauth2PermissionScopes)&&n.oauth2PermissionScopes.some((e=>e.value===u))){const t=i[s];t&&(o[t]||(o[t]=0),r[t]||(r[t]=[]),o[t]++,r[t].push({id:n.id,displayName:n.displayName,appId:n.appId}),e=!0)}}if(!e&&(Array.isArray(n.appRoles)&&n.appRoles.length>0||Array.isArray(n.oauth2PermissionScopes)&&n.oauth2PermissionScopes.length>0)){const e=i["Other Graph API permission"];e&&(o[e]||(o[e]=0),r[e]||(r[e]=[]),o[e]++,r[e].push({id:n.id,displayName:n.displayName,appId:n.appId}))}s++,B(s,u)}return Object.keys(r).forEach((e=>{const t=new Set;r[e]=r[e].filter((e=>!t.has(e.id)&&(t.add(e.id),!0)))})),console.log("Graph API permission assessment results:",{graphCounts:o,graphApps:r}),{graphCounts:o,graphApps:r}})(),[{counts:i,membersMap:a},{graphCounts:s,graphApps:d}]=await Promise.all([o,r]);w(i),F(a),S(s),P(d);const h=bm.nodes.filter((e=>{if(e.data&&e.data.isEntraRole){const t=e.data.label.replace(/^\ud83d\udc51\s*/,"").trim(),n=z[t.toLowerCase()],o=i[n];return"number"===typeof o&&o>0}if(e.data&&e.data.isGraphPermission){const t=e.data.label.replace(/\s*\(\d+\)$/,"").trim(),n=j[t.toLowerCase()];let o=0;if(Array.isArray(d[n])){const e=new Set;d[n].forEach((t=>e.add(t.id))),o=e.size}else"number"===typeof s[n]&&(o=s[n]);if("number"===typeof o){let t=e.data.label.replace(/\s*\(\d+\)$/,"");return l(l({},e),{},{data:l(l({},e.data),{},{label:"".concat(t," (").concat(o,")")})})}}return!0})).map((e=>{if(e.data&&e.data.isEntraRole){const t=e.data.label.replace(/^\ud83d\udc51\s*/,"").trim(),n=z[t.toLowerCase()],o=i[n];if("number"===typeof o){let t=e.data.label.replace(/\s*\(\d+\)$/,"");return l(l({},e),{},{data:l(l({},e.data),{},{label:"".concat(t," (").concat(o,")")})})}}if(e.data&&e.data.isGraphPermission){const t=e.data.label.replace(/\s*\(\d+\)$/,"").trim(),n=j[t.toLowerCase()];let o=0;if(Array.isArray(d[n])){const e=new Set;d[n].forEach((t=>e.add(t.id))),o=e.size}else"number"===typeof s[n]&&(o=s[n]);if("number"===typeof o){let t=e.data.label.replace(/\s*\(\d+\)$/,"");return l(l({},e),{},{data:l(l({},e.data),{},{label:"".concat(t," (").concat(o,")")})})}}return e})),f=new Set(h.map((e=>e.id))),p=bm.edges.filter((e=>f.has(e.source)&&f.has(e.target))),g=l(l({},bm),{},{nodes:h,edges:p});x(g),T(!0),N("Assessment finished!","success",null,null),setTimeout(M,3500);try{localStorage.setItem("entra-assessment-results",JSON.stringify({data:g,roleCounts:i,roleMembers:a,graphPermissionCounts:s,graphPermissionApps:d}))}catch(e){}}catch(t){m(t.message||"Error fetching role counts"),N("Assessment failed: "+(t.message||"Unknown error"),"error",null,null),setTimeout(M,5e3)}p(!1)})()},"aria-label":"Run assessment",type:"button",disabled:f,children:[(0,d.jsx)("svg",{className:"h-5 w-5 mr-2 text-blue-700",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("polygon",{points:"5,3 19,10 5,17"})}),f?"Loading...":"Start assessment"]}),f&&(0,d.jsx)("div",{className:"px-4 py-2 text-blue-700 text-xs animate-pulse",children:"Loading role counts..."}),(0,d.jsxs)("button",{className:"flex items-center w-full px-4 py-2 text-yellow-700 hover:bg-yellow-50 transition text-sm",onClick:()=>{v(!1),"function"===typeof a&&a(null),localStorage.removeItem("entra-msal-config"),localStorage.removeItem("entra-assessment-results"),window.location.reload()},"aria-label":"Clear Tenant/Client ID",type:"button",children:[(0,d.jsx)("svg",{className:"h-5 w-5 mr-2 text-yellow-700",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6M1 7h22M10 3h4a1 1 0 011 1v2H9V4a1 1 0 011-1z"})}),"Clear Tenant/Client ID"]}),(0,d.jsxs)("button",{className:"flex items-center w-full px-4 py-2 text-red-700 hover:bg-red-50 transition text-sm",onClick:()=>{v(!1),u.logoutPopup()},"aria-label":"Logout",type:"button",children:[(0,d.jsx)("svg",{className:"h-5 w-5 mr-2 text-red-700",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a2 2 0 01-2 2H7a2 2 0 01-2-2V7a2 2 0 012-2h4a2 2 0 012 2v1"})}),"Logout"]}),g&&(0,d.jsx)("div",{className:"px-4 py-2 text-xs text-red-700",children:g})]})]}):(0,d.jsxs)("div",{className:"relative group",children:[(0,d.jsxs)("button",{className:"p-2 rounded-full border border-blue-300 bg-white hover:bg-gray-100 shadow flex items-center transition",onClick:D,"aria-label":"Sign in with Microsoft",type:"button",children:[(0,d.jsxs)("svg",{className:"h-6 w-6 text-blue-700 mr-2",viewBox:"0 0 24 24",children:[(0,d.jsx)("rect",{fill:"#F35325",x:"2",y:"2",width:"9",height:"9"}),(0,d.jsx)("rect",{fill:"#81BC06",x:"13",y:"2",width:"9",height:"9"}),(0,d.jsx)("rect",{fill:"#05A6F0",x:"2",y:"13",width:"9",height:"9"}),(0,d.jsx)("rect",{fill:"#FFBA08",x:"13",y:"13",width:"9",height:"9"})]}),(0,d.jsx)("span",{className:"font-medium text-blue-700",children:f?"Signing in...":"Sign in"})]}),y&&(0,d.jsx)("div",{className:"absolute right-0 mt-2 w-72 bg-white border border-gray-200 rounded shadow-lg z-50",children:(0,d.jsxs)("button",{className:"flex items-center w-full px-4 py-2 text-yellow-700 hover:bg-yellow-50 transition text-sm",onClick:()=>{v(!1),"function"===typeof a&&a(null),localStorage.removeItem("entra-msal-config"),localStorage.removeItem("entra-assessment-results"),window.location.reload()},"aria-label":"Clear Tenant/Client ID",type:"button",children:[(0,d.jsx)("svg",{className:"h-5 w-5 mr-2 text-yellow-700",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6M1 7h22M10 3h4a1 1 0 011 1v2H9V4a1 1 0 011-1z"})}),"Clear Tenant/Client ID"]})})]}):(0,d.jsxs)("div",{className:"relative group",children:[(0,d.jsxs)("button",{className:"p-2 rounded-full bg-white hover:bg-gray-100 shadow flex items-center transition",onClick:()=>v((e=>!e)),"aria-label":"Sign in with Microsoft",type:"button",children:[(0,d.jsxs)("svg",{className:"h-6 w-6 text-blue-700 mr-2",viewBox:"0 0 24 24",children:[(0,d.jsx)("rect",{fill:"#F35325",x:"2",y:"2",width:"9",height:"9"}),(0,d.jsx)("rect",{fill:"#81BC06",x:"13",y:"2",width:"9",height:"9"}),(0,d.jsx)("rect",{fill:"#05A6F0",x:"2",y:"13",width:"9",height:"9"}),(0,d.jsx)("rect",{fill:"#FFBA08",x:"13",y:"13",width:"9",height:"9"})]}),(0,d.jsx)("span",{className:"font-medium text-blue-700 text-xs",children:"Sign in"}),(0,d.jsx)("svg",{className:"h-4 w-4 text-blue-700 ml-1",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),(0,d.jsxs)("div",{className:"absolute left-1/2 z-50 -translate-x-1/2 mt-2 w-72 px-3 py-2 rounded bg-gray-800 text-white text-xs shadow-lg opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 pointer-events-none transition-opacity duration-150",style:{top:"110%"},children:["Click to sign in with your Microsoft Entra account or download this website to host locally. ",(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("span",{className:"text-blue-200 font-medium",children:"Why?"})," You can run an escalation path assessment on a tenant. ",(0,d.jsx)("br",{}),(0,d.jsx)("br",{})," This tool never sends your credentials or data anywhere except Microsoft. Your configuration is only stored in your browser."]}),y&&(0,d.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-white border border-gray-200 rounded shadow-lg z-50",children:[(0,d.jsxs)("button",{className:"flex items-center w-full px-4 py-2 text-blue-700 hover:bg-blue-50 transition text-sm",onClick:()=>{v(!1),r(!0),t()},"aria-label":"Sign in in this browser",type:"button",children:[(0,d.jsx)("svg",{className:"h-5 w-5 mr-2 text-blue-700",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("polygon",{points:"5,3 19,10 5,17"})}),"Sign-in in this browser"]}),(0,d.jsxs)("button",{className:"flex items-center w-full px-4 py-2 text-green-700 hover:bg-green-50 transition text-sm",onClick:()=>{v(!1),G(!0),localStorage.removeItem("entra-msal-config")},"aria-label":"Host this website locally",type:"button",children:[(0,d.jsx)("svg",{className:"h-5 w-5 mr-2 text-green-700",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0h6"})}),"Host this website locally"]})]})]})}bm.nodes.forEach((e=>{if(e.data&&e.data.isGraphPermission){const t=e.data.label.replace(/\s*\(\d+\)$/,"").trim();j[t.toLowerCase()]=e.id}})),(0,o.useEffect)((()=>{s&&fetch("".concat("/attack-paths-preview","/help.md")).then((e=>e.text())).then(h).catch((()=>h("Help information not available.")))}),[s]),(0,o.useEffect)((()=>{p&&fetch("".concat("/attack-paths-preview","/mitigations.md")).then((e=>e.text())).then(y).catch((()=>y("Mitigations information not available.")))}),[p]),(0,o.useEffect)((()=>{function e(e){s&&f.current&&!f.current.contains(e.target)&&u(!1),p&&v.current&&!v.current.contains(e.target)&&g(!1)}return(s||p)&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[s,p]),(0,o.useEffect)((()=>{try{const e=localStorage.getItem("entra-assessment-results");if(e){const t=JSON.parse(e);t&&t.data&&t.roleCounts&&t.roleMembers&&t.graphPermissionCounts&&t.graphPermissionApps&&(x(t.data),w(t.roleCounts),F(t.roleMembers),S(t.graphPermissionCounts),P(t.graphPermissionApps),T(!0),N("Loaded cached assessment results.","info",null,null),setTimeout(M,2500))}}catch(e){}}),[]);const[q,U]=(0,o.useState)({open:!1,nodeId:null,apps:[]}),W=(0,o.useRef)(null),V=e=>{I[e]&&U({open:!0,nodeId:e,apps:I[e]||[]})};(0,o.useEffect)((()=>{function e(e){q.open&&W.current&&!W.current.contains(e.target)&&U((e=>l(l({},e),{},{open:!1})))}return q.open&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[q.open]);const[K,G]=(0,o.useState)(!1),[Y,Q]=(0,o.useState)(!1),Z=(0,o.useRef)(null);return(0,o.useEffect)((()=>{function e(e){K&&Z.current&&!Z.current.contains(e.target)&&G(!1)}return K&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[K]),(0,d.jsxs)("div",{className:"min-h-screen bg-gray-900 relative",children:[(0,d.jsxs)("div",{className:"fixed top-5 left-1/2 z-40 flex flex-col items-center px-8 py-3 rounded-2xl border border-white/20 shadow-lg backdrop-blur-md bg-white/20",style:{transform:"translateX(-50%)"},children:[(0,d.jsxs)("div",{className:"hidden sm:flex items-center w-full",children:[(0,d.jsxs)("div",{className:"flex flex-col items-start me-5",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-100 whitespace-nowrap select-none",children:"Entra ID Attack Paths"}),(0,d.jsxs)("span",{className:"text-sm text-gray-400 text-center w-full self-center mt-1",children:["made by"," ",(0,d.jsx)("b",{style:{background:"linear-gradient(90deg, #e92a67 0%, #2a8af6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textFillColor:"transparent"},children:(0,d.jsx)("a",{href:"https://linkedin.com/in/jasper-baes",target:"_blank",rel:"noopener noreferrer",children:"Jasper Baes"})})]})]}),(0,d.jsxs)("div",{className:"flex items-center ml-10",children:[(0,d.jsx)(H,{}),(0,d.jsx)("button",{className:"ml-2 p-2 rounded-full bg-white/80 hover:bg-gray-100 shadow",onClick:()=>g(!0),"aria-label":"Mitigations",type:"button",children:(0,d.jsxs)("svg",{className:"h-6 w-6 text-green-700",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5l7 3v5.5c0 5.25-7 8-7 8s-7-2.75-7-8V7.5l7-3z"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4"})]})}),(0,d.jsx)("button",{className:"ml-2 p-2 rounded-full bg-white/80 hover:bg-gray-100 shadow",onClick:()=>u(!0),"aria-label":"Help",type:"button",children:(0,d.jsxs)("svg",{className:"h-6 w-6 text-gray-700",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 10a4 4 0 118 0c0 2-2 3-2 3m-2 4h.01M12 18h.01"}),(0,d.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"})]})})]})]}),(0,d.jsxs)("div",{className:"flex flex-col items-center w-full sm:hidden",children:[(0,d.jsx)("h1",{className:"text-xl font-bold text-gray-100 whitespace-nowrap select-none text-center",children:"Entra ID Attack Paths"}),(0,d.jsxs)("span",{className:"text-sm text-gray-400 text-center mt-1 mb-2",children:["made by"," ",(0,d.jsx)("b",{style:{background:"linear-gradient(90deg, #e92a67 0%, #2a8af6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textFillColor:"transparent"},children:(0,d.jsx)("a",{href:"https://linkedin.com/in/jasper-baes",target:"_blank",rel:"noopener noreferrer",children:"Jasper Baes"})})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,d.jsx)(H,{}),(0,d.jsx)("button",{className:"p-2 rounded-full bg-white hover:bg-gray-100 shadow",onClick:()=>g(!0),"aria-label":"Mitigations",type:"button",children:(0,d.jsxs)("svg",{className:"h-6 w-6 text-green-700",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5l7 3v5.5c0 5.25-7 8-7 8s-7-2.75-7-8V7.5l7-3z"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4"})]})}),(0,d.jsx)("button",{className:"p-2 rounded-full bg-white hover:bg-gray-100 shadow",onClick:()=>u(!0),"aria-label":"Help",type:"button",children:(0,d.jsxs)("svg",{className:"h-6 w-6 text-gray-700",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:[(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 10a4 4 0 118 0c0 2-2 3-2 3m-2 4h.01M12 18h.01"}),(0,d.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"})]})})]})]})]}),(0,d.jsx)("div",{className:"fixed inset-0 z-0",children:(0,d.jsx)(Cm,{data:k,roleMembers:E,onGraphPermissionNodeClick:V,graphPermissionApps:I})}),s&&(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 overflow-y-auto backdrop-blur-sm",children:(0,d.jsxs)("div",{ref:f,className:"bg-gray-900 rounded-lg shadow-lg max-w-4xl w-full p-6 relative my-8 border border-white",style:{maxHeight:"90vh",overflowY:"auto"},children:[(0,d.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl",onClick:()=>u(!1),"aria-label":"Close",type:"button",children:"\xd7"}),(0,d.jsxs)("div",{className:"prose prose-invert prose-a:text-white prose-headings:text-white max-w-none mb-4 text-white leading-4",children:[(0,d.jsx)("style",{jsx:!0,children:" \n                .prose em {\n                  color: #6a7282;\n                }\n                .prose em > a {\n                  color: #6a7282;\n                }\n                h2:first-of-type {\n                  margin-top: 0px !important;\n                }\n              "}),(0,d.jsx)(Dh,{remarkPlugins:[Cg],children:c})]}),(0,d.jsxs)("div",{className:"flex gap-3 mt-8",children:[(0,d.jsxs)("a",{href:"https://www.linkedin.com/in/jasper-baes/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:[(0,d.jsx)("svg",{className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.761 0 5-2.239 5-5v-14c0-2.761-2.239-5-5-5zm-11 19h-3v-10h3v10zm-1.5-11.268c-.966 0-1.75-.784-1.75-1.75s.784-1.75 1.75-1.75 1.75.784 1.75 1.75-.784 1.75-1.75 1.75zm15.5 11.268h-3v-5.604c0-1.337-.026-3.063-1.867-3.063-1.868 0-2.154 1.459-2.154 2.967v5.7h-3v-10h2.881v1.367h.041c.401-.761 1.381-1.563 2.841-1.563 3.039 0 3.6 2.001 3.6 4.601v5.595z"})}),"Follow me on LinkedIn"]}),(0,d.jsxs)("a",{href:"https://jbaes.be/posts",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-2 rounded bg-gray-800 text-white hover:bg-gray-900",children:[(0,d.jsxs)("svg",{className:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2 12h20M12 2a15.3 15.3 0 010 20M12 2a15.3 15.3 0 000 20"})]}),"Visit my blog"]}),(0,d.jsxs)("a",{href:"https://buymeacoffee.com/jasperbaes",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-2 rounded bg-yellow-400 text-gray-900 hover:bg-yellow-300 font-semibold",children:[(0,d.jsx)("svg",{className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{d:"M18 8a1 1 0 011 1v2a5 5 0 01-5 5H8a5 5 0 01-5-5V9a1 1 0 011-1h14zm-1 7a7 7 0 01-14 0h14zm2-7h2a1 1 0 011 1v2a3 3 0 01-3 3v-6z"})}),"Buy Me a Coffee"]})]})]})}),p&&(0,d.jsx)(vS,{mitigationsPopupRef:v,mitigationsTab:D,setMitigationsTab:C,setMitigationsOpen:g,roleMembers:E,graphPermissionApps:I,initialData:bm,mitigationsMarkdown:m,groupRMAUCache:O,setGroupRMAUCache:L,msalConfigReady:i}),(0,d.jsx)("div",{className:"fixed inset-0 z-0",children:(0,d.jsx)(Cm,{data:k,roleMembers:E,onGraphPermissionNodeClick:V,graphPermissionApps:I})}),q.open&&(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 overflow-y-auto backdrop-blur-sm",children:(0,d.jsxs)("div",{ref:W,className:"bg-gray-900 rounded-lg shadow-lg max-w-2xl w-full p-6 relative my-8 border border-white",style:{maxHeight:"90vh",overflowY:"auto"},children:[(0,d.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl",onClick:()=>U((e=>l(l({},e),{},{open:!1}))),"aria-label":"Close",type:"button",children:"\xd7"}),(0,d.jsxs)("h2",{className:"text-xl font-bold mb-4 text-white",children:["Applications with\xa0",(0,d.jsx)("span",{className:"text-blue-300",children:(e=>{const t=k.nodes.find((e=>e.id===q.nodeId));return(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.label)||""})()}),"\xa0permission"]}),(0,d.jsxs)("div",{className:"mt-6",children:[(0,d.jsx)("div",{className:"font-bold text-lg mb-2 text-white",children:"Applications with this Graph API permission:"}),(0,d.jsxs)("ul",{className:"list-disc ml-6",children:[0===q.apps.length&&(0,d.jsx)("li",{className:"text-gray-400",children:"No applications found. Run the assessment first."}),q.apps.map((e=>(0,d.jsxs)("li",{className:"mb-1",children:[(0,d.jsx)("span",{className:"font-mono text-sm text-blue-200",children:e.displayName}),(0,d.jsxs)("span",{className:"ml-2 text-xs text-gray-400",children:["App ID: ",e.appId]})]},e.id)))]})]})]})}),K&&(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 overflow-y-auto backdrop-blur-sm",children:(0,d.jsxs)("div",{ref:Z,className:"bg-gray-900 rounded-lg shadow-lg max-w-xl w-full p-8 relative border border-white",style:{maxHeight:"90vh",overflowY:"auto"},children:[(0,d.jsx)("button",{className:"absolute top-0 right-2 text-gray-400 hover:text-gray-700 text-2xl",onClick:()=>G(!1),"aria-label":"Close",type:"button",children:"\xd7"}),(0,d.jsx)("h2",{className:"text-2xl font-bold mb-4 text-center text-white",children:"Host this website locally"}),(0,d.jsxs)("div",{className:"text-gray-300 mb-4 text-sm",children:[(0,d.jsx)("b",{children:(0,d.jsx)("u",{children:"Why?"})})," You might not be allowed to login with a privileged Microsoft account on a website.",(0,d.jsx)("br",{}),(0,d.jsx)("b",{children:(0,d.jsx)("u",{children:"How?"})})," Download all files and run a local server in this folder.",(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("b",{children:"Quick start (Python):"}),(0,d.jsx)("pre",{className:"bg-gray-800 text-white rounded p-2 mt-2 text-xs overflow-x-auto",children:"python -m http.server 8080"}),(0,d.jsx)("br",{}),"Then open ",(0,d.jsx)("span",{className:"text-blue-200",children:"http://localhost:8080/"})," in your browser.",(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("b",{children:(0,d.jsx)("u",{children:"Other options:"})})," You can use ",(0,d.jsx)("code",{children:"npx serve"}),", ",(0,d.jsx)("code",{children:"http-server"}),", or any static file server.",(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("b",{children:"Download:"})]}),(0,d.jsx)("button",{className:"w-full py-2 rounded bg-blue-600 text-white font-semibold hover:bg-blue-700 transition mb-2",onClick:()=>{const e="".concat("/attack-paths-preview","/entra-id-attack-paths.zip"),t=document.createElement("a");t.href=e,t.download="entra-id-attack-paths.zip",document.body.appendChild(t),t.click(),setTimeout((()=>{document.body.removeChild(t)}),100)},type:"button",children:"Download all files as ZIP"}),(0,d.jsx)("div",{className:"mt-4 text-xs text-gray-400 text-center",children:"All files are downloaded as a pre-built ZIP archive."})]})})]})}const bS=function(){const[e,t]=(0,o.useState)((()=>{try{const e=localStorage.getItem("entra-msal-config");if(e)return JSON.parse(e)}catch(e){}return null})()),[n,r]=(0,o.useState)(!1),[i,a]=(0,o.useState)(!1),[s,u]=(0,o.useState)(null),[l,c]=(0,o.useState)(null),h=(e,n)=>{const o={clientId:e,tenantId:n};t(o);try{localStorage.setItem("entra-msal-config",JSON.stringify(o))}catch(s){}r(!1),i&&setTimeout((()=>a(!1)),0)};return(0,o.useEffect)((()=>{let t=!0;if(c(null),e){const o={auth:{clientId:e.clientId,authority:"https://login.microsoftonline.com/".concat(e.tenantId),redirectUri:window.location.origin}};try{const e=new aS(o);e.initialize().then((()=>{t&&u(e)})).catch((e=>{t&&c(e)}))}catch(n){u(null),c(n)}}else u(null);return()=>{t=!1}}),[null===e||void 0===e?void 0:e.clientId,null===e||void 0===e?void 0:e.tenantId]),e&&s&&!l?(0,d.jsx)(gS,{instance:s,children:(0,d.jsxs)(dm,{children:[(0,d.jsx)(CS,{onShowConfigModal:()=>r(!0),pendingLogin:i,setPendingLogin:a,msalConfigReady:!0,setConfig:t}),n&&(0,d.jsx)(DS,{onSave:h,defaultClientId:(null===e||void 0===e?void 0:e.clientId)||"",defaultTenantId:(null===e||void 0===e?void 0:e.tenantId)||""})]})}):l?(0,d.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white",children:(0,d.jsxs)("div",{className:"bg-red-900 border border-red-400 rounded p-6 max-w-lg shadow-lg",children:[(0,d.jsx)("h2",{className:"text-xl font-bold mb-2 text-red-200",children:"Authentication Error"}),(0,d.jsxs)("div",{className:"mb-2 text-red-100",children:["There was a problem initializing Microsoft authentication.",(0,d.jsx)("br",{}),"Please check your Client ID and Tenant ID, or try again."]}),(0,d.jsx)("div",{className:"text-xs text-red-300 break-all mb-4",children:l.message}),(0,d.jsx)("button",{className:"px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700",onClick:()=>{t(null),c(null),localStorage.removeItem("entra-msal-config")},children:"Reset & Try Again"})]})}):(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(dm,{children:[(0,d.jsx)(CS,{onShowConfigModal:()=>r(!0),pendingLogin:i,setPendingLogin:a,msalConfigReady:!1,setConfig:t}),n&&(0,d.jsx)(DS,{onSave:h,defaultClientId:(null===e||void 0===e?void 0:e.clientId)||"",defaultTenantId:(null===e||void 0===e?void 0:e.tenantId)||""})]})})},wS=e=>{e&&e instanceof Function&&n.e(6453).then(n.bind(n,6453)).then((t=>{let{getCLS:n,getFID:o,getFCP:r,getLCP:i,getTTFB:a}=t;n(e),o(e),r(e),i(e),a(e)}))};r.createRoot(document.getElementById("root")).render((0,d.jsx)(o.StrictMode,{children:(0,d.jsx)(bS,{})})),wS()})()})();
//# sourceMappingURL=main.d9e09c66.js.map